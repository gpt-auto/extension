/*! For license information please see api.js.LICENSE.txt */
(function(){var __webpack_modules__={16104:function(i,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=navigator.userAgent.toLowerCase(),d=l.match(/(opera|ie|edge|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],p=d[1],h=parseInt(d[2],10),g="ie"===p&&h<8&&/trident/i.test(l),v=!!l.match(/android|webos|iphone|ipad|ipod|blackBerry|windows phone|opera mini|iemobile/i),y=!!l.match(/applewebkit/),S=/^((?!android|chrome).)*safari/i.test(navigator.userAgent),E=!(!window.chrome||!window.chrome.runtime||"[object Function]"!==Object.prototype.toString.call(window.chrome.runtime.getManifest)),R=!!navigator.platform&&["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,T=l.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;l.match(/trident.*rv[ :]*11\./)&&(p="ie",h=11),l.match(/edge/)&&(p="edge"),"version"===p&&(p=d[3]);var O={browser:p,version:h,compatibilityMode:g,isMobile:v,isChromeApp:E,isAppleWebKit:y,isValidDOCTYPE:function isValidDOCTYPE(i){return!(!i||!i.doctype||"html"!==i.doctype.name)},isIOS:R,isIPad:T,isMicrosoft:"ie"===p||"edge"===p,isWindows:!(!window.navigator||!window.navigator.platform)&&["Windows","Win32","Win64","WinCE"].indexOf(window.navigator.platform)>-1,isMac:navigator.platform.toUpperCase().indexOf("MAC")>=0&&!navigator.maxTouchPoints,isSafari:S};u.default=O},49459:function(i,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=u.URI_SAFE_ATTRIBUTES=u.DATA_URI_UNSAFE_ATTRIBUTES=u.DATA_URI_SAFE_TAGS=u.ATTR_WHITESPACE=void 0;var l=["audio","video","img","source","image","track"];u.DATA_URI_SAFE_TAGS=l;var d=["href","xlink:href","src","data"];u.DATA_URI_UNSAFE_ATTRIBUTES=d;var p=["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"];u.URI_SAFE_ATTRIBUTES=p;var h=Object.seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);u.ATTR_WHITESPACE=h;var g={mimeType:"text/html",imageText:" - image - ",imageWithAltText:" - image with description: ",blackListedTags:["script","style","textarea"],blackListedAttributes:["seeksegmenttime","fscommand","display"],blackListedRegex:/^on/i,blackListedContent:{javascript_keyword:["javascript:","javascript&colon;"]},ATTR_WHITESPACE:h,URI_SAFE_ATTRIBUTES:p,DATA_URI_SAFE_TAGS:l,DATA_URI_UNSAFE_ATTRIBUTES:d};u.default=g},40519:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(95023));function getHeadHTML(i){var u=i.parentElement.querySelector("head").childNodes,l="";return u.length&&d.default.each(u,(function(i){3===i.nodeType&&(l+=i.textContent),1===i.nodeType&&"META"!==i.tagName&&(l+=i.innerHTML)})),l}var p={removeElement:function removeElement(i){i.parentNode.removeChild(i)},getElementAttributes:function getElementAttributes(i){for(var u=i.attributes,l=u.length,d=[],p=0;p<l;p++)d.push(u[p].name);return d},processElements:function processElements(i,u){d.default.forEach(i,(function(i){return u(i),i}))},getParsableData:function getParsableData(i,u){var l=(new DOMParser).parseFromString(i,"text/html"),p=d.default.isString(u)?u:"*",h=l.querySelectorAll(p);return!(function hasParserErrors(i){return i.getElementsByTagName("parsererror").length>0}(l)||!function hasHtmlContent(i){return i.length>0}(h))&&{elements:h,dom:l}},mergeTempDomContent:function mergeTempDomContent(i){var u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u?getHeadHTML(i.head)+i.body.innerHTML:i.head.innerText+i.body.innerText}};u.default=p},42165:function(i,u,l){"use strict";function _typeof(i){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(i){return typeof i}:function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(i)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(95023)),p=function _interopRequireWildcard(i,u){if(!u&&i&&i.__esModule)return i;if(null===i||"object"!==_typeof(i)&&"function"!=typeof i)return{default:i};var l=_getRequireWildcardCache(u);if(l&&l.has(i))return l.get(i);var d={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in i)if("default"!==h&&Object.prototype.hasOwnProperty.call(i,h)){var g=p?Object.getOwnPropertyDescriptor(i,h):null;g&&(g.get||g.set)?Object.defineProperty(d,h,g):d[h]=i[h]}d.default=i,l&&l.set(i,d);return d}(l(49459)),h=_interopRequireDefault(l(40519));function _getRequireWildcardCache(i){if("function"!=typeof WeakMap)return null;var u=new WeakMap,l=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(i){return i?l:u})(i)}function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function getParsableData(i){return h.default.getParsableData(i,"*:not(body):not(head):not(html)")}function removeBlacklistedAttributes(i){var u=h.default.getElementAttributes(i);u.length&&d.default.each(u,(function(u){!function removeOnEventAttributes(i,u){p.default.blackListedRegex.test(u)&&i.removeAttribute(u)}(i,u),function removeBlacklistedAttribute(i,u){d.default.contains(p.default.blackListedAttributes,u.toLowerCase())&&i.removeAttribute(u)}(i,u)}))}function removeLinks(i){var u=getParsableData(i);return u?(h.default.processElements(u.elements,(function(i){"a"===i.tagName.toLowerCase()&&(i.insertAdjacentHTML("afterEnd",i.innerHTML),h.default.removeElement(i))})),h.default.mergeTempDomContent(u.dom)):i}function sanitizeAttributesWithBlackList(i,u){var l=getParsableData(i);return l?(h.default.processElements(l.elements,(function(i){u.forEach((function(u){i.removeAttribute(u)}))})),h.default.mergeTempDomContent(l.dom)):i}function sanitizeElement(i){!function removeBlackListedElement(i){d.default.contains(p.default.blackListedTags,i.nodeName.toLowerCase())&&(i.insertAdjacentHTML("afterEnd",i.innerText),h.default.removeElement(i))}(i),removeBlacklistedAttributes(i),function removeAttributesWithJavascriptPseudoProtocol(i){var u=p.default.blackListedContent.javascript_keyword;h.default.getElementAttributes(i).forEach((function(l){if(!d.default.contains(p.default.URI_SAFE_ATTRIBUTES,l)){var h=(i.getAttribute(l)||"").replace(/\s/g,"").toLowerCase();!h||-1!==h.indexOf("data:image/svg+xml,")||-1===h.indexOf(u[0])&&-1===h.indexOf(encodeURIComponent(u[0]).toLowerCase())||i.removeAttribute(l)}}))}(i),function sanitizeAttributesWithDataUri(i){d.default.contains(p.DATA_URI_SAFE_TAGS,i.nodeName.toLowerCase())||h.default.getElementAttributes(i).forEach((function(u){if(d.default.contains(p.DATA_URI_UNSAFE_ATTRIBUTES,u)){var l=/;base64/,h=i.getAttribute(u),g=h&&h.replace(/\s/g,"").toLowerCase(),v=g&&0===g.indexOf("data:"),y=g&&l.test(g);if(v){var S=g.slice(0,g.indexOf(",")),E=h.slice(h.indexOf(",")+1),R="";y&&(-1!==E.indexOf("#")&&(R=E.slice(E.indexOf("#")),E=E.slice(0,E.indexOf("#"))),E=atob(E));var T=sanitizeHTML(E).replace(/"/g,"'");y&&(S=S.replace(l,"")),i.setAttribute(u,"".concat(S,",").concat(T).concat(R))}}}))}(i)}function sanitizeElementsWithWhiteList(i,u){var l=getParsableData(i);return l?(h.default.processElements(l.elements,(function(i){var l=i.tagName.toLowerCase();d.default.contains(u,l)||(i.insertAdjacentHTML("afterEnd",i.innerText),h.default.removeElement(i))})),h.default.mergeTempDomContent(l.dom)):i}function sanitizePastedImagesAndMath(i,u){var l=getParsableData(i);return l?(h.default.processElements(l.elements,(function(i){var l=i.tagName.toLowerCase();(i.id.indexOf("MathJax")>-1||i.classList.contains("MathJax"))&&function sanitizePastedMath(i,u){u.shouldStrip||i.insertAdjacentText("afterEnd",u.warning),h.default.removeElement(i)}(i,u.externalMath),"img"===l&&function sanitizePastedImg(i,u){u.shouldStrip?h.default.removeElement(i):(i.setAttribute("src","#"),i.setAttribute("alt",u.warning))}(i,u.externalImages)})),h.default.mergeTempDomContent(l.dom)):i}function convertImagesToText(i){var u;u=i.hasAttribute("alt")&&""!==i.alt?"".concat(p.default.imageWithAltText).concat(i.alt," - "):p.default.imageText,i.insertAdjacentHTML("afterEnd",u)}function processHTML(i,u){return!!i&&(h.default.processElements(i.elements,u),h.default.mergeTempDomContent(i.dom))}function sanitizeHTML(i){var u=processHTML(getParsableData(i),sanitizeElement);return u||i}var g={sanitizeHTML:sanitizeHTML,sanitizeAttributesWithBlackList:sanitizeAttributesWithBlackList,sanitizeElementsWithWhiteList:sanitizeElementsWithWhiteList,sanitizePastedContent:function sanitizePastedContent(i,u){var l=u.attributesBlackList,h=void 0===l?[]:l,g=u.elementsWhiteList;return i=sanitizePastedImagesAndMath(i=removeLinks(i),u),d.default.isArray(g)&&(i=sanitizeElementsWithWhiteList(i,g)),i=sanitizeHTML(i=sanitizeAttributesWithBlackList(i,d.default.union(h,p.default.blackListedAttributes)))},removeLinks:removeLinks,stripHTML:function stripHTML(i,u){var l=u?d.default.unescape(i):i,p=h.default.getParsableData(l),g=p?h.default.mergeTempDomContent(p.dom,!1):i;return u?d.default.escape(g):g},createImageDescriptions:function createImageDescriptions(i){var u=processHTML(h.default.getParsableData(i,"img"),convertImagesToText);return u||i}};u.default=g},55689:function(){!function(i,u,l){"use strict";if(i.MutationObserver&&"undefined"!=typeof HTMLElement){var d,p=0,h=(d=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector,{matchesSelector:function(i,u){return i instanceof HTMLElement&&d.call(i,u)},addMethod:function(i,u,l){var d=i[u];i[u]=function(){return l.length==arguments.length?l.apply(this,arguments):"function"==typeof d?d.apply(this,arguments):void 0}},callCallbacks:function(i,u){u&&u.options.onceOnly&&1==u.firedElems.length&&(i=[i[0]]);for(var l,d=0;l=i[d];d++)l&&l.callback&&l.callback.call(l.elem,l.elem);u&&u.options.onceOnly&&1==u.firedElems.length&&u.me.unbindEventWithSelectorAndCallback.call(u.target,u.selector,u.callback)},checkChildNodesRecursively:function(i,u,l,d){for(var p,g=0;p=i[g];g++)l(p,u,d)&&d.push({callback:u.callback,elem:p}),p.childNodes.length>0&&h.checkChildNodesRecursively(p.childNodes,u,l,d)},mergeArrays:function(i,u){var l,d={};for(l in i)i.hasOwnProperty(l)&&(d[l]=i[l]);for(l in u)u.hasOwnProperty(l)&&(d[l]=u[l]);return d},toElementsArray:function(u){return void 0===u||"number"==typeof u.length&&u!==i||(u=[u]),u}}),g=function(){var EventsBucket=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return EventsBucket.prototype.addEvent=function(i,u,l,d){var p={target:i,selector:u,options:l,callback:d,firedElems:[]};return this._beforeAdding&&this._beforeAdding(p),this._eventsBucket.push(p),p},EventsBucket.prototype.removeEvent=function(i){for(var u,l=this._eventsBucket.length-1;u=this._eventsBucket[l];l--)if(i(u)){this._beforeRemoving&&this._beforeRemoving(u);var d=this._eventsBucket.splice(l,1);d&&d.length&&(d[0].callback=null)}},EventsBucket.prototype.beforeAdding=function(i){this._beforeAdding=i},EventsBucket.prototype.beforeRemoving=function(i){this._beforeRemoving=i},EventsBucket}(),MutationEvents=function(u,d){var p=new g,v=this,y={fireOnAttributesModification:!1};return p.beforeAdding((function(l){var p,h=l.target;h!==i.document&&h!==i||(h=document.getElementsByTagName("html")[0]),p=new MutationObserver((function(i){d.call(this,i,l)}));var g=u(l.options);p.observe(h,g),l.observer=p,l.me=v})),p.beforeRemoving((function(i){i.observer.disconnect()})),this.bindEvent=function(i,u,l){u=h.mergeArrays(y,u);for(var d=h.toElementsArray(this),g=0;g<d.length;g++)p.addEvent(d[g],i,u,l)},this.unbindEvent=function(){var i=h.toElementsArray(this);p.removeEvent((function(u){for(var d=0;d<i.length;d++)if(this===l||u.target===i[d])return!0;return!1}))},this.unbindEventWithSelectorOrCallback=function(i){var u,d=h.toElementsArray(this),g=i;u="function"==typeof i?function(i){for(var u=0;u<d.length;u++)if((this===l||i.target===d[u])&&i.callback===g)return!0;return!1}:function(u){for(var p=0;p<d.length;p++)if((this===l||u.target===d[p])&&u.selector===i)return!0;return!1},p.removeEvent(u)},this.unbindEventWithSelectorAndCallback=function(i,u){var d=h.toElementsArray(this);p.removeEvent((function(p){for(var h=0;h<d.length;h++)if((this===l||p.target===d[h])&&p.selector===i&&p.callback===u)return!0;return!1}))},this},v=new function(){var i={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};function nodeMatchFunc(i,u,d){return!(!h.matchesSelector(i,u.selector)||(i._id===l&&(i._id=p++),-1!=u.firedElems.indexOf(i._id)))&&(u.firedElems.push(i._id),!0)}var u=(v=new MutationEvents((function getArriveObserverConfig(i){var u={attributes:!1,childList:!0,subtree:!0};return i.fireOnAttributesModification&&(u.attributes=!0),u}),(function onArriveMutation(i,u){i.forEach((function(i){var l=i.addedNodes,d=i.target,p=[];null!==l&&l.length>0?h.checkChildNodesRecursively(l,u,nodeMatchFunc,p):"attributes"===i.type&&nodeMatchFunc(d,u,p)&&p.push({callback:u.callback,elem:d}),h.callCallbacks(p,u)}))}))).bindEvent;return v.bindEvent=function(l,d,p){void 0===p?(p=d,d=i):d=h.mergeArrays(i,d);var g=h.toElementsArray(this);if(d.existing){for(var v=[],y=0;y<g.length;y++)for(var S=g[y].querySelectorAll(l),E=0;E<S.length;E++)v.push({callback:p,elem:S[E]});if(d.onceOnly&&v.length)return p.call(v[0].elem,v[0].elem);setTimeout(h.callCallbacks,1,v)}u.call(this,l,d,p)},v},y=new function(){var i={};function nodeMatchFunc(i,u){return h.matchesSelector(i,u.selector)}var u=(y=new MutationEvents((function getLeaveObserverConfig(){return{childList:!0,subtree:!0}}),(function onLeaveMutation(i,u){i.forEach((function(i){var l=i.removedNodes,d=[];null!==l&&l.length>0&&h.checkChildNodesRecursively(l,u,nodeMatchFunc,d),h.callCallbacks(d,u)}))}))).bindEvent;return y.bindEvent=function(l,d,p){void 0===p?(p=d,d=i):d=h.mergeArrays(i,d),u.call(this,l,d,p)},y};u&&exposeApi(u.fn),exposeApi(HTMLElement.prototype),exposeApi(NodeList.prototype),exposeApi(HTMLCollection.prototype),exposeApi(HTMLDocument.prototype),exposeApi(Window.prototype);var S={};return exposeUnbindApi(v,S,"unbindAllArrive"),exposeUnbindApi(y,S,"unbindAllLeave"),S}function exposeUnbindApi(i,u,l){h.addMethod(u,l,i.unbindEvent),h.addMethod(u,l,i.unbindEventWithSelectorOrCallback),h.addMethod(u,l,i.unbindEventWithSelectorAndCallback)}function exposeApi(i){i.arrive=v.bindEvent,exposeUnbindApi(v,i,"unbindArrive"),i.leave=y.bindEvent,exposeUnbindApi(y,i,"unbindLeave")}}(window,"undefined"==typeof jQuery?null:jQuery,void 0)},94071:function(i,u,l){var d;i=l.nmd(i),function(){var l="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},p=l._,h=Array.prototype,g=Object.prototype,v="undefined"!=typeof Symbol?Symbol.prototype:null,y=h.push,S=h.slice,E=g.toString,R=g.hasOwnProperty,T=Array.isArray,O=Object.keys,M=Object.create,Ctor=function(){},_=function(i){return i instanceof _?i:this instanceof _?void(this._wrapped=i):new _(i)};u.nodeType?l._=_:(!i.nodeType&&i.exports&&(u=i.exports=_),u._=_),_.VERSION="1.9.2";var I,optimizeCb=function(i,u,l){if(void 0===u)return i;switch(null==l?3:l){case 1:return function(l){return i.call(u,l)};case 3:return function(l,d,p){return i.call(u,l,d,p)};case 4:return function(l,d,p,h){return i.call(u,l,d,p,h)}}return function(){return i.apply(u,arguments)}},cb=function(i,u,l){return _.iteratee!==I?_.iteratee(i,u):null==i?_.identity:_.isFunction(i)?optimizeCb(i,u,l):_.isObject(i)&&!_.isArray(i)?_.matcher(i):_.property(i)};_.iteratee=I=function(i,u){return cb(i,u,1/0)};var restArguments=function(i,u){return u=null==u?i.length-1:+u,function(){for(var l=Math.max(arguments.length-u,0),d=Array(l),p=0;p<l;p++)d[p]=arguments[p+u];switch(u){case 0:return i.call(this,d);case 1:return i.call(this,arguments[0],d);case 2:return i.call(this,arguments[0],arguments[1],d)}var h=Array(u+1);for(p=0;p<u;p++)h[p]=arguments[p];return h[u]=d,i.apply(this,h)}},baseCreate=function(i){if(!_.isObject(i))return{};if(M)return M(i);Ctor.prototype=i;var u=new Ctor;return Ctor.prototype=null,u},shallowProperty=function(i){return function(u){return null==u?void 0:u[i]}},has=function(i,u){return null!=i&&R.call(i,u)},deepGet=function(i,u){for(var l=u.length,d=0;d<l;d++){if(null==i)return;i=i[u[d]]}return l?i:void 0},P=Math.pow(2,53)-1,D=shallowProperty("length"),isArrayLike=function(i){var u=D(i);return"number"==typeof u&&u>=0&&u<=P};_.each=_.forEach=function(i,u,l){var d,p;if(u=optimizeCb(u,l),isArrayLike(i))for(d=0,p=i.length;d<p;d++)u(i[d],d,i);else{var h=_.keys(i);for(d=0,p=h.length;d<p;d++)u(i[h[d]],h[d],i)}return i},_.map=_.collect=function(i,u,l){u=cb(u,l);for(var d=!isArrayLike(i)&&_.keys(i),p=(d||i).length,h=Array(p),g=0;g<p;g++){var v=d?d[g]:g;h[g]=u(i[v],v,i)}return h};var createReduce=function(i){var reducer=function(u,l,d,p){var h=!isArrayLike(u)&&_.keys(u),g=(h||u).length,v=i>0?0:g-1;for(p||(d=u[h?h[v]:v],v+=i);v>=0&&v<g;v+=i){var y=h?h[v]:v;d=l(d,u[y],y,u)}return d};return function(i,u,l,d){var p=arguments.length>=3;return reducer(i,optimizeCb(u,d,4),l,p)}};_.reduce=_.foldl=_.inject=createReduce(1),_.reduceRight=_.foldr=createReduce(-1),_.find=_.detect=function(i,u,l){var d=(isArrayLike(i)?_.findIndex:_.findKey)(i,u,l);if(void 0!==d&&-1!==d)return i[d]},_.filter=_.select=function(i,u,l){var d=[];return u=cb(u,l),_.each(i,(function(i,l,p){u(i,l,p)&&d.push(i)})),d},_.reject=function(i,u,l){return _.filter(i,_.negate(cb(u)),l)},_.every=_.all=function(i,u,l){u=cb(u,l);for(var d=!isArrayLike(i)&&_.keys(i),p=(d||i).length,h=0;h<p;h++){var g=d?d[h]:h;if(!u(i[g],g,i))return!1}return!0},_.some=_.any=function(i,u,l){u=cb(u,l);for(var d=!isArrayLike(i)&&_.keys(i),p=(d||i).length,h=0;h<p;h++){var g=d?d[h]:h;if(u(i[g],g,i))return!0}return!1},_.contains=_.includes=_.include=function(i,u,l,d){return isArrayLike(i)||(i=_.values(i)),("number"!=typeof l||d)&&(l=0),_.indexOf(i,u,l)>=0},_.invoke=restArguments((function(i,u,l){var d,p;return _.isFunction(u)?p=u:_.isArray(u)&&(d=u.slice(0,-1),u=u[u.length-1]),_.map(i,(function(i){var h=p;if(!h){if(d&&d.length&&(i=deepGet(i,d)),null==i)return;h=i[u]}return null==h?h:h.apply(i,l)}))})),_.pluck=function(i,u){return _.map(i,_.property(u))},_.where=function(i,u){return _.filter(i,_.matcher(u))},_.findWhere=function(i,u){return _.find(i,_.matcher(u))},_.max=function(i,u,l){var d,p,h=-1/0,g=-1/0;if(null==u||"number"==typeof u&&"object"!=typeof i[0]&&null!=i)for(var v=0,y=(i=isArrayLike(i)?i:_.values(i)).length;v<y;v++)null!=(d=i[v])&&d>h&&(h=d);else u=cb(u,l),_.each(i,(function(i,l,d){((p=u(i,l,d))>g||p===-1/0&&h===-1/0)&&(h=i,g=p)}));return h},_.min=function(i,u,l){var d,p,h=1/0,g=1/0;if(null==u||"number"==typeof u&&"object"!=typeof i[0]&&null!=i)for(var v=0,y=(i=isArrayLike(i)?i:_.values(i)).length;v<y;v++)null!=(d=i[v])&&d<h&&(h=d);else u=cb(u,l),_.each(i,(function(i,l,d){((p=u(i,l,d))<g||p===1/0&&h===1/0)&&(h=i,g=p)}));return h},_.shuffle=function(i){return _.sample(i,1/0)},_.sample=function(i,u,l){if(null==u||l)return isArrayLike(i)||(i=_.values(i)),i[_.random(i.length-1)];var d=isArrayLike(i)?_.clone(i):_.values(i),p=D(d);u=Math.max(Math.min(u,p),0);for(var h=p-1,g=0;g<u;g++){var v=_.random(g,h),y=d[g];d[g]=d[v],d[v]=y}return d.slice(0,u)},_.sortBy=function(i,u,l){var d=0;return u=cb(u,l),_.pluck(_.map(i,(function(i,l,p){return{value:i,index:d++,criteria:u(i,l,p)}})).sort((function(i,u){var l=i.criteria,d=u.criteria;if(l!==d){if(l>d||void 0===l)return 1;if(l<d||void 0===d)return-1}return i.index-u.index})),"value")};var group=function(i,u){return function(l,d,p){var h=u?[[],[]]:{};return d=cb(d,p),_.each(l,(function(u,p){var g=d(u,p,l);i(h,u,g)})),h}};_.groupBy=group((function(i,u,l){has(i,l)?i[l].push(u):i[l]=[u]})),_.indexBy=group((function(i,u,l){i[l]=u})),_.countBy=group((function(i,u,l){has(i,l)?i[l]++:i[l]=1}));var N=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;_.toArray=function(i){return i?_.isArray(i)?S.call(i):_.isString(i)?i.match(N):isArrayLike(i)?_.map(i,_.identity):_.values(i):[]},_.size=function(i){return null==i?0:isArrayLike(i)?i.length:_.keys(i).length},_.partition=group((function(i,u,l){i[l?0:1].push(u)}),!0),_.first=_.head=_.take=function(i,u,l){return null==i||i.length<1?null==u?void 0:[]:null==u||l?i[0]:_.initial(i,i.length-u)},_.initial=function(i,u,l){return S.call(i,0,Math.max(0,i.length-(null==u||l?1:u)))},_.last=function(i,u,l){return null==i||i.length<1?null==u?void 0:[]:null==u||l?i[i.length-1]:_.rest(i,Math.max(0,i.length-u))},_.rest=_.tail=_.drop=function(i,u,l){return S.call(i,null==u||l?1:u)},_.compact=function(i){return _.filter(i,Boolean)};var flatten=function(i,u,l,d){for(var p=(d=d||[]).length,h=0,g=D(i);h<g;h++){var v=i[h];if(isArrayLike(v)&&(_.isArray(v)||_.isArguments(v)))if(u)for(var y=0,S=v.length;y<S;)d[p++]=v[y++];else flatten(v,u,l,d),p=d.length;else l||(d[p++]=v)}return d};_.flatten=function(i,u){return flatten(i,u,!1)},_.without=restArguments((function(i,u){return _.difference(i,u)})),_.uniq=_.unique=function(i,u,l,d){_.isBoolean(u)||(d=l,l=u,u=!1),null!=l&&(l=cb(l,d));for(var p=[],h=[],g=0,v=D(i);g<v;g++){var y=i[g],S=l?l(y,g,i):y;u&&!l?(g&&h===S||p.push(y),h=S):l?_.contains(h,S)||(h.push(S),p.push(y)):_.contains(p,y)||p.push(y)}return p},_.union=restArguments((function(i){return _.uniq(flatten(i,!0,!0))})),_.intersection=function(i){for(var u=[],l=arguments.length,d=0,p=D(i);d<p;d++){var h=i[d];if(!_.contains(u,h)){var g;for(g=1;g<l&&_.contains(arguments[g],h);g++);g===l&&u.push(h)}}return u},_.difference=restArguments((function(i,u){return u=flatten(u,!0,!0),_.filter(i,(function(i){return!_.contains(u,i)}))})),_.unzip=function(i){for(var u=i&&_.max(i,D).length||0,l=Array(u),d=0;d<u;d++)l[d]=_.pluck(i,d);return l},_.zip=restArguments(_.unzip),_.object=function(i,u){for(var l={},d=0,p=D(i);d<p;d++)u?l[i[d]]=u[d]:l[i[d][0]]=i[d][1];return l};var createPredicateIndexFinder=function(i){return function(u,l,d){l=cb(l,d);for(var p=D(u),h=i>0?0:p-1;h>=0&&h<p;h+=i)if(l(u[h],h,u))return h;return-1}};_.findIndex=createPredicateIndexFinder(1),_.findLastIndex=createPredicateIndexFinder(-1),_.sortedIndex=function(i,u,l,d){for(var p=(l=cb(l,d,1))(u),h=0,g=D(i);h<g;){var v=Math.floor((h+g)/2);l(i[v])<p?h=v+1:g=v}return h};var createIndexFinder=function(i,u,l){return function(d,p,h){var g=0,v=D(d);if("number"==typeof h)i>0?g=h>=0?h:Math.max(h+v,g):v=h>=0?Math.min(h+1,v):h+v+1;else if(l&&h&&v)return d[h=l(d,p)]===p?h:-1;if(p!=p)return(h=u(S.call(d,g,v),_.isNaN))>=0?h+g:-1;for(h=i>0?g:v-1;h>=0&&h<v;h+=i)if(d[h]===p)return h;return-1}};_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex),_.lastIndexOf=createIndexFinder(-1,_.findLastIndex),_.range=function(i,u,l){null==u&&(u=i||0,i=0),l||(l=u<i?-1:1);for(var d=Math.max(Math.ceil((u-i)/l),0),p=Array(d),h=0;h<d;h++,i+=l)p[h]=i;return p},_.chunk=function(i,u){if(null==u||u<1)return[];for(var l=[],d=0,p=i.length;d<p;)l.push(S.call(i,d,d+=u));return l};var executeBound=function(i,u,l,d,p){if(!(d instanceof u))return i.apply(l,p);var h=baseCreate(i.prototype),g=i.apply(h,p);return _.isObject(g)?g:h};_.bind=restArguments((function(i,u,l){if(!_.isFunction(i))throw new TypeError("Bind must be called on a function");var d=restArguments((function(p){return executeBound(i,d,u,this,l.concat(p))}));return d})),_.partial=restArguments((function(i,u){var l=_.partial.placeholder,bound=function(){for(var d=0,p=u.length,h=Array(p),g=0;g<p;g++)h[g]=u[g]===l?arguments[d++]:u[g];for(;d<arguments.length;)h.push(arguments[d++]);return executeBound(i,bound,this,this,h)};return bound})),_.partial.placeholder=_,_.bindAll=restArguments((function(i,u){var l=(u=flatten(u,!1,!1)).length;if(l<1)throw new Error("bindAll must be passed function names");for(;l--;){var d=u[l];i[d]=_.bind(i[d],i)}})),_.memoize=function(i,u){var memoize=function(l){var d=memoize.cache,p=""+(u?u.apply(this,arguments):l);return has(d,p)||(d[p]=i.apply(this,arguments)),d[p]};return memoize.cache={},memoize},_.delay=restArguments((function(i,u,l){return setTimeout((function(){return i.apply(null,l)}),u)})),_.defer=_.partial(_.delay,_,1),_.throttle=function(i,u,l){var d,p,h,g,v=0;l||(l={});var later=function(){v=!1===l.leading?0:_.now(),d=null,g=i.apply(p,h),d||(p=h=null)},throttled=function(){var y=_.now();v||!1!==l.leading||(v=y);var S=u-(y-v);return p=this,h=arguments,S<=0||S>u?(d&&(clearTimeout(d),d=null),v=y,g=i.apply(p,h),d||(p=h=null)):d||!1===l.trailing||(d=setTimeout(later,S)),g};return throttled.cancel=function(){clearTimeout(d),v=0,d=p=h=null},throttled},_.debounce=function(i,u,l){var d,p,later=function(u,l){d=null,l&&(p=i.apply(u,l))},h=restArguments((function(h){if(d&&clearTimeout(d),l){var g=!d;d=setTimeout(later,u),g&&(p=i.apply(this,h))}else d=_.delay(later,u,this,h);return p}));return h.cancel=function(){clearTimeout(d),d=null},h},_.wrap=function(i,u){return _.partial(u,i)},_.negate=function(i){return function(){return!i.apply(this,arguments)}},_.compose=function(){var i=arguments,u=i.length-1;return function(){for(var l=u,d=i[u].apply(this,arguments);l--;)d=i[l].call(this,d);return d}},_.after=function(i,u){return function(){if(--i<1)return u.apply(this,arguments)}},_.before=function(i,u){var l;return function(){return--i>0&&(l=u.apply(this,arguments)),i<=1&&(u=null),l}},_.once=_.partial(_.before,2),_.restArguments=restArguments;var q=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],collectNonEnumProps=function(i,u){var l=L.length,d=i.constructor,p=_.isFunction(d)&&d.prototype||g,h="constructor";for(has(i,h)&&!_.contains(u,h)&&u.push(h);l--;)(h=L[l])in i&&i[h]!==p[h]&&!_.contains(u,h)&&u.push(h)};_.keys=function(i){if(!_.isObject(i))return[];if(O)return O(i);var u=[];for(var l in i)has(i,l)&&u.push(l);return q&&collectNonEnumProps(i,u),u},_.allKeys=function(i){if(!_.isObject(i))return[];var u=[];for(var l in i)u.push(l);return q&&collectNonEnumProps(i,u),u},_.values=function(i){for(var u=_.keys(i),l=u.length,d=Array(l),p=0;p<l;p++)d[p]=i[u[p]];return d},_.mapObject=function(i,u,l){u=cb(u,l);for(var d=_.keys(i),p=d.length,h={},g=0;g<p;g++){var v=d[g];h[v]=u(i[v],v,i)}return h},_.pairs=function(i){for(var u=_.keys(i),l=u.length,d=Array(l),p=0;p<l;p++)d[p]=[u[p],i[u[p]]];return d},_.invert=function(i){for(var u={},l=_.keys(i),d=0,p=l.length;d<p;d++)u[i[l[d]]]=l[d];return u},_.functions=_.methods=function(i){var u=[];for(var l in i)_.isFunction(i[l])&&u.push(l);return u.sort()};var createAssigner=function(i,u){return function(l){var d=arguments.length;if(u&&(l=Object(l)),d<2||null==l)return l;for(var p=1;p<d;p++)for(var h=arguments[p],g=i(h),v=g.length,y=0;y<v;y++){var S=g[y];u&&void 0!==l[S]||(l[S]=h[S])}return l}};_.extend=createAssigner(_.allKeys),_.extendOwn=_.assign=createAssigner(_.keys),_.findKey=function(i,u,l){u=cb(u,l);for(var d,p=_.keys(i),h=0,g=p.length;h<g;h++)if(u(i[d=p[h]],d,i))return d};var V,U,keyInObj=function(i,u,l){return u in l};_.pick=restArguments((function(i,u){var l={},d=u[0];if(null==i)return l;_.isFunction(d)?(u.length>1&&(d=optimizeCb(d,u[1])),u=_.allKeys(i)):(d=keyInObj,u=flatten(u,!1,!1),i=Object(i));for(var p=0,h=u.length;p<h;p++){var g=u[p],v=i[g];d(v,g,i)&&(l[g]=v)}return l})),_.omit=restArguments((function(i,u){var l,d=u[0];return _.isFunction(d)?(d=_.negate(d),u.length>1&&(l=u[1])):(u=_.map(flatten(u,!1,!1),String),d=function(i,l){return!_.contains(u,l)}),_.pick(i,d,l)})),_.defaults=createAssigner(_.allKeys,!0),_.create=function(i,u){var l=baseCreate(i);return u&&_.extendOwn(l,u),l},_.clone=function(i){return _.isObject(i)?_.isArray(i)?i.slice():_.extend({},i):i},_.tap=function(i,u){return u(i),i},_.isMatch=function(i,u){var l=_.keys(u),d=l.length;if(null==i)return!d;for(var p=Object(i),h=0;h<d;h++){var g=l[h];if(u[g]!==p[g]||!(g in p))return!1}return!0},V=function(i,u,l,d){if(i===u)return 0!==i||1/i==1/u;if(null==i||null==u)return!1;if(i!=i)return u!=u;var p=typeof i;return("function"===p||"object"===p||"object"==typeof u)&&U(i,u,l,d)},U=function(i,u,l,d){i instanceof _&&(i=i._wrapped),u instanceof _&&(u=u._wrapped);var p=E.call(i);if(p!==E.call(u))return!1;switch(p){case"[object RegExp]":case"[object String]":return""+i==""+u;case"[object Number]":return+i!=+i?+u!=+u:0==+i?1/+i==1/u:+i==+u;case"[object Date]":case"[object Boolean]":return+i==+u;case"[object Symbol]":return v.valueOf.call(i)===v.valueOf.call(u)}var h="[object Array]"===p;if(!h){if("object"!=typeof i||"object"!=typeof u)return!1;var g=i.constructor,y=u.constructor;if(g!==y&&!(_.isFunction(g)&&g instanceof g&&_.isFunction(y)&&y instanceof y)&&"constructor"in i&&"constructor"in u)return!1}d=d||[];for(var S=(l=l||[]).length;S--;)if(l[S]===i)return d[S]===u;if(l.push(i),d.push(u),h){if((S=i.length)!==u.length)return!1;for(;S--;)if(!V(i[S],u[S],l,d))return!1}else{var R,T=_.keys(i);if(S=T.length,_.keys(u).length!==S)return!1;for(;S--;)if(R=T[S],!has(u,R)||!V(i[R],u[R],l,d))return!1}return l.pop(),d.pop(),!0},_.isEqual=function(i,u){return V(i,u)},_.isEmpty=function(i){return null==i||(isArrayLike(i)&&(_.isArray(i)||_.isString(i)||_.isArguments(i))?0===i.length:0===_.keys(i).length)},_.isElement=function(i){return!(!i||1!==i.nodeType)},_.isArray=T||function(i){return"[object Array]"===E.call(i)},_.isObject=function(i){var u=typeof i;return"function"===u||"object"===u&&!!i},_.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(i){_["is"+i]=function(u){return E.call(u)==="[object "+i+"]"}})),_.isArguments(arguments)||(_.isArguments=function(i){return has(i,"callee")});var B=l.document&&l.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof B&&(_.isFunction=function(i){return"function"==typeof i||!1}),_.isFinite=function(i){return!_.isSymbol(i)&&isFinite(i)&&!isNaN(parseFloat(i))},_.isNaN=function(i){return _.isNumber(i)&&isNaN(i)},_.isBoolean=function(i){return!0===i||!1===i||"[object Boolean]"===E.call(i)},_.isNull=function(i){return null===i},_.isUndefined=function(i){return void 0===i},_.has=function(i,u){if(!_.isArray(u))return has(i,u);for(var l=u.length,d=0;d<l;d++){var p=u[d];if(null==i||!R.call(i,p))return!1;i=i[p]}return!!l},_.noConflict=function(){return l._=p,this},_.identity=function(i){return i},_.constant=function(i){return function(){return i}},_.noop=function(){},_.property=function(i){return _.isArray(i)?function(u){return deepGet(u,i)}:shallowProperty(i)},_.propertyOf=function(i){return null==i?function(){}:function(u){return _.isArray(u)?deepGet(i,u):i[u]}},_.matcher=_.matches=function(i){return i=_.extendOwn({},i),function(u){return _.isMatch(u,i)}},_.times=function(i,u,l){var d=Array(Math.max(0,i));u=optimizeCb(u,l,1);for(var p=0;p<i;p++)d[p]=u(p);return d},_.random=function(i,u){return null==u&&(u=i,i=0),i+Math.floor(Math.random()*(u-i+1))},_.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=_.invert(H),createEscaper=function(i){var escaper=function(u){return i[u]},u="(?:"+_.keys(i).join("|")+")",l=RegExp(u),d=RegExp(u,"g");return function(i){return i=null==i?"":""+i,l.test(i)?i.replace(d,escaper):i}};_.escape=createEscaper(H),_.unescape=createEscaper(z),_.result=function(i,u,l){_.isArray(u)||(u=[u]);var d=u.length;if(!d)return _.isFunction(l)?l.call(i):l;for(var p=0;p<d;p++){var h=null==i?void 0:i[u[p]];void 0===h&&(h=l,p=d),i=_.isFunction(h)?h.call(i):h}return i};var Q=0;_.uniqueId=function(i){var u=++Q+"";return i?i+u:u},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},X=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(i){return"\\"+Y[i]};_.template=function(i,u,l){!u&&l&&(u=l),u=_.defaults({},u,_.templateSettings);var d,p=RegExp([(u.escape||G).source,(u.interpolate||G).source,(u.evaluate||G).source].join("|")+"|$","g"),h=0,g="__p+='";i.replace(p,(function(u,l,d,p,v){return g+=i.slice(h,v).replace(X,escapeChar),h=v+u.length,l?g+="'+\n((__t=("+l+"))==null?'':_.escape(__t))+\n'":d?g+="'+\n((__t=("+d+"))==null?'':__t)+\n'":p&&(g+="';\n"+p+"\n__p+='"),u})),g+="';\n",u.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(u.variable||"obj","_",g)}catch(i){throw i.source=g,i}var template=function(i){return d.call(this,i,_)},v=u.variable||"obj";return template.source="function("+v+"){\n"+g+"}",template},_.chain=function(i){var u=_(i);return u._chain=!0,u};var chainResult=function(i,u){return i._chain?_(u).chain():u};_.mixin=function(i){return _.each(_.functions(i),(function(u){var l=_[u]=i[u];_.prototype[u]=function(){var i=[this._wrapped];return y.apply(i,arguments),chainResult(this,l.apply(_,i))}})),_},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(i){var u=h[i];_.prototype[i]=function(){var l=this._wrapped;return u.apply(l,arguments),"shift"!==i&&"splice"!==i||0!==l.length||delete l[0],chainResult(this,l)}})),_.each(["concat","join","slice"],(function(i){var u=h[i];_.prototype[i]=function(){return chainResult(this,u.apply(this._wrapped,arguments))}})),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return String(this._wrapped)},void 0===(d=function(){return _}.apply(u,[]))||(i.exports=d)}()},99870:function(i,u){var l;!function(){"use strict";var d={}.hasOwnProperty;function classNames(){for(var i=[],u=0;u<arguments.length;u++){var l=arguments[u];if(l){var p=typeof l;if("string"===p||"number"===p)i.push(l);else if(Array.isArray(l)&&l.length){var h=classNames.apply(null,l);h&&i.push(h)}else if("object"===p)for(var g in l)d.call(l,g)&&l[g]&&i.push(g)}}return i.join(" ")}i.exports?(classNames.default=classNames,i.exports=classNames):void 0===(l=function(){return classNames}.apply(u,[]))||(i.exports=l)}()},70640:function(i,u,l){!function(i){var d,p="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,h=l(94071);try{d=l(34651)}catch(i){}i(p,u,h,d)}((function(i,u,l,d){var p=i.Backbone,h=Array.prototype.slice;u.VERSION="1.4.0",u.$=d,u.noConflict=function(){return i.Backbone=p,this},u.emulateHTTP=!1,u.emulateJSON=!1;var g,v=u.Events={},y=/\s+/,eventsApi=function(i,u,d,p,h){var g,v=0;if(d&&"object"==typeof d){void 0!==p&&"context"in h&&void 0===h.context&&(h.context=p);for(g=l.keys(d);v<g.length;v++)u=eventsApi(i,u,g[v],d[g[v]],h)}else if(d&&y.test(d))for(g=d.split(y);v<g.length;v++)u=i(u,g[v],p,h);else u=i(u,d,p,h);return u};v.on=function(i,u,l){(this._events=eventsApi(onApi,this._events||{},i,u,{context:l,ctx:this,listening:g}),g)&&((this._listeners||(this._listeners={}))[g.id]=g,g.interop=!1);return this},v.listenTo=function(i,u,d){if(!i)return this;var p=i._listenId||(i._listenId=l.uniqueId("l")),h=this._listeningTo||(this._listeningTo={}),v=g=h[p];v||(this._listenId||(this._listenId=l.uniqueId("l")),v=g=h[p]=new Listening(this,i));var y=tryCatchOn(i,u,d,this);if(g=void 0,y)throw y;return v.interop&&v.on(u,d),this};var onApi=function(i,u,l,d){if(l){var p=i[u]||(i[u]=[]),h=d.context,g=d.ctx,v=d.listening;v&&v.count++,p.push({callback:l,context:h,ctx:h||g,listening:v})}return i},tryCatchOn=function(i,u,l,d){try{i.on(u,l,d)}catch(i){return i}};v.off=function(i,u,l){return this._events?(this._events=eventsApi(offApi,this._events,i,u,{context:l,listeners:this._listeners}),this):this},v.stopListening=function(i,u,d){var p=this._listeningTo;if(!p)return this;for(var h=i?[i._listenId]:l.keys(p),g=0;g<h.length;g++){var v=p[h[g]];if(!v)break;v.obj.off(u,d,this),v.interop&&v.off(u,d)}return l.isEmpty(p)&&(this._listeningTo=void 0),this};var offApi=function(i,u,d,p){if(i){var h,g=p.context,v=p.listeners,y=0;if(u||g||d){for(h=u?[u]:l.keys(i);y<h.length;y++){var S=i[u=h[y]];if(!S)break;for(var E=[],R=0;R<S.length;R++){var T=S[R];if(d&&d!==T.callback&&d!==T.callback._callback||g&&g!==T.context)E.push(T);else{var O=T.listening;O&&O.off(u,d)}}E.length?i[u]=E:delete i[u]}return i}for(h=l.keys(v);y<h.length;y++)v[h[y]].cleanup()}};v.once=function(i,u,l){var d=eventsApi(onceMap,{},i,u,this.off.bind(this));return"string"==typeof i&&null==l&&(u=void 0),this.on(d,u,l)},v.listenToOnce=function(i,u,l){var d=eventsApi(onceMap,{},u,l,this.stopListening.bind(this,i));return this.listenTo(i,d)};var onceMap=function(i,u,d,p){if(d){var h=i[u]=l.once((function(){p(u,h),d.apply(this,arguments)}));h._callback=d}return i};v.trigger=function(i){if(!this._events)return this;for(var u=Math.max(0,arguments.length-1),l=Array(u),d=0;d<u;d++)l[d]=arguments[d+1];return eventsApi(triggerApi,this._events,i,void 0,l),this};var triggerApi=function(i,u,l,d){if(i){var p=i[u],h=i.all;p&&h&&(h=h.slice()),p&&triggerEvents(p,d),h&&triggerEvents(h,[u].concat(d))}return i},triggerEvents=function(i,u){var l,d=-1,p=i.length,h=u[0],g=u[1],v=u[2];switch(u.length){case 0:for(;++d<p;)(l=i[d]).callback.call(l.ctx);return;case 1:for(;++d<p;)(l=i[d]).callback.call(l.ctx,h);return;case 2:for(;++d<p;)(l=i[d]).callback.call(l.ctx,h,g);return;case 3:for(;++d<p;)(l=i[d]).callback.call(l.ctx,h,g,v);return;default:for(;++d<p;)(l=i[d]).callback.apply(l.ctx,u);return}},Listening=function(i,u){this.id=i._listenId,this.listener=i,this.obj=u,this.interop=!0,this.count=0,this._events=void 0};Listening.prototype.on=v.on,Listening.prototype.off=function(i,u){var l;this.interop?(this._events=eventsApi(offApi,this._events,i,u,{context:void 0,listeners:void 0}),l=!this._events):(this.count--,l=0===this.count),l&&this.cleanup()},Listening.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},v.bind=v.on,v.unbind=v.off,l.extend(u,v);var S=u.Model=function(i,u){var d=i||{};u||(u={}),this.preinitialize.apply(this,arguments),this.cid=l.uniqueId(this.cidPrefix),this.attributes={},u.collection&&(this.collection=u.collection),u.parse&&(d=this.parse(d,u)||{});var p=l.result(this,"defaults");d=l.defaults(l.extend({},p,d),p),this.set(d,u),this.changed={},this.initialize.apply(this,arguments)};l.extend(S.prototype,v,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(i){return l.clone(this.attributes)},sync:function(){return u.sync.apply(this,arguments)},get:function(i){return this.attributes[i]},escape:function(i){return l.escape(this.get(i))},has:function(i){return null!=this.get(i)},matches:function(i){return!!l.iteratee(i,this)(this.attributes)},set:function(i,u,d){if(null==i)return this;var p;if("object"==typeof i?(p=i,d=u):(p={})[i]=u,d||(d={}),!this._validate(p,d))return!1;var h=d.unset,g=d.silent,v=[],y=this._changing;this._changing=!0,y||(this._previousAttributes=l.clone(this.attributes),this.changed={});var S=this.attributes,E=this.changed,R=this._previousAttributes;for(var T in p)u=p[T],l.isEqual(S[T],u)||v.push(T),l.isEqual(R[T],u)?delete E[T]:E[T]=u,h?delete S[T]:S[T]=u;if(this.idAttribute in p&&(this.id=this.get(this.idAttribute)),!g){v.length&&(this._pending=d);for(var O=0;O<v.length;O++)this.trigger("change:"+v[O],this,S[v[O]],d)}if(y)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(i,u){return this.set(i,void 0,l.extend({},u,{unset:!0}))},clear:function(i){var u={};for(var d in this.attributes)u[d]=void 0;return this.set(u,l.extend({},i,{unset:!0}))},hasChanged:function(i){return null==i?!l.isEmpty(this.changed):l.has(this.changed,i)},changedAttributes:function(i){if(!i)return!!this.hasChanged()&&l.clone(this.changed);var u,d=this._changing?this._previousAttributes:this.attributes,p={};for(var h in i){var g=i[h];l.isEqual(d[h],g)||(p[h]=g,u=!0)}return!!u&&p},previous:function(i){return null!=i&&this._previousAttributes?this._previousAttributes[i]:null},previousAttributes:function(){return l.clone(this._previousAttributes)},fetch:function(i){i=l.extend({parse:!0},i);var u=this,d=i.success;return i.success=function(l){var p=i.parse?u.parse(l,i):l;if(!u.set(p,i))return!1;d&&d.call(i.context,u,l,i),u.trigger("sync",u,l,i)},wrapError(this,i),this.sync("read",this,i)},save:function(i,u,d){var p;null==i||"object"==typeof i?(p=i,d=u):(p={})[i]=u;var h=(d=l.extend({validate:!0,parse:!0},d)).wait;if(p&&!h){if(!this.set(p,d))return!1}else if(!this._validate(p,d))return!1;var g=this,v=d.success,y=this.attributes;d.success=function(i){g.attributes=y;var u=d.parse?g.parse(i,d):i;if(h&&(u=l.extend({},p,u)),u&&!g.set(u,d))return!1;v&&v.call(d.context,g,i,d),g.trigger("sync",g,i,d)},wrapError(this,d),p&&h&&(this.attributes=l.extend({},y,p));var S=this.isNew()?"create":d.patch?"patch":"update";"patch"!==S||d.attrs||(d.attrs=p);var E=this.sync(S,this,d);return this.attributes=y,E},destroy:function(i){i=i?l.clone(i):{};var u=this,d=i.success,p=i.wait,destroy=function(){u.stopListening(),u.trigger("destroy",u,u.collection,i)};i.success=function(l){p&&destroy(),d&&d.call(i.context,u,l,i),u.isNew()||u.trigger("sync",u,l,i)};var h=!1;return this.isNew()?l.defer(i.success):(wrapError(this,i),h=this.sync("delete",this,i)),p||destroy(),h},url:function(){var i=l.result(this,"urlRoot")||l.result(this.collection,"url")||urlError();if(this.isNew())return i;var u=this.get(this.idAttribute);return i.replace(/[^\/]$/,"$&/")+encodeURIComponent(u)},parse:function(i,u){return i},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(i){return this._validate({},l.extend({},i,{validate:!0}))},_validate:function(i,u){if(!u.validate||!this.validate)return!0;i=l.extend({},this.attributes,i);var d=this.validationError=this.validate(i,u)||null;return!d||(this.trigger("invalid",this,d,l.extend(u,{validationError:d})),!1)}});var E=u.Collection=function(i,u){u||(u={}),this.preinitialize.apply(this,arguments),u.model&&(this.model=u.model),void 0!==u.comparator&&(this.comparator=u.comparator),this._reset(),this.initialize.apply(this,arguments),i&&this.reset(i,l.extend({silent:!0},u))},R={add:!0,remove:!0,merge:!0},T={add:!0,remove:!1},splice=function(i,u,l){l=Math.min(Math.max(l,0),i.length);var d,p=Array(i.length-l),h=u.length;for(d=0;d<p.length;d++)p[d]=i[d+l];for(d=0;d<h;d++)i[d+l]=u[d];for(d=0;d<p.length;d++)i[d+h+l]=p[d]};l.extend(E.prototype,v,{model:S,preinitialize:function(){},initialize:function(){},toJSON:function(i){return this.map((function(u){return u.toJSON(i)}))},sync:function(){return u.sync.apply(this,arguments)},add:function(i,u){return this.set(i,l.extend({merge:!1},u,T))},remove:function(i,u){u=l.extend({},u);var d=!l.isArray(i);i=d?[i]:i.slice();var p=this._removeModels(i,u);return!u.silent&&p.length&&(u.changes={added:[],merged:[],removed:p},this.trigger("update",this,u)),d?p[0]:p},set:function(i,u){if(null!=i){(u=l.extend({},R,u)).parse&&!this._isModel(i)&&(i=this.parse(i,u)||[]);var d=!l.isArray(i);i=d?[i]:i.slice();var p=u.at;null!=p&&(p=+p),p>this.length&&(p=this.length),p<0&&(p+=this.length+1);var h,g,v=[],y=[],S=[],E=[],T={},O=u.add,M=u.merge,I=u.remove,P=!1,D=this.comparator&&null==p&&!1!==u.sort,N=l.isString(this.comparator)?this.comparator:null;for(g=0;g<i.length;g++){h=i[g];var q=this.get(h);if(q){if(M&&h!==q){var L=this._isModel(h)?h.attributes:h;u.parse&&(L=q.parse(L,u)),q.set(L,u),S.push(q),D&&!P&&(P=q.hasChanged(N))}T[q.cid]||(T[q.cid]=!0,v.push(q)),i[g]=q}else O&&(h=i[g]=this._prepareModel(h,u))&&(y.push(h),this._addReference(h,u),T[h.cid]=!0,v.push(h))}if(I){for(g=0;g<this.length;g++)T[(h=this.models[g]).cid]||E.push(h);E.length&&this._removeModels(E,u)}var V=!1,U=!D&&O&&I;if(v.length&&U?(V=this.length!==v.length||l.some(this.models,(function(i,u){return i!==v[u]})),this.models.length=0,splice(this.models,v,0),this.length=this.models.length):y.length&&(D&&(P=!0),splice(this.models,y,null==p?this.length:p),this.length=this.models.length),P&&this.sort({silent:!0}),!u.silent){for(g=0;g<y.length;g++)null!=p&&(u.index=p+g),(h=y[g]).trigger("add",h,this,u);(P||V)&&this.trigger("sort",this,u),(y.length||E.length||S.length)&&(u.changes={added:y,removed:E,merged:S},this.trigger("update",this,u))}return d?i[0]:i}},reset:function(i,u){u=u?l.clone(u):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],u);return u.previousModels=this.models,this._reset(),i=this.add(i,l.extend({silent:!0},u)),u.silent||this.trigger("reset",this,u),i},push:function(i,u){return this.add(i,l.extend({at:this.length},u))},pop:function(i){var u=this.at(this.length-1);return this.remove(u,i)},unshift:function(i,u){return this.add(i,l.extend({at:0},u))},shift:function(i){var u=this.at(0);return this.remove(u,i)},slice:function(){return h.apply(this.models,arguments)},get:function(i){if(null!=i)return this._byId[i]||this._byId[this.modelId(this._isModel(i)?i.attributes:i)]||i.cid&&this._byId[i.cid]},has:function(i){return null!=this.get(i)},at:function(i){return i<0&&(i+=this.length),this.models[i]},where:function(i,u){return this[u?"find":"filter"](i)},findWhere:function(i){return this.where(i,!0)},sort:function(i){var u=this.comparator;if(!u)throw new Error("Cannot sort a set without a comparator");i||(i={});var d=u.length;return l.isFunction(u)&&(u=u.bind(this)),1===d||l.isString(u)?this.models=this.sortBy(u):this.models.sort(u),i.silent||this.trigger("sort",this,i),this},pluck:function(i){return this.map(i+"")},fetch:function(i){var u=(i=l.extend({parse:!0},i)).success,d=this;return i.success=function(l){var p=i.reset?"reset":"set";d[p](l,i),u&&u.call(i.context,d,l,i),d.trigger("sync",d,l,i)},wrapError(this,i),this.sync("read",this,i)},create:function(i,u){var d=(u=u?l.clone(u):{}).wait;if(!(i=this._prepareModel(i,u)))return!1;d||this.add(i,u);var p=this,h=u.success;return u.success=function(i,u,l){d&&p.add(i,l),h&&h.call(l.context,i,u,l)},i.save(null,u),i},parse:function(i,u){return i},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(i){return i[this.model.prototype.idAttribute||"id"]},values:function(){return new CollectionIterator(this,M)},keys:function(){return new CollectionIterator(this,I)},entries:function(){return new CollectionIterator(this,P)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(i,u){if(this._isModel(i))return i.collection||(i.collection=this),i;(u=u?l.clone(u):{}).collection=this;var d=new this.model(i,u);return d.validationError?(this.trigger("invalid",this,d.validationError,u),!1):d},_removeModels:function(i,u){for(var l=[],d=0;d<i.length;d++){var p=this.get(i[d]);if(p){var h=this.indexOf(p);this.models.splice(h,1),this.length--,delete this._byId[p.cid];var g=this.modelId(p.attributes);null!=g&&delete this._byId[g],u.silent||(u.index=h,p.trigger("remove",p,this,u)),l.push(p),this._removeReference(p,u)}}return l},_isModel:function(i){return i instanceof S},_addReference:function(i,u){this._byId[i.cid]=i;var l=this.modelId(i.attributes);null!=l&&(this._byId[l]=i),i.on("all",this._onModelEvent,this)},_removeReference:function(i,u){delete this._byId[i.cid];var l=this.modelId(i.attributes);null!=l&&delete this._byId[l],this===i.collection&&delete i.collection,i.off("all",this._onModelEvent,this)},_onModelEvent:function(i,u,l,d){if(u){if(("add"===i||"remove"===i)&&l!==this)return;if("destroy"===i&&this.remove(u,d),"change"===i){var p=this.modelId(u.previousAttributes()),h=this.modelId(u.attributes);p!==h&&(null!=p&&delete this._byId[p],null!=h&&(this._byId[h]=u))}}this.trigger.apply(this,arguments)}});var O="function"==typeof Symbol&&Symbol.iterator;O&&(E.prototype[O]=E.prototype.values);var CollectionIterator=function(i,u){this._collection=i,this._kind=u,this._index=0},M=1,I=2,P=3;O&&(CollectionIterator.prototype[O]=function(){return this}),CollectionIterator.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var i,u=this._collection.at(this._index);if(this._index++,this._kind===M)i=u;else{var l=this._collection.modelId(u.attributes);i=this._kind===I?l:[l,u]}return{value:i,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var D=u.View=function(i){this.cid=l.uniqueId("view"),this.preinitialize.apply(this,arguments),l.extend(this,l.pick(i,q)),this._ensureElement(),this.initialize.apply(this,arguments)},N=/^(\S+)\s*(.*)$/,q=["model","collection","el","id","attributes","className","tagName","events"];l.extend(D.prototype,v,{tagName:"div",$:function(i){return this.$el.find(i)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(i){return this.undelegateEvents(),this._setElement(i),this.delegateEvents(),this},_setElement:function(i){this.$el=i instanceof u.$?i:u.$(i),this.el=this.$el[0]},delegateEvents:function(i){if(i||(i=l.result(this,"events")),!i)return this;for(var u in this.undelegateEvents(),i){var d=i[u];if(l.isFunction(d)||(d=this[d]),d){var p=u.match(N);this.delegate(p[1],p[2],d.bind(this))}}return this},delegate:function(i,u,l){return this.$el.on(i+".delegateEvents"+this.cid,u,l),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(i,u,l){return this.$el.off(i+".delegateEvents"+this.cid,u,l),this},_createElement:function(i){return document.createElement(i)},_ensureElement:function(){if(this.el)this.setElement(l.result(this,"el"));else{var i=l.extend({},l.result(this,"attributes"));this.id&&(i.id=l.result(this,"id")),this.className&&(i.class=l.result(this,"className")),this.setElement(this._createElement(l.result(this,"tagName"))),this._setAttributes(i)}},_setAttributes:function(i){this.$el.attr(i)}});var addUnderscoreMethods=function(i,u,d,p){l.each(d,(function(l,d){u[d]&&(i.prototype[d]=function(i,u,l,d){switch(u){case 1:return function(){return i[l](this[d])};case 2:return function(u){return i[l](this[d],u)};case 3:return function(u,p){return i[l](this[d],cb(u,this),p)};case 4:return function(u,p,h){return i[l](this[d],cb(u,this),p,h)};default:return function(){var u=h.call(arguments);return u.unshift(this[d]),i[l].apply(i,u)}}}(u,l,d,p))}))},cb=function(i,u){return l.isFunction(i)?i:l.isObject(i)&&!u._isModel(i)?modelMatcher(i):l.isString(i)?function(u){return u.get(i)}:i},modelMatcher=function(i){var u=l.matches(i);return function(i){return u(i.attributes)}};l.each([[E,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[S,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],(function(i){var u=i[0],d=i[1],p=i[2];u.mixin=function(i){var d=l.reduce(l.functions(i),(function(i,u){return i[u]=0,i}),{});addUnderscoreMethods(u,i,d,p)},addUnderscoreMethods(u,l,d,p)})),u.sync=function(i,d,p){var h=L[i];l.defaults(p||(p={}),{emulateHTTP:u.emulateHTTP,emulateJSON:u.emulateJSON});var g={type:h,dataType:"json"};if(p.url||(g.url=l.result(d,"url")||urlError()),null!=p.data||!d||"create"!==i&&"update"!==i&&"patch"!==i||(g.contentType="application/json",g.data=JSON.stringify(p.attrs||d.toJSON(p))),p.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),p.emulateHTTP&&("PUT"===h||"DELETE"===h||"PATCH"===h)){g.type="POST",p.emulateJSON&&(g.data._method=h);var v=p.beforeSend;p.beforeSend=function(i){if(i.setRequestHeader("X-HTTP-Method-Override",h),v)return v.apply(this,arguments)}}"GET"===g.type||p.emulateJSON||(g.processData=!1);var y=p.error;p.error=function(i,u,l){p.textStatus=u,p.errorThrown=l,y&&y.call(p.context,i,u,l)};var S=p.xhr=u.ajax(l.extend(g,p));return d.trigger("request",d,S,p),S};var L={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};u.ajax=function(){return u.$.ajax.apply(u.$,arguments)};var V=u.Router=function(i){i||(i={}),this.preinitialize.apply(this,arguments),i.routes&&(this.routes=i.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},U=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,H=/\*\w+/g,z=/[\-{}\[\]+?.,\\\^$|#\s]/g;l.extend(V.prototype,v,{preinitialize:function(){},initialize:function(){},route:function(i,d,p){l.isRegExp(i)||(i=this._routeToRegExp(i)),l.isFunction(d)&&(p=d,d=""),p||(p=this[d]);var h=this;return u.history.route(i,(function(l){var g=h._extractParameters(i,l);!1!==h.execute(p,g,d)&&(h.trigger.apply(h,["route:"+d].concat(g)),h.trigger("route",d,g),u.history.trigger("route",h,d,g))})),this},execute:function(i,u,l){i&&i.apply(this,u)},navigate:function(i,l){return u.history.navigate(i,l),this},_bindRoutes:function(){if(this.routes){this.routes=l.result(this,"routes");for(var i,u=l.keys(this.routes);null!=(i=u.pop());)this.route(i,this.routes[i])}},_routeToRegExp:function(i){return i=i.replace(z,"\\$&").replace(U,"(?:$1)?").replace(B,(function(i,u){return u?i:"([^/?]+)"})).replace(H,"([^?]*?)"),new RegExp("^"+i+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(i,u){var d=i.exec(u).slice(1);return l.map(d,(function(i,u){return u===d.length-1?i||null:i?decodeURIComponent(i):null}))}});var Q=u.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},G=/^[#\/]|\s+$/g,Y=/^\/+|\/+$/g,X=/#.*$/;Q.started=!1,l.extend(Q.prototype,v,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(i){return decodeURI(i.replace(/%25/g,"%2525"))},getSearch:function(){var i=this.location.href.replace(/#.*/,"").match(/\?.+/);return i?i[0]:""},getHash:function(i){var u=(i||this).location.href.match(/#(.*)$/);return u?u[1]:""},getPath:function(){var i=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===i.charAt(0)?i.slice(1):i},getFragment:function(i){return null==i&&(i=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),i.replace(G,"")},start:function(i){if(Q.started)throw new Error("Backbone.history has already been started");if(Q.started=!0,this.options=l.extend({root:"/"},this.options,i),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Y,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var u=this.root.slice(0,-1)||"/";return this.location.replace(u+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var d=document.body,p=d.insertBefore(this.iframe,d.firstChild).contentWindow;p.document.open(),p.document.close(),p.location.hash="#"+this.fragment}var h=window.addEventListener||function(i,u){return attachEvent("on"+i,u)};if(this._usePushState?h("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?h("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var i=window.removeEventListener||function(i,u){return detachEvent("on"+i,u)};this._usePushState?i("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&i("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Q.started=!1},route:function(i,u){this.handlers.unshift({route:i,callback:u})},checkUrl:function(i){var u=this.getFragment();if(u===this.fragment&&this.iframe&&(u=this.getHash(this.iframe.contentWindow)),u===this.fragment)return!1;this.iframe&&this.navigate(u),this.loadUrl()},loadUrl:function(i){return!!this.matchRoot()&&(i=this.fragment=this.getFragment(i),l.some(this.handlers,(function(u){if(u.route.test(i))return u.callback(i),!0})))},navigate:function(i,u){if(!Q.started)return!1;u&&!0!==u||(u={trigger:!!u}),i=this.getFragment(i||"");var l=this.root;""!==i&&"?"!==i.charAt(0)||(l=l.slice(0,-1)||"/");var d=l+i;i=i.replace(X,"");var p=this.decodeFragment(i);if(this.fragment!==p){if(this.fragment=p,this._usePushState)this.history[u.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);if(this._updateHash(this.location,i,u.replace),this.iframe&&i!==this.getHash(this.iframe.contentWindow)){var h=this.iframe.contentWindow;u.replace||(h.document.open(),h.document.close()),this._updateHash(h.location,i,u.replace)}}return u.trigger?this.loadUrl(i):void 0}},_updateHash:function(i,u,l){if(l){var d=i.href.replace(/(javascript:|#).*$/,"");i.replace(d+"#"+u)}else i.hash="#"+u}}),u.history=new Q;S.extend=E.extend=V.extend=D.extend=Q.extend=function(i,u){var d,p=this;return d=i&&l.has(i,"constructor")?i.constructor:function(){return p.apply(this,arguments)},l.extend(d,p,u),d.prototype=l.create(p.prototype,i),d.prototype.constructor=d,d.__super__=p.prototype,d};var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(i,u){var l=u.error;u.error=function(d){l&&l.call(u.context,i,d,u),i.trigger("error",i,d,u)}};return u}))},34651:function(i,u){var l;!function(u,l){"use strict";"object"==typeof i.exports?i.exports=u.document?l(u,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return l(i)}:l(u)}("undefined"!=typeof window?window:this,(function(d,p){"use strict";var h=[],g=Object.getPrototypeOf,v=h.slice,y=h.flat?function(i){return h.flat.call(i)}:function(i){return h.concat.apply([],i)},S=h.push,E=h.indexOf,R={},T=R.toString,O=R.hasOwnProperty,M=O.toString,I=M.call(Object),P={},D=function isFunction(i){return"function"==typeof i&&"number"!=typeof i.nodeType&&"function"!=typeof i.item},N=function isWindow(i){return null!=i&&i===i.window},q=d.document,L={type:!0,src:!0,nonce:!0,noModule:!0};function DOMEval(i,u,l){var d,p,h=(l=l||q).createElement("script");if(h.text=i,u)for(d in L)(p=u[d]||u.getAttribute&&u.getAttribute(d))&&h.setAttribute(d,p);l.head.appendChild(h).parentNode.removeChild(h)}function toType(i){return null==i?i+"":"object"==typeof i||"function"==typeof i?R[T.call(i)]||"object":typeof i}var V="3.6.0",jQuery=function(i,u){return new jQuery.fn.init(i,u)};function isArrayLike(i){var u=!!i&&"length"in i&&i.length,l=toType(i);return!D(i)&&!N(i)&&("array"===l||0===u||"number"==typeof u&&u>0&&u-1 in i)}jQuery.fn=jQuery.prototype={jquery:V,constructor:jQuery,length:0,toArray:function(){return v.call(this)},get:function(i){return null==i?v.call(this):i<0?this[i+this.length]:this[i]},pushStack:function(i){var u=jQuery.merge(this.constructor(),i);return u.prevObject=this,u},each:function(i){return jQuery.each(this,i)},map:function(i){return this.pushStack(jQuery.map(this,(function(u,l){return i.call(u,l,u)})))},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(jQuery.grep(this,(function(i,u){return(u+1)%2})))},odd:function(){return this.pushStack(jQuery.grep(this,(function(i,u){return u%2})))},eq:function(i){var u=this.length,l=+i+(i<0?u:0);return this.pushStack(l>=0&&l<u?[this[l]]:[])},end:function(){return this.prevObject||this.constructor()},push:S,sort:h.sort,splice:h.splice},jQuery.extend=jQuery.fn.extend=function(){var i,u,l,d,p,h,g=arguments[0]||{},v=1,y=arguments.length,S=!1;for("boolean"==typeof g&&(S=g,g=arguments[v]||{},v++),"object"==typeof g||D(g)||(g={}),v===y&&(g=this,v--);v<y;v++)if(null!=(i=arguments[v]))for(u in i)d=i[u],"__proto__"!==u&&g!==d&&(S&&d&&(jQuery.isPlainObject(d)||(p=Array.isArray(d)))?(l=g[u],h=p&&!Array.isArray(l)?[]:p||jQuery.isPlainObject(l)?l:{},p=!1,g[u]=jQuery.extend(S,h,d)):void 0!==d&&(g[u]=d));return g},jQuery.extend({expando:"jQuery"+(V+Math.random()).replace(/\D/g,""),isReady:!0,error:function(i){throw new Error(i)},noop:function(){},isPlainObject:function(i){var u,l;return!(!i||"[object Object]"!==T.call(i))&&(!(u=g(i))||"function"==typeof(l=O.call(u,"constructor")&&u.constructor)&&M.call(l)===I)},isEmptyObject:function(i){var u;for(u in i)return!1;return!0},globalEval:function(i,u,l){DOMEval(i,{nonce:u&&u.nonce},l)},each:function(i,u){var l,d=0;if(isArrayLike(i))for(l=i.length;d<l&&!1!==u.call(i[d],d,i[d]);d++);else for(d in i)if(!1===u.call(i[d],d,i[d]))break;return i},makeArray:function(i,u){var l=u||[];return null!=i&&(isArrayLike(Object(i))?jQuery.merge(l,"string"==typeof i?[i]:i):S.call(l,i)),l},inArray:function(i,u,l){return null==u?-1:E.call(u,i,l)},merge:function(i,u){for(var l=+u.length,d=0,p=i.length;d<l;d++)i[p++]=u[d];return i.length=p,i},grep:function(i,u,l){for(var d=[],p=0,h=i.length,g=!l;p<h;p++)!u(i[p],p)!==g&&d.push(i[p]);return d},map:function(i,u,l){var d,p,h=0,g=[];if(isArrayLike(i))for(d=i.length;h<d;h++)null!=(p=u(i[h],h,l))&&g.push(p);else for(h in i)null!=(p=u(i[h],h,l))&&g.push(p);return y(g)},guid:1,support:P}),"function"==typeof Symbol&&(jQuery.fn[Symbol.iterator]=h[Symbol.iterator]),jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(i,u){R["[object "+u+"]"]=u.toLowerCase()}));var U=function(i){var u,l,d,p,h,g,v,y,S,E,R,T,O,M,I,P,D,N,q,L="sizzle"+1*new Date,V=i.document,U=0,B=0,H=createCache(),z=createCache(),Q=createCache(),G=createCache(),sortOrder=function(i,u){return i===u&&(R=!0),0},Y={}.hasOwnProperty,X=[],ee=X.pop,te=X.push,ne=X.push,re=X.slice,indexOf=function(i,u){for(var l=0,d=i.length;l<d;l++)if(i[l]===u)return l;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ae="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",se="\\[[\\x20\\t\\r\\n\\f]*("+oe+")(?:"+ae+"*([*^$|!~]?=)"+ae+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ae+"*\\]",ue=":("+oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",le=new RegExp(ae+"+","g"),ce=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),de=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),fe=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),pe=new RegExp(ae+"|>"),he=new RegExp(ue),ge=new RegExp("^"+oe+"$"),me={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe+"|[*])"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ue),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+ie+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},ve=/HTML$/i,ye=/^(?:input|select|textarea|button)$/i,be=/^h\d$/i,_e=/^[^{]+\{\s*\[native \w/,Se=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ee=/[+~]/,we=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),funescape=function(i,u){var l="0x"+i.slice(1)-65536;return u||(l<0?String.fromCharCode(l+65536):String.fromCharCode(l>>10|55296,1023&l|56320))},Re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fcssescape=function(i,u){return u?"\0"===i?"�":i.slice(0,-1)+"\\"+i.charCodeAt(i.length-1).toString(16)+" ":"\\"+i},unloadHandler=function(){T()},Ae=addCombinator((function(i){return!0===i.disabled&&"fieldset"===i.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{ne.apply(X=re.call(V.childNodes),V.childNodes),X[V.childNodes.length].nodeType}catch(i){ne={apply:X.length?function(i,u){te.apply(i,re.call(u))}:function(i,u){for(var l=i.length,d=0;i[l++]=u[d++];);i.length=l-1}}}function Sizzle(i,u,d,p){var h,v,S,E,R,M,D,N=u&&u.ownerDocument,V=u?u.nodeType:9;if(d=d||[],"string"!=typeof i||!i||1!==V&&9!==V&&11!==V)return d;if(!p&&(T(u),u=u||O,I)){if(11!==V&&(R=Se.exec(i)))if(h=R[1]){if(9===V){if(!(S=u.getElementById(h)))return d;if(S.id===h)return d.push(S),d}else if(N&&(S=N.getElementById(h))&&q(u,S)&&S.id===h)return d.push(S),d}else{if(R[2])return ne.apply(d,u.getElementsByTagName(i)),d;if((h=R[3])&&l.getElementsByClassName&&u.getElementsByClassName)return ne.apply(d,u.getElementsByClassName(h)),d}if(l.qsa&&!G[i+" "]&&(!P||!P.test(i))&&(1!==V||"object"!==u.nodeName.toLowerCase())){if(D=i,N=u,1===V&&(pe.test(i)||fe.test(i))){for((N=Ee.test(i)&&testContext(u.parentNode)||u)===u&&l.scope||((E=u.getAttribute("id"))?E=E.replace(Re,fcssescape):u.setAttribute("id",E=L)),v=(M=g(i)).length;v--;)M[v]=(E?"#"+E:":scope")+" "+toSelector(M[v]);D=M.join(",")}try{return ne.apply(d,N.querySelectorAll(D)),d}catch(u){G(i,!0)}finally{E===L&&u.removeAttribute("id")}}}return y(i.replace(ce,"$1"),u,d,p)}function createCache(){var i=[];return function cache(u,l){return i.push(u+" ")>d.cacheLength&&delete cache[i.shift()],cache[u+" "]=l}}function markFunction(i){return i[L]=!0,i}function assert(i){var u=O.createElement("fieldset");try{return!!i(u)}catch(i){return!1}finally{u.parentNode&&u.parentNode.removeChild(u),u=null}}function addHandle(i,u){for(var l=i.split("|"),p=l.length;p--;)d.attrHandle[l[p]]=u}function siblingCheck(i,u){var l=u&&i,d=l&&1===i.nodeType&&1===u.nodeType&&i.sourceIndex-u.sourceIndex;if(d)return d;if(l)for(;l=l.nextSibling;)if(l===u)return-1;return i?1:-1}function createInputPseudo(i){return function(u){return"input"===u.nodeName.toLowerCase()&&u.type===i}}function createButtonPseudo(i){return function(u){var l=u.nodeName.toLowerCase();return("input"===l||"button"===l)&&u.type===i}}function createDisabledPseudo(i){return function(u){return"form"in u?u.parentNode&&!1===u.disabled?"label"in u?"label"in u.parentNode?u.parentNode.disabled===i:u.disabled===i:u.isDisabled===i||u.isDisabled!==!i&&Ae(u)===i:u.disabled===i:"label"in u&&u.disabled===i}}function createPositionalPseudo(i){return markFunction((function(u){return u=+u,markFunction((function(l,d){for(var p,h=i([],l.length,u),g=h.length;g--;)l[p=h[g]]&&(l[p]=!(d[p]=l[p]))}))}))}function testContext(i){return i&&void 0!==i.getElementsByTagName&&i}for(u in l=Sizzle.support={},h=Sizzle.isXML=function(i){var u=i&&i.namespaceURI,l=i&&(i.ownerDocument||i).documentElement;return!ve.test(u||l&&l.nodeName||"HTML")},T=Sizzle.setDocument=function(i){var u,p,g=i?i.ownerDocument||i:V;return g!=O&&9===g.nodeType&&g.documentElement?(M=(O=g).documentElement,I=!h(O),V!=O&&(p=O.defaultView)&&p.top!==p&&(p.addEventListener?p.addEventListener("unload",unloadHandler,!1):p.attachEvent&&p.attachEvent("onunload",unloadHandler)),l.scope=assert((function(i){return M.appendChild(i).appendChild(O.createElement("div")),void 0!==i.querySelectorAll&&!i.querySelectorAll(":scope fieldset div").length})),l.attributes=assert((function(i){return i.className="i",!i.getAttribute("className")})),l.getElementsByTagName=assert((function(i){return i.appendChild(O.createComment("")),!i.getElementsByTagName("*").length})),l.getElementsByClassName=_e.test(O.getElementsByClassName),l.getById=assert((function(i){return M.appendChild(i).id=L,!O.getElementsByName||!O.getElementsByName(L).length})),l.getById?(d.filter.ID=function(i){var u=i.replace(we,funescape);return function(i){return i.getAttribute("id")===u}},d.find.ID=function(i,u){if(void 0!==u.getElementById&&I){var l=u.getElementById(i);return l?[l]:[]}}):(d.filter.ID=function(i){var u=i.replace(we,funescape);return function(i){var l=void 0!==i.getAttributeNode&&i.getAttributeNode("id");return l&&l.value===u}},d.find.ID=function(i,u){if(void 0!==u.getElementById&&I){var l,d,p,h=u.getElementById(i);if(h){if((l=h.getAttributeNode("id"))&&l.value===i)return[h];for(p=u.getElementsByName(i),d=0;h=p[d++];)if((l=h.getAttributeNode("id"))&&l.value===i)return[h]}return[]}}),d.find.TAG=l.getElementsByTagName?function(i,u){return void 0!==u.getElementsByTagName?u.getElementsByTagName(i):l.qsa?u.querySelectorAll(i):void 0}:function(i,u){var l,d=[],p=0,h=u.getElementsByTagName(i);if("*"===i){for(;l=h[p++];)1===l.nodeType&&d.push(l);return d}return h},d.find.CLASS=l.getElementsByClassName&&function(i,u){if(void 0!==u.getElementsByClassName&&I)return u.getElementsByClassName(i)},D=[],P=[],(l.qsa=_e.test(O.querySelectorAll))&&(assert((function(i){var u;M.appendChild(i).innerHTML="<a id='"+L+"'></a><select id='"+L+"-\r\\' msallowcapture=''><option selected=''></option></select>",i.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),i.querySelectorAll("[selected]").length||P.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+ie+")"),i.querySelectorAll("[id~="+L+"-]").length||P.push("~="),(u=O.createElement("input")).setAttribute("name",""),i.appendChild(u),i.querySelectorAll("[name='']").length||P.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),i.querySelectorAll(":checked").length||P.push(":checked"),i.querySelectorAll("a#"+L+"+*").length||P.push(".#.+[+~]"),i.querySelectorAll("\\\f"),P.push("[\\r\\n\\f]")})),assert((function(i){i.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var u=O.createElement("input");u.setAttribute("type","hidden"),i.appendChild(u).setAttribute("name","D"),i.querySelectorAll("[name=d]").length&&P.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==i.querySelectorAll(":enabled").length&&P.push(":enabled",":disabled"),M.appendChild(i).disabled=!0,2!==i.querySelectorAll(":disabled").length&&P.push(":enabled",":disabled"),i.querySelectorAll("*,:x"),P.push(",.*:")}))),(l.matchesSelector=_e.test(N=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&assert((function(i){l.disconnectedMatch=N.call(i,"*"),N.call(i,"[s!='']:x"),D.push("!=",ue)})),P=P.length&&new RegExp(P.join("|")),D=D.length&&new RegExp(D.join("|")),u=_e.test(M.compareDocumentPosition),q=u||_e.test(M.contains)?function(i,u){var l=9===i.nodeType?i.documentElement:i,d=u&&u.parentNode;return i===d||!(!d||1!==d.nodeType||!(l.contains?l.contains(d):i.compareDocumentPosition&&16&i.compareDocumentPosition(d)))}:function(i,u){if(u)for(;u=u.parentNode;)if(u===i)return!0;return!1},sortOrder=u?function(i,u){if(i===u)return R=!0,0;var d=!i.compareDocumentPosition-!u.compareDocumentPosition;return d||(1&(d=(i.ownerDocument||i)==(u.ownerDocument||u)?i.compareDocumentPosition(u):1)||!l.sortDetached&&u.compareDocumentPosition(i)===d?i==O||i.ownerDocument==V&&q(V,i)?-1:u==O||u.ownerDocument==V&&q(V,u)?1:E?indexOf(E,i)-indexOf(E,u):0:4&d?-1:1)}:function(i,u){if(i===u)return R=!0,0;var l,d=0,p=i.parentNode,h=u.parentNode,g=[i],v=[u];if(!p||!h)return i==O?-1:u==O?1:p?-1:h?1:E?indexOf(E,i)-indexOf(E,u):0;if(p===h)return siblingCheck(i,u);for(l=i;l=l.parentNode;)g.unshift(l);for(l=u;l=l.parentNode;)v.unshift(l);for(;g[d]===v[d];)d++;return d?siblingCheck(g[d],v[d]):g[d]==V?-1:v[d]==V?1:0},O):O},Sizzle.matches=function(i,u){return Sizzle(i,null,null,u)},Sizzle.matchesSelector=function(i,u){if(T(i),l.matchesSelector&&I&&!G[u+" "]&&(!D||!D.test(u))&&(!P||!P.test(u)))try{var d=N.call(i,u);if(d||l.disconnectedMatch||i.document&&11!==i.document.nodeType)return d}catch(i){G(u,!0)}return Sizzle(u,O,null,[i]).length>0},Sizzle.contains=function(i,u){return(i.ownerDocument||i)!=O&&T(i),q(i,u)},Sizzle.attr=function(i,u){(i.ownerDocument||i)!=O&&T(i);var p=d.attrHandle[u.toLowerCase()],h=p&&Y.call(d.attrHandle,u.toLowerCase())?p(i,u,!I):void 0;return void 0!==h?h:l.attributes||!I?i.getAttribute(u):(h=i.getAttributeNode(u))&&h.specified?h.value:null},Sizzle.escape=function(i){return(i+"").replace(Re,fcssescape)},Sizzle.error=function(i){throw new Error("Syntax error, unrecognized expression: "+i)},Sizzle.uniqueSort=function(i){var u,d=[],p=0,h=0;if(R=!l.detectDuplicates,E=!l.sortStable&&i.slice(0),i.sort(sortOrder),R){for(;u=i[h++];)u===i[h]&&(p=d.push(h));for(;p--;)i.splice(d[p],1)}return E=null,i},p=Sizzle.getText=function(i){var u,l="",d=0,h=i.nodeType;if(h){if(1===h||9===h||11===h){if("string"==typeof i.textContent)return i.textContent;for(i=i.firstChild;i;i=i.nextSibling)l+=p(i)}else if(3===h||4===h)return i.nodeValue}else for(;u=i[d++];)l+=p(u);return l},d=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:me,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(i){return i[1]=i[1].replace(we,funescape),i[3]=(i[3]||i[4]||i[5]||"").replace(we,funescape),"~="===i[2]&&(i[3]=" "+i[3]+" "),i.slice(0,4)},CHILD:function(i){return i[1]=i[1].toLowerCase(),"nth"===i[1].slice(0,3)?(i[3]||Sizzle.error(i[0]),i[4]=+(i[4]?i[5]+(i[6]||1):2*("even"===i[3]||"odd"===i[3])),i[5]=+(i[7]+i[8]||"odd"===i[3])):i[3]&&Sizzle.error(i[0]),i},PSEUDO:function(i){var u,l=!i[6]&&i[2];return me.CHILD.test(i[0])?null:(i[3]?i[2]=i[4]||i[5]||"":l&&he.test(l)&&(u=g(l,!0))&&(u=l.indexOf(")",l.length-u)-l.length)&&(i[0]=i[0].slice(0,u),i[2]=l.slice(0,u)),i.slice(0,3))}},filter:{TAG:function(i){var u=i.replace(we,funescape).toLowerCase();return"*"===i?function(){return!0}:function(i){return i.nodeName&&i.nodeName.toLowerCase()===u}},CLASS:function(i){var u=H[i+" "];return u||(u=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+i+"("+ae+"|$)"))&&H(i,(function(i){return u.test("string"==typeof i.className&&i.className||void 0!==i.getAttribute&&i.getAttribute("class")||"")}))},ATTR:function(i,u,l){return function(d){var p=Sizzle.attr(d,i);return null==p?"!="===u:!u||(p+="","="===u?p===l:"!="===u?p!==l:"^="===u?l&&0===p.indexOf(l):"*="===u?l&&p.indexOf(l)>-1:"$="===u?l&&p.slice(-l.length)===l:"~="===u?(" "+p.replace(le," ")+" ").indexOf(l)>-1:"|="===u&&(p===l||p.slice(0,l.length+1)===l+"-"))}},CHILD:function(i,u,l,d,p){var h="nth"!==i.slice(0,3),g="last"!==i.slice(-4),v="of-type"===u;return 1===d&&0===p?function(i){return!!i.parentNode}:function(u,l,y){var S,E,R,T,O,M,I=h!==g?"nextSibling":"previousSibling",P=u.parentNode,D=v&&u.nodeName.toLowerCase(),N=!y&&!v,q=!1;if(P){if(h){for(;I;){for(T=u;T=T[I];)if(v?T.nodeName.toLowerCase()===D:1===T.nodeType)return!1;M=I="only"===i&&!M&&"nextSibling"}return!0}if(M=[g?P.firstChild:P.lastChild],g&&N){for(q=(O=(S=(E=(R=(T=P)[L]||(T[L]={}))[T.uniqueID]||(R[T.uniqueID]={}))[i]||[])[0]===U&&S[1])&&S[2],T=O&&P.childNodes[O];T=++O&&T&&T[I]||(q=O=0)||M.pop();)if(1===T.nodeType&&++q&&T===u){E[i]=[U,O,q];break}}else if(N&&(q=O=(S=(E=(R=(T=u)[L]||(T[L]={}))[T.uniqueID]||(R[T.uniqueID]={}))[i]||[])[0]===U&&S[1]),!1===q)for(;(T=++O&&T&&T[I]||(q=O=0)||M.pop())&&((v?T.nodeName.toLowerCase()!==D:1!==T.nodeType)||!++q||(N&&((E=(R=T[L]||(T[L]={}))[T.uniqueID]||(R[T.uniqueID]={}))[i]=[U,q]),T!==u)););return(q-=p)===d||q%d==0&&q/d>=0}}},PSEUDO:function(i,u){var l,p=d.pseudos[i]||d.setFilters[i.toLowerCase()]||Sizzle.error("unsupported pseudo: "+i);return p[L]?p(u):p.length>1?(l=[i,i,"",u],d.setFilters.hasOwnProperty(i.toLowerCase())?markFunction((function(i,l){for(var d,h=p(i,u),g=h.length;g--;)i[d=indexOf(i,h[g])]=!(l[d]=h[g])})):function(i){return p(i,0,l)}):p}},pseudos:{not:markFunction((function(i){var u=[],l=[],d=v(i.replace(ce,"$1"));return d[L]?markFunction((function(i,u,l,p){for(var h,g=d(i,null,p,[]),v=i.length;v--;)(h=g[v])&&(i[v]=!(u[v]=h))})):function(i,p,h){return u[0]=i,d(u,null,h,l),u[0]=null,!l.pop()}})),has:markFunction((function(i){return function(u){return Sizzle(i,u).length>0}})),contains:markFunction((function(i){return i=i.replace(we,funescape),function(u){return(u.textContent||p(u)).indexOf(i)>-1}})),lang:markFunction((function(i){return ge.test(i||"")||Sizzle.error("unsupported lang: "+i),i=i.replace(we,funescape).toLowerCase(),function(u){var l;do{if(l=I?u.lang:u.getAttribute("xml:lang")||u.getAttribute("lang"))return(l=l.toLowerCase())===i||0===l.indexOf(i+"-")}while((u=u.parentNode)&&1===u.nodeType);return!1}})),target:function(u){var l=i.location&&i.location.hash;return l&&l.slice(1)===u.id},root:function(i){return i===M},focus:function(i){return i===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(i.type||i.href||~i.tabIndex)},enabled:createDisabledPseudo(!1),disabled:createDisabledPseudo(!0),checked:function(i){var u=i.nodeName.toLowerCase();return"input"===u&&!!i.checked||"option"===u&&!!i.selected},selected:function(i){return i.parentNode&&i.parentNode.selectedIndex,!0===i.selected},empty:function(i){for(i=i.firstChild;i;i=i.nextSibling)if(i.nodeType<6)return!1;return!0},parent:function(i){return!d.pseudos.empty(i)},header:function(i){return be.test(i.nodeName)},input:function(i){return ye.test(i.nodeName)},button:function(i){var u=i.nodeName.toLowerCase();return"input"===u&&"button"===i.type||"button"===u},text:function(i){var u;return"input"===i.nodeName.toLowerCase()&&"text"===i.type&&(null==(u=i.getAttribute("type"))||"text"===u.toLowerCase())},first:createPositionalPseudo((function(){return[0]})),last:createPositionalPseudo((function(i,u){return[u-1]})),eq:createPositionalPseudo((function(i,u,l){return[l<0?l+u:l]})),even:createPositionalPseudo((function(i,u){for(var l=0;l<u;l+=2)i.push(l);return i})),odd:createPositionalPseudo((function(i,u){for(var l=1;l<u;l+=2)i.push(l);return i})),lt:createPositionalPseudo((function(i,u,l){for(var d=l<0?l+u:l>u?u:l;--d>=0;)i.push(d);return i})),gt:createPositionalPseudo((function(i,u,l){for(var d=l<0?l+u:l;++d<u;)i.push(d);return i}))}},d.pseudos.nth=d.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[u]=createInputPseudo(u);for(u in{submit:!0,reset:!0})d.pseudos[u]=createButtonPseudo(u);function setFilters(){}function toSelector(i){for(var u=0,l=i.length,d="";u<l;u++)d+=i[u].value;return d}function addCombinator(i,u,l){var d=u.dir,p=u.next,h=p||d,g=l&&"parentNode"===h,v=B++;return u.first?function(u,l,p){for(;u=u[d];)if(1===u.nodeType||g)return i(u,l,p);return!1}:function(u,l,y){var S,E,R,T=[U,v];if(y){for(;u=u[d];)if((1===u.nodeType||g)&&i(u,l,y))return!0}else for(;u=u[d];)if(1===u.nodeType||g)if(E=(R=u[L]||(u[L]={}))[u.uniqueID]||(R[u.uniqueID]={}),p&&p===u.nodeName.toLowerCase())u=u[d]||u;else{if((S=E[h])&&S[0]===U&&S[1]===v)return T[2]=S[2];if(E[h]=T,T[2]=i(u,l,y))return!0}return!1}}function elementMatcher(i){return i.length>1?function(u,l,d){for(var p=i.length;p--;)if(!i[p](u,l,d))return!1;return!0}:i[0]}function condense(i,u,l,d,p){for(var h,g=[],v=0,y=i.length,S=null!=u;v<y;v++)(h=i[v])&&(l&&!l(h,d,p)||(g.push(h),S&&u.push(v)));return g}function setMatcher(i,u,l,d,p,h){return d&&!d[L]&&(d=setMatcher(d)),p&&!p[L]&&(p=setMatcher(p,h)),markFunction((function(h,g,v,y){var S,E,R,T=[],O=[],M=g.length,I=h||function multipleContexts(i,u,l){for(var d=0,p=u.length;d<p;d++)Sizzle(i,u[d],l);return l}(u||"*",v.nodeType?[v]:v,[]),P=!i||!h&&u?I:condense(I,T,i,v,y),D=l?p||(h?i:M||d)?[]:g:P;if(l&&l(P,D,v,y),d)for(S=condense(D,O),d(S,[],v,y),E=S.length;E--;)(R=S[E])&&(D[O[E]]=!(P[O[E]]=R));if(h){if(p||i){if(p){for(S=[],E=D.length;E--;)(R=D[E])&&S.push(P[E]=R);p(null,D=[],S,y)}for(E=D.length;E--;)(R=D[E])&&(S=p?indexOf(h,R):T[E])>-1&&(h[S]=!(g[S]=R))}}else D=condense(D===g?D.splice(M,D.length):D),p?p(null,g,D,y):ne.apply(g,D)}))}function matcherFromTokens(i){for(var u,l,p,h=i.length,g=d.relative[i[0].type],v=g||d.relative[" "],y=g?1:0,E=addCombinator((function(i){return i===u}),v,!0),R=addCombinator((function(i){return indexOf(u,i)>-1}),v,!0),T=[function(i,l,d){var p=!g&&(d||l!==S)||((u=l).nodeType?E(i,l,d):R(i,l,d));return u=null,p}];y<h;y++)if(l=d.relative[i[y].type])T=[addCombinator(elementMatcher(T),l)];else{if((l=d.filter[i[y].type].apply(null,i[y].matches))[L]){for(p=++y;p<h&&!d.relative[i[p].type];p++);return setMatcher(y>1&&elementMatcher(T),y>1&&toSelector(i.slice(0,y-1).concat({value:" "===i[y-2].type?"*":""})).replace(ce,"$1"),l,y<p&&matcherFromTokens(i.slice(y,p)),p<h&&matcherFromTokens(i=i.slice(p)),p<h&&toSelector(i))}T.push(l)}return elementMatcher(T)}return setFilters.prototype=d.filters=d.pseudos,d.setFilters=new setFilters,g=Sizzle.tokenize=function(i,u){var l,p,h,g,v,y,S,E=z[i+" "];if(E)return u?0:E.slice(0);for(v=i,y=[],S=d.preFilter;v;){for(g in l&&!(p=de.exec(v))||(p&&(v=v.slice(p[0].length)||v),y.push(h=[])),l=!1,(p=fe.exec(v))&&(l=p.shift(),h.push({value:l,type:p[0].replace(ce," ")}),v=v.slice(l.length)),d.filter)!(p=me[g].exec(v))||S[g]&&!(p=S[g](p))||(l=p.shift(),h.push({value:l,type:g,matches:p}),v=v.slice(l.length));if(!l)break}return u?v.length:v?Sizzle.error(i):z(i,y).slice(0)},v=Sizzle.compile=function(i,u){var l,p=[],h=[],v=Q[i+" "];if(!v){for(u||(u=g(i)),l=u.length;l--;)(v=matcherFromTokens(u[l]))[L]?p.push(v):h.push(v);v=Q(i,function matcherFromGroupMatchers(i,u){var l=u.length>0,p=i.length>0,superMatcher=function(h,g,v,y,E){var R,M,P,D=0,N="0",q=h&&[],L=[],V=S,B=h||p&&d.find.TAG("*",E),H=U+=null==V?1:Math.random()||.1,z=B.length;for(E&&(S=g==O||g||E);N!==z&&null!=(R=B[N]);N++){if(p&&R){for(M=0,g||R.ownerDocument==O||(T(R),v=!I);P=i[M++];)if(P(R,g||O,v)){y.push(R);break}E&&(U=H)}l&&((R=!P&&R)&&D--,h&&q.push(R))}if(D+=N,l&&N!==D){for(M=0;P=u[M++];)P(q,L,g,v);if(h){if(D>0)for(;N--;)q[N]||L[N]||(L[N]=ee.call(y));L=condense(L)}ne.apply(y,L),E&&!h&&L.length>0&&D+u.length>1&&Sizzle.uniqueSort(y)}return E&&(U=H,S=V),q};return l?markFunction(superMatcher):superMatcher}(h,p)),v.selector=i}return v},y=Sizzle.select=function(i,u,l,p){var h,y,S,E,R,T="function"==typeof i&&i,O=!p&&g(i=T.selector||i);if(l=l||[],1===O.length){if((y=O[0]=O[0].slice(0)).length>2&&"ID"===(S=y[0]).type&&9===u.nodeType&&I&&d.relative[y[1].type]){if(!(u=(d.find.ID(S.matches[0].replace(we,funescape),u)||[])[0]))return l;T&&(u=u.parentNode),i=i.slice(y.shift().value.length)}for(h=me.needsContext.test(i)?0:y.length;h--&&(S=y[h],!d.relative[E=S.type]);)if((R=d.find[E])&&(p=R(S.matches[0].replace(we,funescape),Ee.test(y[0].type)&&testContext(u.parentNode)||u))){if(y.splice(h,1),!(i=p.length&&toSelector(y)))return ne.apply(l,p),l;break}}return(T||v(i,O))(p,u,!I,l,!u||Ee.test(i)&&testContext(u.parentNode)||u),l},l.sortStable=L.split("").sort(sortOrder).join("")===L,l.detectDuplicates=!!R,T(),l.sortDetached=assert((function(i){return 1&i.compareDocumentPosition(O.createElement("fieldset"))})),assert((function(i){return i.innerHTML="<a href='#'></a>","#"===i.firstChild.getAttribute("href")}))||addHandle("type|href|height|width",(function(i,u,l){if(!l)return i.getAttribute(u,"type"===u.toLowerCase()?1:2)})),l.attributes&&assert((function(i){return i.innerHTML="<input/>",i.firstChild.setAttribute("value",""),""===i.firstChild.getAttribute("value")}))||addHandle("value",(function(i,u,l){if(!l&&"input"===i.nodeName.toLowerCase())return i.defaultValue})),assert((function(i){return null==i.getAttribute("disabled")}))||addHandle(ie,(function(i,u,l){var d;if(!l)return!0===i[u]?u.toLowerCase():(d=i.getAttributeNode(u))&&d.specified?d.value:null})),Sizzle}(d);jQuery.find=U,jQuery.expr=U.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.uniqueSort=jQuery.unique=U.uniqueSort,jQuery.text=U.getText,jQuery.isXMLDoc=U.isXML,jQuery.contains=U.contains,jQuery.escapeSelector=U.escape;var dir=function(i,u,l){for(var d=[],p=void 0!==l;(i=i[u])&&9!==i.nodeType;)if(1===i.nodeType){if(p&&jQuery(i).is(l))break;d.push(i)}return d},siblings=function(i,u){for(var l=[];i;i=i.nextSibling)1===i.nodeType&&i!==u&&l.push(i);return l},B=jQuery.expr.match.needsContext;function nodeName(i,u){return i.nodeName&&i.nodeName.toLowerCase()===u.toLowerCase()}var H=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function winnow(i,u,l){return D(u)?jQuery.grep(i,(function(i,d){return!!u.call(i,d,i)!==l})):u.nodeType?jQuery.grep(i,(function(i){return i===u!==l})):"string"!=typeof u?jQuery.grep(i,(function(i){return E.call(u,i)>-1!==l})):jQuery.filter(u,i,l)}jQuery.filter=function(i,u,l){var d=u[0];return l&&(i=":not("+i+")"),1===u.length&&1===d.nodeType?jQuery.find.matchesSelector(d,i)?[d]:[]:jQuery.find.matches(i,jQuery.grep(u,(function(i){return 1===i.nodeType})))},jQuery.fn.extend({find:function(i){var u,l,d=this.length,p=this;if("string"!=typeof i)return this.pushStack(jQuery(i).filter((function(){for(u=0;u<d;u++)if(jQuery.contains(p[u],this))return!0})));for(l=this.pushStack([]),u=0;u<d;u++)jQuery.find(i,p[u],l);return d>1?jQuery.uniqueSort(l):l},filter:function(i){return this.pushStack(winnow(this,i||[],!1))},not:function(i){return this.pushStack(winnow(this,i||[],!0))},is:function(i){return!!winnow(this,"string"==typeof i&&B.test(i)?jQuery(i):i||[],!1).length}});var z,Q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(jQuery.fn.init=function(i,u,l){var d,p;if(!i)return this;if(l=l||z,"string"==typeof i){if(!(d="<"===i[0]&&">"===i[i.length-1]&&i.length>=3?[null,i,null]:Q.exec(i))||!d[1]&&u)return!u||u.jquery?(u||l).find(i):this.constructor(u).find(i);if(d[1]){if(u=u instanceof jQuery?u[0]:u,jQuery.merge(this,jQuery.parseHTML(d[1],u&&u.nodeType?u.ownerDocument||u:q,!0)),H.test(d[1])&&jQuery.isPlainObject(u))for(d in u)D(this[d])?this[d](u[d]):this.attr(d,u[d]);return this}return(p=q.getElementById(d[2]))&&(this[0]=p,this.length=1),this}return i.nodeType?(this[0]=i,this.length=1,this):D(i)?void 0!==l.ready?l.ready(i):i(jQuery):jQuery.makeArray(i,this)}).prototype=jQuery.fn,z=jQuery(q);var G=/^(?:parents|prev(?:Until|All))/,Y={children:!0,contents:!0,next:!0,prev:!0};function sibling(i,u){for(;(i=i[u])&&1!==i.nodeType;);return i}jQuery.fn.extend({has:function(i){var u=jQuery(i,this),l=u.length;return this.filter((function(){for(var i=0;i<l;i++)if(jQuery.contains(this,u[i]))return!0}))},closest:function(i,u){var l,d=0,p=this.length,h=[],g="string"!=typeof i&&jQuery(i);if(!B.test(i))for(;d<p;d++)for(l=this[d];l&&l!==u;l=l.parentNode)if(l.nodeType<11&&(g?g.index(l)>-1:1===l.nodeType&&jQuery.find.matchesSelector(l,i))){h.push(l);break}return this.pushStack(h.length>1?jQuery.uniqueSort(h):h)},index:function(i){return i?"string"==typeof i?E.call(jQuery(i),this[0]):E.call(this,i.jquery?i[0]:i):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(i,u){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(i,u))))},addBack:function(i){return this.add(null==i?this.prevObject:this.prevObject.filter(i))}}),jQuery.each({parent:function(i){var u=i.parentNode;return u&&11!==u.nodeType?u:null},parents:function(i){return dir(i,"parentNode")},parentsUntil:function(i,u,l){return dir(i,"parentNode",l)},next:function(i){return sibling(i,"nextSibling")},prev:function(i){return sibling(i,"previousSibling")},nextAll:function(i){return dir(i,"nextSibling")},prevAll:function(i){return dir(i,"previousSibling")},nextUntil:function(i,u,l){return dir(i,"nextSibling",l)},prevUntil:function(i,u,l){return dir(i,"previousSibling",l)},siblings:function(i){return siblings((i.parentNode||{}).firstChild,i)},children:function(i){return siblings(i.firstChild)},contents:function(i){return null!=i.contentDocument&&g(i.contentDocument)?i.contentDocument:(nodeName(i,"template")&&(i=i.content||i),jQuery.merge([],i.childNodes))}},(function(i,u){jQuery.fn[i]=function(l,d){var p=jQuery.map(this,u,l);return"Until"!==i.slice(-5)&&(d=l),d&&"string"==typeof d&&(p=jQuery.filter(d,p)),this.length>1&&(Y[i]||jQuery.uniqueSort(p),G.test(i)&&p.reverse()),this.pushStack(p)}}));var X=/[^\x20\t\r\n\f]+/g;function Identity(i){return i}function Thrower(i){throw i}function adoptValue(i,u,l,d){var p;try{i&&D(p=i.promise)?p.call(i).done(u).fail(l):i&&D(p=i.then)?p.call(i,u,l):u.apply(void 0,[i].slice(d))}catch(i){l.apply(void 0,[i])}}jQuery.Callbacks=function(i){i="string"==typeof i?function createOptions(i){var u={};return jQuery.each(i.match(X)||[],(function(i,l){u[l]=!0})),u}(i):jQuery.extend({},i);var u,l,d,p,h=[],g=[],v=-1,fire=function(){for(p=p||i.once,d=u=!0;g.length;v=-1)for(l=g.shift();++v<h.length;)!1===h[v].apply(l[0],l[1])&&i.stopOnFalse&&(v=h.length,l=!1);i.memory||(l=!1),u=!1,p&&(h=l?[]:"")},y={add:function(){return h&&(l&&!u&&(v=h.length-1,g.push(l)),function add(u){jQuery.each(u,(function(u,l){D(l)?i.unique&&y.has(l)||h.push(l):l&&l.length&&"string"!==toType(l)&&add(l)}))}(arguments),l&&!u&&fire()),this},remove:function(){return jQuery.each(arguments,(function(i,u){for(var l;(l=jQuery.inArray(u,h,l))>-1;)h.splice(l,1),l<=v&&v--})),this},has:function(i){return i?jQuery.inArray(i,h)>-1:h.length>0},empty:function(){return h&&(h=[]),this},disable:function(){return p=g=[],h=l="",this},disabled:function(){return!h},lock:function(){return p=g=[],l||u||(h=l=""),this},locked:function(){return!!p},fireWith:function(i,l){return p||(l=[i,(l=l||[]).slice?l.slice():l],g.push(l),u||fire()),this},fire:function(){return y.fireWith(this,arguments),this},fired:function(){return!!d}};return y},jQuery.extend({Deferred:function(i){var u=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],l="pending",p={state:function(){return l},always:function(){return h.done(arguments).fail(arguments),this},catch:function(i){return p.then(null,i)},pipe:function(){var i=arguments;return jQuery.Deferred((function(l){jQuery.each(u,(function(u,d){var p=D(i[d[4]])&&i[d[4]];h[d[1]]((function(){var i=p&&p.apply(this,arguments);i&&D(i.promise)?i.promise().progress(l.notify).done(l.resolve).fail(l.reject):l[d[0]+"With"](this,p?[i]:arguments)}))})),i=null})).promise()},then:function(i,l,p){var h=0;function resolve(i,u,l,p){return function(){var g=this,v=arguments,mightThrow=function(){var d,y;if(!(i<h)){if((d=l.apply(g,v))===u.promise())throw new TypeError("Thenable self-resolution");y=d&&("object"==typeof d||"function"==typeof d)&&d.then,D(y)?p?y.call(d,resolve(h,u,Identity,p),resolve(h,u,Thrower,p)):(h++,y.call(d,resolve(h,u,Identity,p),resolve(h,u,Thrower,p),resolve(h,u,Identity,u.notifyWith))):(l!==Identity&&(g=void 0,v=[d]),(p||u.resolveWith)(g,v))}},y=p?mightThrow:function(){try{mightThrow()}catch(d){jQuery.Deferred.exceptionHook&&jQuery.Deferred.exceptionHook(d,y.stackTrace),i+1>=h&&(l!==Thrower&&(g=void 0,v=[d]),u.rejectWith(g,v))}};i?y():(jQuery.Deferred.getStackHook&&(y.stackTrace=jQuery.Deferred.getStackHook()),d.setTimeout(y))}}return jQuery.Deferred((function(d){u[0][3].add(resolve(0,d,D(p)?p:Identity,d.notifyWith)),u[1][3].add(resolve(0,d,D(i)?i:Identity)),u[2][3].add(resolve(0,d,D(l)?l:Thrower))})).promise()},promise:function(i){return null!=i?jQuery.extend(i,p):p}},h={};return jQuery.each(u,(function(i,d){var g=d[2],v=d[5];p[d[1]]=g.add,v&&g.add((function(){l=v}),u[3-i][2].disable,u[3-i][3].disable,u[0][2].lock,u[0][3].lock),g.add(d[3].fire),h[d[0]]=function(){return h[d[0]+"With"](this===h?void 0:this,arguments),this},h[d[0]+"With"]=g.fireWith})),p.promise(h),i&&i.call(h,h),h},when:function(i){var u=arguments.length,l=u,d=Array(l),p=v.call(arguments),h=jQuery.Deferred(),updateFunc=function(i){return function(l){d[i]=this,p[i]=arguments.length>1?v.call(arguments):l,--u||h.resolveWith(d,p)}};if(u<=1&&(adoptValue(i,h.done(updateFunc(l)).resolve,h.reject,!u),"pending"===h.state()||D(p[l]&&p[l].then)))return h.then();for(;l--;)adoptValue(p[l],updateFunc(l),h.reject);return h.promise()}});var ee=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(i,u){d.console&&d.console.warn&&i&&ee.test(i.name)&&d.console.warn("jQuery.Deferred exception: "+i.message,i.stack,u)},jQuery.readyException=function(i){d.setTimeout((function(){throw i}))};var te=jQuery.Deferred();function completed(){q.removeEventListener("DOMContentLoaded",completed),d.removeEventListener("load",completed),jQuery.ready()}jQuery.fn.ready=function(i){return te.then(i).catch((function(i){jQuery.readyException(i)})),this},jQuery.extend({isReady:!1,readyWait:1,ready:function(i){(!0===i?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0,!0!==i&&--jQuery.readyWait>0||te.resolveWith(q,[jQuery]))}}),jQuery.ready.then=te.then,"complete"===q.readyState||"loading"!==q.readyState&&!q.documentElement.doScroll?d.setTimeout(jQuery.ready):(q.addEventListener("DOMContentLoaded",completed),d.addEventListener("load",completed));var access=function(i,u,l,d,p,h,g){var v=0,y=i.length,S=null==l;if("object"===toType(l))for(v in p=!0,l)access(i,u,v,l[v],!0,h,g);else if(void 0!==d&&(p=!0,D(d)||(g=!0),S&&(g?(u.call(i,d),u=null):(S=u,u=function(i,u,l){return S.call(jQuery(i),l)})),u))for(;v<y;v++)u(i[v],l,g?d:d.call(i[v],v,u(i[v],l)));return p?i:S?u.call(i):y?u(i[0],l):h},ne=/^-ms-/,re=/-([a-z])/g;function fcamelCase(i,u){return u.toUpperCase()}function camelCase(i){return i.replace(ne,"ms-").replace(re,fcamelCase)}var acceptData=function(i){return 1===i.nodeType||9===i.nodeType||!+i.nodeType};function Data(){this.expando=jQuery.expando+Data.uid++}Data.uid=1,Data.prototype={cache:function(i){var u=i[this.expando];return u||(u={},acceptData(i)&&(i.nodeType?i[this.expando]=u:Object.defineProperty(i,this.expando,{value:u,configurable:!0}))),u},set:function(i,u,l){var d,p=this.cache(i);if("string"==typeof u)p[camelCase(u)]=l;else for(d in u)p[camelCase(d)]=u[d];return p},get:function(i,u){return void 0===u?this.cache(i):i[this.expando]&&i[this.expando][camelCase(u)]},access:function(i,u,l){return void 0===u||u&&"string"==typeof u&&void 0===l?this.get(i,u):(this.set(i,u,l),void 0!==l?l:u)},remove:function(i,u){var l,d=i[this.expando];if(void 0!==d){if(void 0!==u){l=(u=Array.isArray(u)?u.map(camelCase):(u=camelCase(u))in d?[u]:u.match(X)||[]).length;for(;l--;)delete d[u[l]]}(void 0===u||jQuery.isEmptyObject(d))&&(i.nodeType?i[this.expando]=void 0:delete i[this.expando])}},hasData:function(i){var u=i[this.expando];return void 0!==u&&!jQuery.isEmptyObject(u)}};var ie=new Data,ae=new Data,oe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,se=/[A-Z]/g;function dataAttr(i,u,l){var d;if(void 0===l&&1===i.nodeType)if(d="data-"+u.replace(se,"-$&").toLowerCase(),"string"==typeof(l=i.getAttribute(d))){try{l=function getData(i){return"true"===i||"false"!==i&&("null"===i?null:i===+i+""?+i:oe.test(i)?JSON.parse(i):i)}(l)}catch(i){}ae.set(i,u,l)}else l=void 0;return l}jQuery.extend({hasData:function(i){return ae.hasData(i)||ie.hasData(i)},data:function(i,u,l){return ae.access(i,u,l)},removeData:function(i,u){ae.remove(i,u)},_data:function(i,u,l){return ie.access(i,u,l)},_removeData:function(i,u){ie.remove(i,u)}}),jQuery.fn.extend({data:function(i,u){var l,d,p,h=this[0],g=h&&h.attributes;if(void 0===i){if(this.length&&(p=ae.get(h),1===h.nodeType&&!ie.get(h,"hasDataAttrs"))){for(l=g.length;l--;)g[l]&&0===(d=g[l].name).indexOf("data-")&&(d=camelCase(d.slice(5)),dataAttr(h,d,p[d]));ie.set(h,"hasDataAttrs",!0)}return p}return"object"==typeof i?this.each((function(){ae.set(this,i)})):access(this,(function(u){var l;if(h&&void 0===u)return void 0!==(l=ae.get(h,i))||void 0!==(l=dataAttr(h,i))?l:void 0;this.each((function(){ae.set(this,i,u)}))}),null,u,arguments.length>1,null,!0)},removeData:function(i){return this.each((function(){ae.remove(this,i)}))}}),jQuery.extend({queue:function(i,u,l){var d;if(i)return u=(u||"fx")+"queue",d=ie.get(i,u),l&&(!d||Array.isArray(l)?d=ie.access(i,u,jQuery.makeArray(l)):d.push(l)),d||[]},dequeue:function(i,u){u=u||"fx";var l=jQuery.queue(i,u),d=l.length,p=l.shift(),h=jQuery._queueHooks(i,u);"inprogress"===p&&(p=l.shift(),d--),p&&("fx"===u&&l.unshift("inprogress"),delete h.stop,p.call(i,(function(){jQuery.dequeue(i,u)}),h)),!d&&h&&h.empty.fire()},_queueHooks:function(i,u){var l=u+"queueHooks";return ie.get(i,l)||ie.access(i,l,{empty:jQuery.Callbacks("once memory").add((function(){ie.remove(i,[u+"queue",l])}))})}}),jQuery.fn.extend({queue:function(i,u){var l=2;return"string"!=typeof i&&(u=i,i="fx",l--),arguments.length<l?jQuery.queue(this[0],i):void 0===u?this:this.each((function(){var l=jQuery.queue(this,i,u);jQuery._queueHooks(this,i),"fx"===i&&"inprogress"!==l[0]&&jQuery.dequeue(this,i)}))},dequeue:function(i){return this.each((function(){jQuery.dequeue(this,i)}))},clearQueue:function(i){return this.queue(i||"fx",[])},promise:function(i,u){var l,d=1,p=jQuery.Deferred(),h=this,g=this.length,resolve=function(){--d||p.resolveWith(h,[h])};for("string"!=typeof i&&(u=i,i=void 0),i=i||"fx";g--;)(l=ie.get(h[g],i+"queueHooks"))&&l.empty&&(d++,l.empty.add(resolve));return resolve(),p.promise(u)}});var ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,le=new RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),ce=["Top","Right","Bottom","Left"],de=q.documentElement,isAttached=function(i){return jQuery.contains(i.ownerDocument,i)},fe={composed:!0};de.getRootNode&&(isAttached=function(i){return jQuery.contains(i.ownerDocument,i)||i.getRootNode(fe)===i.ownerDocument});var isHiddenWithinTree=function(i,u){return"none"===(i=u||i).style.display||""===i.style.display&&isAttached(i)&&"none"===jQuery.css(i,"display")};function adjustCSS(i,u,l,d){var p,h,g=20,v=d?function(){return d.cur()}:function(){return jQuery.css(i,u,"")},y=v(),S=l&&l[3]||(jQuery.cssNumber[u]?"":"px"),E=i.nodeType&&(jQuery.cssNumber[u]||"px"!==S&&+y)&&le.exec(jQuery.css(i,u));if(E&&E[3]!==S){for(y/=2,S=S||E[3],E=+y||1;g--;)jQuery.style(i,u,E+S),(1-h)*(1-(h=v()/y||.5))<=0&&(g=0),E/=h;E*=2,jQuery.style(i,u,E+S),l=l||[]}return l&&(E=+E||+y||0,p=l[1]?E+(l[1]+1)*l[2]:+l[2],d&&(d.unit=S,d.start=E,d.end=p)),p}var pe={};function getDefaultDisplay(i){var u,l=i.ownerDocument,d=i.nodeName,p=pe[d];return p||(u=l.body.appendChild(l.createElement(d)),p=jQuery.css(u,"display"),u.parentNode.removeChild(u),"none"===p&&(p="block"),pe[d]=p,p)}function showHide(i,u){for(var l,d,p=[],h=0,g=i.length;h<g;h++)(d=i[h]).style&&(l=d.style.display,u?("none"===l&&(p[h]=ie.get(d,"display")||null,p[h]||(d.style.display="")),""===d.style.display&&isHiddenWithinTree(d)&&(p[h]=getDefaultDisplay(d))):"none"!==l&&(p[h]="none",ie.set(d,"display",l)));for(h=0;h<g;h++)null!=p[h]&&(i[h].style.display=p[h]);return i}jQuery.fn.extend({show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(i){return"boolean"==typeof i?i?this.show():this.hide():this.each((function(){isHiddenWithinTree(this)?jQuery(this).show():jQuery(this).hide()}))}});var he,ge,me=/^(?:checkbox|radio)$/i,ve=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ye=/^$|^module$|\/(?:java|ecma)script/i;he=q.createDocumentFragment().appendChild(q.createElement("div")),(ge=q.createElement("input")).setAttribute("type","radio"),ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),he.appendChild(ge),P.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",P.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue,he.innerHTML="<option></option>",P.option=!!he.lastChild;var be={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function getAll(i,u){var l;return l=void 0!==i.getElementsByTagName?i.getElementsByTagName(u||"*"):void 0!==i.querySelectorAll?i.querySelectorAll(u||"*"):[],void 0===u||u&&nodeName(i,u)?jQuery.merge([i],l):l}function setGlobalEval(i,u){for(var l=0,d=i.length;l<d;l++)ie.set(i[l],"globalEval",!u||ie.get(u[l],"globalEval"))}be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,P.option||(be.optgroup=be.option=[1,"<select multiple='multiple'>","</select>"]);var _e=/<|&#?\w+;/;function buildFragment(i,u,l,d,p){for(var h,g,v,y,S,E,R=u.createDocumentFragment(),T=[],O=0,M=i.length;O<M;O++)if((h=i[O])||0===h)if("object"===toType(h))jQuery.merge(T,h.nodeType?[h]:h);else if(_e.test(h)){for(g=g||R.appendChild(u.createElement("div")),v=(ve.exec(h)||["",""])[1].toLowerCase(),y=be[v]||be._default,g.innerHTML=y[1]+jQuery.htmlPrefilter(h)+y[2],E=y[0];E--;)g=g.lastChild;jQuery.merge(T,g.childNodes),(g=R.firstChild).textContent=""}else T.push(u.createTextNode(h));for(R.textContent="",O=0;h=T[O++];)if(d&&jQuery.inArray(h,d)>-1)p&&p.push(h);else if(S=isAttached(h),g=getAll(R.appendChild(h),"script"),S&&setGlobalEval(g),l)for(E=0;h=g[E++];)ye.test(h.type||"")&&l.push(h);return R}var Se=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return!0}function returnFalse(){return!1}function expectSync(i,u){return i===function safeActiveElement(){try{return q.activeElement}catch(i){}}()==("focus"===u)}function on(i,u,l,d,p,h){var g,v;if("object"==typeof u){for(v in"string"!=typeof l&&(d=d||l,l=void 0),u)on(i,v,l,d,u[v],h);return i}if(null==d&&null==p?(p=l,d=l=void 0):null==p&&("string"==typeof l?(p=d,d=void 0):(p=d,d=l,l=void 0)),!1===p)p=returnFalse;else if(!p)return i;return 1===h&&(g=p,p=function(i){return jQuery().off(i),g.apply(this,arguments)},p.guid=g.guid||(g.guid=jQuery.guid++)),i.each((function(){jQuery.event.add(this,u,p,d,l)}))}function leverageNative(i,u,l){l?(ie.set(i,u,!1),jQuery.event.add(i,u,{namespace:!1,handler:function(i){var d,p,h=ie.get(this,u);if(1&i.isTrigger&&this[u]){if(h.length)(jQuery.event.special[u]||{}).delegateType&&i.stopPropagation();else if(h=v.call(arguments),ie.set(this,u,h),d=l(this,u),this[u](),h!==(p=ie.get(this,u))||d?ie.set(this,u,!1):p={},h!==p)return i.stopImmediatePropagation(),i.preventDefault(),p&&p.value}else h.length&&(ie.set(this,u,{value:jQuery.event.trigger(jQuery.extend(h[0],jQuery.Event.prototype),h.slice(1),this)}),i.stopImmediatePropagation())}})):void 0===ie.get(i,u)&&jQuery.event.add(i,u,returnTrue)}jQuery.event={global:{},add:function(i,u,l,d,p){var h,g,v,y,S,E,R,T,O,M,I,P=ie.get(i);if(acceptData(i))for(l.handler&&(l=(h=l).handler,p=h.selector),p&&jQuery.find.matchesSelector(de,p),l.guid||(l.guid=jQuery.guid++),(y=P.events)||(y=P.events=Object.create(null)),(g=P.handle)||(g=P.handle=function(u){return void 0!==jQuery&&jQuery.event.triggered!==u.type?jQuery.event.dispatch.apply(i,arguments):void 0}),S=(u=(u||"").match(X)||[""]).length;S--;)O=I=(v=Se.exec(u[S])||[])[1],M=(v[2]||"").split(".").sort(),O&&(R=jQuery.event.special[O]||{},O=(p?R.delegateType:R.bindType)||O,R=jQuery.event.special[O]||{},E=jQuery.extend({type:O,origType:I,data:d,handler:l,guid:l.guid,selector:p,needsContext:p&&jQuery.expr.match.needsContext.test(p),namespace:M.join(".")},h),(T=y[O])||((T=y[O]=[]).delegateCount=0,R.setup&&!1!==R.setup.call(i,d,M,g)||i.addEventListener&&i.addEventListener(O,g)),R.add&&(R.add.call(i,E),E.handler.guid||(E.handler.guid=l.guid)),p?T.splice(T.delegateCount++,0,E):T.push(E),jQuery.event.global[O]=!0)},remove:function(i,u,l,d,p){var h,g,v,y,S,E,R,T,O,M,I,P=ie.hasData(i)&&ie.get(i);if(P&&(y=P.events)){for(S=(u=(u||"").match(X)||[""]).length;S--;)if(O=I=(v=Se.exec(u[S])||[])[1],M=(v[2]||"").split(".").sort(),O){for(R=jQuery.event.special[O]||{},T=y[O=(d?R.delegateType:R.bindType)||O]||[],v=v[2]&&new RegExp("(^|\\.)"+M.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=h=T.length;h--;)E=T[h],!p&&I!==E.origType||l&&l.guid!==E.guid||v&&!v.test(E.namespace)||d&&d!==E.selector&&("**"!==d||!E.selector)||(T.splice(h,1),E.selector&&T.delegateCount--,R.remove&&R.remove.call(i,E));g&&!T.length&&(R.teardown&&!1!==R.teardown.call(i,M,P.handle)||jQuery.removeEvent(i,O,P.handle),delete y[O])}else for(O in y)jQuery.event.remove(i,O+u[S],l,d,!0);jQuery.isEmptyObject(y)&&ie.remove(i,"handle events")}},dispatch:function(i){var u,l,d,p,h,g,v=new Array(arguments.length),y=jQuery.event.fix(i),S=(ie.get(this,"events")||Object.create(null))[y.type]||[],E=jQuery.event.special[y.type]||{};for(v[0]=y,u=1;u<arguments.length;u++)v[u]=arguments[u];if(y.delegateTarget=this,!E.preDispatch||!1!==E.preDispatch.call(this,y)){for(g=jQuery.event.handlers.call(this,y,S),u=0;(p=g[u++])&&!y.isPropagationStopped();)for(y.currentTarget=p.elem,l=0;(h=p.handlers[l++])&&!y.isImmediatePropagationStopped();)y.rnamespace&&!1!==h.namespace&&!y.rnamespace.test(h.namespace)||(y.handleObj=h,y.data=h.data,void 0!==(d=((jQuery.event.special[h.origType]||{}).handle||h.handler).apply(p.elem,v))&&!1===(y.result=d)&&(y.preventDefault(),y.stopPropagation()));return E.postDispatch&&E.postDispatch.call(this,y),y.result}},handlers:function(i,u){var l,d,p,h,g,v=[],y=u.delegateCount,S=i.target;if(y&&S.nodeType&&!("click"===i.type&&i.button>=1))for(;S!==this;S=S.parentNode||this)if(1===S.nodeType&&("click"!==i.type||!0!==S.disabled)){for(h=[],g={},l=0;l<y;l++)void 0===g[p=(d=u[l]).selector+" "]&&(g[p]=d.needsContext?jQuery(p,this).index(S)>-1:jQuery.find(p,this,null,[S]).length),g[p]&&h.push(d);h.length&&v.push({elem:S,handlers:h})}return S=this,y<u.length&&v.push({elem:S,handlers:u.slice(y)}),v},addProp:function(i,u){Object.defineProperty(jQuery.Event.prototype,i,{enumerable:!0,configurable:!0,get:D(u)?function(){if(this.originalEvent)return u(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[i]},set:function(u){Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(i){return i[jQuery.expando]?i:new jQuery.Event(i)},special:{load:{noBubble:!0},click:{setup:function(i){var u=this||i;return me.test(u.type)&&u.click&&nodeName(u,"input")&&leverageNative(u,"click",returnTrue),!1},trigger:function(i){var u=this||i;return me.test(u.type)&&u.click&&nodeName(u,"input")&&leverageNative(u,"click"),!0},_default:function(i){var u=i.target;return me.test(u.type)&&u.click&&nodeName(u,"input")&&ie.get(u,"click")||nodeName(u,"a")}},beforeunload:{postDispatch:function(i){void 0!==i.result&&i.originalEvent&&(i.originalEvent.returnValue=i.result)}}}},jQuery.removeEvent=function(i,u,l){i.removeEventListener&&i.removeEventListener(u,l)},jQuery.Event=function(i,u){if(!(this instanceof jQuery.Event))return new jQuery.Event(i,u);i&&i.type?(this.originalEvent=i,this.type=i.type,this.isDefaultPrevented=i.defaultPrevented||void 0===i.defaultPrevented&&!1===i.returnValue?returnTrue:returnFalse,this.target=i.target&&3===i.target.nodeType?i.target.parentNode:i.target,this.currentTarget=i.currentTarget,this.relatedTarget=i.relatedTarget):this.type=i,u&&jQuery.extend(this,u),this.timeStamp=i&&i.timeStamp||Date.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:!1,preventDefault:function(){var i=this.originalEvent;this.isDefaultPrevented=returnTrue,i&&!this.isSimulated&&i.preventDefault()},stopPropagation:function(){var i=this.originalEvent;this.isPropagationStopped=returnTrue,i&&!this.isSimulated&&i.stopPropagation()},stopImmediatePropagation:function(){var i=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,i&&!this.isSimulated&&i.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},jQuery.event.addProp),jQuery.each({focus:"focusin",blur:"focusout"},(function(i,u){jQuery.event.special[i]={setup:function(){return leverageNative(this,i,expectSync),!1},trigger:function(){return leverageNative(this,i),!0},_default:function(){return!0},delegateType:u}})),jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(i,u){jQuery.event.special[i]={delegateType:u,bindType:u,handle:function(i){var l,d=this,p=i.relatedTarget,h=i.handleObj;return p&&(p===d||jQuery.contains(d,p))||(i.type=h.origType,l=h.handler.apply(this,arguments),i.type=u),l}}})),jQuery.fn.extend({on:function(i,u,l,d){return on(this,i,u,l,d)},one:function(i,u,l,d){return on(this,i,u,l,d,1)},off:function(i,u,l){var d,p;if(i&&i.preventDefault&&i.handleObj)return d=i.handleObj,jQuery(i.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof i){for(p in i)this.off(p,u,i[p]);return this}return!1!==u&&"function"!=typeof u||(l=u,u=void 0),!1===l&&(l=returnFalse),this.each((function(){jQuery.event.remove(this,i,l,u)}))}});var Ee=/<script|<style|<link/i,we=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(i,u){return nodeName(i,"table")&&nodeName(11!==u.nodeType?u:u.firstChild,"tr")&&jQuery(i).children("tbody")[0]||i}function disableScript(i){return i.type=(null!==i.getAttribute("type"))+"/"+i.type,i}function restoreScript(i){return"true/"===(i.type||"").slice(0,5)?i.type=i.type.slice(5):i.removeAttribute("type"),i}function cloneCopyEvent(i,u){var l,d,p,h,g,v;if(1===u.nodeType){if(ie.hasData(i)&&(v=ie.get(i).events))for(p in ie.remove(u,"handle events"),v)for(l=0,d=v[p].length;l<d;l++)jQuery.event.add(u,p,v[p][l]);ae.hasData(i)&&(h=ae.access(i),g=jQuery.extend({},h),ae.set(u,g))}}function fixInput(i,u){var l=u.nodeName.toLowerCase();"input"===l&&me.test(i.type)?u.checked=i.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=i.defaultValue)}function domManip(i,u,l,d){u=y(u);var p,h,g,v,S,E,R=0,T=i.length,O=T-1,M=u[0],I=D(M);if(I||T>1&&"string"==typeof M&&!P.checkClone&&we.test(M))return i.each((function(p){var h=i.eq(p);I&&(u[0]=M.call(this,p,h.html())),domManip(h,u,l,d)}));if(T&&(h=(p=buildFragment(u,i[0].ownerDocument,!1,i,d)).firstChild,1===p.childNodes.length&&(p=h),h||d)){for(v=(g=jQuery.map(getAll(p,"script"),disableScript)).length;R<T;R++)S=p,R!==O&&(S=jQuery.clone(S,!0,!0),v&&jQuery.merge(g,getAll(S,"script"))),l.call(i[R],S,R);if(v)for(E=g[g.length-1].ownerDocument,jQuery.map(g,restoreScript),R=0;R<v;R++)S=g[R],ye.test(S.type||"")&&!ie.access(S,"globalEval")&&jQuery.contains(E,S)&&(S.src&&"module"!==(S.type||"").toLowerCase()?jQuery._evalUrl&&!S.noModule&&jQuery._evalUrl(S.src,{nonce:S.nonce||S.getAttribute("nonce")},E):DOMEval(S.textContent.replace(Re,""),S,E))}return i}function remove(i,u,l){for(var d,p=u?jQuery.filter(u,i):i,h=0;null!=(d=p[h]);h++)l||1!==d.nodeType||jQuery.cleanData(getAll(d)),d.parentNode&&(l&&isAttached(d)&&setGlobalEval(getAll(d,"script")),d.parentNode.removeChild(d));return i}jQuery.extend({htmlPrefilter:function(i){return i},clone:function(i,u,l){var d,p,h,g,v=i.cloneNode(!0),y=isAttached(i);if(!(P.noCloneChecked||1!==i.nodeType&&11!==i.nodeType||jQuery.isXMLDoc(i)))for(g=getAll(v),d=0,p=(h=getAll(i)).length;d<p;d++)fixInput(h[d],g[d]);if(u)if(l)for(h=h||getAll(i),g=g||getAll(v),d=0,p=h.length;d<p;d++)cloneCopyEvent(h[d],g[d]);else cloneCopyEvent(i,v);return(g=getAll(v,"script")).length>0&&setGlobalEval(g,!y&&getAll(i,"script")),v},cleanData:function(i){for(var u,l,d,p=jQuery.event.special,h=0;void 0!==(l=i[h]);h++)if(acceptData(l)){if(u=l[ie.expando]){if(u.events)for(d in u.events)p[d]?jQuery.event.remove(l,d):jQuery.removeEvent(l,d,u.handle);l[ie.expando]=void 0}l[ae.expando]&&(l[ae.expando]=void 0)}}}),jQuery.fn.extend({detach:function(i){return remove(this,i,!0)},remove:function(i){return remove(this,i)},text:function(i){return access(this,(function(i){return void 0===i?jQuery.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=i)}))}),null,i,arguments.length)},append:function(){return domManip(this,arguments,(function(i){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||manipulationTarget(this,i).appendChild(i)}))},prepend:function(){return domManip(this,arguments,(function(i){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var u=manipulationTarget(this,i);u.insertBefore(i,u.firstChild)}}))},before:function(){return domManip(this,arguments,(function(i){this.parentNode&&this.parentNode.insertBefore(i,this)}))},after:function(){return domManip(this,arguments,(function(i){this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling)}))},empty:function(){for(var i,u=0;null!=(i=this[u]);u++)1===i.nodeType&&(jQuery.cleanData(getAll(i,!1)),i.textContent="");return this},clone:function(i,u){return i=null!=i&&i,u=null==u?i:u,this.map((function(){return jQuery.clone(this,i,u)}))},html:function(i){return access(this,(function(i){var u=this[0]||{},l=0,d=this.length;if(void 0===i&&1===u.nodeType)return u.innerHTML;if("string"==typeof i&&!Ee.test(i)&&!be[(ve.exec(i)||["",""])[1].toLowerCase()]){i=jQuery.htmlPrefilter(i);try{for(;l<d;l++)1===(u=this[l]||{}).nodeType&&(jQuery.cleanData(getAll(u,!1)),u.innerHTML=i);u=0}catch(i){}}u&&this.empty().append(i)}),null,i,arguments.length)},replaceWith:function(){var i=[];return domManip(this,arguments,(function(u){var l=this.parentNode;jQuery.inArray(this,i)<0&&(jQuery.cleanData(getAll(this)),l&&l.replaceChild(u,this))}),i)}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(i,u){jQuery.fn[i]=function(i){for(var l,d=[],p=jQuery(i),h=p.length-1,g=0;g<=h;g++)l=g===h?this:this.clone(!0),jQuery(p[g])[u](l),S.apply(d,l.get());return this.pushStack(d)}}));var Ae=new RegExp("^("+ue+")(?!px)[a-z%]+$","i"),getStyles=function(i){var u=i.ownerDocument.defaultView;return u&&u.opener||(u=d),u.getComputedStyle(i)},swap=function(i,u,l){var d,p,h={};for(p in u)h[p]=i.style[p],i.style[p]=u[p];for(p in d=l.call(i),u)i.style[p]=h[p];return d},Te=new RegExp(ce.join("|"),"i");function curCSS(i,u,l){var d,p,h,g,v=i.style;return(l=l||getStyles(i))&&(""!==(g=l.getPropertyValue(u)||l[u])||isAttached(i)||(g=jQuery.style(i,u)),!P.pixelBoxStyles()&&Ae.test(g)&&Te.test(u)&&(d=v.width,p=v.minWidth,h=v.maxWidth,v.minWidth=v.maxWidth=v.width=g,g=l.width,v.width=d,v.minWidth=p,v.maxWidth=h)),void 0!==g?g+"":g}function addGetHookIf(i,u){return{get:function(){if(!i())return(this.get=u).apply(this,arguments);delete this.get}}}!function(){function computeStyleTests(){if(y){v.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",y.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",de.appendChild(v).appendChild(y);var h=d.getComputedStyle(y);i="1%"!==h.top,g=12===roundPixelMeasures(h.marginLeft),y.style.right="60%",p=36===roundPixelMeasures(h.right),u=36===roundPixelMeasures(h.width),y.style.position="absolute",l=12===roundPixelMeasures(y.offsetWidth/3),de.removeChild(v),y=null}}function roundPixelMeasures(i){return Math.round(parseFloat(i))}var i,u,l,p,h,g,v=q.createElement("div"),y=q.createElement("div");y.style&&(y.style.backgroundClip="content-box",y.cloneNode(!0).style.backgroundClip="",P.clearCloneStyle="content-box"===y.style.backgroundClip,jQuery.extend(P,{boxSizingReliable:function(){return computeStyleTests(),u},pixelBoxStyles:function(){return computeStyleTests(),p},pixelPosition:function(){return computeStyleTests(),i},reliableMarginLeft:function(){return computeStyleTests(),g},scrollboxSize:function(){return computeStyleTests(),l},reliableTrDimensions:function(){var i,u,l,p;return null==h&&(i=q.createElement("table"),u=q.createElement("tr"),l=q.createElement("div"),i.style.cssText="position:absolute;left:-11111px;border-collapse:separate",u.style.cssText="border:1px solid",u.style.height="1px",l.style.height="9px",l.style.display="block",de.appendChild(i).appendChild(u).appendChild(l),p=d.getComputedStyle(u),h=parseInt(p.height,10)+parseInt(p.borderTopWidth,10)+parseInt(p.borderBottomWidth,10)===u.offsetHeight,de.removeChild(i)),h}}))}();var xe=["Webkit","Moz","ms"],Ce=q.createElement("div").style,Oe={};function finalPropName(i){var u=jQuery.cssProps[i]||Oe[i];return u||(i in Ce?i:Oe[i]=function vendorPropName(i){for(var u=i[0].toUpperCase()+i.slice(1),l=xe.length;l--;)if((i=xe[l]+u)in Ce)return i}(i)||i)}var Me=/^(none|table(?!-c[ea]).+)/,Ie=/^--/,Pe={position:"absolute",visibility:"hidden",display:"block"},ke={letterSpacing:"0",fontWeight:"400"};function setPositiveNumber(i,u,l){var d=le.exec(u);return d?Math.max(0,d[2]-(l||0))+(d[3]||"px"):u}function boxModelAdjustment(i,u,l,d,p,h){var g="width"===u?1:0,v=0,y=0;if(l===(d?"border":"content"))return 0;for(;g<4;g+=2)"margin"===l&&(y+=jQuery.css(i,l+ce[g],!0,p)),d?("content"===l&&(y-=jQuery.css(i,"padding"+ce[g],!0,p)),"margin"!==l&&(y-=jQuery.css(i,"border"+ce[g]+"Width",!0,p))):(y+=jQuery.css(i,"padding"+ce[g],!0,p),"padding"!==l?y+=jQuery.css(i,"border"+ce[g]+"Width",!0,p):v+=jQuery.css(i,"border"+ce[g]+"Width",!0,p));return!d&&h>=0&&(y+=Math.max(0,Math.ceil(i["offset"+u[0].toUpperCase()+u.slice(1)]-h-y-v-.5))||0),y}function getWidthOrHeight(i,u,l){var d=getStyles(i),p=(!P.boxSizingReliable()||l)&&"border-box"===jQuery.css(i,"boxSizing",!1,d),h=p,g=curCSS(i,u,d),v="offset"+u[0].toUpperCase()+u.slice(1);if(Ae.test(g)){if(!l)return g;g="auto"}return(!P.boxSizingReliable()&&p||!P.reliableTrDimensions()&&nodeName(i,"tr")||"auto"===g||!parseFloat(g)&&"inline"===jQuery.css(i,"display",!1,d))&&i.getClientRects().length&&(p="border-box"===jQuery.css(i,"boxSizing",!1,d),(h=v in i)&&(g=i[v])),(g=parseFloat(g)||0)+boxModelAdjustment(i,u,l||(p?"border":"content"),h,d,g)+"px"}function Tween(i,u,l,d,p){return new Tween.prototype.init(i,u,l,d,p)}jQuery.extend({cssHooks:{opacity:{get:function(i,u){if(u){var l=curCSS(i,"opacity");return""===l?"1":l}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(i,u,l,d){if(i&&3!==i.nodeType&&8!==i.nodeType&&i.style){var p,h,g,v=camelCase(u),y=Ie.test(u),S=i.style;if(y||(u=finalPropName(v)),g=jQuery.cssHooks[u]||jQuery.cssHooks[v],void 0===l)return g&&"get"in g&&void 0!==(p=g.get(i,!1,d))?p:S[u];"string"===(h=typeof l)&&(p=le.exec(l))&&p[1]&&(l=adjustCSS(i,u,p),h="number"),null!=l&&l==l&&("number"!==h||y||(l+=p&&p[3]||(jQuery.cssNumber[v]?"":"px")),P.clearCloneStyle||""!==l||0!==u.indexOf("background")||(S[u]="inherit"),g&&"set"in g&&void 0===(l=g.set(i,l,d))||(y?S.setProperty(u,l):S[u]=l))}},css:function(i,u,l,d){var p,h,g,v=camelCase(u);return Ie.test(u)||(u=finalPropName(v)),(g=jQuery.cssHooks[u]||jQuery.cssHooks[v])&&"get"in g&&(p=g.get(i,!0,l)),void 0===p&&(p=curCSS(i,u,d)),"normal"===p&&u in ke&&(p=ke[u]),""===l||l?(h=parseFloat(p),!0===l||isFinite(h)?h||0:p):p}}),jQuery.each(["height","width"],(function(i,u){jQuery.cssHooks[u]={get:function(i,l,d){if(l)return!Me.test(jQuery.css(i,"display"))||i.getClientRects().length&&i.getBoundingClientRect().width?getWidthOrHeight(i,u,d):swap(i,Pe,(function(){return getWidthOrHeight(i,u,d)}))},set:function(i,l,d){var p,h=getStyles(i),g=!P.scrollboxSize()&&"absolute"===h.position,v=(g||d)&&"border-box"===jQuery.css(i,"boxSizing",!1,h),y=d?boxModelAdjustment(i,u,d,v,h):0;return v&&g&&(y-=Math.ceil(i["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(h[u])-boxModelAdjustment(i,u,"border",!1,h)-.5)),y&&(p=le.exec(l))&&"px"!==(p[3]||"px")&&(i.style[u]=l,l=jQuery.css(i,u)),setPositiveNumber(0,l,y)}}})),jQuery.cssHooks.marginLeft=addGetHookIf(P.reliableMarginLeft,(function(i,u){if(u)return(parseFloat(curCSS(i,"marginLeft"))||i.getBoundingClientRect().left-swap(i,{marginLeft:0},(function(){return i.getBoundingClientRect().left})))+"px"})),jQuery.each({margin:"",padding:"",border:"Width"},(function(i,u){jQuery.cssHooks[i+u]={expand:function(l){for(var d=0,p={},h="string"==typeof l?l.split(" "):[l];d<4;d++)p[i+ce[d]+u]=h[d]||h[d-2]||h[0];return p}},"margin"!==i&&(jQuery.cssHooks[i+u].set=setPositiveNumber)})),jQuery.fn.extend({css:function(i,u){return access(this,(function(i,u,l){var d,p,h={},g=0;if(Array.isArray(u)){for(d=getStyles(i),p=u.length;g<p;g++)h[u[g]]=jQuery.css(i,u[g],!1,d);return h}return void 0!==l?jQuery.style(i,u,l):jQuery.css(i,u)}),i,u,arguments.length>1)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(i,u,l,d,p,h){this.elem=i,this.prop=l,this.easing=p||jQuery.easing._default,this.options=u,this.start=this.now=this.cur(),this.end=d,this.unit=h||(jQuery.cssNumber[l]?"":"px")},cur:function(){var i=Tween.propHooks[this.prop];return i&&i.get?i.get(this):Tween.propHooks._default.get(this)},run:function(i){var u,l=Tween.propHooks[this.prop];return this.options.duration?this.pos=u=jQuery.easing[this.easing](i,this.options.duration*i,0,1,this.options.duration):this.pos=u=i,this.now=(this.end-this.start)*u+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),l&&l.set?l.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(i){var u;return 1!==i.elem.nodeType||null!=i.elem[i.prop]&&null==i.elem.style[i.prop]?i.elem[i.prop]:(u=jQuery.css(i.elem,i.prop,""))&&"auto"!==u?u:0},set:function(i){jQuery.fx.step[i.prop]?jQuery.fx.step[i.prop](i):1!==i.elem.nodeType||!jQuery.cssHooks[i.prop]&&null==i.elem.style[finalPropName(i.prop)]?i.elem[i.prop]=i.now:jQuery.style(i.elem,i.prop,i.now+i.unit)}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(i){i.elem.nodeType&&i.elem.parentNode&&(i.elem[i.prop]=i.now)}},jQuery.easing={linear:function(i){return i},swing:function(i){return.5-Math.cos(i*Math.PI)/2},_default:"swing"},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var De,Ne,qe=/^(?:toggle|show|hide)$/,Le=/queueHooks$/;function schedule(){Ne&&(!1===q.hidden&&d.requestAnimationFrame?d.requestAnimationFrame(schedule):d.setTimeout(schedule,jQuery.fx.interval),jQuery.fx.tick())}function createFxNow(){return d.setTimeout((function(){De=void 0})),De=Date.now()}function genFx(i,u){var l,d=0,p={height:i};for(u=u?1:0;d<4;d+=2-u)p["margin"+(l=ce[d])]=p["padding"+l]=i;return u&&(p.opacity=p.width=i),p}function createTween(i,u,l){for(var d,p=(Animation.tweeners[u]||[]).concat(Animation.tweeners["*"]),h=0,g=p.length;h<g;h++)if(d=p[h].call(l,u,i))return d}function Animation(i,u,l){var d,p,h=0,g=Animation.prefilters.length,v=jQuery.Deferred().always((function(){delete tick.elem})),tick=function(){if(p)return!1;for(var u=De||createFxNow(),l=Math.max(0,y.startTime+y.duration-u),d=1-(l/y.duration||0),h=0,g=y.tweens.length;h<g;h++)y.tweens[h].run(d);return v.notifyWith(i,[y,d,l]),d<1&&g?l:(g||v.notifyWith(i,[y,1,0]),v.resolveWith(i,[y]),!1)},y=v.promise({elem:i,props:jQuery.extend({},u),opts:jQuery.extend(!0,{specialEasing:{},easing:jQuery.easing._default},l),originalProperties:u,originalOptions:l,startTime:De||createFxNow(),duration:l.duration,tweens:[],createTween:function(u,l){var d=jQuery.Tween(i,y.opts,u,l,y.opts.specialEasing[u]||y.opts.easing);return y.tweens.push(d),d},stop:function(u){var l=0,d=u?y.tweens.length:0;if(p)return this;for(p=!0;l<d;l++)y.tweens[l].run(1);return u?(v.notifyWith(i,[y,1,0]),v.resolveWith(i,[y,u])):v.rejectWith(i,[y,u]),this}}),S=y.props;for(!function propFilter(i,u){var l,d,p,h,g;for(l in i)if(p=u[d=camelCase(l)],h=i[l],Array.isArray(h)&&(p=h[1],h=i[l]=h[0]),l!==d&&(i[d]=h,delete i[l]),(g=jQuery.cssHooks[d])&&"expand"in g)for(l in h=g.expand(h),delete i[d],h)l in i||(i[l]=h[l],u[l]=p);else u[d]=p}(S,y.opts.specialEasing);h<g;h++)if(d=Animation.prefilters[h].call(y,i,S,y.opts))return D(d.stop)&&(jQuery._queueHooks(y.elem,y.opts.queue).stop=d.stop.bind(d)),d;return jQuery.map(S,createTween,y),D(y.opts.start)&&y.opts.start.call(i,y),y.progress(y.opts.progress).done(y.opts.done,y.opts.complete).fail(y.opts.fail).always(y.opts.always),jQuery.fx.timer(jQuery.extend(tick,{elem:i,anim:y,queue:y.opts.queue})),y}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(i,u){var l=this.createTween(i,u);return adjustCSS(l.elem,i,le.exec(u),l),l}]},tweener:function(i,u){D(i)?(u=i,i=["*"]):i=i.match(X);for(var l,d=0,p=i.length;d<p;d++)l=i[d],Animation.tweeners[l]=Animation.tweeners[l]||[],Animation.tweeners[l].unshift(u)},prefilters:[function defaultPrefilter(i,u,l){var d,p,h,g,v,y,S,E,R="width"in u||"height"in u,T=this,O={},M=i.style,I=i.nodeType&&isHiddenWithinTree(i),P=ie.get(i,"fxshow");for(d in l.queue||(null==(g=jQuery._queueHooks(i,"fx")).unqueued&&(g.unqueued=0,v=g.empty.fire,g.empty.fire=function(){g.unqueued||v()}),g.unqueued++,T.always((function(){T.always((function(){g.unqueued--,jQuery.queue(i,"fx").length||g.empty.fire()}))}))),u)if(p=u[d],qe.test(p)){if(delete u[d],h=h||"toggle"===p,p===(I?"hide":"show")){if("show"!==p||!P||void 0===P[d])continue;I=!0}O[d]=P&&P[d]||jQuery.style(i,d)}if((y=!jQuery.isEmptyObject(u))||!jQuery.isEmptyObject(O))for(d in R&&1===i.nodeType&&(l.overflow=[M.overflow,M.overflowX,M.overflowY],null==(S=P&&P.display)&&(S=ie.get(i,"display")),"none"===(E=jQuery.css(i,"display"))&&(S?E=S:(showHide([i],!0),S=i.style.display||S,E=jQuery.css(i,"display"),showHide([i]))),("inline"===E||"inline-block"===E&&null!=S)&&"none"===jQuery.css(i,"float")&&(y||(T.done((function(){M.display=S})),null==S&&(E=M.display,S="none"===E?"":E)),M.display="inline-block")),l.overflow&&(M.overflow="hidden",T.always((function(){M.overflow=l.overflow[0],M.overflowX=l.overflow[1],M.overflowY=l.overflow[2]}))),y=!1,O)y||(P?"hidden"in P&&(I=P.hidden):P=ie.access(i,"fxshow",{display:S}),h&&(P.hidden=!I),I&&showHide([i],!0),T.done((function(){for(d in I||showHide([i]),ie.remove(i,"fxshow"),O)jQuery.style(i,d,O[d])}))),y=createTween(I?P[d]:0,d,T),d in P||(P[d]=y.start,I&&(y.end=y.start,y.start=0))}],prefilter:function(i,u){u?Animation.prefilters.unshift(i):Animation.prefilters.push(i)}}),jQuery.speed=function(i,u,l){var d=i&&"object"==typeof i?jQuery.extend({},i):{complete:l||!l&&u||D(i)&&i,duration:i,easing:l&&u||u&&!D(u)&&u};return jQuery.fx.off?d.duration=0:"number"!=typeof d.duration&&(d.duration in jQuery.fx.speeds?d.duration=jQuery.fx.speeds[d.duration]:d.duration=jQuery.fx.speeds._default),null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){D(d.old)&&d.old.call(this),d.queue&&jQuery.dequeue(this,d.queue)},d},jQuery.fn.extend({fadeTo:function(i,u,l,d){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:u},i,l,d)},animate:function(i,u,l,d){var p=jQuery.isEmptyObject(i),h=jQuery.speed(u,l,d),doAnimation=function(){var u=Animation(this,jQuery.extend({},i),h);(p||ie.get(this,"finish"))&&u.stop(!0)};return doAnimation.finish=doAnimation,p||!1===h.queue?this.each(doAnimation):this.queue(h.queue,doAnimation)},stop:function(i,u,l){var stopQueue=function(i){var u=i.stop;delete i.stop,u(l)};return"string"!=typeof i&&(l=u,u=i,i=void 0),u&&this.queue(i||"fx",[]),this.each((function(){var u=!0,d=null!=i&&i+"queueHooks",p=jQuery.timers,h=ie.get(this);if(d)h[d]&&h[d].stop&&stopQueue(h[d]);else for(d in h)h[d]&&h[d].stop&&Le.test(d)&&stopQueue(h[d]);for(d=p.length;d--;)p[d].elem!==this||null!=i&&p[d].queue!==i||(p[d].anim.stop(l),u=!1,p.splice(d,1));!u&&l||jQuery.dequeue(this,i)}))},finish:function(i){return!1!==i&&(i=i||"fx"),this.each((function(){var u,l=ie.get(this),d=l[i+"queue"],p=l[i+"queueHooks"],h=jQuery.timers,g=d?d.length:0;for(l.finish=!0,jQuery.queue(this,i,[]),p&&p.stop&&p.stop.call(this,!0),u=h.length;u--;)h[u].elem===this&&h[u].queue===i&&(h[u].anim.stop(!0),h.splice(u,1));for(u=0;u<g;u++)d[u]&&d[u].finish&&d[u].finish.call(this);delete l.finish}))}}),jQuery.each(["toggle","show","hide"],(function(i,u){var l=jQuery.fn[u];jQuery.fn[u]=function(i,d,p){return null==i||"boolean"==typeof i?l.apply(this,arguments):this.animate(genFx(u,!0),i,d,p)}})),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(i,u){jQuery.fn[i]=function(i,l,d){return this.animate(u,i,l,d)}})),jQuery.timers=[],jQuery.fx.tick=function(){var i,u=0,l=jQuery.timers;for(De=Date.now();u<l.length;u++)(i=l[u])()||l[u]!==i||l.splice(u--,1);l.length||jQuery.fx.stop(),De=void 0},jQuery.fx.timer=function(i){jQuery.timers.push(i),jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){Ne||(Ne=!0,schedule())},jQuery.fx.stop=function(){Ne=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(i,u){return i=jQuery.fx&&jQuery.fx.speeds[i]||i,u=u||"fx",this.queue(u,(function(u,l){var p=d.setTimeout(u,i);l.stop=function(){d.clearTimeout(p)}}))},function(){var i=q.createElement("input"),u=q.createElement("select").appendChild(q.createElement("option"));i.type="checkbox",P.checkOn=""!==i.value,P.optSelected=u.selected,(i=q.createElement("input")).value="t",i.type="radio",P.radioValue="t"===i.value}();var Fe,je=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(i,u){return access(this,jQuery.attr,i,u,arguments.length>1)},removeAttr:function(i){return this.each((function(){jQuery.removeAttr(this,i)}))}}),jQuery.extend({attr:function(i,u,l){var d,p,h=i.nodeType;if(3!==h&&8!==h&&2!==h)return void 0===i.getAttribute?jQuery.prop(i,u,l):(1===h&&jQuery.isXMLDoc(i)||(p=jQuery.attrHooks[u.toLowerCase()]||(jQuery.expr.match.bool.test(u)?Fe:void 0)),void 0!==l?null===l?void jQuery.removeAttr(i,u):p&&"set"in p&&void 0!==(d=p.set(i,l,u))?d:(i.setAttribute(u,l+""),l):p&&"get"in p&&null!==(d=p.get(i,u))?d:null==(d=jQuery.find.attr(i,u))?void 0:d)},attrHooks:{type:{set:function(i,u){if(!P.radioValue&&"radio"===u&&nodeName(i,"input")){var l=i.value;return i.setAttribute("type",u),l&&(i.value=l),u}}}},removeAttr:function(i,u){var l,d=0,p=u&&u.match(X);if(p&&1===i.nodeType)for(;l=p[d++];)i.removeAttribute(l)}}),Fe={set:function(i,u,l){return!1===u?jQuery.removeAttr(i,l):i.setAttribute(l,l),l}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),(function(i,u){var l=je[u]||jQuery.find.attr;je[u]=function(i,u,d){var p,h,g=u.toLowerCase();return d||(h=je[g],je[g]=p,p=null!=l(i,u,d)?g:null,je[g]=h),p}}));var Ve=/^(?:input|select|textarea|button)$/i,Ue=/^(?:a|area)$/i;function stripAndCollapse(i){return(i.match(X)||[]).join(" ")}function getClass(i){return i.getAttribute&&i.getAttribute("class")||""}function classesToArray(i){return Array.isArray(i)?i:"string"==typeof i&&i.match(X)||[]}jQuery.fn.extend({prop:function(i,u){return access(this,jQuery.prop,i,u,arguments.length>1)},removeProp:function(i){return this.each((function(){delete this[jQuery.propFix[i]||i]}))}}),jQuery.extend({prop:function(i,u,l){var d,p,h=i.nodeType;if(3!==h&&8!==h&&2!==h)return 1===h&&jQuery.isXMLDoc(i)||(u=jQuery.propFix[u]||u,p=jQuery.propHooks[u]),void 0!==l?p&&"set"in p&&void 0!==(d=p.set(i,l,u))?d:i[u]=l:p&&"get"in p&&null!==(d=p.get(i,u))?d:i[u]},propHooks:{tabIndex:{get:function(i){var u=jQuery.find.attr(i,"tabindex");return u?parseInt(u,10):Ve.test(i.nodeName)||Ue.test(i.nodeName)&&i.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),P.optSelected||(jQuery.propHooks.selected={get:function(i){var u=i.parentNode;return u&&u.parentNode&&u.parentNode.selectedIndex,null},set:function(i){var u=i.parentNode;u&&(u.selectedIndex,u.parentNode&&u.parentNode.selectedIndex)}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){jQuery.propFix[this.toLowerCase()]=this})),jQuery.fn.extend({addClass:function(i){var u,l,d,p,h,g,v,y=0;if(D(i))return this.each((function(u){jQuery(this).addClass(i.call(this,u,getClass(this)))}));if((u=classesToArray(i)).length)for(;l=this[y++];)if(p=getClass(l),d=1===l.nodeType&&" "+stripAndCollapse(p)+" "){for(g=0;h=u[g++];)d.indexOf(" "+h+" ")<0&&(d+=h+" ");p!==(v=stripAndCollapse(d))&&l.setAttribute("class",v)}return this},removeClass:function(i){var u,l,d,p,h,g,v,y=0;if(D(i))return this.each((function(u){jQuery(this).removeClass(i.call(this,u,getClass(this)))}));if(!arguments.length)return this.attr("class","");if((u=classesToArray(i)).length)for(;l=this[y++];)if(p=getClass(l),d=1===l.nodeType&&" "+stripAndCollapse(p)+" "){for(g=0;h=u[g++];)for(;d.indexOf(" "+h+" ")>-1;)d=d.replace(" "+h+" "," ");p!==(v=stripAndCollapse(d))&&l.setAttribute("class",v)}return this},toggleClass:function(i,u){var l=typeof i,d="string"===l||Array.isArray(i);return"boolean"==typeof u&&d?u?this.addClass(i):this.removeClass(i):D(i)?this.each((function(l){jQuery(this).toggleClass(i.call(this,l,getClass(this),u),u)})):this.each((function(){var u,p,h,g;if(d)for(p=0,h=jQuery(this),g=classesToArray(i);u=g[p++];)h.hasClass(u)?h.removeClass(u):h.addClass(u);else void 0!==i&&"boolean"!==l||((u=getClass(this))&&ie.set(this,"__className__",u),this.setAttribute&&this.setAttribute("class",u||!1===i?"":ie.get(this,"__className__")||""))}))},hasClass:function(i){var u,l,d=0;for(u=" "+i+" ";l=this[d++];)if(1===l.nodeType&&(" "+stripAndCollapse(getClass(l))+" ").indexOf(u)>-1)return!0;return!1}});var Be=/\r/g;jQuery.fn.extend({val:function(i){var u,l,d,p=this[0];return arguments.length?(d=D(i),this.each((function(l){var p;1===this.nodeType&&(null==(p=d?i.call(this,l,jQuery(this).val()):i)?p="":"number"==typeof p?p+="":Array.isArray(p)&&(p=jQuery.map(p,(function(i){return null==i?"":i+""}))),(u=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in u&&void 0!==u.set(this,p,"value")||(this.value=p))}))):p?(u=jQuery.valHooks[p.type]||jQuery.valHooks[p.nodeName.toLowerCase()])&&"get"in u&&void 0!==(l=u.get(p,"value"))?l:"string"==typeof(l=p.value)?l.replace(Be,""):null==l?"":l:void 0}}),jQuery.extend({valHooks:{option:{get:function(i){var u=jQuery.find.attr(i,"value");return null!=u?u:stripAndCollapse(jQuery.text(i))}},select:{get:function(i){var u,l,d,p=i.options,h=i.selectedIndex,g="select-one"===i.type,v=g?null:[],y=g?h+1:p.length;for(d=h<0?y:g?h:0;d<y;d++)if(((l=p[d]).selected||d===h)&&!l.disabled&&(!l.parentNode.disabled||!nodeName(l.parentNode,"optgroup"))){if(u=jQuery(l).val(),g)return u;v.push(u)}return v},set:function(i,u){for(var l,d,p=i.options,h=jQuery.makeArray(u),g=p.length;g--;)((d=p[g]).selected=jQuery.inArray(jQuery.valHooks.option.get(d),h)>-1)&&(l=!0);return l||(i.selectedIndex=-1),h}}}}),jQuery.each(["radio","checkbox"],(function(){jQuery.valHooks[this]={set:function(i,u){if(Array.isArray(u))return i.checked=jQuery.inArray(jQuery(i).val(),u)>-1}},P.checkOn||(jQuery.valHooks[this].get=function(i){return null===i.getAttribute("value")?"on":i.value})})),P.focusin="onfocusin"in d;var He=/^(?:focusinfocus|focusoutblur)$/,stopPropagationCallback=function(i){i.stopPropagation()};jQuery.extend(jQuery.event,{trigger:function(i,u,l,p){var h,g,v,y,S,E,R,T,M=[l||q],I=O.call(i,"type")?i.type:i,P=O.call(i,"namespace")?i.namespace.split("."):[];if(g=T=v=l=l||q,3!==l.nodeType&&8!==l.nodeType&&!He.test(I+jQuery.event.triggered)&&(I.indexOf(".")>-1&&(P=I.split("."),I=P.shift(),P.sort()),S=I.indexOf(":")<0&&"on"+I,(i=i[jQuery.expando]?i:new jQuery.Event(I,"object"==typeof i&&i)).isTrigger=p?2:3,i.namespace=P.join("."),i.rnamespace=i.namespace?new RegExp("(^|\\.)"+P.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=void 0,i.target||(i.target=l),u=null==u?[i]:jQuery.makeArray(u,[i]),R=jQuery.event.special[I]||{},p||!R.trigger||!1!==R.trigger.apply(l,u))){if(!p&&!R.noBubble&&!N(l)){for(y=R.delegateType||I,He.test(y+I)||(g=g.parentNode);g;g=g.parentNode)M.push(g),v=g;v===(l.ownerDocument||q)&&M.push(v.defaultView||v.parentWindow||d)}for(h=0;(g=M[h++])&&!i.isPropagationStopped();)T=g,i.type=h>1?y:R.bindType||I,(E=(ie.get(g,"events")||Object.create(null))[i.type]&&ie.get(g,"handle"))&&E.apply(g,u),(E=S&&g[S])&&E.apply&&acceptData(g)&&(i.result=E.apply(g,u),!1===i.result&&i.preventDefault());return i.type=I,p||i.isDefaultPrevented()||R._default&&!1!==R._default.apply(M.pop(),u)||!acceptData(l)||S&&D(l[I])&&!N(l)&&((v=l[S])&&(l[S]=null),jQuery.event.triggered=I,i.isPropagationStopped()&&T.addEventListener(I,stopPropagationCallback),l[I](),i.isPropagationStopped()&&T.removeEventListener(I,stopPropagationCallback),jQuery.event.triggered=void 0,v&&(l[S]=v)),i.result}},simulate:function(i,u,l){var d=jQuery.extend(new jQuery.Event,l,{type:i,isSimulated:!0});jQuery.event.trigger(d,null,u)}}),jQuery.fn.extend({trigger:function(i,u){return this.each((function(){jQuery.event.trigger(i,u,this)}))},triggerHandler:function(i,u){var l=this[0];if(l)return jQuery.event.trigger(i,u,l,!0)}}),P.focusin||jQuery.each({focus:"focusin",blur:"focusout"},(function(i,u){var handler=function(i){jQuery.event.simulate(u,i.target,jQuery.event.fix(i))};jQuery.event.special[u]={setup:function(){var l=this.ownerDocument||this.document||this,d=ie.access(l,u);d||l.addEventListener(i,handler,!0),ie.access(l,u,(d||0)+1)},teardown:function(){var l=this.ownerDocument||this.document||this,d=ie.access(l,u)-1;d?ie.access(l,u,d):(l.removeEventListener(i,handler,!0),ie.remove(l,u))}}}));var ze=d.location,Qe={guid:Date.now()},We=/\?/;jQuery.parseXML=function(i){var u,l;if(!i||"string"!=typeof i)return null;try{u=(new d.DOMParser).parseFromString(i,"text/xml")}catch(i){}return l=u&&u.getElementsByTagName("parsererror")[0],u&&!l||jQuery.error("Invalid XML: "+(l?jQuery.map(l.childNodes,(function(i){return i.textContent})).join("\n"):i)),u};var Ge=/\[\]$/,$e=/\r?\n/g,Ye=/^(?:submit|button|image|reset|file)$/i,Je=/^(?:input|select|textarea|keygen)/i;function buildParams(i,u,l,d){var p;if(Array.isArray(u))jQuery.each(u,(function(u,p){l||Ge.test(i)?d(i,p):buildParams(i+"["+("object"==typeof p&&null!=p?u:"")+"]",p,l,d)}));else if(l||"object"!==toType(u))d(i,u);else for(p in u)buildParams(i+"["+p+"]",u[p],l,d)}jQuery.param=function(i,u){var l,d=[],add=function(i,u){var l=D(u)?u():u;d[d.length]=encodeURIComponent(i)+"="+encodeURIComponent(null==l?"":l)};if(null==i)return"";if(Array.isArray(i)||i.jquery&&!jQuery.isPlainObject(i))jQuery.each(i,(function(){add(this.name,this.value)}));else for(l in i)buildParams(l,i[l],u,add);return d.join("&")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var i=jQuery.prop(this,"elements");return i?jQuery.makeArray(i):this})).filter((function(){var i=this.type;return this.name&&!jQuery(this).is(":disabled")&&Je.test(this.nodeName)&&!Ye.test(i)&&(this.checked||!me.test(i))})).map((function(i,u){var l=jQuery(this).val();return null==l?null:Array.isArray(l)?jQuery.map(l,(function(i){return{name:u.name,value:i.replace($e,"\r\n")}})):{name:u.name,value:l.replace($e,"\r\n")}})).get()}});var Xe=/%20/g,Ke=/#.*$/,Ze=/([?&])_=[^&]*/,et=/^(.*?):[ \t]*([^\r\n]*)$/gm,tt=/^(?:GET|HEAD)$/,nt=/^\/\//,rt={},it={},at="*/".concat("*"),ot=q.createElement("a");function addToPrefiltersOrTransports(i){return function(u,l){"string"!=typeof u&&(l=u,u="*");var d,p=0,h=u.toLowerCase().match(X)||[];if(D(l))for(;d=h[p++];)"+"===d[0]?(d=d.slice(1)||"*",(i[d]=i[d]||[]).unshift(l)):(i[d]=i[d]||[]).push(l)}}function inspectPrefiltersOrTransports(i,u,l,d){var p={},h=i===it;function inspect(g){var v;return p[g]=!0,jQuery.each(i[g]||[],(function(i,g){var y=g(u,l,d);return"string"!=typeof y||h||p[y]?h?!(v=y):void 0:(u.dataTypes.unshift(y),inspect(y),!1)})),v}return inspect(u.dataTypes[0])||!p["*"]&&inspect("*")}function ajaxExtend(i,u){var l,d,p=jQuery.ajaxSettings.flatOptions||{};for(l in u)void 0!==u[l]&&((p[l]?i:d||(d={}))[l]=u[l]);return d&&jQuery.extend(!0,i,d),i}ot.href=ze.href,jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ze.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ze.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":at,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(i,u){return u?ajaxExtend(ajaxExtend(i,jQuery.ajaxSettings),u):ajaxExtend(jQuery.ajaxSettings,i)},ajaxPrefilter:addToPrefiltersOrTransports(rt),ajaxTransport:addToPrefiltersOrTransports(it),ajax:function(i,u){"object"==typeof i&&(u=i,i=void 0),u=u||{};var l,p,h,g,v,y,S,E,R,T,O=jQuery.ajaxSetup({},u),M=O.context||O,I=O.context&&(M.nodeType||M.jquery)?jQuery(M):jQuery.event,P=jQuery.Deferred(),D=jQuery.Callbacks("once memory"),N=O.statusCode||{},L={},V={},U="canceled",B={readyState:0,getResponseHeader:function(i){var u;if(S){if(!g)for(g={};u=et.exec(h);)g[u[1].toLowerCase()+" "]=(g[u[1].toLowerCase()+" "]||[]).concat(u[2]);u=g[i.toLowerCase()+" "]}return null==u?null:u.join(", ")},getAllResponseHeaders:function(){return S?h:null},setRequestHeader:function(i,u){return null==S&&(i=V[i.toLowerCase()]=V[i.toLowerCase()]||i,L[i]=u),this},overrideMimeType:function(i){return null==S&&(O.mimeType=i),this},statusCode:function(i){var u;if(i)if(S)B.always(i[B.status]);else for(u in i)N[u]=[N[u],i[u]];return this},abort:function(i){var u=i||U;return l&&l.abort(u),done(0,u),this}};if(P.promise(B),O.url=((i||O.url||ze.href)+"").replace(nt,ze.protocol+"//"),O.type=u.method||u.type||O.method||O.type,O.dataTypes=(O.dataType||"*").toLowerCase().match(X)||[""],null==O.crossDomain){y=q.createElement("a");try{y.href=O.url,y.href=y.href,O.crossDomain=ot.protocol+"//"+ot.host!=y.protocol+"//"+y.host}catch(i){O.crossDomain=!0}}if(O.data&&O.processData&&"string"!=typeof O.data&&(O.data=jQuery.param(O.data,O.traditional)),inspectPrefiltersOrTransports(rt,O,u,B),S)return B;for(R in(E=jQuery.event&&O.global)&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),O.type=O.type.toUpperCase(),O.hasContent=!tt.test(O.type),p=O.url.replace(Ke,""),O.hasContent?O.data&&O.processData&&0===(O.contentType||"").indexOf("application/x-www-form-urlencoded")&&(O.data=O.data.replace(Xe,"+")):(T=O.url.slice(p.length),O.data&&(O.processData||"string"==typeof O.data)&&(p+=(We.test(p)?"&":"?")+O.data,delete O.data),!1===O.cache&&(p=p.replace(Ze,"$1"),T=(We.test(p)?"&":"?")+"_="+Qe.guid+++T),O.url=p+T),O.ifModified&&(jQuery.lastModified[p]&&B.setRequestHeader("If-Modified-Since",jQuery.lastModified[p]),jQuery.etag[p]&&B.setRequestHeader("If-None-Match",jQuery.etag[p])),(O.data&&O.hasContent&&!1!==O.contentType||u.contentType)&&B.setRequestHeader("Content-Type",O.contentType),B.setRequestHeader("Accept",O.dataTypes[0]&&O.accepts[O.dataTypes[0]]?O.accepts[O.dataTypes[0]]+("*"!==O.dataTypes[0]?", "+at+"; q=0.01":""):O.accepts["*"]),O.headers)B.setRequestHeader(R,O.headers[R]);if(O.beforeSend&&(!1===O.beforeSend.call(M,B,O)||S))return B.abort();if(U="abort",D.add(O.complete),B.done(O.success),B.fail(O.error),l=inspectPrefiltersOrTransports(it,O,u,B)){if(B.readyState=1,E&&I.trigger("ajaxSend",[B,O]),S)return B;O.async&&O.timeout>0&&(v=d.setTimeout((function(){B.abort("timeout")}),O.timeout));try{S=!1,l.send(L,done)}catch(i){if(S)throw i;done(-1,i)}}else done(-1,"No Transport");function done(i,u,g,y){var R,T,q,L,V,U=u;S||(S=!0,v&&d.clearTimeout(v),l=void 0,h=y||"",B.readyState=i>0?4:0,R=i>=200&&i<300||304===i,g&&(L=function ajaxHandleResponses(i,u,l){for(var d,p,h,g,v=i.contents,y=i.dataTypes;"*"===y[0];)y.shift(),void 0===d&&(d=i.mimeType||u.getResponseHeader("Content-Type"));if(d)for(p in v)if(v[p]&&v[p].test(d)){y.unshift(p);break}if(y[0]in l)h=y[0];else{for(p in l){if(!y[0]||i.converters[p+" "+y[0]]){h=p;break}g||(g=p)}h=h||g}if(h)return h!==y[0]&&y.unshift(h),l[h]}(O,B,g)),!R&&jQuery.inArray("script",O.dataTypes)>-1&&jQuery.inArray("json",O.dataTypes)<0&&(O.converters["text script"]=function(){}),L=function ajaxConvert(i,u,l,d){var p,h,g,v,y,S={},E=i.dataTypes.slice();if(E[1])for(g in i.converters)S[g.toLowerCase()]=i.converters[g];for(h=E.shift();h;)if(i.responseFields[h]&&(l[i.responseFields[h]]=u),!y&&d&&i.dataFilter&&(u=i.dataFilter(u,i.dataType)),y=h,h=E.shift())if("*"===h)h=y;else if("*"!==y&&y!==h){if(!(g=S[y+" "+h]||S["* "+h]))for(p in S)if((v=p.split(" "))[1]===h&&(g=S[y+" "+v[0]]||S["* "+v[0]])){!0===g?g=S[p]:!0!==S[p]&&(h=v[0],E.unshift(v[1]));break}if(!0!==g)if(g&&i.throws)u=g(u);else try{u=g(u)}catch(i){return{state:"parsererror",error:g?i:"No conversion from "+y+" to "+h}}}return{state:"success",data:u}}(O,L,B,R),R?(O.ifModified&&((V=B.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[p]=V),(V=B.getResponseHeader("etag"))&&(jQuery.etag[p]=V)),204===i||"HEAD"===O.type?U="nocontent":304===i?U="notmodified":(U=L.state,T=L.data,R=!(q=L.error))):(q=U,!i&&U||(U="error",i<0&&(i=0))),B.status=i,B.statusText=(u||U)+"",R?P.resolveWith(M,[T,U,B]):P.rejectWith(M,[B,U,q]),B.statusCode(N),N=void 0,E&&I.trigger(R?"ajaxSuccess":"ajaxError",[B,O,R?T:q]),D.fireWith(M,[B,U]),E&&(I.trigger("ajaxComplete",[B,O]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}return B},getJSON:function(i,u,l){return jQuery.get(i,u,l,"json")},getScript:function(i,u){return jQuery.get(i,void 0,u,"script")}}),jQuery.each(["get","post"],(function(i,u){jQuery[u]=function(i,l,d,p){return D(l)&&(p=p||d,d=l,l=void 0),jQuery.ajax(jQuery.extend({url:i,type:u,dataType:p,data:l,success:d},jQuery.isPlainObject(i)&&i))}})),jQuery.ajaxPrefilter((function(i){var u;for(u in i.headers)"content-type"===u.toLowerCase()&&(i.contentType=i.headers[u]||"")})),jQuery._evalUrl=function(i,u,l){return jQuery.ajax({url:i,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(i){jQuery.globalEval(i,u,l)}})},jQuery.fn.extend({wrapAll:function(i){var u;return this[0]&&(D(i)&&(i=i.call(this[0])),u=jQuery(i,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&u.insertBefore(this[0]),u.map((function(){for(var i=this;i.firstElementChild;)i=i.firstElementChild;return i})).append(this)),this},wrapInner:function(i){return D(i)?this.each((function(u){jQuery(this).wrapInner(i.call(this,u))})):this.each((function(){var u=jQuery(this),l=u.contents();l.length?l.wrapAll(i):u.append(i)}))},wrap:function(i){var u=D(i);return this.each((function(l){jQuery(this).wrapAll(u?i.call(this,l):i)}))},unwrap:function(i){return this.parent(i).not("body").each((function(){jQuery(this).replaceWith(this.childNodes)})),this}}),jQuery.expr.pseudos.hidden=function(i){return!jQuery.expr.pseudos.visible(i)},jQuery.expr.pseudos.visible=function(i){return!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length)},jQuery.ajaxSettings.xhr=function(){try{return new d.XMLHttpRequest}catch(i){}};var st={0:200,1223:204},ut=jQuery.ajaxSettings.xhr();P.cors=!!ut&&"withCredentials"in ut,P.ajax=ut=!!ut,jQuery.ajaxTransport((function(i){var u,l;if(P.cors||ut&&!i.crossDomain)return{send:function(p,h){var g,v=i.xhr();if(v.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(g in i.xhrFields)v[g]=i.xhrFields[g];for(g in i.mimeType&&v.overrideMimeType&&v.overrideMimeType(i.mimeType),i.crossDomain||p["X-Requested-With"]||(p["X-Requested-With"]="XMLHttpRequest"),p)v.setRequestHeader(g,p[g]);u=function(i){return function(){u&&(u=l=v.onload=v.onerror=v.onabort=v.ontimeout=v.onreadystatechange=null,"abort"===i?v.abort():"error"===i?"number"!=typeof v.status?h(0,"error"):h(v.status,v.statusText):h(st[v.status]||v.status,v.statusText,"text"!==(v.responseType||"text")||"string"!=typeof v.responseText?{binary:v.response}:{text:v.responseText},v.getAllResponseHeaders()))}},v.onload=u(),l=v.onerror=v.ontimeout=u("error"),void 0!==v.onabort?v.onabort=l:v.onreadystatechange=function(){4===v.readyState&&d.setTimeout((function(){u&&l()}))},u=u("abort");try{v.send(i.hasContent&&i.data||null)}catch(i){if(u)throw i}},abort:function(){u&&u()}}})),jQuery.ajaxPrefilter((function(i){i.crossDomain&&(i.contents.script=!1)})),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(i){return jQuery.globalEval(i),i}}}),jQuery.ajaxPrefilter("script",(function(i){void 0===i.cache&&(i.cache=!1),i.crossDomain&&(i.type="GET")})),jQuery.ajaxTransport("script",(function(i){var u,l;if(i.crossDomain||i.scriptAttrs)return{send:function(d,p){u=jQuery("<script>").attr(i.scriptAttrs||{}).prop({charset:i.scriptCharset,src:i.url}).on("load error",l=function(i){u.remove(),l=null,i&&p("error"===i.type?404:200,i.type)}),q.head.appendChild(u[0])},abort:function(){l&&l()}}}));var lt,ct=[],dt=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var i=ct.pop()||jQuery.expando+"_"+Qe.guid++;return this[i]=!0,i}}),jQuery.ajaxPrefilter("json jsonp",(function(i,u,l){var p,h,g,v=!1!==i.jsonp&&(dt.test(i.url)?"url":"string"==typeof i.data&&0===(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&dt.test(i.data)&&"data");if(v||"jsonp"===i.dataTypes[0])return p=i.jsonpCallback=D(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,v?i[v]=i[v].replace(dt,"$1"+p):!1!==i.jsonp&&(i.url+=(We.test(i.url)?"&":"?")+i.jsonp+"="+p),i.converters["script json"]=function(){return g||jQuery.error(p+" was not called"),g[0]},i.dataTypes[0]="json",h=d[p],d[p]=function(){g=arguments},l.always((function(){void 0===h?jQuery(d).removeProp(p):d[p]=h,i[p]&&(i.jsonpCallback=u.jsonpCallback,ct.push(p)),g&&D(h)&&h(g[0]),g=h=void 0})),"script"})),P.createHTMLDocument=((lt=q.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===lt.childNodes.length),jQuery.parseHTML=function(i,u,l){return"string"!=typeof i?[]:("boolean"==typeof u&&(l=u,u=!1),u||(P.createHTMLDocument?((d=(u=q.implementation.createHTMLDocument("")).createElement("base")).href=q.location.href,u.head.appendChild(d)):u=q),h=!l&&[],(p=H.exec(i))?[u.createElement(p[1])]:(p=buildFragment([i],u,h),h&&h.length&&jQuery(h).remove(),jQuery.merge([],p.childNodes)));var d,p,h},jQuery.fn.load=function(i,u,l){var d,p,h,g=this,v=i.indexOf(" ");return v>-1&&(d=stripAndCollapse(i.slice(v)),i=i.slice(0,v)),D(u)?(l=u,u=void 0):u&&"object"==typeof u&&(p="POST"),g.length>0&&jQuery.ajax({url:i,type:p||"GET",dataType:"html",data:u}).done((function(i){h=arguments,g.html(d?jQuery("<div>").append(jQuery.parseHTML(i)).find(d):i)})).always(l&&function(i,u){g.each((function(){l.apply(this,h||[i.responseText,u,i])}))}),this},jQuery.expr.pseudos.animated=function(i){return jQuery.grep(jQuery.timers,(function(u){return i===u.elem})).length},jQuery.offset={setOffset:function(i,u,l){var d,p,h,g,v,y,S=jQuery.css(i,"position"),E=jQuery(i),R={};"static"===S&&(i.style.position="relative"),v=E.offset(),h=jQuery.css(i,"top"),y=jQuery.css(i,"left"),("absolute"===S||"fixed"===S)&&(h+y).indexOf("auto")>-1?(g=(d=E.position()).top,p=d.left):(g=parseFloat(h)||0,p=parseFloat(y)||0),D(u)&&(u=u.call(i,l,jQuery.extend({},v))),null!=u.top&&(R.top=u.top-v.top+g),null!=u.left&&(R.left=u.left-v.left+p),"using"in u?u.using.call(i,R):E.css(R)}},jQuery.fn.extend({offset:function(i){if(arguments.length)return void 0===i?this:this.each((function(u){jQuery.offset.setOffset(this,i,u)}));var u,l,d=this[0];return d?d.getClientRects().length?(u=d.getBoundingClientRect(),l=d.ownerDocument.defaultView,{top:u.top+l.pageYOffset,left:u.left+l.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var i,u,l,d=this[0],p={top:0,left:0};if("fixed"===jQuery.css(d,"position"))u=d.getBoundingClientRect();else{for(u=this.offset(),l=d.ownerDocument,i=d.offsetParent||l.documentElement;i&&(i===l.body||i===l.documentElement)&&"static"===jQuery.css(i,"position");)i=i.parentNode;i&&i!==d&&1===i.nodeType&&((p=jQuery(i).offset()).top+=jQuery.css(i,"borderTopWidth",!0),p.left+=jQuery.css(i,"borderLeftWidth",!0))}return{top:u.top-p.top-jQuery.css(d,"marginTop",!0),left:u.left-p.left-jQuery.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var i=this.offsetParent;i&&"static"===jQuery.css(i,"position");)i=i.offsetParent;return i||de}))}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(i,u){var l="pageYOffset"===u;jQuery.fn[i]=function(d){return access(this,(function(i,d,p){var h;if(N(i)?h=i:9===i.nodeType&&(h=i.defaultView),void 0===p)return h?h[u]:i[d];h?h.scrollTo(l?h.pageXOffset:p,l?p:h.pageYOffset):i[d]=p}),i,d,arguments.length)}})),jQuery.each(["top","left"],(function(i,u){jQuery.cssHooks[u]=addGetHookIf(P.pixelPosition,(function(i,l){if(l)return l=curCSS(i,u),Ae.test(l)?jQuery(i).position()[u]+"px":l}))})),jQuery.each({Height:"height",Width:"width"},(function(i,u){jQuery.each({padding:"inner"+i,content:u,"":"outer"+i},(function(l,d){jQuery.fn[d]=function(p,h){var g=arguments.length&&(l||"boolean"!=typeof p),v=l||(!0===p||!0===h?"margin":"border");return access(this,(function(u,l,p){var h;return N(u)?0===d.indexOf("outer")?u["inner"+i]:u.document.documentElement["client"+i]:9===u.nodeType?(h=u.documentElement,Math.max(u.body["scroll"+i],h["scroll"+i],u.body["offset"+i],h["offset"+i],h["client"+i])):void 0===p?jQuery.css(u,l,v):jQuery.style(u,l,p,v)}),u,g?p:void 0,g)}}))})),jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(i,u){jQuery.fn[u]=function(i){return this.on(u,i)}})),jQuery.fn.extend({bind:function(i,u,l){return this.on(i,null,u,l)},unbind:function(i,u){return this.off(i,null,u)},delegate:function(i,u,l,d){return this.on(u,i,l,d)},undelegate:function(i,u,l){return 1===arguments.length?this.off(i,"**"):this.off(u,i||"**",l)},hover:function(i,u){return this.mouseenter(i).mouseleave(u||i)}}),jQuery.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(i,u){jQuery.fn[u]=function(i,l){return arguments.length>0?this.on(u,null,i,l):this.trigger(u)}}));var ft=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;jQuery.proxy=function(i,u){var l,d,p;if("string"==typeof u&&(l=i[u],u=i,i=l),D(i))return d=v.call(arguments,2),p=function(){return i.apply(u||this,d.concat(v.call(arguments)))},p.guid=i.guid=i.guid||jQuery.guid++,p},jQuery.holdReady=function(i){i?jQuery.readyWait++:jQuery.ready(!0)},jQuery.isArray=Array.isArray,jQuery.parseJSON=JSON.parse,jQuery.nodeName=nodeName,jQuery.isFunction=D,jQuery.isWindow=N,jQuery.camelCase=camelCase,jQuery.type=toType,jQuery.now=Date.now,jQuery.isNumeric=function(i){var u=jQuery.type(i);return("number"===u||"string"===u)&&!isNaN(i-parseFloat(i))},jQuery.trim=function(i){return null==i?"":(i+"").replace(ft,"")},void 0===(l=function(){return jQuery}.apply(u,[]))||(i.exports=l);var pt=d.jQuery,ht=d.$;return jQuery.noConflict=function(i){return d.$===jQuery&&(d.$=ht),i&&d.jQuery===jQuery&&(d.jQuery=pt),jQuery},void 0===p&&(d.jQuery=d.$=jQuery),jQuery}))},33767:function(i,u){var l,d;d=this,l=function(){return d.returnExportsGlobal=function(){var i=function(){"use strict";function a(){var i,u;this.q=[],this.add=function(i){this.q.push(i)},this.call=function(){for(i=0,u=this.q.length;u>i;i++)this.q[i].call()}}function b(i,u){return i.currentStyle?i.currentStyle[u]:window.getComputedStyle?window.getComputedStyle(i,null).getPropertyValue(u):i.style[u]}function c(u,l){if(u.resizedAttached){if(u.resizedAttached)return void u.resizedAttached.add(l)}else u.resizedAttached=new a,u.resizedAttached.add(l);u.resizeSensor=document.createElement("div"),u.resizeSensor.className="resize-sensor";var d="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden; opacity: 0;",p="position: absolute; left: 0; top: 0; transition: 0s;";u.resizeSensor.style.cssText=d,u.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+d+'"><div style="'+p+'"></div></div><div class="resize-sensor-shrink" style="'+d+'"><div style="'+p+' width: 200%; height: 200%"></div></div>',u.appendChild(u.resizeSensor),"static"==b(u,"position")&&(u.style.position="relative");var h=u.resizeSensor.childNodes[0],g=h.childNodes[0],v=u.resizeSensor.childNodes[1],k=function(){g.style.width="100000px",g.style.height="100000px",h.scrollLeft=1e5,h.scrollTop=1e5,v.scrollLeft=1e5,v.scrollTop=1e5};k();var y=!1,m=function(){u.resizedAttached&&(y&&(u.resizedAttached.call(),y=!1),i(m))};i(m);var S,E,R,T,r=function(){((R=u.offsetWidth)!=S||(T=u.offsetHeight)!=E)&&(y=!0,S=R,E=T),k()},s=function(i,u,l){i.attachEvent?i.attachEvent("on"+u,l):i.addEventListener(u,l)};s(h,"scroll",r),s(v,"scroll",r)}var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(i){return window.setTimeout(i,20)},e=function(i,u){var l=this,d=Object.prototype.toString.call(i),p=l._isCollectionTyped="[object Array]"===d||"[object NodeList]"===d||"[object HTMLCollection]"===d||"undefined"!=typeof jQuery&&i instanceof window.jQuery||"undefined"!=typeof Elements&&i instanceof window.Elements;if(l._element=i,p)for(var h=0,g=i.length;g>h;h++)c(i[h],u);else c(i,u)};return e.prototype.detach=function(){var i=this,u=i._isCollectionTyped,l=i._element;if(u)for(var d=0,p=l.length;p>d;d++)e.detach(l[d]);else e.detach(l)},e.detach=function(i){i.resizeSensor&&(i.removeChild(i.resizeSensor),delete i.resizeSensor,delete i.resizedAttached)},e}();return i}()}.apply(u,[]),void 0===l||(i.exports=l)},75412:function(i,u,l){"use strict";var d;l.r(u),l.d(u,{NIL:function(){return V},parse:function(){return I},stringify:function(){return R},v1:function(){return M},v3:function(){return D},v4:function(){return N},v5:function(){return L},validate:function(){return g},version:function(){return U}});var p=new Uint8Array(16);function rng(){if(!d&&!(d="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(p)}var h=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var g=function validate(i){return"string"==typeof i&&h.test(i)},v=[],y=0;y<256;++y)v.push((y+256).toString(16).substr(1));var S,E,R=function stringify(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=(v[i[u+0]]+v[i[u+1]]+v[i[u+2]]+v[i[u+3]]+"-"+v[i[u+4]]+v[i[u+5]]+"-"+v[i[u+6]]+v[i[u+7]]+"-"+v[i[u+8]]+v[i[u+9]]+"-"+v[i[u+10]]+v[i[u+11]]+v[i[u+12]]+v[i[u+13]]+v[i[u+14]]+v[i[u+15]]).toLowerCase();if(!g(l))throw TypeError("Stringified UUID is invalid");return l},T=0,O=0;var M=function v1(i,u,l){var d=u&&l||0,p=u||new Array(16),h=(i=i||{}).node||S,g=void 0!==i.clockseq?i.clockseq:E;if(null==h||null==g){var v=i.random||(i.rng||rng)();null==h&&(h=S=[1|v[0],v[1],v[2],v[3],v[4],v[5]]),null==g&&(g=E=16383&(v[6]<<8|v[7]))}var y=void 0!==i.msecs?i.msecs:Date.now(),M=void 0!==i.nsecs?i.nsecs:O+1,I=y-T+(M-O)/1e4;if(I<0&&void 0===i.clockseq&&(g=g+1&16383),(I<0||y>T)&&void 0===i.nsecs&&(M=0),M>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");T=y,O=M,E=g;var P=(1e4*(268435455&(y+=122192928e5))+M)%4294967296;p[d++]=P>>>24&255,p[d++]=P>>>16&255,p[d++]=P>>>8&255,p[d++]=255&P;var D=y/4294967296*1e4&268435455;p[d++]=D>>>8&255,p[d++]=255&D,p[d++]=D>>>24&15|16,p[d++]=D>>>16&255,p[d++]=g>>>8|128,p[d++]=255&g;for(var N=0;N<6;++N)p[d+N]=h[N];return u||R(p)};var I=function parse(i){if(!g(i))throw TypeError("Invalid UUID");var u,l=new Uint8Array(16);return l[0]=(u=parseInt(i.slice(0,8),16))>>>24,l[1]=u>>>16&255,l[2]=u>>>8&255,l[3]=255&u,l[4]=(u=parseInt(i.slice(9,13),16))>>>8,l[5]=255&u,l[6]=(u=parseInt(i.slice(14,18),16))>>>8,l[7]=255&u,l[8]=(u=parseInt(i.slice(19,23),16))>>>8,l[9]=255&u,l[10]=(u=parseInt(i.slice(24,36),16))/1099511627776&255,l[11]=u/4294967296&255,l[12]=u>>>24&255,l[13]=u>>>16&255,l[14]=u>>>8&255,l[15]=255&u,l};function v35(i,u,l){function generateUUID(i,d,p,h){if("string"==typeof i&&(i=function stringToBytes(i){i=unescape(encodeURIComponent(i));for(var u=[],l=0;l<i.length;++l)u.push(i.charCodeAt(l));return u}(i)),"string"==typeof d&&(d=I(d)),16!==d.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var g=new Uint8Array(16+i.length);if(g.set(d),g.set(i,d.length),(g=l(g))[6]=15&g[6]|u,g[8]=63&g[8]|128,p){h=h||0;for(var v=0;v<16;++v)p[h+v]=g[v];return p}return R(g)}try{generateUUID.name=i}catch(i){}return generateUUID.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",generateUUID.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",generateUUID}function getOutputLength(i){return 14+(i+64>>>9<<4)+1}function safeAdd(i,u){var l=(65535&i)+(65535&u);return(i>>16)+(u>>16)+(l>>16)<<16|65535&l}function md5cmn(i,u,l,d,p,h){return safeAdd(function bitRotateLeft(i,u){return i<<u|i>>>32-u}(safeAdd(safeAdd(u,i),safeAdd(d,h)),p),l)}function md5ff(i,u,l,d,p,h,g){return md5cmn(u&l|~u&d,i,u,p,h,g)}function md5gg(i,u,l,d,p,h,g){return md5cmn(u&d|l&~d,i,u,p,h,g)}function md5hh(i,u,l,d,p,h,g){return md5cmn(u^l^d,i,u,p,h,g)}function md5ii(i,u,l,d,p,h,g){return md5cmn(l^(u|~d),i,u,p,h,g)}var P=function md5(i){if("string"==typeof i){var u=unescape(encodeURIComponent(i));i=new Uint8Array(u.length);for(var l=0;l<u.length;++l)i[l]=u.charCodeAt(l)}return function md5ToHexEncodedArray(i){for(var u=[],l=32*i.length,d="0123456789abcdef",p=0;p<l;p+=8){var h=i[p>>5]>>>p%32&255,g=parseInt(d.charAt(h>>>4&15)+d.charAt(15&h),16);u.push(g)}return u}(function wordsToMd5(i,u){i[u>>5]|=128<<u%32,i[getOutputLength(u)-1]=u;for(var l=1732584193,d=-271733879,p=-1732584194,h=271733878,g=0;g<i.length;g+=16){var v=l,y=d,S=p,E=h;l=md5ff(l,d,p,h,i[g],7,-680876936),h=md5ff(h,l,d,p,i[g+1],12,-389564586),p=md5ff(p,h,l,d,i[g+2],17,606105819),d=md5ff(d,p,h,l,i[g+3],22,-1044525330),l=md5ff(l,d,p,h,i[g+4],7,-176418897),h=md5ff(h,l,d,p,i[g+5],12,1200080426),p=md5ff(p,h,l,d,i[g+6],17,-1473231341),d=md5ff(d,p,h,l,i[g+7],22,-45705983),l=md5ff(l,d,p,h,i[g+8],7,1770035416),h=md5ff(h,l,d,p,i[g+9],12,-1958414417),p=md5ff(p,h,l,d,i[g+10],17,-42063),d=md5ff(d,p,h,l,i[g+11],22,-1990404162),l=md5ff(l,d,p,h,i[g+12],7,1804603682),h=md5ff(h,l,d,p,i[g+13],12,-40341101),p=md5ff(p,h,l,d,i[g+14],17,-1502002290),l=md5gg(l,d=md5ff(d,p,h,l,i[g+15],22,1236535329),p,h,i[g+1],5,-165796510),h=md5gg(h,l,d,p,i[g+6],9,-1069501632),p=md5gg(p,h,l,d,i[g+11],14,643717713),d=md5gg(d,p,h,l,i[g],20,-373897302),l=md5gg(l,d,p,h,i[g+5],5,-701558691),h=md5gg(h,l,d,p,i[g+10],9,38016083),p=md5gg(p,h,l,d,i[g+15],14,-660478335),d=md5gg(d,p,h,l,i[g+4],20,-405537848),l=md5gg(l,d,p,h,i[g+9],5,568446438),h=md5gg(h,l,d,p,i[g+14],9,-1019803690),p=md5gg(p,h,l,d,i[g+3],14,-187363961),d=md5gg(d,p,h,l,i[g+8],20,1163531501),l=md5gg(l,d,p,h,i[g+13],5,-1444681467),h=md5gg(h,l,d,p,i[g+2],9,-51403784),p=md5gg(p,h,l,d,i[g+7],14,1735328473),l=md5hh(l,d=md5gg(d,p,h,l,i[g+12],20,-1926607734),p,h,i[g+5],4,-378558),h=md5hh(h,l,d,p,i[g+8],11,-2022574463),p=md5hh(p,h,l,d,i[g+11],16,1839030562),d=md5hh(d,p,h,l,i[g+14],23,-35309556),l=md5hh(l,d,p,h,i[g+1],4,-1530992060),h=md5hh(h,l,d,p,i[g+4],11,1272893353),p=md5hh(p,h,l,d,i[g+7],16,-155497632),d=md5hh(d,p,h,l,i[g+10],23,-1094730640),l=md5hh(l,d,p,h,i[g+13],4,681279174),h=md5hh(h,l,d,p,i[g],11,-358537222),p=md5hh(p,h,l,d,i[g+3],16,-722521979),d=md5hh(d,p,h,l,i[g+6],23,76029189),l=md5hh(l,d,p,h,i[g+9],4,-640364487),h=md5hh(h,l,d,p,i[g+12],11,-421815835),p=md5hh(p,h,l,d,i[g+15],16,530742520),l=md5ii(l,d=md5hh(d,p,h,l,i[g+2],23,-995338651),p,h,i[g],6,-198630844),h=md5ii(h,l,d,p,i[g+7],10,1126891415),p=md5ii(p,h,l,d,i[g+14],15,-1416354905),d=md5ii(d,p,h,l,i[g+5],21,-57434055),l=md5ii(l,d,p,h,i[g+12],6,1700485571),h=md5ii(h,l,d,p,i[g+3],10,-1894986606),p=md5ii(p,h,l,d,i[g+10],15,-1051523),d=md5ii(d,p,h,l,i[g+1],21,-2054922799),l=md5ii(l,d,p,h,i[g+8],6,1873313359),h=md5ii(h,l,d,p,i[g+15],10,-30611744),p=md5ii(p,h,l,d,i[g+6],15,-1560198380),d=md5ii(d,p,h,l,i[g+13],21,1309151649),l=md5ii(l,d,p,h,i[g+4],6,-145523070),h=md5ii(h,l,d,p,i[g+11],10,-1120210379),p=md5ii(p,h,l,d,i[g+2],15,718787259),d=md5ii(d,p,h,l,i[g+9],21,-343485551),l=safeAdd(l,v),d=safeAdd(d,y),p=safeAdd(p,S),h=safeAdd(h,E)}return[l,d,p,h]}(function bytesToWords(i){if(0===i.length)return[];for(var u=8*i.length,l=new Uint32Array(getOutputLength(u)),d=0;d<u;d+=8)l[d>>5]|=(255&i[d/8])<<d%32;return l}(i),8*i.length))},D=v35("v3",48,P);var N=function v4(i,u,l){var d=(i=i||{}).random||(i.rng||rng)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,u){l=l||0;for(var p=0;p<16;++p)u[l+p]=d[p];return u}return R(d)};function f(i,u,l,d){switch(i){case 0:return u&l^~u&d;case 1:case 3:return u^l^d;case 2:return u&l^u&d^l&d}}function ROTL(i,u){return i<<u|i>>>32-u}var q=function sha1(i){var u=[1518500249,1859775393,2400959708,3395469782],l=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof i){var d=unescape(encodeURIComponent(i));i=[];for(var p=0;p<d.length;++p)i.push(d.charCodeAt(p))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);for(var h=i.length/4+2,g=Math.ceil(h/16),v=new Array(g),y=0;y<g;++y){for(var S=new Uint32Array(16),E=0;E<16;++E)S[E]=i[64*y+4*E]<<24|i[64*y+4*E+1]<<16|i[64*y+4*E+2]<<8|i[64*y+4*E+3];v[y]=S}v[g-1][14]=8*(i.length-1)/Math.pow(2,32),v[g-1][14]=Math.floor(v[g-1][14]),v[g-1][15]=8*(i.length-1)&4294967295;for(var R=0;R<g;++R){for(var T=new Uint32Array(80),O=0;O<16;++O)T[O]=v[R][O];for(var M=16;M<80;++M)T[M]=ROTL(T[M-3]^T[M-8]^T[M-14]^T[M-16],1);for(var I=l[0],P=l[1],D=l[2],N=l[3],q=l[4],L=0;L<80;++L){var V=Math.floor(L/20),U=ROTL(I,5)+f(V,P,D,N)+q+u[V]+T[L]>>>0;q=N,N=D,D=ROTL(P,30)>>>0,P=I,I=U}l[0]=l[0]+I>>>0,l[1]=l[1]+P>>>0,l[2]=l[2]+D>>>0,l[3]=l[3]+N>>>0,l[4]=l[4]+q>>>0}return[l[0]>>24&255,l[0]>>16&255,l[0]>>8&255,255&l[0],l[1]>>24&255,l[1]>>16&255,l[1]>>8&255,255&l[1],l[2]>>24&255,l[2]>>16&255,l[2]>>8&255,255&l[2],l[3]>>24&255,l[3]>>16&255,l[3]>>8&255,255&l[3],l[4]>>24&255,l[4]>>16&255,l[4]>>8&255,255&l[4]]},L=v35("v5",80,q),V="00000000-0000-0000-0000-000000000000";var U=function version(i){if(!g(i))throw TypeError("Invalid UUID");return parseInt(i.substr(14,1),16)}},73728:function(module,__unused_webpack_exports,__webpack_require__){var _=__webpack_require__(95023);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="'+(null==(__t=responseId)?"":__t)+'" class="lrn lrn_widget lrn_qr lrn_'+(null==(__t=questionType)?"":__t)+" lrn_clearfix "+(null==(__t=globalExtraClasses)?"":__t)+'">',showInstructorStimulus&&(__p+='<div class="lrn_question"><div class="lrn-instructor-stimulus"><div class="lrn_clearfix"><div class="lrn-instructor-stimulus-content">'+(null==(__t=instructorStimulusContent)?"":__t)+"</div></div></div></div>"),__p+="",_.each(widgetLayoutElements,(function(i){__p+="","stimulus"===i.type&&showStimulus&&(__p+='<div class="lrn_question" data-lrn-widget-component="stimulus"><div class="lrn_stimulus lrn_clearfix"><div class="lrn_stimulus_content lrn_clearfix">'+(null==(__t=stimulusContent)?"":__t)+"</div>",hasVerticalFeatures&&(__p+='<div class="lrn_stimulus_features_vertical"></div>'),__p+="</div></div>"),__p+="","interaction"===i.type&&(__p+='<div class="lrn_response_wrapper',hasOverlayFeatures&&(__p+=" lrn_overlaying_features"),__p+='" data-lrn-widget-component="interaction"><div class="lrn_response lrn_clearfix '+(null==(__t=extraClasses)?"":__t)+'" ',hasOverlayFeatures&&(__p+=' style="visibility: hidden;"'),__p+=' ><div class="lrn-accessibility-arialive" aria-live="assertive" aria-atomic="true"></div>'+(null==(__t=responseContent)?"":__t)+"</div></div>"),__p+=""})),__p+="</div>";return __p}},32270:function(module,__unused_webpack_exports,__webpack_require__){var _=__webpack_require__(95023);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="'+(null==(__t=id)?"":__t)+'" class="lrn lrn_widget lrn_group lrn_clearfix"><button type="button" class="lrn_btn">'+(null==(__t=labels.checkAnswers)?"":__t)+"</button></div>";return __p}},18707:function(module,__unused_webpack_exports,__webpack_require__){var _=__webpack_require__(95023);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lrn-image-load-error-spinner-container"><div class="lrn_spinner"><div class="lrn_bounce1"></div><div class="lrn_bounce2"></div><div class="lrn_bounce3"></div></div></div>';return __p}},96788:function(module,__unused_webpack_exports,__webpack_require__){var _=__webpack_require__(95023);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="'+(null==(__t=id)?"":__t)+'" class="lrn lrn_widget"><button type="button" class="'+(null==(__t=displayLogic.submit?"lrn_submit_button":"lrn_save_button")?"":__t)+' lrn_btn"'+(null==(__t=displayLogic.disabled?'disabled="disabled"':"")?"":__t)+"><span>"+(null==(__t=displayLogic.label)?"":__t)+"</span></button></div>";return __p}},14218:function(module){var f;f=function(){var define,module,exports;return function r(i,u,l){function o(p,h){if(!u[p]){if(!i[p]){if(d)return d(p,!0);var g=new Error("Cannot find module '"+p+"'");throw g.code="MODULE_NOT_FOUND",g}var v=u[p]={exports:{}};i[p][0].call(v.exports,(function(u){return o(i[p][1][u]||u)}),v,v.exports,r,i,u,l)}return u[p].exports}for(var d=void 0,p=0;p<l.length;p++)o(l[p]);return o}({1:[function(i,u,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Assert=l.checkCounter=l.setCounter=l.clearLocation=l.setLocation=l.reserveCodeRange=l.message=l.assert=void 0;var d=i("./backward.js"),p=l.assert=function(i,u,l){if(void 0===u&&(u="failed!"),!i){var d=new Error(u);throw d.location=l||R.location,d}},h=l.message=function message(i,u){var l=R.messages[i];return R.location,u&&(0,d.forEach)(u,(function(i,u){l=l.replace("%"+(u+1),i)})),i+": "+l},g=l.reserveCodeRange=function reserveCodeRange(i,u,l){p(i<=u,"Invalid code range");var h=(0,d.every)(R.reservedCodes,(function(l){return u<l.first||i>l.last}));p(h,"Conflicting request for error code range"),R.reservedCodes.push({first:i,last:u,name:l})},v=l.setLocation=function setLocation(i){R.location=i},y=l.clearLocation=function clearLocation(){R.location=null},S=l.setCounter=function setCounter(i,u){R.count=i,R.countMessage=u||"ERROR count exceeded"},E=l.checkCounter=function checkCounter(){var i=R.count;"number"!=typeof i||isNaN(i)?p(!1,"ERROR counter not set"):p(R.count--,R.countMessage)},R=l.Assert={assert:p,message:h,messages:{},reserveCodeRange:g,reservedCodes:[],setLocation:v,clearLocation:y,setCounter:S,checkCounter:E}},{"./backward.js":3}],2:[function(i,u,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Ast=void 0;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},p=i("./backward.js"),h=i("./assert.js");l.Ast=function(){function Ast(){this.nodePool=["unused"],this.nodeMap={}}function isNode(i){return void 0===i&&(i=this),i.op&&i.args}return Ast.prototype.create=function create(i,u){var l=create(this);if("string"==typeof i)l.op=i,l.args=u instanceof Array?u:[];else if(null!==i&&"object"===(void 0===i?"undefined":d(i))){var h=i;(0,p.forEach)(keys(h),(function(i,u){l[i]=h[i]}))}return l},Ast.prototype.arg=function arg(i){if(!isNode(this))throw"Malformed node";return this.args.push(i),this},Ast.prototype.argN=function argN(i,u){if(!isNode(this))throw"Malformed node";return void 0===u?this.args[i]:(this.args[i]=u,this)},Ast.prototype.args=function args(i){if(!isNode(this))throw"Malformed node";return void 0===i?this.args:(this.args=i,this)},Ast.prototype.isNode=isNode,Ast.prototype.intern=function intern(i){this instanceof Ast&&void 0===i&&isNode(this)&&(i=this),(0,h.assert)("object"===(void 0===i?"undefined":d(i)),"node not an object");for(var u=i.op,l=i.args.length,p="",g=[],v=0;v<l;v++)p+=" ","string"==typeof i.args[v]?p+=g[v]=i.args[v]:p+=g[v]=this.intern(i.args[v]);i.lbrk&&i.lbrk!=="{".charCodeAt(0)&&(p+=String.fromCharCode(i.lbrk),p+=String.fromCharCode(i.rbrk));var y=u+l+p,S=this.nodeMap[y];return void 0===S&&(this.nodePool.push({op:u,args:g}),S=this.nodePool.length-1,this.nodeMap[y]=S),S},Ast.prototype.node=function node(i){for(var u=JSON.parse(JSON.stringify(this.nodePool[i])),l=0;l<u.args.length;l++)"string"!=typeof u.args[l]&&(u.args[l]=this.node(u.args[l]));return u},Ast.prototype.dumpAll=function dumpAll(){var i="";return(0,p.forEach)(this.nodePool,(function(u,l){i+="\n"+l+": "+Ast.dump(u)})),i},Ast.dump=Ast.prototype.dump=function dump(i){if("string"==typeof i);else if("number"==typeof i);else{i.op;for(var u=0;u<i.args.length;u++)dump(i.args[u])}return s},Ast}()},{"./assert.js":1,"./backward.js":3}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString),forEach=exports.forEach=function forEach(i,u){var l=arguments[2];if(Array.prototype.indexOf)return i.forEach(u);var d=toObject(i),p=splitString&&"[object String]"==_toString(d)?d.split(""):d,h=-1,g=p.length>>>0;if("[object Function]"!=_toString(u))throw new TypeError;for(;++h<g;)h in p&&u.call(l,p[h],h,d)},filter=exports.filter=function filter(i,u){var l=arguments[2];if(Array.prototype.filter)return i.filter(u);var d,p=toObject(i),h=splitString&&"[object String]"==_toString(i)?i.split(""):p,g=h.length>>>0,v=[];if("[object Function]"!=_toString(u))throw new TypeError(u+" is not a function");for(var y=0;y<g;y++)y in h&&(d=h[y],u.call(l,d,y,p)&&v.push(d));return v},every=exports.every=function every(i,u){var l=arguments[2];if(Array.prototype.every)return i.every(u,l);var d=toObject(i),p=splitString&&"[object String]"==_toString(i)?i.split(""):d,h=p.length>>>0;if("[object Function]"!=_toString(u))throw new TypeError(u+" is not a function");for(var g=0;g<h;g++)if(g in p&&!u.call(l,p[g],g,d))return!1;return!0},some=exports.some=function some(i,u){var l=arguments[2];if(Array.prototype.some)return i.some(u,l);var d=toObject(i),p=splitString&&"[object String]"==_toString(i)?i.split(""):d,h=p.length>>>0;if("[object Function]"!=_toString(u))throw new TypeError(u+" is not a function");for(var g=0;g<h;g++)if(g in p&&u.call(l,p[g],g,d))return!0;return!1},indexOf=exports.indexOf=function indexOf(i,u){var l=arguments[2];if(Array.prototype.indexOf||"string"==typeof i)return i.indexOf(u,l);var d=splitString&&"[object String]"==_toString(i)?i.split(""):toObject(i),p=d.length>>>0;if(!p)return-1;var h=0;for(arguments.length>2&&(h=toInteger(l)),h=h>=0?h:Math.max(0,p+h);h<p;h++)if(h in d&&d[h]===u)return h;return-1},keys=exports.keys=function keys(i){if(Object.keys)return Object.keys(i);var u=!0,l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=l.length;for(var p in{toString:null})u=!1;if("object"!=(void 0===i?"undefined":_typeof(i))&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var h in i)owns(i,h)&&keys.push(h);if(u)for(var g=0,v=d;g<v;g++){var y=l[g];owns(i,y)&&keys.push(y)}return keys},toObject=exports.toObject=function toObject(i){if(null==i)throw new TypeError("can't convert "+i+" to object");return Object(i)},prototypeOfObject=Object.prototype,_toString=function _toString(i){return prototypeOfObject.toString.apply(i)},owns=function owns(i,u){return prototypeOfObject.hasOwnProperty.call(i,u)},create=exports.create=function create(i){if(Object.create)return Object.create(i);var u=function F(){};if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return u.prototype=i,new u},toString,isArray,escMap,escFunc,escRE;"undefined"==typeof window||window.JSON||(window.JSON={parse:function parse(sJSON){return eval("("+sJSON+")")},stringify:(toString=Object.prototype.toString,isArray=Array.isArray||function(i){return"[object Array]"===toString.call(i)},escMap={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},escFunc=function escFunc(i){return escMap[i]||"\\u"+(i.charCodeAt(0)+65536).toString(16).substr(1)},escRE=/[\\"\u0000-\u001F\u2028\u2029]/g,function stringify(i){if(null==i)return"null";if("number"==typeof i)return isFinite(i)?i.toString():"null";if("boolean"==typeof i)return i.toString();if("object"===(void 0===i?"undefined":_typeof(i))){if("function"==typeof i.toJSON)return stringify(i.toJSON());if(isArray(i)){for(var u="[",l=0;l<i.length;l++)u+=(l?", ":"")+stringify(i[l]);return u+"]"}if("[object Object]"===toString.call(i)){var d=[];for(var p in i)i.hasOwnProperty(p)&&d.push(stringify(p)+": "+stringify(i[p]));return"{"+d.join(", ")+"}"}}return'"'+i.toString().replace(escRE,escFunc)+'"'})})},{}],4:[function(i,u,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Core=void 0;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},p=(i("./version.js"),i("./backward.js")),h=i("./assert.js"),g=i("./ast.js"),v=i("./model.js"),y=i("./rules.js");!function(i){function newNode(i,u){return{op:i,args:u}}function binaryNode(i,u,l){if(u.length<2)return u[0];var d=[];return(0,p.forEach)(u,(function(u){l&&u.op===i?d=d.concat(u.args):d.push(u)})),newNode(i,d)}function Visitor(i){function visit(i,u,l){switch((0,h.assert)(i.op&&i.args,"Visitor.visit() op="+i.op+" args = "+i.args),i.op){case v.Model.NUM:i=u.numeric(i,l);break;case v.Model.ADD:case v.Model.SUB:case v.Model.PM:case v.Model.BACKSLASH:case v.Model.DIV:case v.Model.FRAC:case v.Model.LOG:case v.Model.COLON:case v.Model.FUNC:case v.Model.TYPE:i=1===i.args.length?u.unary(i,l):u.binary(i,l);break;case v.Model.MUL:case v.Model.TIMES:case v.Model.COEFF:i=u.multiplicative(i,l);break;case v.Model.POW:i=u.exponential(i,l);break;case v.Model.VAR:i=u.variable(i,l);break;case v.Model.SQRT:case v.Model.SIN:case v.Model.COS:case v.Model.TAN:case v.Model.SEC:case v.Model.CSC:case v.Model.COT:case v.Model.ARCSIN:case v.Model.ARCCOS:case v.Model.ARCTAN:case v.Model.ARCSEC:case v.Model.ARCCSC:case v.Model.ARCCOT:case v.Model.PERCENT:case v.Model.M:case v.Model.ABS:case v.Model.FACT:case v.Model.FORALL:case v.Model.EXISTS:case v.Model.IN:case v.Model.SUM:case v.Model.LIM:case v.Model.EXP:case v.Model.TO:case v.Model.DERIV:case v.Model.INT:case v.Model.PROD:case v.Model.CUP:case v.Model.BIGCUP:case v.Model.CAP:case v.Model.BIGCAP:case v.Model.PIPE:case v.Model.ION:case v.Model.POW:case v.Model.SUBSCRIPT:case v.Model.OVERLINE:case v.Model.OVERSET:case v.Model.UNDERSET:case v.Model.MATHBF:case v.Model.NONE:case v.Model.DEGREE:case v.Model.DOT:case v.Model.MATHFIELD:case v.Model.SET:case v.Model.NOT:i=u.unary(i,l);break;case v.Model.COMMA:case v.Model.MATRIX:case v.Model.VEC:case v.Model.ROW:case v.Model.COL:case v.Model.LIST:i=u.comma(i,l);break;case v.Model.EQL:case v.Model.LT:case v.Model.LE:case v.Model.GT:case v.Model.GE:case v.Model.NE:case v.Model.NGTR:case v.Model.NLESS:case v.Model.NI:case v.Model.SUBSETEQ:case v.Model.SUPSETEQ:case v.Model.SUBSET:case v.Model.SUPSET:case v.Model.NNI:case v.Model.NSUBSETEQ:case v.Model.NSUPSETEQ:case v.Model.NSUBSET:case v.Model.NSUPSET:case v.Model.APPROX:case v.Model.IMPLIES:case v.Model.PERP:case v.Model.PROPTO:case v.Model.PARALLEL:case v.Model.NPARALLEL:case v.Model.SIM:case v.Model.CONG:case v.Model.NSIM:case v.Model.NCONG:case v.Model.CAPRIGHTARROW:case v.Model.RIGHTARROW:case v.Model.LEFTARROW:case v.Model.LONGRIGHTARROW:case v.Model.LONGLEFTARROW:case v.Model.OVERRIGHTARROW:case v.Model.OVERLEFTARROW:case v.Model.CAPLEFTRIGHTARROW:case v.Model.LEFTRIGHTARROW:case v.Model.LONGLEFTRIGHTARROW:case v.Model.OVERLEFTRIGHTARROW:i=u.equals(i,l);break;case v.Model.PAREN:case v.Model.INTERVAL:i=u.paren(i);break;default:"normalizeLiteral"!==u.name&&"sort"!==u.name&&(i=newNode(v.Model.VAR,["INTERNAL ERROR Should not get here. Unhandled node operator "+i.op]))}return i}function lookup(i){if(!i)return"";var u=v.Model.option("words"),l=void 0;return u&&(l=u[i]),l||"\\"===(l=i).charAt(0)&&(l=l.substring(1)),l}function normalizeFormatObject(i){var u=[];switch(i.op){case v.Model.VAR:u.push({code:i.args[0]});break;case v.Model.MUL:var l="",d=void 0;(0,p.forEach)(i.args,(function(i){i.op===v.Model.VAR?l+=i.args[0]:i.op===v.Model.NUM&&(d=+i.args[0])})),u.push({code:l,length:d});break;case v.Model.COMMA:(0,p.forEach)(i.args,(function(i){u=u.concat(normalizeFormatObject(i))}))}return u}function checkMatrixType(i,u){return normalizeFormatObject(i).some((function(i){var l=i.code;switch(i.length,l){case"simpleSmallRowMatrix":case"smallRowMatrix":return u.op===v.Model.MATRIX&&1===u.m&&u.n<4;case"simpleSmallColumnMatrix":case"smallColumnMatrix":return u.op===v.Model.MATRIX&&u.m<4&&1===u.n;case"simpleSmallMatrix":case"smallMatrix":return u.op===v.Model.MATRIX&&u.m<4&&u.n<4;case"matrix":return u.op===v.Model.MATRIX;case"row":return u.op===v.Model.ROW;case"column":return u.op===v.Model.COL;default:return!1}}))}function hasSimpleExpressions(i){return(0,h.assert)(i.op===v.Model.MATRIX||i.op===v.Model.ROW||i.op===v.Model.COL),(0,p.every)(i.args,(function(i){return i.op===v.Model.MATRIX||i.op===v.Model.ROW||i.op===v.Model.COL?hasSimpleExpressions(i):function isSimpleExpression(i){return i.op===v.Model.NUM||i.op===v.Model.VAR||"string"==typeof i}(i)}))}function matchType(i,u){var l=v.Model.option("types");if(i.op===v.Model.TYPE&&i.args[0].op===v.Model.VAR){var d=i.args[0].args[0];switch(d){case"number":case"integer":case"decimal":case"scientific":case"fraction":case"simpleFraction":case"mixedFraction":case"fractionOrDecimal":return function checkNumberType(i,u){return normalizeFormatObject(i).some((function(i){var l=i.code,d=i.length;switch(l){case"integer":if("integer"===u.numberFormat&&(void 0===d||d===u.args[0].length))return!0;break;case"decimal":if("decimal"===u.numberFormat&&u.isRepeating)return void 0===d;if("decimal"===u.numberFormat&&(void 0===d||0===d&&-1===(0,p.indexOf)(u.args[0],".")||d===u.args[0].substring((0,p.indexOf)(u.args[0],".")+1).length))return!0;break;case"number":if("decimal"===u.numberFormat&&u.isRepeating)return void 0===d;if("integer"===u.numberFormat||"decimal"===u.numberFormat){var g=(0,p.indexOf)(u.args[0],".");if(void 0===d||0===d&&-1===g||g>=0&&d===u.args[0].substring(g+1).length)return!0}break;case"scientific":if(u.isScientific){var v=u.args[0].args[0];if(void 0===d||0===d&&-1===(0,p.indexOf)(v,".")||d===v.substring((0,p.indexOf)(v,".")+1).length)return!0}break;case"fraction":if(u.isFraction||u.isMixedFraction)return!0;break;case"simpleFraction":case"nonMixedFraction":if(u.isFraction)return!0;break;case"mixedFraction":if(u.isMixedFraction)return!0;break;case"fractionOrDecimal":if(u.isFraction||u.isMixedFraction||"decimal"===u.numberFormat)return!0;break;default:(0,h.assert)(!1,(0,h.message)(2015,[l]))}}))}(i.args[0],u);case"variable":return u.op===v.Model.VAR;case"simpleSmallRowMatrix":case"simpleSmallColumnMatrix":case"simpleSmallMatrix":return checkMatrixType(i.args[0],u)&&hasSimpleExpressions(u);case"smallRowMatrix":case"smallColumnMatrix":case"smallMatrix":case"matrix":case"row":case"column":return checkMatrixType(i.args[0],u);default:var g=l[d];if(g)return(0,h.assert)(g instanceof Array),g.some((function(i){return match([normalizeLiteral(v.Model.create(i))],u).length>0}))}return!1}if(i.op===v.Model.COLON&&i.args[0].op===v.Model.VAR&&"?"===i.args[0].args[0]){switch((0,h.assert)(i.args[1].op===v.Model.VAR),i.args[1].args[0]){case"N":return u.op===v.Model.NUM;case"V":return u.op===v.Model.VAR}return!1}return i.op===v.Model.VAR&&"?"===i.args[0]||i.op===v.Model.MATRIX&&u.op===v.Model.MATRIX}function match(u,l){return 0!==u.size&&void 0!==l&&u.filter((function(u){if(void 0===u.op||void 0===l.op)return!1;if(i.intern(u)===i.intern(l)||matchType(u,l))return!0;if(u.op===l.op){if(u.args.length===l.args.length)return u.args.every((function(i,d){return u.op===v.Model.VAR?i===l.args[d]:1===match([i],l.args[d]).length}));if(u.args.length<l.args.length){var d=l.args.slice(1);if(2===u.args.length)return match([u.args[0]],l.args[0]).length>0&&match([u.args[1]],newNode(l.op,d)).length>0}}return!1}))}function expandBinary(i,u){var l=i;return(0,p.forEach)(u,(function(u,l){i=i.replace("%"+(l+1),u.args[0])})),u.length>2?expandBinary(l,[newNode(v.Model.VAR,[i])].concat(u.slice(2))):i}function expand(i,u,l){l=l||{};var d=i.str;if(d&&u){var g=d.split("%").length-1;if(d.indexOf("%%")>=0&&(d=d.replace("%%",u[0].args[0])),d.indexOf("%*")>=0){var y="";(0,p.forEach)(u,(function(i){""!==y&&(y+=" "),y+=d.replace("%*",i.args[0]).replace("%M",i.m).replace("%N",i.n)})),d=y}return d.indexOf("%IP")>=0&&(d=d.replace("%IP",l.ip)),d.indexOf("%FP0")>=0&&(d=d.replace("%FP0",l.fp)),d.indexOf("%FP")>=0&&(d=d.replace("%FP",l.fp.split("").join(" "))),d.indexOf("%M")>=0&&((0,h.assert)(l.m),d=d.replace("%M",l.m)),d.indexOf("%N")>=0&&((0,h.assert)(l.n),d=d.replace("%N",l.n)),2===g&&u.length>2?d=expandBinary(d,u):(0,p.forEach)(u,(function(i,u){d=d.replace("%"+(u+1),i.args[0])})),{op:v.Model.VAR,args:[d]}}return(0,h.assert)(1===u.length&&function isEmpty(i){return i.op===v.Model.VAR&&1===i.args.length&&""===i.args[0]}(u[0])),u[0]}function normalizeLiteral(l){return l&&l.args?(i.intern(l),visit(l,{name:"normalizeLiteral",numeric:function numeric(i){return i},binary:function binary(i){var u=[];return(0,p.forEach)(i.args,(function(i){u.push(normalizeLiteral(i))})),i.args=u,i},multiplicative:function multiplicative(i){var u=[];(0,p.forEach)(i.args,(function(i){(i.isPolynomial||i.isImplicit)&&u.length>0?u.push(binaryNode(v.Model.MUL,[u.pop(),normalizeLiteral(i)],!0)):u.push(normalizeLiteral(i))}));var l=binaryNode(i.op===v.Model.MUL?v.Model.TIMES:i.op,u,!0);return l.isScientific=i.isScientific,l.isMixedFraction=i.isMixedFraction,l.isBinomial=i.isBinomial,l},unary:function unary(i){var u=[];return(0,p.forEach)(i.args,(function(i){u.push(normalizeLiteral(i))})),newNode(i.op,u)},exponential:function exponential(i){var u=[];return(0,p.forEach)(i.args,(function(i){u.push(normalizeLiteral(i))})),i.args=u,i},variable:function variable(i){return i},comma:function comma(i){var u=[];return(0,p.forEach)(i.args,(function(i){u.push(normalizeLiteral(i))})),i.args=u,i},paren:function paren(i){var u=[];return(0,p.forEach)(i.args,(function(i){u.push(normalizeLiteral(i))})),i.args=u,i},equals:function equals(i){var l=[];if((0,p.forEach)(i.args,(function(i){l.push(normalizeLiteral(i))})),!u("ignoreOrder")||i.op!==v.Model.GT&&i.op!==v.Model.GE)i.args=l;else{(0,h.assert)(2===l.length,"Internal error: comparisons have only two operands");var d=l[0];l[0]=l[1],l[1]=d,i.op=i.op===v.Model.GT?v.Model.LT:v.Model.LE,i.args=l}return i}})):((0,h.assert)(!1,"Should not get here. Illformed node."),0)}function matchedTemplate(i,u,l){var d=[];u.forEach((function(u){d=d.concat(i[JSON.stringify(u)])}));var p=[];return d.forEach((function(i){(!i.context||v.Model.option("NoParens")&&i.context.indexOf("NoParens")>-1||v.Model.option("EndRoot")&&i.context.indexOf("EndRoot")>-1)&&l>=function paramCount(i){(0,h.assert)("string"==typeof i.str);var u=i.str.split("%").filter((function(i){return!isNaN(+i[0])}));return 0===u.length?0:+u.sort()[u.length-1][0]}(i)&&p.push(i)})),0===p.length&&p.push({str:""}),p[0]}function getNodeArgsForTemplate(i,u){return(0,h.assert)("string"==typeof u.str),u.str.indexOf("%%")>=0?[i]:i.args}this.normalizeLiteral=normalizeLiteral,this.translate=function translate(i,u){var l;u instanceof Array&&(u=1===u.length?u[0]:function mergeMaps(i,u){var l={};return i&&Object.keys(i).forEach((function(u){l[u]=i[u]})),Object.keys(u).forEach((function(i){l[i]||(l[i]=u[i])})),l}(u[1],u[0])),l=u;var d=Object.keys(u),g=[];return d.forEach((function(i){g.push(JSON.parse(i))})),i&&i.args?visit(i,{name:"translate",numeric:function numeric(i){var l=[{op:v.Model.VAR,args:[lookup(i.args[0])]}],d={};if("decimal"===i.numberFormat){var p=i.args[0].split(".");(0,h.assert)(2===p.length),d.ip=p[0],d.fp=p[1]}var y=match(g,i);return 0===y.length?i:expand(matchedTemplate(u,y,1),l,d)},binary:function binary(i){var d=match(g,i);if(0===d.length)return i;var h=matchedTemplate(u,d,i.args.length),v=getRulesForArgs(h),y=getNodeArgsForTemplate(i,h),S=[];return(0,p.forEach)(y,(function(i,u){S=S.concat(translate(i,[l,v]))})),expand(h,S)},multiplicative:function multiplicative(i){var d=match(g,i);if(0===d.length)return i;var h=matchedTemplate(u,d,i.args.length),v=getRulesForArgs(h),y=getNodeArgsForTemplate(i,h),S=[];return(0,p.forEach)(y,(function(i,u){S=S.concat(translate(i,[l,v]))})),expand(h,S)},unary:function unary(i){var d=match(g,i);if(0===d.length)return i;var h=matchedTemplate(u,d,i.args.length),v=getRulesForArgs(h),y=getNodeArgsForTemplate(i,h),S=[];return(0,p.forEach)(y,(function(i,u){S=S.concat(translate(i,[l,v]))})),expand(h,S)},exponential:function exponential(i){var d=match(g,i);if(0===d.length)return i;var h=matchedTemplate(u,d,i.args.length),v=getRulesForArgs(h),y=getNodeArgsForTemplate(i,h),S=[];return(0,p.forEach)(y,(function(i,u){S=S.concat(translate(i,[l,v]))})),expand(h,S)},variable:function variable(i){var d=match(g,i);if(0===d.length)return i;var h=matchedTemplate(u,d,i.args.length),y=getRulesForArgs(h),S=getNodeArgsForTemplate(i,h),E=[];return E.push(newNode(v.Model.VAR,[lookup(S.shift())])),(0,p.forEach)(S,(function(i,u){E=E.concat(translate(i,[l,y]))})),expand(h,E)},comma:function comma(i){if(i.op===v.Model.MATRIX||i.op===v.Model.ROW||i.op===v.Model.COL){var d={};i.op===v.Model.MATRIX?((0,h.assert)(i.args[0].op===v.Model.ROW),(0,h.assert)(i.args[0].args[0].op===v.Model.COL),i.m=d.m=i.args[0].args.length,i.n=d.n=i.args[0].args[0].args.length,(0,p.forEach)(i.args,(function(i,u){i.m=u+1}))):i.op===v.Model.ROW?(0,p.forEach)(i.args,(function(i,u){i.m=u+1,i.n=void 0})):(0,p.forEach)(i.args,(function(u,l){u.m=i.m,u.n=l+1}));var y=match(g,i);if(0===y.length)return i;var S=matchedTemplate(u,y,i.args.length),E=[],R=getRulesForArgs(S),T=getNodeArgsForTemplate(i,S);return(0,p.forEach)(T,(function(i,u){(E=E.concat(translate(i,[l,R])))[u].m=i.m,E[u].n=i.n})),expand(S,E,d)}var O=match(g,i);if(0===O.length)return i;var M=matchedTemplate(u,O,i.args.length),I=getRulesForArgs(M),P=getNodeArgsForTemplate(i,M),D=[];return(0,p.forEach)(P,(function(i,u){D=D.concat(translate(i,[l,I]))})),expand(M,D)},equals:function equals(i){var d=match(g,i);if(0===d.length)return i;var h=matchedTemplate(u,d,i.args.length),v=getRulesForArgs(h),y=getNodeArgsForTemplate(i,h),S=[];return(0,p.forEach)(y,(function(i,u){S=S.concat(translate(i,[l,v]))})),expand(h,S,i)},paren:function paren(i){var d=match(g,i);if(0===d.length)return i;if(d.length>1){var h=d;0===(d=d.filter((function(u){return u.lbrk===i.lbrk&&u.rbrk===i.rbrk}))).length&&(d=h)}var v=matchedTemplate(u,d,1),y=getRulesForArgs(v),S=getNodeArgsForTemplate(i,v),E=[];return(0,p.forEach)(S,(function(i){E.push(translate(i,[l,y]))})),expand(v,E)}}):((0,h.assert)(!1,"Should not get here. Illformed node."),0)}}function normalizeLiteral(u){var l=new Visitor(i),d=h.Assert.location;u.location&&h.Assert.setLocation(u.location);var p=l.normalizeLiteral(u);return h.Assert.setLocation(d),p}function getRulesForArgs(i,u){return i.rules}function compileTemplate(i){var u=void 0;if(i instanceof Array)u=[],i.forEach((function(i){u=u.concat(compileTemplate(i))}));else if("string"==typeof i)u=[{str:i}];else{var l="",d=void 0,p=void 0;i.options?(l+=i.options.EndRoot?" EndRoot":"",l+=i.options.NoParens?" NoParens":"",d=i.value):(d=Object.keys(i)[0],(0,h.assert)("options"!==d),p=compileRules(i[d])),u=[{context:l,str:d,rules:p}]}return u}function compileRules(i){var u=Object.keys(i),l={};return u.forEach((function(u){var d=JSON.stringify(normalizeLiteral(v.Model.create(u))),p=compileTemplate(i[u]);l[d]||(l[d]=p)})),l}h.Assert.messages,v.Model.fn.translate=function(u){var l=v.Model.option("rules"),d=function translate(u,l){var d=new Visitor(i),p=compileRules(l);return d.translate(u,p)}(normalizeLiteral(u),l);return d&&d.op===v.Model.VAR||(d=newNode(v.Model.VAR,[""])),function trim(i){for(var u=0,l="";u<i.length;u++)switch(i.charAt(u)){case" ":case"\t":case"\n":if(0===l.length||" "===l.charAt(l.length-1))continue;l+=" ";break;default:l+=i.charAt(u)}for(;" "===l.charAt(l.length-1);)l=l.substring(0,l.length-1);for(;-1!==l.lastIndexOf("baseline")&&l.lastIndexOf(" baseline")===l.length-" baseline".length;)l=l.substring(0,l.length-" baseline".length);return l}(d.args[0])};var u=v.Model.option=function option(i,u){var l=v.Model.options,d=l&&l[i];if(void 0!==u&&(v.Model.options=l=l||{},l[i]=u),void 0===d)switch(i){case"field":d="integer";break;case"decimalPlaces":d=10;break;case"setThousandsSeparator":case"setDecimalSeparator":case"dontExpandPowers":case"dontFactorDenominators":case"dontFactorTerms":case"dontConvertDecimalToFraction":case"strict":d=void 0;break;case"types":d={};break;default:d=!1}return d}}(new g.Ast);var S=l.Core=function(){h.Assert.reserveCodeRange(3e3,3999,"core");var i=h.Assert.messages,u=h.Assert.message,l=h.Assert.assert;i[3001]="No Math Core spec provided.",i[3002]="No Math Core solution provided.",i[3003]="No Math Core spec value provided.",i[3004]="Invalid Math Core spec method '%1'.",i[3005]="Operation taking too long.",i[3006]="Invalid option name '%1'.",i[3007]="Invalid option value '%2' for option '%1'.",i[3008]="Internal error: %1";var S=1e3,E=Math.pow(10,-2),R=Math.pow(10,-3),T=Math.pow(10,-6),O=Math.pow(10,-9),M={g:{type:"unit",value:1,base:"g"},s:{type:"unit",value:1,base:"s"},m:{type:"unit",value:1,base:"m"},L:{type:"unit",value:1,base:"L"},kg:{type:"unit",value:S,base:"g"},km:{type:"unit",value:S,base:"m"},ks:{type:"unit",value:S,base:"s"},kL:{type:"unit",value:S,base:"L"},cg:{type:"unit",value:E,base:"g"},cm:{type:"unit",value:E,base:"m"},cs:{type:"unit",value:E,base:"s"},cL:{type:"unit",value:E,base:"L"},mg:{type:"unit",value:R,base:"g"},mm:{type:"unit",value:R,base:"m"},ms:{type:"unit",value:R,base:"s"},mL:{type:"unit",value:R,base:"L"},"\\mug":{type:"unit",value:T,base:"g"},"\\mus":{type:"unit",value:T,base:"s"},"\\mum":{type:"unit",value:T,base:"m"},"\\muL":{type:"unit",value:T,base:"L"},ng:{type:"unit",value:O,base:"g"},nm:{type:"unit",value:O,base:"m"},ns:{type:"unit",value:O,base:"s"},nL:{type:"unit",value:O,base:"L"},in:{type:"unit",value:1/12,base:"ft"},ft:{type:"unit",value:1,base:"ft"},yd:{type:"unit",value:3,base:"ft"},mi:{type:"unit",value:5280,base:"ft"},fl:{type:"unit",value:1,base:"fl"},cup:{type:"unit",value:8,base:"fl"},pt:{type:"unit",value:16,base:"fl"},qt:{type:"unit",value:32,base:"fl"},gal:{type:"unit",value:128,base:"fl"},oz:{type:"unit",value:1/16,base:"lb"},lb:{type:"unit",value:1,base:"lb"},st:{type:"unit",value:1/1614,base:"lb"},qtr:{type:"unit",value:28,base:"lb"},cwt:{type:"unit",value:112,base:"lb"},t:{type:"unit",value:2240,base:"lb"},$:{type:"unit",value:1,base:"$"},i:{type:"unit",value:null,base:"i"},min:{type:"unit",value:60,base:"s"},hr:{type:"unit",value:3600,base:"s"},day:{type:"unit",value:86400,base:"s"},"\\radian":{type:"unit",value:1,base:"radian"},"'":{type:"unit",value:1,base:"prime"},"''":{type:"unit",value:1,base:"doubleprime"},"'''":{type:"unit",value:1,base:"tripleprime"},"\\degree":{type:"unit",value:Math.PI/180,base:"radian"},"\\degree K":{type:"unit",value:1,base:"\\degree K"},"\\degree C":{type:"unit",value:1,base:"\\degree C"},"\\degree F":{type:"unit",value:1,base:"\\degree F"},R:{name:"reals"},matrix:{},pmatrix:{},bmatrix:{},Bmatrix:{},vmatrix:{},Vmatrix:{},array:{},"\\alpha":{type:"var"},"\\beta":{type:"var"},"\\gamma":{type:"var"},"\\delta":{type:"var"},"\\epsilon":{type:"var"},"\\zeta":{type:"var"},"\\eta":{type:"var"},"\\theta":{type:"var"},"\\iota":{type:"var"},"\\kappa":{type:"var"},"\\lambda":{type:"var"},"\\mu":{type:"const",value:T},"\\nu":{type:"var"},"\\xi":{type:"var"},"\\pi":{type:"const",value:Math.PI},"\\rho":{type:"var"},"\\sigma":{type:"var"},"\\tau":{type:"var"},"\\upsilon":{type:"var"},"\\phi":{type:"var"},"\\chi":{type:"var"},"\\psi":{type:"var"},"\\omega":{type:"var"},"\\sin":{type:"var"},"\\cos":{type:"var"},"\\tan":{type:"var"},"\\sec":{type:"var"},"\\csc":{type:"var"},"\\cot":{type:"var"},"\\arcsin":{type:"var"},"\\arccos":{type:"var"},"\\arctan":{type:"var"},"\\arcsec":{type:"var"},"\\arccsc":{type:"var"},"\\arccot":{type:"var"},"\\sinh":{type:"var"},"\\cosh":{type:"var"},"\\tanh":{type:"var"},"\\sech":{type:"var"},"\\csch":{type:"var"},"\\coth":{type:"var"},"\\log":{type:"var"},"\\ln":{type:"var"},"\\lg":{type:"var"}};function validateOptions(i){i&&(0,p.forEach)((0,p.keys)(i),(function(p){!function validateOption(i,p){switch(i){case"field":switch(p){case void 0:case"integer":case"real":case"complex":break;default:l(!1,u(3007,[i,p]))}break;case"decimalPlaces":if(void 0===p||+p>=0&&+p<=20)break;l(!1,u(3007,[i,p]));break;case"NoParens":case"EndRoot":case"allowDecimal":case"allowInterval":case"dontExpandPowers":case"dontFactorDenominators":case"dontFactorTerms":case"dontConvertDecimalToFraction":case"dontSimplifyImaginary":case"ignoreOrder":case"inverseResult":case"requireThousandsSeparator":case"ignoreText":case"ignoreTrailingZeros":case"allowThousandsSeparator":case"compareSides":case"ignoreCoefficientOne":case"strict":if(void 0===p||"boolean"==typeof p)break;l(!1,u(3007,[i,p]));break;case"setThousandsSeparator":if(void 0===p||"string"==typeof p&&1===p.length||p instanceof Array)break;l(!1,u(3007,[i,p]));break;case"setDecimalSeparator":if(void 0===p||"string"==typeof p&&1===p.length||p instanceof Array&&p.length>0&&1===p[0].length)break;l(!1,u(3007,[i,JSON.stringify(p)]));break;case"words":case"rules":case"types":if(void 0===p||"object"===(void 0===p?"undefined":d(p)))break;l(!1,u(3007,[i,p]));break;default:l(!1,u(3006,[i]))}}(p,i[p])}))}return{translate:function translate(i,d,g){i||(i={}),i.rules||(i.words=y.rules.words,i.rules=y.rules.rules,i.types=y.rules.types);var S=function makeEvaluator(i,d){var g=void 0,y=i.method,S=i.value,E=v.Model.options=i.options,R=void 0;try{h.Assert.setLocation("spec"),validateOptions(E),v.Model.pushEnv(M),g=null!=S?v.Model.create(S,"spec"):void 0,v.Model.popEnv()}catch(i){R=i}var T=function evaluate(i,d){try{if(R)throw R;h.Assert.setLocation("user"),l(null!=i,u(3002)),v.Model.pushEnv(M);var p=v.Model.create(i,"user");l(p,u(3008,["invalid input"])),h.Assert.setLocation("spec");var g=void 0;"translate"===y?g=p.translate():l(!1,u(3004,[y])),v.Model.popEnv(),d(null,g)}catch(i){var S=i.message;d({result:null,errorCode:parseErrorCode(S),message:parseMessage(S),stack:i.stack,location:i.location,model:null,toString:function toString(){return this.errorCode+": ("+this.location+") "+this.message+"\n"+this.stack}},"")}};return{evaluate:T,model:g};function parseErrorCode(i){var u=+i.slice(0,(0,p.indexOf)(i,":"));return isNaN(u)?0:u}function parseMessage(i){return parseErrorCode(i)?i.slice((0,p.indexOf)(i,":")+2):i}}({method:"translate",options:i});S.evaluate(d,g)},Model:v.Model,Ast:g.Ast}}();"undefined"!=typeof window&&(window.Core=S)},{"./assert.js":1,"./ast.js":2,"./backward.js":3,"./model.js":5,"./rules.js":6,"./version.js":7}],5:[function(i,u,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Model=void 0;var d=i("./backward.js"),p=i("./assert.js"),h=i("./ast.js");l.Model=function(){function Model(){}Model.fn={},Model.env=u={};var i=[],u={};function isChemCore(){return!!Model.env.Au}Model.pushEnv=function pushEnv(l){i.push(u),Model.env=u=l},Model.popEnv=function popEnv(){(0,p.assert)(i.length>0,"Empty envStack"),Model.env=u=i.pop()};var l=Model.prototype=new h.Ast;p.Assert.reserveCodeRange(1e3,1999,"model"),p.Assert.messages[1e3]="Internal error. %1.",p.Assert.messages[1001]="Invalid syntax. '%1' expected, '%2' found.",p.Assert.messages[1002]="Only one decimal separator can be specified.",p.Assert.messages[1003]="Extra characters in input at position: %1, lexeme: %2.",p.Assert.messages[1004]="Invalid character '%1' (%2) in input.",p.Assert.messages[1005]="Misplaced thousands separator.",p.Assert.messages[1006]="Invalid syntax. Expression expected, %1 found.",p.Assert.messages[1007]="Unexpected character: '%1' in '%2'.",p.Assert.messages[1008]="The same character '%1' is being used as a thousands and decimal separators.",p.Assert.messages[1009]="Missing argument for '%1' command.",p.Assert.messages[1010]="Expecting an operator between numbers.";var g=p.Assert.message;Model.create=l.create=function create(i,u){if((0,p.assert)(null!=i,"Model.create() called with invalid argument "+i),i instanceof Model)return u&&(i.location=u),i;var h=void 0;if(i instanceof Array)return h=[],(0,d.forEach)(i,(function(i){h.push(create(i,u))})),h;if(!(this instanceof Model))return(new Model).create(i,u);if((h=create(this)).location=u,"string"==typeof i){var g=_e(i,Model.env);i=g.expr()}else i=JSON.parse(JSON.stringify(i));return(0,d.forEach)((0,d.keys)(Model.fn),(function(i,u){l.hasOwnProperty(i)||(l[i]=function(){var u=Model.fn[i];if(arguments.length>1&&arguments[1]instanceof Model)return u.apply(this,arguments);for(var l=[this],d=0;d<arguments.length;d++)l.push(arguments[d]);return u.apply(this,l)})})),(0,d.forEach)((0,d.keys)(i),(function(u,l){h[u]=i[u]})),h},l.toLaTex=function toLaTex(i){return render(i)};var v={ADD:"+",SUB:"-",MUL:"mul",TIMES:"times",COEFF:"coeff",DIV:"div",FRAC:"frac",EQL:"=",ATAN2:"atan2",SQRT:"sqrt",VEC:"vec",PM:"pm",NOT:"not",VAR:"var",NUM:"num",CST:"cst",COMMA:",",POW:"^",SUBSCRIPT:"_",ABS:"abs",PAREN:"()",HIGHLIGHT:"hi",LT:"lt",LE:"le",GT:"gt",GE:"ge",NE:"ne",NGTR:"ngtr",NLESS:"nless",NI:"ni",SUBSETEQ:"subseteq",SUPSETEQ:"supseteq",SUBSET:"subset",SUPSET:"supset",NNI:"nni",NSUBSETEQ:"nsubseteq",NSUPSETEQ:"nsupseteq",NSUBSET:"nsubset",NSUPSET:"nsupset",APPROX:"approx",IMPLIES:"implies",CAPRIGHTARROW:"caprightarrow",RIGHTARROW:"rightarrow",LEFTARROW:"leftarrrow",LONGRIGHTARROW:"longrightarrow",LONGLEFTARROW:"longleftarrow",OVERRIGHTARROW:"overrightarrow",OVERLEFTARROW:"overleftarrow",CAPLEFTRIGHTARROW:"capleftrightarrow",LEFTRIGHTARROW:"leftrightarrow",LONGLEFTRIGHTARROW:"longleftrightarrow",OVERLEFTRIGHTARROW:"overleftrightarrow",PERP:"perp",PROPTO:"propto",PARALLEL:"parallel",NPARALLEL:"nparallel",SIM:"sim",CONG:"cong",NSIM:"nsim",NCONG:"ncong",INTERVAL:"interval",LIST:"list",SET:"set",EXISTS:"exists",IN:"in",FORALL:"forall",LIM:"lim",EXP:"exp",TO:"to",SUM:"sum",DERIV:"deriv",PIPE:"pipe",INT:"int",PROD:"prod",CUP:"cup",BIGCUP:"bigcup",CAP:"cap",BIGCAP:"bigcap",PERCENT:"%",QMARK:"?",M:"M",FACT:"fact",BINOM:"binom",ROW:"row",COL:"col",COLON:"colon",MATRIX:"matrix",TYPE:"type",OVERSET:"overset",UNDERSET:"underset",OVERLINE:"overline",DEGREE:"degree",BACKSLASH:"backslash",MATHBF:"mathbf",DOT:"dot",MATHFIELD:"mathfield",NONE:"none"};(0,d.forEach)((0,d.keys)(v),(function(i,u){Model[i]=v[i]}));var y={};function isInvisibleCharCode(i){return function isControlCharCode(i){return i>=1&&i<=31||i>=127&&i<=159}(i)}function isAlphaCharCode(i){return i>=65&&i<=90||i>=97&&i<=122||39===i}function isNumberCharCode(i){return i>=48&&i<=57}y[v.ADD]="+",y[v.SUB]="-",y[v.MUL]="\\times",y[v.DIV]="\\div",y[v.FRAC]="\\frac",y[v.EQL]="=",y[v.ATAN2]="\\atan2",y[v.POW]="^",y[v.SUBSCRIPT]="_",y[v.PM]="\\pm",y[v.NOT]="\\not",y[v.COMMA]=",",y[v.M]="\\M",y[v.BINOM]="\\binom",y[v.COLON]="\\colon",Model.fold=function fold(i,u){var l=[],p=void 0;return(0,d.forEach)(i.args,(function(i){l.push(fold(i,u))})),i.args=l,i.op===v.VAR&&(p=u[i.args[0]])&&(i=p),i};var S=43,E=94,R=95,T=256,O=123,M=124,I=91,P=40,D=258,N=125,q=93,L=41,V=45,U=97,B=269,H=270,z=271,Q=272,G=273,Y=284,X=286,ee=287,te=294,ne=295,re=299,ie=301,ae=304,oe=322,se=327,ue=328,le=329,ce=330,de=331,fe=332,pe=333,he=335,ge=336,me=337,ve=0,ye=0,be={};be[47]=v.FRAC,be[256]=v.FRAC,be[257]=v.SQRT,be[290]=v.VEC,be[43]=v.ADD,be[45]=v.SUB,be[258]=v.PM,be[322]=v.NOT,be[94]=v.POW,be[95]=v.SUBSCRIPT,be[42]=v.MUL,be[304]=v.DOT,be[294]=v.DIV,be[61]=v.EQL,be[44]=v.COMMA,be[269]=v.TEXT,be[270]=v.LT,be[271]=v.LE,be[272]=v.GT,be[273]=v.GE,be[301]=v.NE,be[315]=v.NGTR,be[316]=v.NLESS,be[317]=v.NI,be[318]=v.SUBSETEQ,be[319]=v.SUPSETEQ,be[320]=v.SUBSET,be[321]=v.SUPSET,be[302]=v.APPROX,be[313]=v.PERP,be[314]=v.PROPTO,be[323]=v.PARALLEL,be[324]=v.NPARALLEL,be[325]=v.SIM,be[326]=v.CONG,be[338]=v.NSIM,be[339]=v.NCONG,be[274]=v.EXISTS,be[275]=v.IN,be[276]=v.FORALL,be[277]=v.LIM,be[278]=v.EXP,be[279]=v.TO,be[124]=v.PIPE,be[280]=v.SUM,be[281]=v.INT,be[282]=v.PROD,be[309]=v.CUP,be[310]=v.BIGCUP,be[311]=v.CAP,be[312]=v.BIGCAP,be[283]=v.M,be[334]=v.IMPLIES,be[337]=v.CAPRIGHTARROW,be[284]=v.RIGHTARROW,be[327]=v.LEFTARROW,be[328]=v.LONGRIGHTARROW,be[329]=v.LONGLEFTARROW,be[330]=v.OVERRIGHTARROW,be[331]=v.OVERLEFTARROW,be[335]=v.LEFTRIGHTARROW,be[336]=v.CAPLEFTRIGHTARROW,be[332]=v.LONGLEFTRIGHTARROW,be[333]=v.OVERLEFTRIGHTARROW,be[33]=v.FACT,be[285]=v.BINOM,be[286]=v.ROW,be[287]=v.COL,be[58]=v.COLON,be[295]=v.TYPE,be[296]=v.OVERLINE,be[297]=v.OVERSET,be[298]=v.UNDERSET,be[299]=v.BACKSLASH,be[300]=v.MATHBF,be[304]=v.DOT,be[308]=v.MATHFIELD;var _e=function parse(i,u){function newNode(i,u){return{op:i,args:u}}function matchThousandsSeparator(i,u){if(Model.option("allowThousandsSeparator")||Model.option("setThousandsSeparator")){var l=Model.option("setThousandsSeparator");return l?i===u||!u&&(0,d.indexOf)(l,i)>=0?i:"":","===i?i:""}return""}function matchDecimalSeparator(i){var u=Model.option("setDecimalSeparator"),l=Model.option("setThousandsSeparator");if("string"==typeof u){(0,p.assert)(1===u.length,g(1002));var h=u;return l instanceof Array&&(0,d.indexOf)(l,h)>=0&&(0,p.assert)(!1,g(1008,[h])),i===h}return u instanceof Array?((0,d.forEach)(u,(function(i){l instanceof Array&&(0,d.indexOf)(l,i)>=0&&(0,p.assert)(!1,g(1008,[i]))})),(0,d.indexOf)(u,i)>=0):l instanceof Array&&(0,d.indexOf)(l,".")>=0?((0,p.assert)(!1,g(1008)),!1):"."===i}function numberNode(i,u,l){var d=Model.option("ignoreTrailingZeros"),h=i.toString(),v="",y=void 0,S=void 0,E=void 0,R=void 0,T=0,O="integer",M=void 0,I=void 0;for("."===i&&(0,p.assert)(!1,g(1004,[i,i.charCodeAt(0)])),y=0;y<h.length;y++)matchThousandsSeparator(S=h.charAt(y))?((T&&E!==y-4||!T&&y>4)&&(0,p.assert)(!1,g(1005)),E=y,T++):(matchDecimalSeparator(S)?("decimal"===O&&(0,p.assert)(!1,g(1007,[S,v+S])),S=".",O="decimal",T&&E!==y-4&&(0,p.assert)(!1,g(1005)),"0"===v&&(M=!0),R=v.length,E=y,T++):"decimal"===O&&"0"!==S&&(R=v.length),v+=S);return"decimal"!==O&&E&&E!==y-4&&(0,p.assert)(!1,g(1005)),void 0!==R&&(R+1<v.length&&(I=!0),d&&"."===(v=v.substring(0,R+1))&&(v="0")),{op:Model.NUM,args:[String(v)],hasThousandsSeparator:0!==T,numberFormat:O,hasLeadingZero:M,hasTrailingZero:I}}function multiplyNode(i,u){return 0===i.length&&(i=[l]),binaryNode(Model.MUL,i,u)}function unaryNode(i,u){return(0,p.assert)(1===u.length,"Wrong number of arguments for unary node"),newNode(i,u)}function binaryNode(i,u,l){if((0,p.assert)(u.length>0,"1000: Too few argument for binary node"),u.length<2)return u[0];var h=[];return(0,d.forEach)(u,(function(u){l&&u.op===i?h=h.concat(u.args):h.push(u)})),newNode(i,h)}i=function stripInvisible(i){for(var u,l,d="",p=0;p<i.length;){for(;p<i.length&&isInvisibleCharCode(u=i.charCodeAt(p++));)32!==l&&(l=u=9);92===u?(d+=String.fromCharCode(u),u=i.charCodeAt(p++)):9===u&&isNumberCharCode(d.charCodeAt(d.length-1))&&isNumberCharCode(i.charCodeAt(p))&&(u=i.charCodeAt(p++)),d+=String.fromCharCode(u)}return d}(i);var l=numberNode("1"),h=unaryNode(Model.SUB,[numberNode("1")]),y=newNode(Model.NONE,[numberNode("0")]),_e=newNode(Model.VAR,[""]),Se=function scanner(i){var l=0,h="",v={"\\cdot":ae,"\\times":42,"\\div":te,"\\dfrac":T,"\\frac":T,"\\sqrt":257,"\\vec":290,"\\pm":D,"\\not":oe,"\\left":null,"\\right":null,"\\big":null,"\\Big":null,"\\bigg":null,"\\Bigg":null,"\\ ":null,"\\quad":null,"\\qquad":null,"\\text":B,"\\textrm":B,"\\textit":B,"\\textbf":B,"\\lt":H,"\\le":z,"\\gt":Q,"\\ge":G,"\\ne":ie,"\\neq":ie,"\\ngtr":315,"\\nless":316,"\\ni":317,"\\subseteq":318,"\\supseteq":319,"\\subset":320,"\\supset":321,"\\approx":302,"\\implies":334,"\\Rightarrow":me,"\\rightarrow":Y,"\\leftarrow":se,"\\longrightarrow":ue,"\\longleftarrow":le,"\\overrightarrow":ce,"\\overleftarrow":de,"\\Leftrightarrow":ge,"\\leftrightarrow":he,"\\longleftrightarrow":fe,"\\overleftrightarrow":pe,"\\perp":313,"\\propto":314,"\\parallel":323,"\\nparallel":324,"\\sim":325,"\\cong":326,"\\nsim":338,"\\ncong":339,"\\exists":274,"\\in":275,"\\forall":276,"\\lim":277,"\\exp":278,"\\to":279,"\\sum":280,"\\int":281,"\\prod":282,"\\cup":309,"\\bigcup":310,"\\cap":311,"\\bigcap":312,"\\%":37,"\\binom":285,"\\begin":288,"\\end":289,"\\colon":58,"\\vert":M,"\\lvert":M,"\\rvert":M,"\\mid":M,"\\type":ne,"\\overline":296,"\\overset":297,"\\underset":298,"\\backslash":re,"\\mathbf":300,"\\abs":303,"\\dot":ae,"\\MathQuillMathField":308,"\\ldots":U,"\\vdots":U,"\\ddots":U},y=(0,d.keys)(u),S=void 0;function number(u){for(;isNumberCharCode(u)||matchDecimalSeparator(String.fromCharCode(u))||(S=matchThousandsSeparator(String.fromCharCode(u),S))&&isNumberCharCode(i.charCodeAt(l));)h+=String.fromCharCode(u),92===(u=i.charCodeAt(l++))&&32===i.charCodeAt(l)&&(u=32,l++);return"."!==h||0!==(0,d.indexOf)(i.substring(l),"overline")&&0!==(0,d.indexOf)(i.substring(l),"dot")||(h="0."),l--,48}function variable(u){var p=String.fromCharCode(u);h+=p;for(var g=function _loop(){var i=String.fromCharCode(u),l=h+i;if(!(0,d.some)(y,(function(i){return 0===(0,d.indexOf)(i,l)})))return"break";h+=i};isAlphaCharCode(u=i.charCodeAt(l++))&&"break"!==g(););return l--,U}function latex(){var u=void 0;if(36===(u=i.charCodeAt(l++)))h=String.fromCharCode(u);else if(37===u)h+=String.fromCharCode(u);else if((0,d.indexOf)([32,58,59,44,33],u)>=0)h="\\ ";else{for(;isAlphaCharCode(u);)h+=String.fromCharCode(u),u=i.charCodeAt(l++);l--}var p=v[h];if(void 0===p)p=U;else if(p===B||p===ne){for(u=i.charCodeAt(l++);u&&123!==u;)u=i.charCodeAt(l++);for(h="",u=i.charCodeAt(l++);u&&125!==u;){var g=String.fromCharCode(u);h+=g,u=i.charCodeAt(l++)}p!==ne&&(p=!h||Model.option("ignoreText")?null:U)}return p}function prime(u){for((0,p.assert)(39===u),h="'";39===i.charCodeAt(l);)l++,h+="'";return U}return{start:function start(u){u||(u={});var v=void 0;for(h="";l<i.length;)switch(v=i.charCodeAt(l++)){case 32:case 9:case 10:case 13:continue;case 38:if(0===(0,d.indexOf)(i.substring(l),"nbsp;")){l+=5;continue}return ee;case 92:switch(h+=String.fromCharCode(v),i.charCodeAt(l)){case 92:return l++,X;case 123:case 124:case 125:return i.charCodeAt(l++)}var y=latex();if(null!==y)return y;h="";continue;case 45:if(62===i.charCodeAt(l))return l++,Y;case 33:return 61===i.charCodeAt(l)?(l++,ie):v;case 37:case 40:case 41:case 42:case 43:case 44:case 47:case 58:case 61:case 63:case 91:case 93:case 94:case 95:case 123:case 124:case 125:return h+=String.fromCharCode(v),v;case 36:return h+=String.fromCharCode(v),U;case 39:return prime(v);case 60:return 61===i.charCodeAt(l)?(l++,z):H;case 62:return 61===i.charCodeAt(l)?(l++,G):Q;default:return isAlphaCharCode(v)?variable(v):matchDecimalSeparator(String.fromCharCode(v))||isNumberCharCode(v)?u.oneCharToken?(h+=String.fromCharCode(v),48):number(v):((0,p.assert)(!1,g(1004,[String.fromCharCode(v),v])),0)}return 0},lexeme:function lexeme(){if(h)return h},pos:function pos(){return l}}}(i);function start(i){ve=Se.start(i)}function hd(){return ve}function lexeme(){return Se.lexeme()}function next(i){ve=ye,ye=0,0===ve&&(ve=Se.start(i))}function lookahead(i){return 0===ye&&(ye=Se.start(i)),ye}function eat(i,u){var l=hd();if(l!==i){var d=String.fromCharCode(i),h=l?String.fromCharCode(l):"EOS";(0,p.assert)(!1,g(1001,[d,h]))}next(u)}function isSimpleFraction(i){if(i.op===Model.FRAC){var u=i.args[0],l=i.args[1];return u.op===Model.NUM&&"integer"===u.numberFormat&&l.op===Model.NUM&&"integer"===l.numberFormat}return!1}function isMinusOne(i){return i.op===Model.SUB&&1===i.args.length&&i.args[0].op===Model.NUM&&1===i.args[0].args.length&&"1"===i.args[0].args[0]}function primaryExpr(){var i,u=void 0,l=void 0,v=void 0,y=void 0,S=void 0;switch(i=hd()){case 65:case 97:v=[lexeme()],next(),u=newNode(Model.VAR,v),isChemCore()&&hd()===O&&lookahead()===N&&(eat(O),eat(N));break;case 48:u=numberNode(lexeme()),next();break;case ne:u=newNode(Model.TYPE,[newNode(Model.VAR,[lexeme()])]),next();break;case 91:case 40:u=function parenExpr(i){var u=void 0,l=void 0;return eat(i),hd()===L||hd()===q?(eat(i===P?L:q),u=newNode(Model.COMMA,[])):(u=commaExpr(),eat(l=hd()===L?L:q)),(2!==u.args.length||i!==P&&i!==I||l!==L&&l!==q)&&i!==P&&i!==I||(u=newNode(Model.PAREN,[u])),u.lbrk=i,u.rbrk=l,u}(i);break;case O:u=braceExpr();break;case 288:next();var D=braceExpr(),V=function matrixExpr(){var i=[];for(i.push(rowExpr());hd()===X;)next(),i.push(rowExpr());return newNode(be[286],i)}();eat(289),braceExpr(),(0,d.indexOf)(D.args[0],"matrix")>=0?u=newNode(Model.MATRIX,[V]):(0,p.assert)(!1,"Unrecognized LaTeX name");break;case M:u=function absExpr(){eat(M);var i=additiveExpr();return eat(M),unaryNode(Model.ABS,[i])}();break;case 303:next(),u=unaryNode(Model.ABS,[braceExpr()]);break;case T:next(),y=braceExpr(),S=braceExpr(),(u=newNode(Model.FRAC,[y,S])).isFraction=isSimpleFraction(u);break;case 285:next();var U=braceExpr(),B=braceExpr(),H=unaryNode(Model.FACT,[U]),z=binaryNode(Model.POW,[binaryNode(Model.MUL,[unaryNode(Model.FACT,[B]),unaryNode(Model.FACT,[binaryNode(Model.ADD,[U,negate(B)])])]),h]);(u=binaryNode(Model.MUL,[H,z])).isBinomial=!0;break;case 257:switch(next(),hd()){case I:var Q=function bracketExpr(){eat(I);var i=commaExpr();return eat(q),i}();l=braceExpr(),u=newNode(Model.SQRT,[l,Q]);break;case O:l=braceExpr(),u=newNode(Model.SQRT,[l,newNode(Model.NUM,["2"])]);break;default:(0,p.assert)(!1,g(1001,["{ or (",String.fromCharCode(hd())]))}break;case 290:next();var G=braceExpr();u=newNode(Model.VEC,[G]);break;case 277:return next(),v=[],hd()===R&&(eat(R),v.push(primaryExpr()),v.push(primaryExpr())),newNode(be[i],v);case 280:case 281:case 282:case 309:case 310:case 311:case 312:return next(),v=[],hd()===R&&(next({oneCharToken:!0}),v.push(primaryExpr()),hd()===E&&(eat(E,{oneCharToken:!0}),v.push(primaryExpr()))),hd()&&v.push(commaExpr()),newNode(be[i],v);case 274:return next(),newNode(Model.EXISTS,[equalExpr()]);case 276:case me:case Y:case se:case ue:case le:case ce:case de:case ge:case he:case fe:case pe:return next(),newNode(be[i],[commaExpr()]);case 278:return next(),newNode(Model.EXP,[additiveExpr()]);case 283:return next(),newNode(Model.M,[multiplicativeExpr()]);case 296:case ae:case 308:return next(),newNode(be[i],[braceExpr()]);case 297:case 298:return next(),y=braceExpr(),S=braceExpr(),newNode(be[i],[y,S]);case 300:return next(),y=braceExpr(),newNode(Model.MATHBF,[y]);case 63:return next(),newNode(Model.VAR,["?"]);default:(0,p.assert)(!Model.option("strict"),g(1006,[be[i]])),u=_e}return u}function rowExpr(){var i=[];for(i.push(equalExpr());hd()===ee;)next(),i.push(equalExpr());return newNode(be[287],i)}function braceExpr(){var i=void 0;return eat(O),hd()===N?(eat(N),i=_e):(i=commaExpr(),eat(N)),i.lbrk=O,i.rbrk=N,i}function exponentialExpr(){for(var i=[primaryExpr()];hd()===E;){next({oneCharToken:!0});var u=void 0;if(!isMathSymbol(i[0])&&!isChemCore()||(u=hd())!==S&&u!==V){var p=unaryExpr();p.op===Model.VAR&&"\\circ"===p.args[0]?(hd()===U&&"K"===lexeme()||"C"===lexeme()||"F"===lexeme()?(p=multiplyNode([i.pop(),unaryNode(Model.VAR,["\\degree "+lexeme()])]),next()):p=multiplyNode([i.pop(),unaryNode(Model.VAR,["\\degree"])]),i.push(p)):i.push(p)}else next(),i.push(unaryNode(be[u],[l]))}if(i.length>1){var h=i.pop();return(0,d.forEach)(i.reverse(),(function(i){h=newNode(Model.POW,[i,h])})),h}return i[0]}function postfixExpr(){var i,u=exponentialExpr();switch(i=hd()){case 37:next(),u=newNode(Model.PERCENT,[u]);break;case 33:next(),u=newNode(Model.FACT,[u]);break;default:if(i===U&&"\\degree"===lexeme())next(),hd()!==U||"K"!==lexeme()&&"C"!==lexeme()&&"F"!==lexeme()?u=multiplyNode([u,unaryNode(Model.VAR,["\\degree"])]):(u=multiplyNode([u,unaryNode(Model.VAR,["\\degree "+lexeme()])]),next());else if(i===M&&lookahead()===R){next();var l=[u];next({oneCharToken:!0}),l.push(newNode(Model.SUBSCRIPT,[equalExpr()])),u=newNode(Model.PIPE,l)}else!isChemCore()||i!==S&&i!==V||lookahead()!==N||(next(),u=unaryNode(be[i],[u]))}return u}function unaryExpr(){var i=void 0,u=void 0,d=void 0;switch(i=hd()){case S:case oe:case V:next(),u=newNode(be[i],[unaryExpr()]);break;case R:if(d=be[i],next({oneCharToken:!0}),(i=hd())===S||i===V?(next(),u=l):u=unaryExpr(),u=newNode(d,[u]),(i=hd())===E){var p=[u];d=be[i],next({oneCharToken:!0}),(i=hd())===S||i===V?(next(),u=l):u=unaryExpr(),p.push(u),u=newNode(d,p)}break;case E:d=be[i],next({oneCharToken:!0}),(i=hd())===S||i===V?(next(),u=l):u=unaryExpr(),u=newNode(d,[u]);break;default:i===U&&"$"===lexeme()?(next(),hd()?(u=multiplyNode([newNode(Model.VAR,["$"]),postfixExpr()])).args[1].isPolynomial=!0:u=newNode(Model.VAR,["$"])):u=postfixExpr()}return u}function subscriptExpr(){var i=[unaryExpr()];return hd()===R&&(next({oneCharToken:!0}),i.push(exponentialExpr()),isChemCore()&&hd()===O&&(eat(O),eat(N))),i.length>1?newNode(Model.SUBSCRIPT,i):i[0]}function fractionExpr(){for(var i=void 0,u=subscriptExpr();47===(i=hd())||58===i;)next(),(u=newNode(be[i],[u,subscriptExpr()])).isFraction=isSimpleFraction(u);return u}function isMathSymbol(i){if(i.op!==Model.VAR)return!1;var u=Model.env[i.args[0]];return!(!u||!u.name)}function isVar(i,u){return(0,p.assert)(void 0===u||"string"==typeof u,"Internal error in 'isVar()'"),i.op===Model.VAR&&(void 0===u||i.args[0]===u)}function isOne(i){return i.op===Model.NUM&&"1"===i.args[0]}function isMinusOne(i){return i.op===Model.SUB&&1===i.args.length&&isOne(i.args[0])}function isDerivative(i){if(i.op===Model.FRAC){var u=i.args[0],l=u.op===Model.MUL&&u.args[0].op===Model.VAR&&u.args[0].args[0]||u.op===Model.VAR&&u.args[0],d=i.args[1],p=d.op===Model.MUL&&d.args[0].op===Model.VAR&&d.args[0].args[0];return"d"===l&&"d"===p&&d.args[1].op===Model.VAR||void 0}}function derivativeExpr(i){if(i.op===Model.FRAC){var u=i.args[0],d=i.args[1],h=u.op===Model.MUL&&u.args.slice(1).length>0&&multiplyNode(u.args.slice(1))||l;return(0,p.assert)(2===d.args.length),newNode(Model.DERIV,[d.args[1],h])}}function multiplicativeExpr(){var i,u,l=!1,d=[];isDerivative(i=fractionExpr())&&(i=derivativeExpr(i)),d=i.op!==Model.MUL||i.isBinomial||i.args[i.args.length-1].op===Model.VAR||"\\degree"!==i.args[i.args.length-1].args[0]?[i]:i.args;for(var v,y=0;(S=hd())&&!isAdditive(S)&&!isRelational(S)&&!isImplies(S)&&44!==S&&!isEquality(S)&&S!==N&&S!==L&&S!==q&&S!==Y&&S!==me&&S!==H&&S!==M&&S!==X&&S!==ee&&289!==S;){if(l=!1,isMultiplicative(S)&&(next(),l=!0),isDerivative(i=fractionExpr())&&(i=derivativeExpr(i)),S!==te&&S!==ae||(i=newNode(be[S],[d.pop(),i])),(0,p.assert)(l||0===d.length||i.lbrk||d[d.length-1].op!==Model.NUM||d[d.length-1].lbrk||isRepeatingDecimal([d[d.length-1],i])||i.op!==Model.NUM,g(1010)),isChemCore()&&S===P&&isVar(d[d.length-1],"M"))d.pop(),i=unaryNode(Model.M,[i]);else if(l)42===S&&d.length>0&&isScientific([d[d.length-1],i])&&(isNeg(S=d.pop())&&(i=binaryNode(Model.MUL,[h,i])),(i=binaryNode(Model.MUL,[S,i])).isScientific=!0);else if(d.length>0&&isMixedFraction(d[d.length-1],i))S=d.pop(),(i=binaryNode(Model.ADD,[S,i])).isMixedFraction=!0;else if(Model.option("ignoreCoefficientOne")&&1===d.length&&(isOne(v=d[0])||isMinusOne(v))&&isPolynomialTerm(d[0],i))isOne(d[0])?d.pop():i=negate(i);else if(d.length>0&&(u=isRepeatingDecimal([d[d.length-1],i])))d.pop(),i=u;else if(i.op===Model.VAR&&0===i.args[0].indexOf("'")){var S=d.pop();(i=binaryNode(Model.MUL,[S,i])).isImplicit=!0}else if(!isChemCore()&&isPolynomialTerm(d[d.length-1],i))i.isPolynomial=!0,(S=d.pop()).isPolynomial?d.push(S):((i=binaryNode(Model.MUL,[S,i])).isImplicit=S.isImplicit,S.isImplicit=void 0);else if(d[d.length-1].op===Model.DERIV){var E=d[d.length-1].args[1];i=newNode(Model.DERIV,[d[d.length-1].args[0],multiplyNode([E,i])]),d.pop()}else i.isImplicit=!0;i.op!==Model.MUL||i.isScientific||i.isBinomial||!d.length||d[d.length-1].isImplicit||d[d.length-1].isPolynomial||!i.isImplicit||!i.isPolynomial?d.push(i):d=d.concat(i.args),(0,p.assert)(y++<1e3,g(1e3,["Stuck in loop in mutliplicativeExpr()"]))}return d.length>1?binaryNode(Model.MUL,d):d[0];function isMultiplicative(i){return 42===i||i===te||47===i||i===ae}}function isMixedFraction(i,u){return i.op===Model.SUB&&1===i.args.length&&(i=i.args[0]),!(i.lbrk||u.lbrk||i.op!==Model.NUM||!isSimpleFraction(u))}function isPolynomialTerm(i,u){return i.op===Model.SUB&&1===i.args.length&&(i=i.args[0]),!(i.lbrk||u.lbrk||!(i.op===Model.NUM&&isVar(u)||isVar(i)&&u.op===Model.NUM||i.op===Model.NUM&&u.op===Model.NUM||isVar(i)&&isVar(u)||i.op===Model.MUL&&i.args[i.args.length-1].isPolynomial&&(isVar(u)||u.op===Model.NUM)))}function isRepeatingDecimal(i){var u=void 0,l=void 0,d=void 0;if(!i[0].lbrk&&(i[0].op===Model.NUM&&"decimal"===i[0].numberFormat||i[0].op===Model.VAR&&"?"===i[0].args[0]||i[0].op===Model.TYPE&&i[0].args[0].op===Model.VAR&&"decimal"===i[0].args[0].args[0])){if(40===i[1].lbrk&&(function isInteger(i){var u=void 0;return u=i.op===Model.NUM?i.args[0]:i,!isNaN(parseInt(u))}(i[1])||i[1].op===Model.TYPE&&i[1].args[0].op===Model.VAR&&"integer"===i[1].args[0].args[0]))l=i[0],d=i[1];else if(i[1].lbrk||i[1].op!==Model.OVERLINE){if(i[1].lbrk||i[1].op!==Model.DOT)return null;l=i[0],d=i[1]}else l=i[0],(d=i[1]).args[0].op===Model.NUM&&(d.args[0].args[0]=d.args[0].args[0].split("").join(" "));d.isRepeating=!0,(u=binaryNode(Model.ADD,[l,d])).numberFormat="decimal",u.isRepeating=!0}else u=null;return u}function isScientific(i){if(1===i.length)return i[0].op===Model.NUM&&(1===i[0].args[0].length||1===(0,d.indexOf)(i[0].args[0],"."))||i[0].op===Model.POW&&i[0].args[0].op===Model.NUM&&"10"===i[0].args[0].args[0]&&"integer"===i[0].args[1].numberFormat;if(2===i.length){var u=i[0],l=i[1];return u.op===Model.NUM&&(1===u.args[0].length||1===(0,d.indexOf)(u.args[0],"."))&&l.op===Model.POW&&l.args[0].op===Model.NUM&&"10"===l.args[0].args[0]&&"integer"===l.args[1].numberFormat}}function isNeg(i){return"number"==typeof i?i<0:1===i.args.length?i.op===v.SUB&&i.args[0].args[0]>0||i.op===Model.NUM&&+i.args[0]<0:2===i.args.length?i.op===v.MUL&&isNeg(i.args[0]):void 0}function negate(i){if("number"==typeof i)return-i;if(i.op===Model.MUL){var u=i.args.slice(0);return multiplyNode([negate(u.shift())].concat(u))}return i.op===Model.POW&&isMinusOne(i.args[1])?binaryNode(Model.POW,[negate(i.args[0]),h]):unaryNode(Model.SUB,[i])}function isAdditive(i){return i===S||i===V||i===D||i===re}function additiveExpr(){for(var i=multiplicativeExpr(),u=void 0;isAdditive(u=hd());){next();var l=multiplicativeExpr();switch(u){case re:i=binaryNode(Model.BACKSLASH,[i,l]);break;case D:i=binaryNode(Model.PM,[i,l]);break;case V:i=binaryNode(Model.SUB,[i,l]);break;default:i=binaryNode(Model.ADD,[i,l])}}return i}function isRelational(i){return i===H||i===z||i===Q||i===G||275===i||279===i||313===i||314===i||315===i||316===i||317===i||i===oe||318===i||319===i||320===i||321===i||323===i||324===i||325===i||338===i||326===i||339===i}function isEquality(i){return 61===i||i===ie||302===i}function equalExpr(){for(var i=function relationalExpr(){for(var i=hd(),u=additiveExpr(),l=[],d=!1;isRelational(i=hd());)if(next(),i!==oe){var p=additiveExpr();u=newNode(be[i],[u,p]),d&&(u.op="n"+u.op,d=!1),l.push(u),u=Model.create(p)}else d=!0;return 0===l.length?u:1===l.length?l[0]:newNode(Model.COMMA,l)}(),u=void 0;isEquality(u=hd());){next();var l=additiveExpr();i=newNode(be[u],[i,l])}return i}function isImplies(i){return 334===i||i===Y||i===me||i===se||i===ue||i===le||i===ce||i===de||i===ge||i===he||i===fe||i===pe||i===M}function impliesExpr(){for(var i=equalExpr(),u=void 0;isImplies(u=hd());){next();var l=equalExpr();i=newNode(be[u],[i,l])}return i}function commaExpr(){for(var i=impliesExpr(),u=[i];44===hd();)next(),u.push(impliesExpr());return u.length>1&&(i=newNode(be[44],u)),i}return{expr:function expr(){if(start(),hd()){var i=commaExpr();return i.lbrk===O&&i.rbrk===N&&(i=newNode(Model.SET,[i])),(0,p.assert)(!hd(),g(1003,[Se.pos(),Se.lexeme()])),i}return y},tokenize:function tokenize(){var i=[];for(start();hd();){var u=lexeme();i.push(newNode(hd(),u?[u]:[])),next()}return newNode(Model.COMMA,i)}}};return Model}()},{"./assert.js":1,"./ast.js":2,"./backward.js":3}],6:[function(i,u,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.rules={words:{a:"A",A:"cap A",B:"cap b",C:"cap c",D:"cap d",E:"cap e",F:"cap f",G:"cap g",H:"cap h",I:"cap i",J:"cap j",K:"cap k",L:"cap l",M:"cap m",N:"cap n",O:"cap o",P:"cap p",Q:"cap q",R:"cap r",S:"cap s",T:"cap t",U:"cap u",V:"cap v",W:"cap w",X:"cap x",Y:"cap y",Z:"cap z","\\varepsilon":"epsilon","\\Alpha":"cap alpha","\\Beta":"cap beta","\\Gamma":"cap gamma","\\Delta":"cap delta","\\Epsilon":"cap epsilon","\\Zeta":"cap zeta","\\Eta":"cap eta","\\Theta":"cap theta","\\Iota":"cap iota","\\Kappa":"cap kappa","\\Lambda":"cap lambda","\\Mu":"cap mu","\\Nu":"cap nu ","\\Xi":"cap xi","\\Omicron":"cap omicron","\\Pi":"cap pi","\\Rho":"cap rho","\\Sigma":"cap sigma","\\Tau":"cap tau","\\Upsilon":"cap upsilon","\\Phi":"cap phi","\\Chi":"cap chi","\\Psi":"cap psi","\\Omega":"cap omega","\\ldots":"dot dot dot","\\vdots":"vertical dot dot dot","\\ddots":"diagonal dot dot dot","\\infty":"infinity","\\measuredangle":"measure of angle","m\\angle":"measure of angle","\\sin":"sine","\\cos":"cosine","\\tan":"tangent","\\csc":"cosecant","\\sec":"secant","\\cot":"cotangent","\\sinh":"hyperbolic sine","\\cosh":"hyperbolic cosine","\\tanh":"hyperbolic tangent","\\csch":"hyperbolic cosecant","\\sech":"hyperbolic secant","\\coth":"hyperbolic cotangent","'''":"triple prime","''":"double prime","'":"prime","\\notin":"is not in","\\mathbb":"bold","\\backslash":"backslash","\\emptyset":"empty set","\\circledot":"circle","\\longleftarrow":"long left arrow","\\leftrightarrow":"left right row","\\Leftrightarrow":"implies","\\longleftrightarrow":"long left right arrow","\\overleftrightarrow":"over left right arrow","\\overrightarrow":"over right arrow","\\overleftarrow":"over left arrow","\\leftarrow":"left arrow","\\addmatrixcol":"add matrix columns","\\addmatrixrow":"add matrix rows"},types:{functionName:["f","g","h","F","G","H","\\ln","\\lg","\\log","\\sin","\\cos","\\tan","\\csc","\\sec","\\cot","\\sinh","\\cosh","\\tanh","\\csch","\\sech","\\coth"],numberPosNeg:["\\type{number}","-\\type{number}"],numberOrLetter:["\\type{numberPosNeg}","\\type{variable}"],matrix:["\\begin{bmatrix}?&?&?\\end{bmatrix}"],functionComposition:["(\\type{functionName}+\\type{functionName})","(\\type{functionName}-\\type{functionName})","(\\type{functionName}\\cdot\\type{functionName})","(\\frac{\\type{functionName}}{\\type{functionName}})"],function:["\\type{function}^{?}","\\type{function}_{?}","\\type{functionComposition}","\\type{functionName}"],functionCall:["\\type{function}(?)","\\type{function}[?]","\\type{variable}(\\type{number})","\\type{variable}(\\type{variable})","\\type{variable}(?,?)","\\type{variable}[\\type{number}]","\\type{variable}[\\type{variable}]","\\type{variable}[?,?]"],commonFraction:["\\frac{\\type{integer}}{2}","\\frac{\\type{integer}}{3}","\\frac{\\type{integer}}{4}","\\frac{\\type{integer}}{5}","\\frac{\\type{integer}}{6}","\\frac{\\type{integer}}{7}","\\frac{\\type{integer}}{8}","\\frac{\\type{integer}}{9}","\\frac{\\type{integer}}{10}"],simpleExpression:["\\type{numberOrLetter}","\\type{commonFraction}","\\type{function}(?)","\\type{function}[?]","\\type{number}","-\\type{variable}","\\type{variable}","\\type{number}\\degrees","\\type{variable}\\degrees","\\type{variable}","\\type{variable}\\type{variable}","\\type{number}\\type{variable}"],simpleFractionPart:["-\\type{commonFraction}","\\type{simpleExpression}","\\type{commonFraction}"],simpleFractionExtended:["\\frac{\\type{simpleFractionPart}}{\\type{simpleFractionPart}}"],simpleNumericExponent:["\\type{number}","\\type{commonFraction}"],simpleExponent:["\\type{simpleNumericExponent}","\\type{variable}"]},rules:{"\\type{decimal}\\overline{\\type{integer}}":[{"%1 repeating %2":{"\\type{decimal}":"%IP point %FP","?":"%1"}}],"\\type{decimal}(\\type{integer})":[{"%1 repeating %2":{"\\type{decimal}":"%IP point %FP","?":"%1"}}],"\\overline{?}":["line segment %1"],"\\type{numberOrLetter}\\degree \\type{numberOrLetter}' \\type{numberOrLetter}''":[{"%1 %2 %3":{"1\\degree":"%1 degree","?\\degree":"%1 degrees","-?\\degree":"negative %1 degrees","1'":"%1 minute","?'":"%1 minutes","1''":"%1 second","?''":"%1 seconds"}}],"\\type{numberOrLetter}\\degree \\type{numberOrLetter}'":[{"%1 %2":{"1\\degree":"%1 degree","?\\degree":"%1 degrees","1'":"%1 minute","?'":"%1 minutes"}}],"\\type{numberOrLetter}\\degree \\type{numberOrLetter}''":[{"%1 %2":{"1\\degree":"%1 degree","?\\degree":"%1 degrees","1''":"%1 second","?''":"%1 seconds"}}],"\\type{numberOrLetter}\\degree":[{"%1":{1:"1 degree","?":"%1 degrees"}}],"?\\degree":["%1 degrees"],"\\type{numberPosNeg}' \\type{numberPosNeg}''":[{"%1 %2":{"1'":"1 foot","?'":"%1 feet","1''":"1 inch","?''":"%1 inches"}}],"\\type{numberPosNeg}''":["%1 inches"],"\\type{numberPosNeg}'":["%1 feet"],"?^\\prime":["%1 prime"],"?'''":["%1 triple prime"],"?''":["%1 double prime"],"?'":["%1 prime"],"\\log\\type{simpleExpression}":["log %2"],"\\log ?":["the log of %2"],"\\log_{?} \\type{simpleExpression}":[{"the log base %1 of %2":{"\\log_{?}":"%2"}}],"\\ln\\type{simpleExpression}":["natural log %2"],"\\ln ?":["the natural log of %2"],"{?}":[{"start set %1 end set":{"?:?":"%1 such that %2","?|?":"%1 such that %2"}}],"?|_?":[{"%1 evaluated at %2":{"?^?":"%2 minus the same expression evaluated at %1"}}],"?|?":["%1 divides %2"],"\\type{simpleSmallRowMatrix}":[{"the 1 by %N row matrix %1":{"\\type{row}":"%1","\\type{column}":"%*"}}],"\\type{smallRowMatrix}":[{"the 1 by %N row matrix %1":{"\\type{row}":"%1","\\type{column}":"column %N %*"}}],"\\type{simpleSmallColumnMatrix}":[{"the %M by 1 column matrix %1":{"\\type{row}":"%*","\\type{column}":"%1"}}],"\\type{smallColumnMatrix}":[{"the %M by 1 column matrix %1":{"\\type{row}":"row %M %*","\\type{column}":"%1"}}],"\\type{simpleSmallMatrix}":[{"the %M by %N matrix %1":{"\\type{row}":"row %M, %*","\\type{column}":"%*"}}],"\\type{matrix}":[{"the %M by %N matrix, %1":{"\\type{row}":"row %M, %*","\\type{column}":"column %N, %*"}}],"\\sum_?^??":[{"the sum from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\sum_?^?":[{"the sum from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\sum_? ?":[{"the sum over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\sum ?":["the sum of %1"],"\\sum":["the sum"],"\\prod_?^??":[{"the product from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\prod_?^?":[{"the product from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\prod_? ?":[{"the product over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\prod ?":["the product of %1"],"\\prod":["the product"],"\\int_?^??":[{"the integral from %1 to %2 of %3":{"?=?":"%1 is equal to %2","?dx":"%1"}}],"\\int_?^?":[{"the integral from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\int_? ?":[{"the integral over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\int ?":["the integral of %1"],"\\int":["the integral"],"? \\cup ?":[{"the union of %1 and %2":{"?":"%1"}}],"\\cup_?^??":[{"the union from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cup_?^?":[{"the union from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cup_? ?":[{"the union over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cup ?":["the union of %1"],"\\cup":["the union"],"\\bigcup_?^??":[{"the union from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcup_?^?":[{"the union from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcup_? ?":[{"the union over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcup ?":["the union of %1"],"\\bigcup":["the union"],"? \\cap ?":[{"the intersection of %1 and %2":{"?":"%1"}}],"\\cap_?^??":[{"the intersection from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cap_?^?":[{"the intersection from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cap_? ?":[{"the intersection over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cap ?":["the intersection of %1"],"\\cap":["the intersection"],"\\bigcap_?^??":[{"the intersection from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcap_?^?":[{"the intersection from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcap_? ?":[{"the intersection over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcap ?":["the intersection of %1"],"\\bigcap":["the intersection"],"? \\text{and} ?":["%1 %2"],"?m/s":[{"%1 per second":{1:"1 meter","?":"%1 meters"}}],"?ft/s":[{"%1 per second":{1:"1 foot","?":"%1 feet"}}],"?mi/hr":[{"%1 per hour":{1:"1 mile","?":"%1 miles"}}],"?mi/h":[{"%1 per hour":{1:"1 mile","?":"%1 miles"}}],"?km/hr":[{"%1 per hour":{1:"1 kilometer","?":"%1 kilometers"}}],"?km/h":[{"%1 per hour":{1:"1 kilometer","?":"%1 kilometers"}}],"1hr":["1 hour"],"?hr":["%1 hours"],"1L":["1 liter"],"?L":["%1 liters"],"1kg":["1 kilogram"],"?kg":["%1 kilograms"],"1ks":["1 kilosecond"],"?ks":["%1 kiloseconds"],"1km":["1 kilometer"],"?km":["%1 kilometers"],"1kL":["1 kiloliter"],"?kL":["%1 kiloliters"],"1cg":["1 centigram"],"?cg":["%1 centigrams"],"1cs":["1 centisecond"],"?cs":["%1 centiseconds"],"1cm":["1 centimeter"],"?cm":["%1 centimeters"],"1cL":["1 centiliter"],"?cL":["%1 centiliters"],"1mg":["1 milligram"],"?mg":["%1 milligrams"],"1ms":["1 millisecond"],"?ms":["%1 milliseconds"],"1mm":["1 millimeter"],"?mm":["%1 millimeters"],"1mL":["1 milliliter"],"?mL":["%1 milliliters"],"1\\mug":["1 microgram"],"?\\mug":["%1 micrograms"],"1\\mus":["1 microsecond"],"?\\mus":["%1 microseconds"],"1\\mum":["1 micrometer"],"?\\mum":["%1 micrometers"],"1\\muL":["1 microliter"],"?\\muL":["%1 microliters"],"1ng":["1 nanogram"],"?ng":["%1 nanograms"],"1ns":["1 nanosecond"],"?ns":["%1 nanoseconds"],"1nm":["1 nanometer"],"?nm":["%1 nanometers"],"1nL":["1 nanoliter"],"?nL":["%1 nanoliters"],"1lb":["1 pound"],"?lb":["%1 pounds"],"1in":["1 inch"],"?in":["%1 inches"],"1ft":["1 foot"],"?ft":["%1 feet"],"1mi":["1 mile"],"?mi":["%1 miles"],"1cup":["1 cup"],"?cup":["%1 cups"],"1pt":["1 pint"],"?pt":["%1 pints"],"1qt":["1 quart"],"?qt":["%1 quarts"],"1gal":["1 gallon"],"?gal":["%1 gallons"],"1oz":["1 ounce"],"?oz":["%1 ounces"],"\\mathbb{R}":["the real numbers"],"\\mathbb{C}":["the complex numbers"],"\\mathbb{Z}":["the integers"],"\\mathbb{Q}":["the rational numbers"],"\\mathbb{N}":["the natural numbers"],"\\mathbb{Z}^+":["the positive integers"],"\\mathbb{?}^?":[{"%2":{"\\type{integer}":"%1",R:"r",C:"c",Z:"z",Q:"q",N:"n","?^?":"%1 %2"}}],"\\mathbb{?}^3":["%1 three "],"\\mathbb{?}^n":["%1 n"],"\\mathbb{?}^\\infty":["%1 infinty"],"m\\angle":["measure of angle"],"\\Delta":["triangle"],"$?":["%2 dollars"],"?, ?":["%1 comma %2"],"\\type{commonFraction}":[{"%%":{"\\frac{1}{2}":"1 half","\\frac{\\type{integer}}{2}":"%1 halves","\\frac{1}{3}":"1 third","\\frac{\\type{integer}}{3}":"%1 thirds","\\frac{1}{4}":"1 fourth","\\frac{\\type{integer}}{4}":"%1 fourths","\\frac{1}{5}":"1 fifth","\\frac{\\type{integer}}{5}":"%1 fifths","\\frac{1}{6}":"1 sixth","\\frac{\\type{integer}}{6}":"%1 sixths","\\frac{1}{7}":"1 seventh","\\frac{\\type{integer}}{7}":"%1 sevenths","\\frac{1}{8}":"1 eighth","\\frac{\\type{integer}}{8}":"%1 eighths","\\frac{1}{9}":"1 ninth","\\frac{\\type{integer}}{9}":"%1 ninths","\\frac{1}{10}":"1 tenth","\\frac{\\type{integer}}{10}":"%1 tenths"}}],"\\type{simpleFractionExtended}":["%1 over %2"],"\\frac{?}{?}":["the fraction with numerator %1 and denominator %2"],"\\type{function}(?)":["%1 of %2"],"\\type{function}[?]":["%1 of %2"],"\\sin ?":["sine %2"],"\\cos{?}":["cosine %2"],"\\tan{?}":["tangent %2"],"\\csc{?}":["cosecant %2"],"\\sec{?}":["secant %2"],"\\cot{?}":["cotangent %2"],"\\sin^{-1}{?}":["inverse sine %2"],"\\cos^{-1}{?}":["inverse cosine %2"],"\\tan^{-1}{?}":["inverse tangent %2"],"\\csc^{-1}{?}":["inverse cosecant %2"],"\\sec^{-1}{?}":["inverse secant %2"],"\\cot^{-1}{?}":["inverse cotangent %2"],"\\sinh^{-1}{?}":["inverse hyperbolic sine %2"],"\\cosh^{-1}{?}":["inverse hyperbolic cosine %2"],"\\tanh^{-1}{?}":["inverse hyperbolic tangent %2"],"\\csch^{-1}{?}":["inverse hyperbolic cosecant %2"],"\\sech^{-1}{?}":["inverse hyperbolic secant %2"],"\\coth^{-1}{?}":["inverse hyperbolic cotangent %2"],"?^{-1}":["%1 inverse"],"?^{0}":["%1 to the 0 power"],"?^{2}":["%1 squared"],"?^{3}":["%1 cubed"],"\\type{function}^{\\type{integer}}":["%2th power of %1"],"?^\\type{integer}":["%1 to the %2th power"],"?^\\type{variable}":["%1 to the %2th power"],"?^{-\\type{integer}}":["%1 to the %2 power"],"?^{\\type{decimal}}":[{"%1 raised to the %2 power":{"\\type{decimal}":"%IP point %FP","?":"%1"}}],"?^{\\type{simpleExponent}}^{2}":["%1 raised to the %2 power"],"?^{\\type{simpleExponent}}^{3}":["%1 raised to the %2 power"],"?^{\\type{simpleNumericExponent}\\type{variable}}^{2}":["%1 raised to the %2 power"],"?^{\\type{simpleNumericExponent}\\type{variable}}^{3}":["%1 raised to the %2 power"],"?^?^?":["%1 raised to the exponent %2 end exponent"],"?^?":["%1 raised to the %2 power"],"\\sqrt{\\type{simpleExpression}}":[{options:{EndRoot:!0},value:"square root of %1 end root"},"square root of %1"],"\\sqrt[3]{\\type{simpleExpression}}":["cube root of %1"],"\\sqrt[\\type{integer}]{\\type{simpleExpression}}":["%2th root of %1"],"\\sqrt{?}":["square root of %1 end root"],"\\sqrt[3]{?}":[{options:{EndRoot:!0},value:"cube root of %1 end root"},"cube root of %1"],"\\sqrt[\\type{integer}]{?}":[{options:{EndRoot:!0},value:"%2th root of %1 end root"},"%2th root of %1"],"\\sqrt[?]{?}":[{options:{EndRoot:!0},value:"%2th root of %1 end root"},"%2th root of %1"],"\\mathbf{?}":["bold math font %1"],"\\mathbf{}":["bold math font"],"\\underset{?}{?}":["%1 set under %2"],"\\overset{?}{?}":["%1 set over %2"],"-?":["negative %1"],"+?":["plus %1"],"? \\cong ?":["%1 is congruent to %2"],"? \\ncong ?":["%1 is not congruent to %2"],"? \\parallel ?":["%1 is parallel to %2"],"? \\nparallel ?":["%1 is not parallel to %2"],"? \\sim ?":["%1 approximates %2"],"? \\nsim ?":["%1 does not approximate %2"],"? \\to ?":["%1 to %2"],"\\partial":["partial derivative"],"\\lim_?":["limit %1"],"\\lim_??":["limit %1 of %2"],"\\lim":["limit"],"\\type{mixedFraction}":["%1 and %2"],"\\type{scientific}":["%1 times %2"],"\\type{fraction}":["%1 over %2"],"\\type{integer}":["%1"],"\\type{decimal}":["%IP point %FP"],"\\type{number}":["%1"],"?(?)":["%1 times %2"],"(?)?":["%1 times %2"],"(?)(?)":["%1 times %2"],"? \\not\\in ?":["%1 is not in %2"],"? \\not\\ni ?":["%1 does not contain %2"],"? \\not\\subseteq ?":["%1 is not a subset of %2"],"? \\not\\subset ?":["%1 is not a strict subset of %2"],"? \\not\\supseteq ?":["%1 is not a superset of %2"],"? \\not\\supset ?":["%1 is not a strict superset of %2"],"? \\in ?":["%1 is in %2"],"? \\ni ?":["%1 contains %2"],"? \\subseteq ?":["%1 is a subset of %2"],"? \\subset ?":["%1 is a strict subset of %2"],"? \\supseteq ?":["%1 is a superset of %2"],"? \\supset ?":["%1 is a strict superset of %2"],"{}":["left brace right brace"],"[]":["left bracket right bracket"],"[?,?]":["left bracket %1 right bracket"],"(?,?]":["left parenthesis %1 right bracket"],"[?,?)":["left bracket %1 right parenthesis"],"? \\rightarrow ?":["%1 rightarrow %2"],"? \\Rightarrow ?":["%1 implies %2"],"? \\leftarrow ?":["%1 left arrow %2"],"? \\longrightarrow ?":["%1 long right arrow %2"],"? \\longleftarrow ?":["%1 long left arrow %2"],"? \\overrightarrow ?":["%1 over right arrow %2"],"? \\overleftarrow ?":["%1 over left arrow %2"],"? \\leftrightarrow ?":["%1 left right arrow %2"],"? \\Leftrightarrow ?":["%1 if and only if %2"],"? \\longleftrightarrow ?":["%1 long left right arrow %2"],"? \\overleftrightarrow ?":["%1 over left right arrow %2"],"\\rightarrow ?":["right arrow %1"],"\\Rightarrow ?":["implies %1"],"\\leftarrow ?":["left arrow %1"],"\\leftrightarrow ?":["left right arrow %1"],"\\Leftrightarrow ?":["if and only if %1"],"\\longrightarrow ?":["long right arrow %1"],"\\longleftarrow ?":["long left arrow %1"],"\\overrightarrow ?":["over right arrow %1"],"\\overleftarrow ?":["over left arrow %1"],"\\longleftrightarrow ?":["long left right arrow %1"],"\\overleftrightarrow ?":["over left right arrow %1"],"? \\implies ?":["%1 implies %2"],"?\\'":["%1 prime"],"? \\text{dx}":["with respect to x of %1"],"?_?":["%1 sub %2"],"?:?":["ratio of %1 to %2"],"? \\perp ?":["%1 perpendicular to %2"],"? \\propto ?":["%1 proportional to %2"],"?+?":["%1 plus %2"],"?-?":["%1 minus %2"],"?*?":["%1 times %2"],"?\\cdot?":["%1 times %2"],"?\\cdotp?":["%1 times %2"],"?<?":["%1 is less than %2"],"?<=?":["%1 is less than or equal to %2"],"?>?":["%1 is greater than %2"],"?>=?":["%1 is greater than or equal to %2"],"?=?":["%1 is equal to %2"],"?\\approx?":["%1 almost equal to %2"],"?!":["%1 factorial"],"?%":["%1 percent "],"? \\pm ?":["%1 plus or minus %2"],"? \\ne ?":["%1 is not equal to %2"],"? \\neq ?":["%1 is not equal to %2"],"? \\ngtr ?":["%1 is not greater than %2"],"? \\nless ?":["%1 is not less than %2"],"? \\div ?":["%1 divided by %2"],"? \\backslash ?":["%1 left divided by %2"],"(?)^? ?":["%1 times %2"],"? (?)^?":["%1 times %2"],"?^? ?":["%1 %2"],"? ?^?":["%1 %2"],"(\\type{simpleExpression})":["%1"],"(?)":["open paren %1 close paren"],"[\\type{simpleExpression}]":["%1"],"[?]":["open bracket %1 close bracket"],"|\\type{simpleExpression}|":["absolute value of %1"],"|?|":["start absolute value %1 end absolute value"],"{?} ?":["%1 %2"],"? ?":["%1 %2"],"?":["%1 "]}}},{}],7:[function(i,u,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.version="v0.2.0"},{}]},{},[4])(4)},module.exports=f()},44482:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(77721)),p=_interopRequireDefault(l(25713)),h=_interopRequireDefault(l(41882));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var g=d.default.prototype.TYPE;var v={getActivity:function getActivity(i){switch(i.type){case g.OFFLINE_APP:return new p.default(i);case g.SUBMIT_PRACTICE:case g.TEST:return new h.default(i);default:return new d.default(i)}}};u.default=v},81565:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(11389)),g=_interopRequireDefault(l(96258)),v=_interopRequireDefault(l(12400)),y=_interopRequireDefault(l(92797)),S=_interopRequireDefault(l(20171)),E=_interopRequireDefault(l(80802)),R=l(14930),T=_interopRequireDefault(l(67732));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _toConsumableArray(i){return function _arrayWithoutHoles(i){if(Array.isArray(i))return _arrayLikeToArray(i)}(i)||function _iterableToArray(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||function _unsupportedIterableToArray(i,u){if(!i)return;if("string"==typeof i)return _arrayLikeToArray(i,u);var l=Object.prototype.toString.call(i).slice(8,-1);"Object"===l&&i.constructor&&(l=i.constructor.name);if("Map"===l||"Set"===l)return Array.from(i);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return _arrayLikeToArray(i,u)}(i)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(i,u){(null==u||u>i.length)&&(u=i.length);for(var l=0,d=new Array(u);l<u;l++)d[l]=i[l];return d}var O=function ActivityRenderer(){var i=this;this.questionViews={},this.featureViews={},this.qrGroupFeatureViews={},this.submitButtonRendered=!1,this.saveButtonRendered=!1,this.pendingViews={},this.getQuestionResponsesWithUnrenderedViews=function(u){return u.filter((function(i){return p.default.isUndefined(this.questionViews[i.id])&&!this.pendingViews[M.QUESTION+i.id]}),i)}},M={FEATURE:"feature-",QUESTION:"question-"};p.default.extend(O.prototype,d.default.Events,{EVENT:{VIEWS_RENDERED:"viewsRendered",READY:"ready"},render:function render(i,u){var l,d,y=this.getQuestionResponsesWithUnrenderedViews(i.get("questionResponses")),O=function renderViewSimpleFeatures(i){u.simpleFeaturesRenderer&&i.renderSimpleFeatures(u.simpleFeaturesRenderer)},I=this,P=[],D=i.get("featureModels"),N=i.qrGroupFeatures;this.app=u,D=D.filter((function(i){return p.default.isUndefined(this.featureViews[i.get("feature_id")])&&!this.pendingViews[M.FEATURE+i.get("feature_id")]}),this),y=this.getQuestionResponsesWithUnrenderedViews(y),N=p.default.filter(N,(function(i){return p.default.isUndefined(this.qrGroupFeatureViews[i.get("groupId")])}),this),p.default.each(D,(function(i){this.pendingViews[M.FEATURE+i.get("feature_id")]=!0}),this),p.default.each(y,(function(i){this.pendingViews[M.QUESTION+i.id]=!0}),this);var q=new v.default((function(i,u){l=i,d=u})).catch(p.default.noop),L="mathquill"===i.get("math_renderer"),V=[];if("mathquill"!==i.get("math_renderer")&&p.default.each(y,(function(i){var u=i.get("question"),l=u.response_id;u.is_math&&"mathquill"!==u.math_renderer&&V.push(l)})),p.default.each(D,(function(i){if(i.get("is_math")&&"mathquill"!==i.get("math_renderer")){var u=i.get("feature_id");V.push(u)}})),this.once(this.EVENT.VIEWS_RENDERED,(function(){var p=this;L?((0,R.performanceTrackTimingStart)("render","MathQuill render"),this.renderMathquill().then((function(){(0,R.performanceTrackTimingEnd)(u,"render","MathQuill render"),p.trigger(p.EVENT.READY),l()}))):V.length?((0,R.performanceTrackTimingStart)("render","MathJax render"),S.default.once(S.default.EVENT.RENDERED,(function(){(0,R.performanceTrackTimingEnd)(u,"render","MathJax render"),this.trigger(this.EVENT.READY),l()}),this),S.default.isInitialised()?S.default.render(V):S.default.init()):(this.trigger(this.EVENT.READY),d()),this.renderOptimizationHelper?this.renderOptimizationHelper.run():this.renderOptimizationHelper=new T.default({activity:i,app:u})}),this),p.default.each(D,p.default.deferWithContext((function(l){var d=p.default.getNested(l,"attributes.type"),h=l.get("feature_id"),g={el:".learnosity-feature.feature-".concat(h),model:l,i18n:i.get("i18n"),activity:i,initialisationCallback:p.default.bind(I.viewInitialised,I,M.FEATURE+l.get("feature_id"),d,h),mathRenderPromise:q,services:{renderViewSimpleFeatures:O}};(0,R.performanceTrackTimingStart)("render","view:render ".concat(d," ").concat(h));var v=new l.viewClass(g);I.featureViews[l.get("feature_id")]=v,v.model.on("destroy",(function(){var i=l.get("feature_id");u.removeFeatureFacade(i),delete I.featureViews[i]})),u.addFeatureFacade(l.get("feature_id"),v.getFacade())}))),p.default.each(y,(function(l,d){if(p.default.defer((function(){var h=p.default.getNested(l,"attributes.type"),g=l.get("response_id"),v={el:".learnosity-response.question-".concat(g),model:l,activity:i,initialisationCallback:p.default.bind(I.viewInitialised,I,M.QUESTION+l.id,h,g),mathRenderPromise:q,questionNumber:d+1,services:{renderViewSimpleFeatures:O}},y=l.viewClass;(0,R.performanceTrackTimingStart)("render","view:render ".concat(h," ").concat(g));var S=new y(v);I.questionViews[l.id]=S,u.addQuestionFacade(l.get("response_id"),S.getFacade())})),l.has("error")){var g=l.get("response_id");switch(l.get("error")){case 10005:P.push({code:10005,detail:"Response id ".concat(g," not found."),response_id:g});break;case 10007:P.push({code:10007,detail:"Authorisation failed. User id did not match user id of creator for ".concat(g),response_id:g});break;case 10010:P.push({code:10010,detail:"Audio asset expired. The asset for response_id ".concat(g," is no longer available."),response_id:g});break;default:h.default.log("Unknown error: ".concat(l.get("error")," on response_id: ").concat(g))}}})),p.default.each(N,(function(u){var l=u.viewClass;p.default.isUndefined(l)?h.default.log("Question group feature: ".concat(u.id," doesn't have a View defined")):I.qrGroupFeatureViews[u.get("groupId")]=new l({id:u.id,collection:u,activity:i})})),i.get("renderSubmitButton")&&!this.submitButtonRendered&&(new g.default({submit:!0,activity:i,app:u}),this.submitButtonRendered=!0),i.get("renderSaveButton")&&!this.saveButtonRendered&&(new g.default({submit:!1,activity:i,app:u}),this.saveButtonRendered=!0),P.length>0)for(var U=i.get("i18n"),B=0;B<P.length;B++)P[B].i18n=U,h.default.exception(P[B]);y.length+D.length===0&&this.trigger(this.EVENT.VIEWS_RENDERED),p.default.any(y,(function(i){return"clozeformulaV2"===i.get("question").type}))&&E.default.init()},renderMathquill:function renderMathquill(){return this.mathquillRenderer||(this.mathquillRenderer=new y.default),this.mathquillRenderer.render()},viewInitialised:function viewInitialised(i,u,l){(0,R.performanceTrackTimingEnd)(this.app,"render","view:render ".concat(u," ").concat(l),!0),this.pendingViews[i]=!1,p.default.every(this.pendingViews,(function(i){return!i}))&&this.trigger(this.EVENT.VIEWS_RENDERED)},renderSimpleFeaturesInWidgets:function renderSimpleFeaturesInWidgets(i){var u=[].concat(_toConsumableArray(p.default.values(this.questionViews)),_toConsumableArray(p.default.values(this.featureViews)));return(0,p.default)(u).map((function(u){return u.renderSimpleFeatures(i)}))},reset:function reset(){p.default.each(this.questionViews,(function(i){return i.reset&&i.reset()})),p.default.each(this.featureViews,(function(i){return i.reset&&i.reset()})),this.questionViews={},this.featureViews={},this.off(),this.renderOptimizationHelper&&this.renderOptimizationHelper.destroy()}});var I=O;u.default=I},93420:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(34651)),g=_interopRequireDefault(l(80891)),v=_interopRequireDefault(l(44482)),y=_interopRequireDefault(l(33534)),S=_interopRequireDefault(l(21893)),E=_interopRequireDefault(l(42740)),R=_interopRequireDefault(l(11389)),T=_interopRequireDefault(l(37758)),O=_interopRequireDefault(l(43088)),M=_interopRequireDefault(l(1285)),I=_interopRequireDefault(l(2355)),P=_interopRequireDefault(l(31700)),D=_interopRequireDefault(l(81565)),N=_interopRequireDefault(l(77804)),q=_interopRequireDefault(l(50581)),L=_interopRequireDefault(l(16104)),V=_interopRequireDefault(l(20465)),U=_interopRequireDefault(l(92797)),B=_interopRequireDefault(l(20171)),H=_interopRequireDefault(l(93393)),z=_interopRequireDefault(l(12400)),Q=l(14930),G=l(55536),Y=_interopRequireDefault(l(42591)),X=_interopRequireDefault(l(666));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}l(52783),l(8333),l(49041),l(74876),l(28972),l(76583),l(77211),l(46994),l(66790),l(74854),l(72509);var ee=function App(i,u,l,d,g,M){(0,Q.performanceTrackTimingStart)("init","app.js init");var I,P,N=this;i&&(I=p.default.deepExtend({},i)),u&&(P=p.default.deepExtend({},u)),I.beta_flags=I.beta_flags||{},p.default.isBoolean(I.beta_flags.lds)||(I.beta_flags.lds=!0),this.resetInstanceVariables(),this.isReset=!1,this.options=P,this.i18n=d;var U=new V.default;q.default.setActivity(I),this.options&&(this.options.saveSuccess&&(this.saveEventHandlers.success=this.options.saveSuccess),this.options.saveError&&(this.saveEventHandlers.error=this.options.saveError),this.options.saveProgress&&(this.saveEventHandlers.progress=this.options.saveProgress),this.options.discardSuccess&&(this.discardEventHanders.success=this.options.discardSuccess),this.options.discardError&&(this.discardEventHanders.error=this.options.discardError),this.options.context&&(q.default.setContext(this.options.context),q.default.setFullContext(this.options.analyticsContext),delete this.options.context,delete this.options.analyticsContext),this.options.metricsContext&&(y.default.setMetricsContext(this.options.metricsContext),delete this.options.metricsContext)),this.unloadHandler=new E.default,this.unloadHandler.init({i18n:this.i18n,safeToUnload:this.safeToUnload.bind(this),customUnload:this.options&&this.options.customUnload});var B=function authenticateSuccess(i){if(N.trigger(N.EVENT.BEFORE_READY,N),!N.isReset){var u,d=i.consumerData,y=Y.default.getTextDirection();if(u=i.authTimestamp?i.authTimestamp:Date.now()/1e3,p.default.isObject(d)&&p.default.isString(d.id)&&p.default.isString(d.name)){var S={id:d.id,name:d.name,key:I.consumer_key,dashboardEnabled:d.dashboardEnabled,assetMaxSize:d.assetMaxSize,processVideo:d.processVideo,featureFlags:d.featureFlags,audioBitDepth:d.audioBitDepth,audioSampleRate:d.audioSampleRate};p.default.isString(d.cssFile)&&(S.cssFile=d.cssFile),p.default.isNumber(d.syncMsgFrequencyOnSave)&&(S.syncMsgFrequencyOnSave=d.syncMsgFrequencyOnSave);var E=new O.default(S);N.consumer=E,q.default.setConsumer(E),LearnosityApp._internal.rollbarInstance&&LearnosityApp._internal.rollbarInstance.configure({payload:{consumer:{featureFlags:E.get("featureFlags"),id:E.get("id"),key:E.get("key"),name:E.get("name")}}}),N.consumer.has("cssFile")&&H.default.loadClientCSS(E.get("cssFile"));var T={apiVersion:g,requestedApiVersion:M,authTimestamp:u,state:I.state,type:I.type,user_id:I.user_id,number_questions:p.default.isBoolean(I.number_questions)&&I.number_questions,questions:I.questions,features:I.features,responses:I.responses,fontsize:I.fontsize,math_renderer:I.math_renderer,id:I.id,name:I.name,course_id:I.course_id||"none",renderSubmitButton:I.renderSubmitButton,renderSaveButton:I.renderSaveButton,validateOnSubmit:p.default.isBoolean(I.validateOnSubmit)&&I.validateOnSubmit,showCorrectAnswers:I.showCorrectAnswers,show_distractor_rationale:I.show_distractor_rationale,allow_negative_scores:I.allow_negative_scores,showInstructorStimulus:I.showInstructorStimulus,security:N.security,consumer:N.consumer,i18n:N.i18n,localActRef:l,htmlCleaner:!p.default.isBoolean(I.htmlCleaner)||I.htmlCleaner,uiErrorOnCaptureFailure:!0,captureOnResumeError:p.default.isBoolean(I.captureOnResumeError)&&I.captureOnResumeError,questionSource:I.question_source,beta_flags:p.default.isObject(I.beta_flags)?I.beta_flags:{},render_optimization:p.default.isObject(I.render_optimization)?I.render_optimization:{},initTime:i.initTime,skipHighlightAnimation:p.default.isBoolean(I.skip_highlight_animation)&&I.skip_highlight_animation,skipReplayAnimation:p.default.isBoolean(I.skip_replay_animation)&&I.skip_replay_animation,attribute_overrides:I.attribute_overrides||{},disable_spokenmath_user_inputs:p.default.isBoolean(I.disable_spokenmath_user_inputs)&&I.disable_spokenmath_user_inputs,disable_spokenmath_distractors:p.default.isBoolean(I.disable_spokenmath_distractors)&&I.disable_spokenmath_distractors,custom_widget_options:I.custom_widget_options||{},disable_auto_link:p.default.isBoolean(I.disable_auto_link)&&I.disable_auto_link,mirror_visibility:p.default.isBoolean(I.mirror_visibility)&&I.mirror_visibility,enable_formula_keyboard_lazy_render:p.default.isBoolean(I.enable_formula_keyboard_lazy_render)&&I.enable_formula_keyboard_lazy_render};p.default.isUndefined(T.questionSource)&&(T.questionSource=p.default.isBoolean(I.render_with_captured_questions)&&I.render_with_captured_questions?"original":"raw"),I.hasOwnProperty("product_id")&&(T.product_id=I.product_id),I.hasOwnProperty("description")&&(T.description=I.description),I.hasOwnProperty("session_id")&&(T.session_id=I.session_id),p.default.isObject(I.metadata)&&(T.metadata=I.metadata),p.default.isBoolean(I.uiErrorOnCaptureFailure)?T.uiErrorOnCaptureFailure=I.uiErrorOnCaptureFailure:p.default.isBoolean(I.retryCaptureOnFailure)&&(T.uiErrorOnCaptureFailure=!I.retryCaptureOnFailure),N.activity=v.default.getActivity(T),N.activityRenderer=new D.default,N.activity.once(N.activity.EVENT.READY,(function(){q.default.trackPageview(),(0,Q.performanceTrackTimingStart)("init","app.js render")})),N.activity.on(N.activity.EVENT.READY,(function(){N.activityRenderer&&N.activityRenderer.render(N.activity,N)})),N.activityRenderer.on(N.activityRenderer.EVENT.READY,(function(){"ie"===L.default.browser&&((0,h.default)(".lrn_widget").addClass("lrn-ie"),8!==L.default.version&&9!==L.default.version||(0,h.default)(".lrn_widget").addClass("lrn_ie"+L.default.version)),p.default.isNull(y)||(0,h.default)(".lrn_widget").attr("dir",Y.default.getDirection()),(0,Q.performanceTrackTimingEnd)(N,"init","app.js render"),(0,Q.performanceTrackTimingEnd)(N,"init","app.js init"),N.trigger(N.EVENT.READY,N)})),U.set(LearnosityApp.version+"_"+I.consumer_key+"_auth_response",d),N.activity.init()}else R.default.exception({code:10003,detail:"Authentication failed: consumer retrieved is invalid: "+JSON.stringify(d),i18n:N.i18n})}};if(I)if((0,h.default)(".learnosity-response, .learnosity-feature").each((function(){"ie"!==L.default.browser||8!==L.default.version&&9!==L.default.version||(0,h.default)(this).addClass("lrn_ie".concat(L.default.version)),(0,h.default)(this).is(":empty")&&(0,h.default)(this).html(N.i18n.labels.loadingInfo)})),this.security=new T.default({consumer_key:I.consumer_key,timestamp:I.timestamp,user_id:I.user_id,signature:I.signature}),I.expires&&this.security.set("expires",I.expires),p.default.isObject(S.default.consumer))p.default.defer((function(){B({consumerData:S.default.consumer})}));else{var z=N.security;this.authenticateAndPreloadBundles(U,I).then(B).catch((function(i){R.default.exception({code:10003,detail:i,i18n:N.i18n,consumerKey:z?"*".concat(z.get("consumer_key")):""})}))}if(p.default.isObject(S.default.analytics)){var G=S.default.disableGTM||S.default.analytics.disableGTM||!0===S.default.analytics.disable;X.default.init({app:S.default.appContext,disableGTM:G,gtmContainerID:S.default.analytics.gtmContainerID,gtmDataLayer:S.default.analytics.gtmDataLayer,instance:this})}return this};p.default.extend(ee.prototype,{EXPOSED_METHODS:["append","attemptedQuestions","disable","discard","enable","feature","features","getFeatures","getGroupScore","getMetadata","getQuestions","getResponses","getScores","executeScorings","masking","needsPushing","on","once","off","push","question","questions","renderMath","reset","retryQuestionCapture","safeToUnload","save","setScrollablePassagesContextHeight","submit","stopAllSimpleFeatures","unsaveableQuestions","validateQuestions","validQuestions","_analyticsPush","_getPerformanceMetrics","_renderComponent"],EVENT:{BEFORE_READY:"beforeReady",READY:"ready"},authenticateAndPreloadBundles:function authenticateAndPreloadBundles(i,u){var l=this,d=function authFromOfflineCache(l,d){i.get("".concat(LearnosityApp.version,"_").concat(u.consumer_key,"_auth_response")).then((function(i){i?l({consumerData:i}):d("Authentication failed: no connection and application not ready to run offline")}))},h=new z.default((function(i,h){u.type===M.default.prototype.TYPE.OFFLINE_APP?d(i,h):((0,Q.performanceTrackTimingStart)("init","app.js authenticate"),y.default.request({url:"/authenticate",security:l.security.getRequestParameters(),success:function success(u){(0,Q.performanceTrackTimingEnd)(l,"init","app.js authenticate");var d={consumerData:u.response.data,authTimestamp:u.response.data.authTimestamp};delete d.consumerData.authTimestamp,p.default.isObject(u.response.meta)&&(d.initTime=u.response.meta.timestamp),i(d)},failure:function failure(u){if(u.status>=400&&u.status<600){var l="Authentication failed: ".concat(u.status);p.default.isObject(u.response)&&u.response.meta?l+=" - ".concat(u.response.meta.message):l+=" - ".concat(u.response),h(l)}else-1!==u.status?d(i,h):h("Authentication failed: ".concat(u.response))}}))})),v=function preloadBundlePromise(i){var d,h="features"===i?P.default.prototype.TYPE:I.default.prototype.TYPE,v="features"===i?g.default.requireBundlesForFeatureTypes:g.default.requireBundlesForQuestionTypes,y=g.default.getBundleOptions(u.beta_flags),S=[];if(p.default.isArray(u[i])&&u[i].length){var E=u[i];p.default.each(E,(function(i){i.type!==h.UNKNOWN&&!p.default.include(S,i.type)&&p.default.include(h,i.type)&&S.push(i.type)}))}var R=S&&S.length;return d=new z.default((function(u,l){R?((0,Q.performanceTrackTimingStart)("init","app.js preloadBundles:".concat(i)),v(S,u,y)):u()})),R&&d.then((function(){return(0,Q.performanceTrackTimingEnd)(l,"init","app.js preloadBundles:".concat(i))})),d};return z.default.all([h,v("questions"),v("features")]).then((function(i){return i[0]}))},resetInstanceVariables:function resetInstanceVariables(){this.activity=null,this.options=null,this.security=null,this.consumer=null,this.i18n=null,this.saveEventHandlers={},this.discardEventHanders={},this.activityRenderer=null,this.unloadHandler=null,this.questionFacades={},this.featureFacades={}},getFacade:function getFacade(i){var u=this,l={};return this.cachedFacade?l=this.cachedFacade:(p.default.each(u.EXPOSED_METHODS,(function(i){l[i]=function(){return u.facadeCtx||(u.facadeCtx=this),p.default.isObject(u.options)&&p.default.isString(p.default.getNested(u,"options.appParent"))||(0,G.triggerEvent)({app:window.LearnosityApp._internal.config.appContext,name:"publicMethod",publicMethod:i,args:arguments}),u[i].apply(u,arguments)}})),this.cachedFacade=l),p.default.isObject(i)&&(l=p.default.extend(i,l)),l},_analyticsPush:function _analyticsPush(i){var u="(not set)",l="";if(i)switch(p.default.isString(i.application)&&(u=i.application),i.event&&(l=i.event),l){case"timing_start":i.timing&&i.timing.category&&i.timing.variable&&q.default.trackTimingStart(i.timing.category,i.timing.variable,i.timing.timestamp);break;case"timing_end":i.timing&&i.timing.category&&i.timing.variable&&q.default.trackTimingEnd(i.timing.category,i.timing.variable,i.timing.timestamp,u);break;default:q.default.push(i)}},_getPerformanceMetrics:function _getPerformanceMetrics(){return this._internal.performanceMetrics},reset:function reset(){this.activity&&(p.default.each(this.activity.hooks.reset,(function(i){p.default.isFunction(i)&&i()})),this.activity.off()),this.activityRenderer&&this.activityRenderer.reset(),this.unloadHandler&&this.unloadHandler.reset(),this.resetInstanceVariables(),this.isReset=!0},save:p.default.cancellableThrottle((function(i,u){if(this.activity){var l=h.default.extend({},this.saveEventHandlers,i),d=this.activity.get("state");if(l.submit=!!u,this.activity.get("type")!==this.activity.TYPE.LOCAL_PRACTICE&&d!==this.activity.STATE.REVIEW&&d!==this.activity.STATE.PREVIEW)this.activity.save(l);else{var p="Save responses failed. Save called on an invalid activity type / state";l.submit&&(p="Submit responses failed. Submit called on an invalid activity type / state"),R.default.exception({code:10004,detail:p},l.error)}}else this.saveCallCached||(this.saveCallCached=!0,this.once(this.EVENT&&this.EVENT.INITIALISED,(function(){this.saveCallCached=!1,this.save(i,u)}),this))}),5e3,!0),setScrollablePassagesContextHeight:function setScrollablePassagesContextHeight(i){this.simpleFeaturesRenderer.setScrollablePassagesContextHeight(i)},submit:p.default.cancellableThrottle((function(i){this.save.cancel&&this.save.cancel(),this.save(i,!0)}),5e3,!0),discard:function discard(i){var u=h.default.extend({},this.discardEventHanders,i),l=this.activity.get("state");this.activity.get("type")!==this.activity.TYPE.LOCAL_PRACTICE&&l!==this.activity.STATE.REVIEW&&l!==this.activity.STATE.PREVIEW?this.activity.discard(u):R.default.exception({code:10021,detail:"Discard responses failed. Discard called on an invalid activity type / state"},u.error)},push:function push(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(p.default.isObject(i)||(i={}),this&&!i.security&&(i.security=this.security.getRequestParameters()),i.security){i.security.domain=S.default.domain;try{N.default.init()}catch(u){return void R.default.exception({code:10027,detail:u.toString()},i.error)}N.default.pushAll(i.security).then(i.success,(function(u){R.default.exception({code:10027,detail:u.toString()},i.error)}))}else R.default.exception({code:10027,detail:"Missing security object"},i.error)},needsPushing:function needsPushing(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(p.default.isObject(i)||(i={}),this&&!i.security&&(i.security=this.security.getRequestParameters()),i.security)if(i.success){try{N.default.init()}catch(u){return void R.default.exception({code:10028,detail:u.toString()},i.error)}N.default.needsPushing(i.security).then(i.success,(function(u){R.default.exception({code:10028,detail:u.toString()},i.error)}))}else R.default.exception({code:10028,detail:"Missing success function"},i.error);else R.default.exception({code:10028,detail:"Missing security object"},i.error)},retryQuestionCapture:function retryQuestionCapture(){this.activity&&this.activity.get("type")!==this.activity.TYPE.LOCAL_PRACTICE&&this.activity.captureQuestionResponses()},safeToUnload:function safeToUnload(){return!this.activity||this.activity.safeToUnload()},attemptedQuestions:function attemptedQuestions(){return this.activity?this.activity.getAttemptedResponseIds():[]},_renderComponent:function _renderComponent(i,u){var l=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=g.default.getExposedExternalBundle("internalComponent");return p().then((function(p){var h=p.default?p.default:p,g=h.validateOptions(d);if(g)throw new Error(g);return d.i18n=l.i18n,h.render(i,u,d)}))},renderMath:function renderMath(i){return"mathquill"===i||this.activity&&"mathquill"===this.activity.get("math_renderer")?(new U.default).render():B.default.isInitialised()?B.default.render():B.default.init()},validateQuestions:function validateQuestions(i,u){var l=this,d=this.executeScorings().then((function(){return l.activity.validateQuestionsResponses(i)}));u&&d.then((function(){return u()}))},validQuestions:function validQuestions(i,u){switch(i){case"detailed":return this.activity.get("questionResponses").getValidResponses(u);case"detailedWithPartials":return this.activity.get("questionResponses").getValidResponsesDetailed(u);default:return this.activity.getValidResponseIds(u)}},unsaveableQuestions:function unsaveableQuestions(){return p.default.map(this.activity.get("questionResponses").getInvalidQuestionResponses(),(function(i){return i.get("response_id")}))},disable:function disable(){if(!this.disableEnableAllowed())return!1;var i=p.default.map(this.questionFacades,(function(i){return i.disable()}));return p.default.contains(i,!0)},enable:function enable(){if(!this.disableEnableAllowed())return!1;var i=p.default.map(this.questionFacades,(function(i){return i.enable()}));return p.default.contains(i,!0)},disableEnableAllowed:function disableEnableAllowed(){var i=this.activity.get("state");return i===this.activity.STATE.INITIAL||i===this.activity.STATE.RESUME},question:function question(i){return this.questionFacades[i]},questions:function questions(){return p.default.clone(this.questionFacades)},feature:function feature(i){return this.featureFacades[i]},features:function features(){return p.default.clone(this.featureFacades)},getResponses:function getResponses(){return!!this.activity&&this.activity.get("questionResponses").getResponsesForClient()},getFeatures:function getFeatures(){return!!this.activity&&this.activity.get("featureModels").getFeaturesJson()},getQuestions:function getQuestions(){return!!this.activity&&this.activity.get("questionResponses").getQuestionsJson()},getMetadata:function getMetadata(){return!!this.activity&&this.activity.get("questionResponses").getQuestionsMetadata()},executeScorings:function executeScorings(){return this.activity?this.activity.get("questionResponses").executeScorings():z.default.resolve()},getScores:function getScores(i){return!!this.activity&&this.activity.get("questionResponses").getScores(i)},getGroupScore:function getGroupScore(i,u){return!!this.activity&&this.activity.get("questionResponses").getGroupScore(i,u)},append:function append(i){return this.activity&&this.activity.append(i)},masking:function masking(i){if(this.activity){var u,l=arguments[2];if(p.default.isUndefined(arguments[1]))u=p.default.keys(this.questionFacades);else if(p.default.isString(arguments[1]))u=[arguments[1]];else{if(!p.default.isArray(arguments[1]))return!1;u=arguments[1]}return p.default.each(u,(function(u){this.questionFacades[u].masking(i,l)}),this),!0}return!1},on:function on(){var i=Array.prototype.slice.call(arguments),u=i[0],l=i[1],p=i[2]||this.facadeCtx||window;return d.default.Events.on.apply(this,[u,l,p]),this.getFacade()},off:function off(){return d.default.Events.off.apply(this,arguments),this.getFacade()},once:function once(){var i=Array.prototype.slice.call(arguments),u=i[0],l=i[1],p=i[2]||this.facadeCtx||window;return d.default.Events.once.apply(this,[u,l,p]),this.getFacade()},trigger:function trigger(){d.default.Events.trigger.apply(this,arguments)},stopAllSimpleFeatures:function stopAllSimpleFeatures(){this.simpleFeaturesRenderer.stopHideAll()},addQuestionFacade:function addQuestionFacade(i,u){this.questionFacades[i]=u},addFeatureFacade:function addFeatureFacade(i,u){this.featureFacades[i]=u},removeFeatureFacade:function removeFeatureFacade(i){var u=this.featureFacades;u&&delete u[i]}});var te=ee;u.default=te},90864:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(93420)),h=_interopRequireDefault(l(21893)),g=_interopRequireDefault(l(11389)),v=_interopRequireDefault(l(91789)),y=_interopRequireDefault(l(22052)),S=_interopRequireDefault(l(50581)),E=_interopRequireDefault(l(16104)),R=_interopRequireDefault(l(12400)),T=_interopRequireDefault(l(7636));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _toConsumableArray(i){return function _arrayWithoutHoles(i){if(Array.isArray(i))return _arrayLikeToArray(i)}(i)||function _iterableToArray(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||function _unsupportedIterableToArray(i,u){if(!i)return;if("string"==typeof i)return _arrayLikeToArray(i,u);var l=Object.prototype.toString.call(i).slice(8,-1);"Object"===l&&i.constructor&&(l=i.constructor.name);if("Map"===l||"Set"===l)return Array.from(i);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return _arrayLikeToArray(i,u)}(i)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(i,u){(null==u||u>i.length)&&(u=i.length);for(var l=0,d=new Array(u);l<u;l++)d[l]=i[l];return d}function getAppStub(i){var u={};return i&&(u=i),d.default.each(p.default.prototype.EXPOSED_METHODS,(function(i){u[i]=function(){g.default.exception({code:10032,detail:"You have called ".concat(i," on an App stub, please Init the API with an activity JSON object")})}})),u}function getLabelBundle(i,u){var l=u&&d.default.isObject(u.labelBundle)&&u.labelBundle,p=i&&d.default.isObject(i.labelBundle)&&i.labelBundle;return d.default.extend({},l,p)}function checkBrowserCompat(){var i,u;return!("ie"===E.default.browser&&E.default.version<8)||(E.default.compatibilityMode?(u=10018,i="Detected browser is supported but currently running in an unsupported compatibility mode ".concat(E.default.browser," version ").concat(E.default.version)):(u=10015,i="Detected browser ".concat(E.default.browser," version ").concat(E.default.version)),g.default.exception({code:u,detail:i,i18n:new y.default}),!1)}function validateDocType(){E.default.isValidDOCTYPE(document)||g.default.warning("This html file's DOCTYPE is invalid or missing. Learnosity's UI may be impacted until this is fixed.")}var O=new v.default,M=[],I={};function getDefaultApp(){return M.length>0?M[0]:getAppStub()}function executeCachedExposedMethodsCalls(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=i.app,l=i.appStub,p=i.allowedMethods,h=LearnosityApp._internal._cachedAppInstanceMethodCalls,g=function executeCall(i){return u[i.method].apply(u,_toConsumableArray(i.args))};h.forEach((function(i,u){i.appStub===l&&(p&&!d.default.contains(p,i.method)||(g(i),h[u]=null))})),LearnosityApp._internal._cachedAppInstanceMethodCalls=h.filter((function(i){return!!i}))}function whenReady(i,u,l){d.default.isFunction(l)&&R.default.all(i).then((function(){d.default.defer((function(){u.isReset||l()}))}))}var P={_internal:void 0,version:void 0,errors:[],init:function init(){var i,u,l,v,T,P,D=[];if(!checkBrowserCompat())return!1;validateDocType(),d.default.each(arguments,(function(p){d.default.isString(p)?l=p:d.default.isObject(p)&&(p.hasOwnProperty("consumer_key")?i=p:p.hasOwnProperty("appStub")?v=p.appStub:u=p)})),v||(v={},window.LearnosityApp._internal.addCachedPublicMethodsHandler(window.LearnosityApp._internal.cacheableInstanceMethods,v)),0!==M.length||E.default.isChromeApp||S.default.init(h.default.analytics),g.default.setErrorListener(u&&u.errorListener);var N=u&&u.readyListener,q=getLabelBundle(i,u);O.hasInitBeenCalled()||(d.default.isUndefined(T)&&(T=new y.default(q)),O.init(T));var L=i&&i.beta_flags;return D.push(O.render(L)),i?(T=new y.default(q),P=new p.default(i,u,l,T,this.version,this.requestedApiVersion),d.default.defer((function(){executeCachedExposedMethodsCalls({app:P,appStub:v,allowedMethods:["on","off","once"]})})),P.on(P.EVENT.BEFORE_READY,(function(){executeCachedExposedMethodsCalls({app:P,appStub:v,allowedMethods:["reset"]})})),P.on(P.EVENT.READY,(function(){var i=P.activityRenderer.renderSimpleFeaturesInWidgets(O);executeCachedExposedMethodsCalls({app:P,appStub:v}),P.getFacade(v),R.default.all(i).then((function(){O.onAppReady(),D.push(O.render(L)),whenReady(D,P,N),d.default.chain(M).without(P).each((function(i){var u=i&&i.activityRenderer;u&&u.renderSimpleFeaturesInWidgets(O)}))}))})),P.simpleFeaturesRenderer=O,M.push(P),l&&(I[l]=P)):(P=getAppStub(v),whenReady(D,P,N)),v},reset:function reset(){d.default.invoke(M,"reset"),g.default.reset();var i=LearnosityApp._internal.audioApi;i&&i.reset(),M=[],I={},O.reset()},save:function save(){p.default.prototype.save.apply(getDefaultApp(),arguments)},submit:function submit(){p.default.prototype.submit.apply(getDefaultApp(),arguments)},safeToUnload:function safeToUnload(){return p.default.prototype.safeToUnload.apply(getDefaultApp(),arguments)},attemptedQuestions:function attemptedQuestions(){return p.default.prototype.attemptedQuestions.apply(getDefaultApp(),arguments)},renderMath:function renderMath(){return p.default.prototype.renderMath.apply(getDefaultApp(),arguments)},simpleFeature:function simpleFeature(i){return O.simpleFeatureFacades[i]},simpleFeatures:function simpleFeatures(){return d.default.clone(O.simpleFeatureFacades)},push:function push(){return p.default.prototype.push.apply(null,arguments)},needsPushing:function needsPushing(){return p.default.prototype.needsPushing.apply(null,arguments)},offline:function offline(i){var u=(0,T.default)();return d.default.isFunction(i)?i(u):u}};u.default=P},80891:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d,p,h=_interopRequireDefault(l(73781)),g=l(62071),v=_interopRequireDefault(l(11389)),y=_interopRequireDefault(l(12400));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _toConsumableArray(i){return function _arrayWithoutHoles(i){if(Array.isArray(i))return _arrayLikeToArray(i)}(i)||function _iterableToArray(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||function _unsupportedIterableToArray(i,u){if(!i)return;if("string"==typeof i)return _arrayLikeToArray(i,u);var l=Object.prototype.toString.call(i).slice(8,-1);"Object"===l&&i.constructor&&(l=i.constructor.name);if("Map"===l||"Set"===l)return Array.from(i);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return _arrayLikeToArray(i,u)}(i)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(i,u){(null==u||u>i.length)&&(u=i.length);for(var l=0,d=new Array(u);l<u;l++)d[l]=i[l];return d}function _defineProperty(i,u,l){return u in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i}var S=(_defineProperty(d={},g.QUESTION_TYPES.ASSOCIATION,(function(){return Promise.all([l.e(3144),l.e(518),l.e(8485),l.e(6851),l.e(1332),l.e(577),l.e(4377),l.e(3224),l.e(3999),l.e(7648),l.e(3162),l.e(1148),l.e(5207),l.e(7522)]).then(l.bind(l,49718))})),_defineProperty(d,g.QUESTION_TYPES.CHEMISTRYESSAYV2,(function(){return Promise.all([l.e(3144),l.e(518),l.e(1989),l.e(7760),l.e(577),l.e(4377),l.e(3224),l.e(7173),l.e(706),l.e(2854),l.e(2830),l.e(3115),l.e(4368),l.e(8179),l.e(9071),l.e(3966),l.e(3257),l.e(8482)]).then(l.bind(l,35368))})),_defineProperty(d,g.QUESTION_TYPES.CHOICEMATRIX,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(4377),l.e(3224),l.e(3999),l.e(7648),l.e(8939)]).then(l.bind(l,41551))})),_defineProperty(d,g.QUESTION_TYPES.CLASSIFICATION,(function(){return Promise.all([l.e(3144),l.e(518),l.e(8485),l.e(6851),l.e(1332),l.e(577),l.e(4377),l.e(3224),l.e(3999),l.e(7648),l.e(3162),l.e(1148),l.e(5207),l.e(8348),l.e(7249)]).then(l.bind(l,18041))})),_defineProperty(d,g.QUESTION_TYPES.CLOZEASSOCIATION,(function(){return Promise.all([l.e(3144),l.e(518),l.e(8485),l.e(6851),l.e(1332),l.e(577),l.e(4377),l.e(3224),l.e(3999),l.e(7648),l.e(2830),l.e(4368),l.e(2412),l.e(3162),l.e(1148),l.e(5905),l.e(9909),l.e(5207),l.e(4457)]).then(l.bind(l,30945))})),_defineProperty(d,g.QUESTION_TYPES.CLOZEDROPDOWN,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(4377),l.e(3224),l.e(3999),l.e(7648),l.e(2830),l.e(4368),l.e(2412),l.e(5905),l.e(9909),l.e(7195)]).then(l.bind(l,44701))})),_defineProperty(d,g.QUESTION_TYPES.CLOZETEXT,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(4377),l.e(3224),l.e(3999),l.e(7648),l.e(2830),l.e(4368),l.e(2412),l.e(5905),l.e(9909),l.e(1489)]).then(l.bind(l,86491))})),_defineProperty(d,g.QUESTION_TYPES.FORMULAESSAYV2,(function(){return Promise.all([l.e(3144),l.e(518),l.e(1989),l.e(7760),l.e(577),l.e(4377),l.e(3224),l.e(7173),l.e(706),l.e(2854),l.e(2830),l.e(3115),l.e(4368),l.e(8179),l.e(9071),l.e(3966),l.e(3257),l.e(2202)]).then(l.bind(l,83220))})),_defineProperty(d,g.QUESTION_TYPES.HIGHLIGHT,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(4377),l.e(3224),l.e(706),l.e(2830),l.e(4368),l.e(4942),l.e(1627)]).then(l.bind(l,23593))})),_defineProperty(d,g.QUESTION_TYPES.LONGTEXTV2,(function(){return Promise.all([l.e(3144),l.e(518),l.e(1989),l.e(7760),l.e(577),l.e(4377),l.e(3224),l.e(7173),l.e(706),l.e(2854),l.e(2830),l.e(3115),l.e(4368),l.e(8179),l.e(9071),l.e(3966),l.e(3257),l.e(226)]).then(l.bind(l,88996))})),_defineProperty(d,g.QUESTION_TYPES.MCQ,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(4377),l.e(3224),l.e(3999),l.e(7648),l.e(5098)]).then(l.bind(l,91602))})),_defineProperty(d,g.QUESTION_TYPES.ORDERLIST,(function(){return Promise.all([l.e(3144),l.e(518),l.e(8485),l.e(6851),l.e(1332),l.e(577),l.e(4377),l.e(3224),l.e(3999),l.e(7648),l.e(3162),l.e(323)]).then(l.bind(l,59321))})),_defineProperty(d,g.QUESTION_TYPES.IMAGECLOZEASSOCIATIONV2,(function(){return Promise.all([l.e(3144),l.e(518),l.e(8485),l.e(6851),l.e(1332),l.e(577),l.e(4377),l.e(3224),l.e(3999),l.e(7648),l.e(8179),l.e(2412),l.e(3162),l.e(1148),l.e(8348),l.e(2376)]).then(l.bind(l,78424))})),_defineProperty(d,g.QUESTION_TYPES.RATING,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(4377),l.e(3224),l.e(2830),l.e(6590)]).then(l.bind(l,48384))})),_defineProperty(d,g.QUESTION_TYPES.SHORTTEXT,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(4377),l.e(3224),l.e(7648),l.e(2830),l.e(4368),l.e(4204)]).then(l.bind(l,57680))})),_defineProperty(d,g.QUESTION_TYPES.TOKENHIGHLIGHT,(function(){return Promise.all([l.e(3144),l.e(518),l.e(1989),l.e(577),l.e(4377),l.e(3224),l.e(7648),l.e(5856)]).then(l.bind(l,16894))})),_defineProperty(d,g.QUESTION_TYPES.VIDEO,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(4377),l.e(3224),l.e(9071),l.e(2082),l.e(5578)]).then(l.bind(l,47746))})),_defineProperty(d,g.QUESTION_TYPES.DRAWING,(function(){return Promise.all([l.e(3144),l.e(518),l.e(8485),l.e(6851),l.e(577),l.e(4377),l.e(3224),l.e(706),l.e(2830),l.e(4368),l.e(8179),l.e(4942),l.e(1885)]).then(l.bind(l,5459))})),_defineProperty(d,g.QUESTION_TYPES.AUDIO,(function(){return Promise.all([l.e(577),l.e(9071),l.e(8123),l.e(5300),l.e(9771)]).then(l.bind(l,55685))})),_defineProperty(d,g.QUESTION_TYPES.AUDIOADV,(function(){return Promise.all([l.e(577),l.e(8123),l.e(4370)]).then(l.bind(l,16800))})),_defineProperty(d,g.QUESTION_TYPES.BOOLEAN,(function(){return l.e(7501).then(l.bind(l,8107))})),_defineProperty(d,g.QUESTION_TYPES.CHEMISTRY,(function(){return Promise.all([l.e(3144),l.e(577),l.e(7173),l.e(706),l.e(2854),l.e(3115),l.e(2426),l.e(2454),l.e(4033),l.e(2335)]).then(l.bind(l,35913))})),_defineProperty(d,g.QUESTION_TYPES.CHEMISTRYESSAY,(function(){return Promise.all([l.e(3144),l.e(1989),l.e(577),l.e(7173),l.e(706),l.e(2854),l.e(3115),l.e(5744),l.e(8503),l.e(4948)]).then(l.bind(l,98674))})),_defineProperty(d,g.QUESTION_TYPES.CUSTOM,(function(){return Promise.all([l.e(6236),l.e(6394)]).then(l.bind(l,3256))})),_defineProperty(d,g.QUESTION_TYPES.FILLSHAPE,(function(){return Promise.all([l.e(8179),l.e(2711)]).then(l.bind(l,64549))})),_defineProperty(d,g.QUESTION_TYPES.FILEUPLOAD,(function(){return Promise.all([l.e(9071),l.e(9810)]).then(l.bind(l,20896))})),_defineProperty(d,g.QUESTION_TYPES.FORMULA,(function(){return Promise.all([l.e(577),l.e(7173),l.e(2854),l.e(2426),l.e(2679)]).then(l.bind(l,97237))})),_defineProperty(d,g.QUESTION_TYPES.FORMULAESSAY,(function(){return Promise.all([l.e(3144),l.e(1989),l.e(577),l.e(7173),l.e(706),l.e(2854),l.e(3115),l.e(5744),l.e(8503),l.e(5484)]).then(l.bind(l,69054))})),_defineProperty(d,g.QUESTION_TYPES.GRAPHPLOTTING,(function(){return Promise.all([l.e(1519),l.e(984),l.e(4412)]).then(l.bind(l,77904))})),_defineProperty(d,g.QUESTION_TYPES.GRIDDED,(function(){return l.e(5290).then(l.bind(l,44726))})),_defineProperty(d,g.QUESTION_TYPES.HOTSPOT,(function(){return l.e(2212).then(l.bind(l,52640))})),_defineProperty(d,g.QUESTION_TYPES.IMAGEUPLOAD,(function(){return Promise.all([l.e(9071),l.e(3966),l.e(5037)]).then(l.bind(l,52451))})),_defineProperty(d,g.QUESTION_TYPES.LONGTEXT,(function(){return Promise.all([l.e(1989),l.e(5744),l.e(5036)]).then(l.bind(l,51310))})),_defineProperty(d,g.QUESTION_TYPES.NUMBERLINE,(function(){return Promise.all([l.e(1519),l.e(984),l.e(7614)]).then(l.bind(l,78768))})),_defineProperty(d,g.QUESTION_TYPES.NUMBERLINEPLOT,(function(){return Promise.all([l.e(8485),l.e(6851),l.e(1519),l.e(984),l.e(7431)]).then(l.bind(l,6579))})),_defineProperty(d,g.QUESTION_TYPES.PLAINTEXT,(function(){return Promise.all([l.e(577),l.e(4039),l.e(6288)]).then(l.bind(l,45440))})),_defineProperty(d,g.QUESTION_TYPES.SCORE,(function(){return l.e(6671).then(l.bind(l,44501))})),_defineProperty(d,g.QUESTION_TYPES.SIMPLECHART,(function(){return Promise.all([l.e(577),l.e(8179),l.e(1519),l.e(8859)]).then(l.bind(l,44313))})),_defineProperty(d,g.QUESTION_TYPES.SIMPLESHADING,(function(){return Promise.all([l.e(577),l.e(4877)]).then(l.bind(l,66491))})),_defineProperty(d,g.QUESTION_TYPES.SORTLIST,(function(){return Promise.all([l.e(8485),l.e(6851),l.e(3999),l.e(3162),l.e(7351)]).then(l.bind(l,73843))})),_defineProperty(d,g.QUESTION_TYPES.TEXTHIGHLIGHT,(function(){return Promise.all([l.e(1989),l.e(9190)]).then(l.bind(l,12494))})),_defineProperty(d,g.QUESTION_TYPES.UNKNOWN,(function(){return l.e(6011).then(l.bind(l,6317))})),d);S[g.QUESTION_TYPES.CLOZEINLINETEXT]=S[g.QUESTION_TYPES.IMAGECLOZEASSOCIATION]=function(){return Promise.all([l.e(8485),l.e(6851),l.e(577),l.e(3999),l.e(2412),l.e(3162),l.e(5968),l.e(4039),l.e(9434)]).then(l.bind(l,77858))},S[g.QUESTION_TYPES.IMAGECLOZETEXT]=S[g.QUESTION_TYPES.IMAGECLOZEDROPDOWN]=function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(4377),l.e(3224),l.e(3999),l.e(7648),l.e(2830),l.e(4368),l.e(8179),l.e(2412),l.e(5905),l.e(5149)]).then(l.bind(l,91095))},S[g.QUESTION_TYPES.CLOZEFORMULA]=S[g.QUESTION_TYPES.IMAGECLOZEFORMULA]=function(){return Promise.all([l.e(3144),l.e(428),l.e(577),l.e(3999),l.e(7173),l.e(706),l.e(2854),l.e(3115),l.e(2412),l.e(2426),l.e(2454),l.e(5968),l.e(123),l.e(3152)]).then(l.bind(l,69978))},S[g.QUESTION_TYPES.CLOZEFORMULAV2]=function(){return Promise.all([l.e(3144),l.e(428),l.e(577),l.e(3999),l.e(7173),l.e(706),l.e(2854),l.e(3115),l.e(2412),l.e(2426),l.e(2454),l.e(5968),l.e(123),l.e(6912)]).then(l.bind(l,53742))},S[g.QUESTION_TYPES.CLOZECHEMISTRY]=S[g.QUESTION_TYPES.IMAGECLOZECHEMISTRY]=function(){return Promise.all([l.e(3144),l.e(428),l.e(577),l.e(3999),l.e(7173),l.e(706),l.e(2854),l.e(3115),l.e(2412),l.e(2426),l.e(2454),l.e(5968),l.e(123),l.e(8012)]).then(l.bind(l,67746))},S[g.QUESTION_TYPES.FORMULAV2]=S[g.QUESTION_TYPES.FORMULA_DEV]=function(){return Promise.all([l.e(3144),l.e(577),l.e(7173),l.e(706),l.e(2854),l.e(3115),l.e(2426),l.e(4033),l.e(2043)]).then(l.bind(l,34869))};var E=(_defineProperty(p={},g.FEATURE_TYPES.IMAGE_TOOL,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(7578),l.e(9812),l.e(5398)]).then(l.bind(l,75616))})),_defineProperty(p,g.FEATURE_TYPES.VIDEO_PLAYER,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(7578),l.e(2082),l.e(5107)]).then(l.bind(l,2681))})),_defineProperty(p,g.FEATURE_TYPES.CALCULATOR,(function(){return Promise.all([l.e(3144),l.e(518),l.e(8485),l.e(1332),l.e(577),l.e(7578),l.e(9812),l.e(9489)]).then(l.bind(l,77107))})),_defineProperty(p,g.FEATURE_TYPES.SCROLLABLE_PASSAGE,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(7578),l.e(18)]).then(l.bind(l,62648))})),_defineProperty(p,g.FEATURE_TYPES.LINE_READER,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(7578),l.e(9812),l.e(3126)]).then(l.bind(l,43130))})),_defineProperty(p,g.FEATURE_TYPES.POP_UP,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(2830),l.e(8179),l.e(7578),l.e(3777)]).then(l.bind(l,99241))})),_defineProperty(p,g.FEATURE_TYPES.AUDIO_PLAYER,(function(){return Promise.all([l.e(577),l.e(8123),l.e(5300),l.e(1292)]).then(l.bind(l,76690))})),_defineProperty(p,g.FEATURE_TYPES.COUNTER,(function(){return Promise.all([l.e(577),l.e(6921)]).then(l.bind(l,86349))})),_defineProperty(p,g.FEATURE_TYPES.FORMULAINPUT,(function(){return Promise.all([l.e(3144),l.e(577),l.e(7173),l.e(706),l.e(2854),l.e(3115),l.e(7865)]).then(l.bind(l,7983))})),_defineProperty(p,g.FEATURE_TYPES.SHARED_PASSAGE,(function(){return Promise.all([l.e(3144),l.e(518),l.e(577),l.e(4377),l.e(7578),l.e(5646)]).then(l.bind(l,29236))})),_defineProperty(p,g.FEATURE_TYPES.CUSTOM_FEATURE,(function(){return Promise.all([l.e(577),l.e(6236),l.e(6496)]).then(l.bind(l,19074))})),_defineProperty(p,g.FEATURE_TYPES.UNKNOWN,(function(){return Promise.all([l.e(577),l.e(3611)]).then(l.bind(l,90607))})),p);function resolveBundlePromises(i){return y.default.all(i).then((function(){if(arguments.length){var i=h.default.map(arguments.length<=0?void 0:arguments[0],(function(i){return h.default.isArray(i)&&i[0].default?i[0]:i}));return i}})).catch(onBundleLoadError)}function onBundleLoadError(i){var u=i.stack||i.message,l=10017;u&&u.indexOf("ChunkLoadError")<0&&(l=10017.1),v.default.exception({code:l,detail:u})}var R={default:S,legacy:{},reactiveViews:{},reactiveViewsInDev:{}},T={default:E,legacy:{},reactiveViews:{},reactiveViewsInDev:{}};function getBundleToLoad(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l="feature"===i?T:R,d=u.reactiveViews,p=u.reactiveViewsInDev,g=h.default.extend({},l.default);return!0===d?h.default.extend(g,l.reactiveViews,p&&l.reactiveViewsInDev):!1===d&&h.default.extend(g,l.legacy),g}function reloadable(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,l=0;return new y.default((function(d,p){!function sendRequest(){i().then((function(){d.apply(null,arguments)})).catch((function(i){++l<=u?h.default.delay(sendRequest,500*l):p(i)}))}()}))}var O={mathcore:function mathcore(){return Promise.all([l.e(2426),l.e(876)]).then(l.bind(l,49974))},reactiveViewComponents:function reactiveViewComponents(){return Promise.all([l.e(3144),l.e(4362)]).then(l.bind(l,38280))},internalComponent:function internalComponent(){return Promise.all([l.e(3144),l.e(590)]).then(l.bind(l,8952))},spokenmathWorker:function spokenmathWorker(){return l.e(9875).then(l.t.bind(l,86660,23))},mathrustWorker:function mathrustWorker(){return l.e(3623).then(l.t.bind(l,93363,23))}};var M={requireBundlesForQuestionTypes:function requireBundlesForQuestionTypes(i,u){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};reloadable((function(){var u=getBundleToLoad("question",l),d=[],p={},v=[g.QUESTION_TYPES.UNKNOWN].concat(_toConsumableArray(i));return h.default.each(v,(function(i){u[i]&&d.push(u[i]())})),d.length>0?resolveBundlePromises(d).then((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return h.default.each(v,(function(u,l){var d=i[l];d&&d.default&&(p[u]=d.default)})),p})):y.default.resolve(p)})).then((function(i){u(i)})).catch(onBundleLoadError)},requireBundlesForFeatureTypes:function requireBundlesForFeatureTypes(i,u){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};reloadable((function(){var u=getBundleToLoad("feature",l),d=[],p={},v=[g.FEATURE_TYPES.UNKNOWN].concat(_toConsumableArray(i));return h.default.each(v,(function(i){u[i]&&d.push(u[i]())})),d.length>0?resolveBundlePromises(d).then((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return h.default.each(v,(function(u,l){var d=i[l];d&&d.default&&(p[u]=d.default)})),p})):y.default.resolve(p)})).then((function(i){u(i)})).catch(onBundleLoadError)},getBundleOptions:function getBundleOptions(i){var u={};if(i){var l=i.reactive_views,d=i.reactive_views_in_dev,p=i.lds;h.default.isBoolean(l)&&(u.reactiveViews=l),h.default.isBoolean(d)&&(u.reactiveViewsInDev=d),h.default.isBoolean(p)&&(u.lds=p)}return u},getExposedExternalBundle:function getExposedExternalBundle(i){if(O[i])return function(){return new y.default((function(u,l){O[i]().then((function(i){return i.default?u(i.default):u(i)})).catch((function(i){l(i)}))}))}}};u.default=M},4550:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(31700));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var h=d.default.Collection.extend({model:p.default,getFeaturesJson:function getFeaturesJson(){var i={};return this.each((function(u){i[u.get("feature_id")]=u.getFeatureJsonForClient()})),i}});u.default=h},39835:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=(_interopRequireDefault(l(73781)),_interopRequireDefault(l(2355)));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var h=d.default.Collection.extend({EVENT:{MODIFIED:p.default.prototype.EVENT.MODIFIED},model:p.default,jsonAttribute:void 0,groupId:void 0,viewClass:void 0,initialize:function initialize(i,u){this.jsonAttribute=u.jsonAttribute,this.groupId=u.groupId,this.viewClass=u.viewClass,this.id=this.jsonAttribute+"-"+this.groupId},areAllQuestionsAttempted:function areAllQuestionsAttempted(){return this.all((function(i){return i.isAttempted()}))}});u.default=h},68709:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(2355)),g=_interopRequireDefault(l(87705)),v=_interopRequireDefault(l(11389));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var y=d.default.Collection.extend({model:h.default,RESPONSE_ID_MAX_CHAR:100,EVENT:{MODIFIED:h.default.prototype.EVENT.MODIFIED},getModelsValidState:function getModelsValidState(){var i=[];return this.each((function(u){u.validState.valid||(i=i.concat(u.validState.errors))})),{valid:0===i.length,errors:i}},getInvalidQuestionResponses:function getInvalidQuestionResponses(){return this.filter((function(i){return!i.hasAllowedResponse()}))},getResponseIds:function getResponseIds(i){var u=this,l=[];return p.default.each(i,(function(i){l.push(u.get(i).get("response_id"))})),l},getAttemptedResponseIds:function getAttemptedResponseIds(){var i=[];return this.each((function(u){u.isAttempted()&&i.push(u.get("response_id"))})),i},getValidResponseIds:function getValidResponseIds(i){var u=this,getValidResponseIds=function getValidResponseIds(){var i=[];return u.each((function(u){p.default.isFunction(u.isResponseValid)&&u.isResponseValid()&&i.push(u.get("response_id"))})),i};return i?this.executeScorings().then((function(){return i(getValidResponseIds())})):getValidResponseIds()},getValidResponses:function getValidResponses(i){var u=this,getValidResponses=function getValidResponses(){var i={};return u.each((function(u){p.default.isFunction(u.canValidateResponse)&&u.canValidateResponse()&&u.hasResponse()&&(i[u.get("response_id")]=u.isResponseValid())})),i};return i?this.executeScorings().then((function(){return i(getValidResponses())})):getValidResponses()},getValidResponsesDetailed:function getValidResponsesDetailed(i){var u=this,getValidResponsesDetailed=function getValidResponsesDetailed(){var i={};return u.each((function(u){p.default.isFunction(u.canValidateResponse)&&u.canValidateResponse()&&u.hasResponse()&&(i[u.get("response_id")]=u.getResponseValidDetailed())})),i};return i?this.executeScorings().then((function(){return i(getValidResponsesDetailed())})):getValidResponsesDetailed()},getToBeCapturedQuestionResponseJson:function getToBeCapturedQuestionResponseJson(){var i=[];return this.each((function(u){u.isCaptured()||u.has("error")||i.push(u.getJsonToCapture())})),i},getToBeSavedQuestionResponseJson:function getToBeSavedQuestionResponseJson(){var i=[];return this.each((function(u){u.toBeSaved()&&!u.has("error")&&i.push(u.getJsonToSave())})),i},getQuestionResponseIdsForReScore:function getQuestionResponseIdsForReScore(){var i=[];return this.each((function(u){u.toBeSaved()||u.has("error")||i.push(u.get("id"))})),i},getResponsesForClient:function getResponsesForClient(){var i={};return this.each((function(u){u.hasResponse()&&(i[u.get("response_id")]=u.getResponseJsonForClient())})),i},getQuestionsJson:function getQuestionsJson(){var i={};return this.each((function(u){i[u.get("response_id")]=u.getQuestionJsonForClient()})),i},getQuestionsMetadata:function getQuestionsMetadata(){var i={};return this.each((function(u){var l=u.getMetadataForClient();l&&(i[u.get("response_id")]=l)})),i},executeScorings:function executeScorings(){return Promise.all(this.map((function(i){return p.default.isFunction(i.executeScoring)?i.executeScoring():Promise.resolve()})))},getScores:function getScores(i){var u=this,getScores=function getScores(){var i={};return u.each((function(u){var l=p.default.isFunction(u.getScore)?u.getScore():null;p.default.isEmpty(l)||(i[u.get("response_id")]=l)})),i};if(!i)return getScores();this.executeScorings().then((function(){return i(getScores())}))},getGroupScore:function getGroupScore(){var i=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0,getGroupScore=function getGroupScore(){p.default.isString(u.type)||(u.type="per-question");var l=[];if(p.default.each(u.response_ids,(function(i){var u=p.default.first(this.where({response_id:i}));u?l.push(p.default.isFunction(u.getScore)?u.getScore():null):v.default.log("Response ID not found: "+i)}),i),!p.default.isArray(u.response_ids)||l.length!==u.response_ids.length)return!1;try{var d=new g.default({type:u.type,questions:l});return{type:u.type,score:d.score(),max_score:d.maxScore(),question_scores:l}}catch(i){return v.default.log("Group scoring error: "+i),!1}};if(!l)return getGroupScore();this.executeScorings().then((function(){return l(getGroupScore())}))},getQuestionResponsesModificationTimes:function getQuestionResponsesModificationTimes(){var i={};return this.each((function(u){i[u.id]=u.getLastModifiedTime()})),i},areThereQuestionsModified:function areThereQuestionsModified(){return this.any((function(i){return i.isModified()}))},areThereQuestionsAnswered:function areThereQuestionsAnswered(){return this.any((function(i){return!p.default.isUndefined(i.getResponseValue())}))},areAllQuestionsSaved:function areAllQuestionsSaved(){return this.every((function(i){return i.isSaved()}))},markAsSavedIfModified:function markAsSavedIfModified(i,u){p.default.each(i,(function(i){var l=this.get(i);l.getLastModifiedTime()===u[l.id]&&l.setAsSaved()}),this)},markAsCaptured:function markAsCaptured(i){p.default.each(i,(function(i){this.get(i).setAsCaptured()}),this)}});u.default=y},33534:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(21893)),h=_interopRequireDefault(l(99279)),g=l(42740);function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var v=[];p.default&&!0!==p.default.deferXhrInit&&h.default.init({baseUrl:p.default.apiHost,iframeBaseUrl:p.default.apiHost}).catch((function(){}));var y={ACTION:{GET:"get",SET:"set",UPDATE:"update",DELETE:"delete"},setMetricsContext:function setMetricsContext(i){v=i},request:function request(i){var u,l={action:i.action||this.ACTION.GET,security:i.security},p=(u=i.url,i.analytics&&i.analytics.sessionId&&(u+=i.url.indexOf("?")>0?"":"?",u+="&a=".concat(l.action),u+="&c=".concat(l.security.consumer_key),u+="&s=".concat(i.analytics.sessionId),i.analytics.authTimestamp&&(u+="&t=".concat(i.analytics.authTimestamp)),d.default.isBoolean(i.analytics.submit)&&(u+="&st=".concat(i.analytics.submit?"submit":"save"))),u),y=0,S=function isRetryableError(i){return i&&i.status>=0&&i.status<100};i.data&&(l.usrequest=i.data),d.default.isArray(v)&&(l.usrequest=l.usrequest||{},l.usrequest.metricsContext=v),function sendRequest(){h.default.request({url:p,method:"POST",data:l,success:function success(){i.success.apply(null,arguments)},error:function error(u){y++,S(u)&&y<=3?d.default.delay(sendRequest,500*y):!0!==(0,g.isUnloadInProgress)()&&i.failure.apply(null,arguments)}})}()}};u.default=y},21893:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(16104));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var h=d.default.extend({},LearnosityApp._internal.config);h.domain=p.default.isChromeApp?function getChromeAppManifestDomain(){return(d.default.isFunction(chrome.runtime.getManifest)?chrome.runtime.getManifest():{}).domain||window.location.hostname}():window.location.hostname;var g=h;u.default=g},41864:function(i,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.FONTSIZE_MAP=u.FONTSIZE=void 0;u.FONTSIZE={SMALL:"small",NORMAL:"normal",LARGE:"large",XLARGE:"xlarge",XXLARGE:"xxlarge"};u.FONTSIZE_MAP={small:11,normal:14,large:17,xlarge:20,xxlarge:24}},23057:function(i,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.resetStateSelector=u.RESET_STATE=void 0;u.RESET_STATE={RESET:"reset",ATTEMPTED_AFTER_RESET:"attemptedAfterReset"};u.resetStateSelector=function resetStateSelector(i){return i.base.resetState}},11389:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(34651)),h=_interopRequireDefault(l(50581)),g=l(55536);function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var v,y={10001:{code:10001,msg:"Failed validating activity / format error",errorUI:"global"},10002:{code:10002,msg:"Response id conflict",errorUI:"global"},10003:{code:10003,msg:"Failed authentication",errorUI:"global"},10004:{code:10004,msg:"Save responses failed"},10005:{code:10005,msg:"Response not found",errorUI:"question"},10006:{code:10006,msg:"Audio save to server failed",errorUI:"button"},10007:{code:10007,msg:"Authorisation failed",errorUI:"question"},10008:{code:10008,msg:"Audio asset failed to load"},10009:{code:10009,msg:"Audio asset temporarily not available"},10010:{code:10010,msg:"Audio asset expired",errorUI:"question"},10011:{code:10011,msg:"Your device does not support audio-capture functionality"},10012:{code:10012,msg:"No microphone found"},10013:{code:10013,msg:"Unable to save, question validation failed"},10014:{code:10014,msg:"Audio asset format not supported"},10015:{code:10015,msg:"Browser not supported",errorUI:"global"},10016:{code:10016,msg:"Failed capturing questions",errorUI:"global"},10017:{code:10017,msg:"Failed loading Questions API, can't load required modules due to network error"},10017.1:{code:10017.1,msg:"Failed loading Questions API, can't load required modules due to file exception"},10018:{code:10018,msg:"Browser running in an unsupported compatibility view",errorUI:"global"},10019:{code:10019,msg:"Failed validating math"},10020:{code:10020,msg:"Failed validating appended elements"},10021:{code:10021,msg:"Discard responses failed"},10022:{code:10022,msg:"Audio playback failed"},10023:{code:10023,msg:"Unable to render latex"},10024:{code:10024,msg:"Failed loading external resource"},10025:{code:10025,msg:"Failed resuming activity, network connectivity error"},10026:{code:10026,msg:"Cannot set response metadata on empty response"},10027:{code:10027,msg:"Failed pushing offline data to server"},10028:{code:10028,msg:"Called needsPushing with incorrect parameters"},10029:{code:10029,msg:"Asset could not be uploaded"},10030:{code:10030,msg:"Widget instance can not be updated"},10032:{code:10032,msg:"Public method was called on an app stub that was initialized without an activity object"}};function log(){console.error.apply?console.error.apply(console,arguments):d.default.each(arguments,(function(i){console.error(i)}))}var S={setErrorListener:function setErrorListener(i){v=i},exception:function exception(i,u){var l=d.default.extend({},y[i.code],i),S=l.i18n,E=S?S.labels:{};switch(delete l.i18n,LearnosityApp.errors=LearnosityApp.errors||[],LearnosityApp.errors.push(l),h.default.trackError(l.code,l.msg,l.detail?l.detail:l.msg,l.consumerKey),log("".concat(l.code,": ").concat(l.msg," ").concat(l.detail?"(Detail: "+l.detail+").":"."," View this error on LearnosityApp.errors[").concat(LearnosityApp.errors.length-1,"]")),l.errorUI){case"button":default:break;case"question":(0,p.default)("#"+l.response_id).removeClass("lrn_qr").addClass("learnosity-error").html(E.uierrorfeedback);break;case"global":var R=10015===l.code?E.unsupportedBrowser:10018===l.code?E.unsupportedCompatibilityMode:E.uierrorfeedback;(0,p.default)(".learnosity-response, .lrn_qr").removeClass("lrn_qr").addClass("learnosity-error").html(R)}setTimeout((function(){(0,g.triggerEvent)({app:window.LearnosityApp._internal.config.appContext,name:"error",error:l})}),3e3),u?u(l):v?d.default.defer((function(){d.default.isFunction(v)&&v(d.default.clone(l))})):alert(l.msg+"\n\nPlease contact your administrator if you require further assistance.")},reset:function reset(){LearnosityApp.errors=[],v=null},log:log,warning:function warning(){d.default.isFunction(console.warn)&&console.warn.apply(console,arguments)}};u.default=S},73341:function(i){"use strict";i.exports={addData:"Add Data",audioplaybackerror:"Unable to play audio asset. Click to try again in a moment.",audioPlayer:"Audio Player",audioRecorder:"Audio Recorder",audioretrievalretry:"Trying to retrieve audio",audioPlayRecording:"Play",audioStopPlayback:"Stop playback",audioPausePlayback:"Pause",audioContinuePlayback:"Continue",audioStopRecording:"Stop recording",audioStartRecording:"Start recording",audioPauseRecording:"Pause",audioContinueRecording:"Continue recording",audioAdjustVolume:"Adjust Volume",audioSoundWaves:"Sound waves",simpleChartNoData:"No Data Available. Please add a new bar.",simpleChartNewBarDefaultName:"New Bar",calculator:"Calculator",calculatorControls:"Calculator controls",cancel:"Cancel",characterMapCharacters:["¡","¿","Ç","Ñ","ç","ñ","ß","ý","ÿ","á","â","ã","ä","å","æ","À","Á","Â","Ã","Ä","Å","Æ","à","È","É","Ê","Ë","è","é","ê","ë","Ì","Í","Î","Ï","ì","í","î","ï","Ò","Ó","Ô","Õ","Ö","Ø","Œ","ð","ò","ó","ô","õ","ö","œ","Ù","Ú","Û","Ü","ù","ú","û","ü"],characterMapIcon:"á",characterMapMathCharacters:["⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹","⁺","⁻","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉","₊","₋","½","⅓","⅔","¼","¾","⅕","⅖","⅗","⅘","⅙","⅚","√","∞","≤","≥","±","μ","σ","∫","Δ","∪","∩","≡","Σ","°"],characterMapMathIcon:"Σ",characterMapTitle:"Special Characters",characterMathMapTitle:"Math Characters",checkAnswer:"Check Answer",checkAnswers:"Check Answers",clear:"Clear",clickToRecord:"Click on record to start",clickToStartPlayback:"Click on play to start playback",closeThisWindow:"Close this window",color:"color",colorPicker:"Color Picker",confirmrecordoverwrite:"A previous audio recording exists. If you continue it will be replaced.",confirmVideoOverwrite:"A previous video recording exists. If you continue it will be replaced.",continuelabel:"Continue",copy:"Copy",correctAnswer:"Correct answer",correctAnswers:"Correct answers",counterTemplate:"Beginning in {num} seconds...",cut:"Cut",distractorRationale:{incorrectTitle:"Incorrect",correctTitle:"Correct"},downloadAudio:"Download",downloadVideo:"Download video file",draggableItem:"Movable item",editorBoldIcon:"B",editorBoldTitle:"Bold",editorBulletdListTitle:"Bulleted list",editorItalicsIcon:"I",editorItalicsTitle:"Italics",editorNumberedListTitle:"Numbered list",editorRemoveFormatTitle:"Clear formatting",editorSubscriptTitle:"Subscript",editorSuperscriptTitle:"Superscript",editorUnderlineIcon:"U",editorUnderlineTitle:"Underline",error:"Error",fileUpload:{deleteFileMode:"Delete File Mode",fileDescriptionMode:"File Description Mode",fileLimit:"File Limit",characterLimit:"character limit",characterLimitReachedAriaLabel:"{{maxCharacters}} character limit has been reached.",fileFormatsSupported:"Supported file formats",fileDescriptionLabel:"Press {{icon}} to enter descriptions for the uploaded files ({{maxCharacters}} characters max).",fileDescriptionAriaLabel:"Tap to enter descriptions for the uploaded files ({{maxCharacters}} characters max).",fileDeleteDisclaimer:"File deletion cannot be undone. Any supporting descriptions will be lost.",notification:{couldNotUpload:"could not be uploaded. Please try again.",invalidFileType:"has an invalid file type. Allowed file extensions are:",maxFilesReached:"The maximum number of files have been selected.",tooLarge:"is too large. Please select files less than",tooManyFilesSelected:"Too many files selected, the maximum allowed is",alreadySelected:" has already been selected."},uploadFiles:"Upload files",uploadFailed:"upload failed",photoCapture:{launch:"Capture photo",accessToCamera:{title:"Waiting for camera access",description:"Before capturing, we will ask for access to the camera.",denied:"No camera found. Please check your browser settings or refresh the page to try again."},countdownCapturingIn:"Capturing in...",chooseName:"Name your photo",defaultFileName:"photo",confirmDelete:"Delete current image?",capture:"Capture",retake:"Retake",accept:"Accept",save:"Save",cancel:"Cancel",delete:"Delete",close:"Close"}},graphingTools:{move:"Move",point:"Point",line:"Line",ray:"Ray",segment:"Segment",vector:"Vector",circle:"Circle",parabola:"Parabola",sine:"Sine",polygon:"Polygon",delete:"Delete",label:"Label"},graphPlotter:{instructions1:"Use left and right arrows to navigate the toolbar. Space or Enter to select the tool.",instructions2:"Use Tab and Shift+Tab to navigate between the toolbar and graph plane.",instructions3:"Use arrow keys to navigate around the graph plane.",instructions4:"Use Space or Enter to execute the selected action.",instructionsButton:"Keyboard Instructions"},handwritingApiError:"Unable to recognise handwriting. Please try again later.",imageUpload:{deleteMode:"Delete Mode",addAnnotation:"Add Annotation",rotateImage:"Rotate Image",configureImage:"Configure Image",uploadNewImage:"Upload a new image",replaceImage:"Replace current image",uploadImage:"Upload an image",enterAnnotation:"Enter an annotation",noResponse:"No content entered",removeAllAnnotations:"Remove all annotations when uploading the image"},imageTool:"Image Tool",imageValidationArea:"Image validation area",incorrectAnswer:"Incorrect answer",incorrectAnswers:"Incorrect answers",itemPositionTemplate:"Item {num} of {length}",lineChartNewPointDefaultName:"New Point",lineReader:"Line Reader",lineReaderDragHandler:"Move line reader. Select to move line reader around screen",lineReaderClose:"Close Line Reader",lineReaderResizeMask:"Resize line reader. Select to resize line reader window and mask.",lineReaderResizeWindow:"Resize line reader window. Select to resize line reader window.",lineReaderDescription:"Show or hide the Line Reader, a visual assistive tool for showing one line of text and masking surrounding text.",lineReaderDragHandlerGrabbed:"Line reader grabbed. Use arrow keys to move around the screen. Enter key to drop, Escape key to cancel",lineReaderResizeWindowGrabbed:"Resize line reader window grabbed. Use up and down arrow keys to resize window vertically. Enter key to drop, Escape key to cancel",lineReaderResizeMaskGrabbed:"Resize line reader grabbed. Use left and right arrow keys to resize window horizontally and use up and down arrow keys to resize mask vertically. Enter key to drop, Escape key to cancel",lineReaderDragHandlerDropped:"Line reader dropped",lineReaderResizeWindowDropped:"Line reader resized",lineReaderResizeMaskDropped:"Line reader resized",listen:"Listen",loading:"Loading",loadingInfo:"<div class='lrn_spinner'><div class='lrn_bounce1'></div><div class='lrn_bounce2'></div><div class='lrn_bounce3'></div></div>",longTextV2:{invalidExternalImageWarning:"Invalid pasted image. Images can be inserted using the uploader in the toolbar.",invalidExternalMathWarning:"[Invalid pasted math]"},next:"Next",previous:"Previous",maxPlayAttempts:"You reached the playback limit",maxRecordAttempts:"You used all your recording attempts",maxResponseMessage:"Only 1 answer is allowed.",maxResponsesMessage:"Only {{maxSelection}} answers are allowed.",microphoneDeviceMissing:"Microphone device missing error.",microphoneDeviceNoAuth:"Microphone not authorised",minResponseMessage:"This question requires at least 1 answer.",minResponsesMessage:"This question requires at least {{minSelection}} answers.",noAudio:"No audio to playback",noCorrectAnswersSet:"No correct answers set",ok:"OK",onbeforeunload:"You have unsaved responses. If you continue you will lose these responses.",orderListChangeTemplate:"Item {start} moved to position {end}.",paste:"Paste",pause:"Pause",play:"Play",silenceDetected:"Recording stopped due to silence detected",paginationCountOf:"of",playback:"Playback",playbackPaused:"Playback paused",playbackUnavailable:"Playback unavailable",playconversation:"Play Conversation",playConversationTitle:"Playing Question ",playPrevious:"Play previous",playNext:"Play next",playing:"Playing",progress:"Progress",ratingInfoIcon:"i",ready:"Ready",record:"Record",recordAudioStatusLine:"Click to change microphone access settings.",recordAudioStatusTitle:"Audio Status",recordAuthRememberTitle:"Microphone permission",recordAuthRememberHtml:"Select <strong>remember</strong> before clicking <strong>allow</strong>. This will allow you to record audio and stop this pop-up box being shown again.",recordAuthRememberTroubleLink:'Having trouble? <a target="_blank" href="https://www.learnosity.com/guide/audioTroubleshooting.php">Click here</a>.',recordChromeAuthTitle:"Additional browser permissions",recordChromeAuth1st:"Click <strong>allow</strong> above, in the top right of your browser window:",recordChromeAuth1stB:"Click the <strong>allow</strong> button to enable microphone permissions.",recordChromeAuth2nd:"<strong>Close</strong> this window",recordChromeAuthTroubleLink:"If the button is not displayed, refer to <a target='_blank' href='https://www.learnosity.com/guide/audioTroubleshooting.php'>this guide</a>.",recordMobileTroubleLink:"If you're using a mobile device, refer to <a target='_blank' href='https://www.learnosity.com/guide/audioTroubleshooting.php'>this guide</a>.",recording:"Recording",recordingComplete:"Recording complete",recordingCounterPreload:"Recording will begin in ...",recordingPaused:"Recording paused",recordingTooLong:"Recording too long. The maximum recording length is {maxLength} seconds.",recordingUnavailable:"Recording unavailable",recordSwfErrorLine1:"We've been unable to access flash. Please ensure a blocker",recordSwfErrorLine2:"is not enabled and that you have the latest version of flash.",redo:"Redo",replay:"Replay",reset:"Reset",resume:"Resume",delete:"Delete",givenResponses:"Given responses",response:"Response",responseArea:"Response area",retry:"Retry",rightClickAudioDownload:"Click to save audio file.",saveButtonLabel:"Save Answers",saveComplete:"Saved",saveInProgress:"Saving...",seekTo:"Skip to",showAllResponses:"Show all responses",source:"Source",stimulus:"Stimulus",stop:"Stop",stopconversation:"Stop Conversation",submitButtonLabel:"Submit Answers",submitComplete:"Submitted",submitInProgress:"Submitting...",tapToStartPlayback:"Tap to start playback",target:"Target",uierrorfeedback:"A problem occurred. Please try again later. If the problem persists contact your administrator.",unableToPlayAsset:"Unable to play, asset not available.",unavailable:"Unavailable",undo:"Undo",unsupportedBrowser:"Sorry, this item cannot be displayed because your browser is not supported.",unsupportedCompatibilityMode:"Sorry, this item cannot be displayed because your browser is in an unsupported compatibility view.",videoplayerTextAlternativeCaption:"Captions",videoOptimizing:"Optimizing your video",videoOptimizingSubheader:"You can continue authoring during this process.",videoNotReady:"Video playback is not yet ready",videoNotReadySubheader:"Save your work and refresh your browser, or come back later.",videoPlaybackError:"Playback error",videoFormatUnsupported:"Your browser does not support this video format.",videoBrightcoveEmbeddedDataRequired:"Brightcove Embedded Data is required!",video:{recordingInstructionsBefore:"Before recording, we will ask for access to the camera and microphone.",recordingInstructionsAgain:'Then select the "Take Video" option',recordingInstructionsStart:"Press record to start",timeWarningLimit:"limit is almost up!",maxDuration:"Maximum duration"},volume:"volume",word:"Word(s)",wordLength:"Word Limit",characterLimitExceeded:"{{num}} characters over",fontSizeTitle:"Font Size",fontSize:{small:"Small",normal:"Normal",large:"Large",xlarge:"Extra large",xxlarge:"Huge"},editor:{toolbar:{bold:"Bold",italic:"Italic",underline:"Underline",removeFormat:"Clear formatting",codeInline:"Code Inline",codeEditor:"Code Editor",orderedList:"Numbered list",unorderedList:"Bullet list",alignLeft:"Align left",alignCenter:"Align center",alignRight:"Align right",alignJustify:"Align justify",indentIncrease:"Increase indent",indentDecrease:"Decrease indent",insertHorizontalRule:"Insert horizontal rule",subscript:"Subscript",superscript:"Superscript",textDirectionLtr:"Text direction left to right",textDirectionRtl:"Text direction right to left",charactermap:"Character map",specialCharacterMap:"Special characters",mathCharacterMap:"Math characters",table:"Table",image:"Image (12 image limit)",blockquote:"Block quote",undo:"Undo",redo:"Redo",editImage:"Edit image",previewImage:"View image",deleteImage:"Delete image",selectFontSize:"Select text size. {{title}} selected.",selectColor:"Select color"},modals:{tableTitle:"Table",editTableTitle:"Edit table",apply:"Apply",upload:"Upload",cancel:"Cancel",close:"Close",columns:"Columns",rows:"Rows",insertColumnBefore:"Insert before",insertColumnAfter:"Insert after",insertRowAbove:"Insert above",insertRowBelow:"Insert below",deleteTable:"Delete table",deleteColumn:"Delete column",deleteRow:"Delete row",imageTitle:"Image",uploadText:"Click to add image",imageReplace:"Replace",imageRotate:"Rotate",imagePreviewText:"Image size: {{width}}px × {{height}}px",imageSize:{title:"Image display size",small:"Small - {{width}} × {{height}}",medium:"Medium - {{width}} × {{height}}",large:"Large - {{width}} × {{height}}",fullSize:"Full size - {{width}} × {{height}}"},zoomIn:"Zoom in",zoomOut:"Zoom out",openImageURL:"Open in a new tab"},messages:{failedLoadingImage:"Error processing image. Try again or contact your system administrator.",imageHasBeenOptimized:"Image has been optimized for size."},inputAriaLabel:"Enter your response to the question here",editTable:"Edit table"},drawing:{toolbar:{straightedge:"Line",scribble:"Scribble",compass:"Compass",text:"Text",eraser:"Eraser",clear:"Clear",undo:"Undo",redo:"Redo"},textEditor:{placeholder:"Enter text here...",addTextButton:"Add Text"}},mathKeyboardSymbols:{empty:"",x:"x",y:"y",z:"z",a:"a",b:"b",c:"c",d:"d",f:"f",abc:"abc",prime:"Prime/Arcminute",doubleprime:"Double Prime/Arcsecond",dollars:"Dollars",cents:"Cents",plus:"Plus",minus:"Minus",times:"Multiply",div:"Divide",pm:"Plus or minus",equals:"Equals",greater:"Greater than",less:"Less than",ge:"Greater than or equal to",le:"Less than or equal to",ne:"Not equal to",approx:"Approximately equal to",perp:"Perpendicular to",nsim:"Not similar to",ncong:"Not congruent to",circ:"Composition",propto:"Proportional to",mid:"Vertical line",ngtr:"Not greater than",nless:"Not less than",parentheses:"Group in parentheses",brackets:"Group in brackets",curlybraces:"Group in curly braces",leftbraces:"Group in odd braces",rightbraces:"Group in odd braces",leftbracket:"Left square bracket",rightbracket:"Right square bracket",angledbracket:"Grouped in angled brackets",exponent:"Exponent",square:"Square",subscript:"Subscript",frac:"Fraction using previous expression as numerator",fraction:"Fraction",ratio:"Ratio",percentage:"Percentage",abs:"Absolute value",sqrt:"Square root",cube:"Cube root",nthroot:"Nth root",int:"Integral",doubleint:"Double Integral",tripleint:"Triple Integral",binomCoefficient:"Binomial Coefficient",sum:"Summation",because:"Because",nabla:"Nabla",isimpliedby:"Is implied by",muchlesserthan:"Much lesser than",muchgreaterthan:"Much greater than",standardbasisK:"Standard basis K",standardbasisJ:"Standard basis J",standardbasisI:"Standard basis I",partial:"Partial Derivative",limit:"Limit x to",vector:"Vector",mathbb:"Real number set",mathbbq:"Q",mathbbn:"N",mathbbz:"Z",mathbbi:"I",mathbbc:"C",imaginary:"Imaginary Number",euler:"Euler Number",alpha:"Alpha",beta:"Beta",gamma:"Gamma",delta:"Delta",epsilon:"Epsilon",zeta:"Zeta",eta:"Eta",theta:"Theta",iota:"Iota",kappa:"Kappa",lambda:"Lambda",mu:"Mu",nu:"Nu",xi:"Xi",omicron:"Omicron",pi:"Pi",rho:"Rho",sigma:"Sigma",tau:"Tau",upsilon:"Upsilon",phi:"Phi",chi:"Chi",psi:"Psi",omega:"Omega",ALPHA:"Alpha (uppercase)",BETA:"Beta (uppercase)",GAMMA:"Gamma (uppercase)",DELTA:"Delta (uppercase)",EPSILON:"Epsilon (uppercase)",ZETA:"Zeta (uppercase)",ETA:"Eta (uppercase)",THETA:"Theta (uppercase)",IOTA:"Iota (uppercase)",KAPPA:"Kappa (uppercase)",LAMBDA:"Lambda (uppercase)",MU:"Mu (uppercase)",NU:"Nu (uppercase)",XI:"Xi (uppercase)",OMICRON:"Omicron (uppercase)",PI:"Pi (uppercase)",RHO:"Rho (uppercase)",SIGMA:"Sigma (uppercase)",TAU:"Tau (uppercase)",UPI:"Upsilon (uppercase)",PHI:"Phi (uppercase)",CHI:"Chi (uppercase)",PSI:"Psi (uppercase)",OMEGA:"Omega (uppercase)",sin:"Sine",cos:"Cosine",tan:"Tangent",arcsin:"Inverse sine",arccos:"Inverse cosine",arctan:"Inverse tangent",cap:"Intersection",union:"Union",in:"Member of",notin:"Not member of",ni:"Contains",subseteq:"Subset",supseteq:"Superset",subset:"Subset (strict)",supset:"Superset (strict)",notsubset:"Not subset (strict)",notsupset:"Not superset (strict)",notsubseteq:"Not subset",notsupseteq:"Not superset",notni:"Does not contain",backslash:"Backslash",slash:"Forward slash",factorial:"Factorial",angle:"Angle",measuredangle:"Measure of angle",parallel:"Parallel to",nparallel:"Not parallel to",sim:"Similar to",cong:"Congruent to",degree:"Degree symbol",triangle:"Triangle",circledot:"Circle",parallelogram:"Parallelogram",overarc:"Arc",leftarrow:"Leftwards arrow",rightarrow:"Rightwards arrow",leftrightarrow:"Left/right arrow",longleftrightarrow:"Long left/right arrow",rightdoublearrow:"Implies equivalence",leftrightdoublearrow:"Material equivalence",overrightarrow:"Ray",overleftarrow:"Left ray",overleftrightarrow:"Line",overline:"Line segment",dot:"Recurring Decimal",longdiv:"Long division",overset:"Oxidation",therefore:"Therefore",infty:"Infinity",matrix:"Matrix",pmatrix:"Matrix bounded by parentheses",bmatrix:"2 x 2 Matrix bounded by brackets",threebmatrix:"3 x 3 Matrix bounded by brackets",inequalities:"System of equations/inequalities",singlebmatrix:"Single Matrix bounded by brackets",Bmatrix:"Matrix bounded by braces",vmatrix:"Matrix bounded by vertical lines",Vmatrix:"Matrix bounded by double vertical lines",ldots:"Horizontal dots (baseline)",cdots:"Horizontal dots (centered)",ddots:"Diagonal dots",vdots:"Vertical dots",cdot:"Dot multiplier",cdotp:"Center dot (punctuation)",response:"Editable {{response}} area",addmatrixcol:"Insert column",addmatrixrow:"Insert row",gram:"Gram",cg:"Centigram",kg:"Kilogram",mg:"Milligram",ng:"Nanogram",meter:"Meter",cm:"Centimeter",km:"Kilometer",mm:"Millimeter",nm:"Nanometer",second:"Second",cs:"Centisecond",ks:"Kilosecond",ms:"Millisecond",ns:"Nanosecond",liter:"Liter",ml:"Millitliter",ug:"Microgram",inch:"Inch",ft:"Foot",mi:"Mile",fl:"Fluid Ounce",cup:"Cup",pt:"Pint",qt:"Quart",gal:"Gallon",oz:"Ounce",lb:"Pound",mug:"Microgram",mus:"Microsecond",mum:"Micrometer",mul:"Microlitre",mol:"Mole",atomic:"Atomic symbol",polyatomic:"Polyatomic ion",superscript:"Superscript",molar:"Molar mass",rightleftharpoons:"Right / left harpoons",leftrightharpoons:"Left / right harpoons",singlebond:"Single bond",doublebond:"Double bond",triplebond:"Triple bond",threedotbond:"Three dot bond",fourdotbond:"Four dot bond",rightarrowbond:"Right arrow bond",leftarrowbond:"Left arrow bond",xrightarrow:"Arrow with superscript and subscript",lfloor:"Left floor",rfloor:"Right floor",lceil:"Left ceiling",rceil:"Right ceiling",uparrow:"Up arrow",downarrow:"Down arrow",equiv:"Equivalence",and:"And",not:"Not",or:"Or",exist:"Exist",exists:"Exists",forall:"Forall",oplus:"Circled plus",zero:"Zero",one:"One",two:"Two",three:"Three",four:"Four",five:"Five",six:"Six",seven:"Seven",eight:"Eight",nine:"Nine",divide:"Divided by",multiply:"Multiplied by",decimal:"Decimal",comma:"Comma",left:"Move cursor left",right:"Move cursor right",backspace:"Backspace",responseContainerIcon:"Response Container"},mathKeyboardHelp:{title:"Keyboard Shortcuts",columnTitles:{symbol:"Symbol",name:"Name",shortcut:"Shortcut"},shortcuts:"You can always use ctrl + \\ (backslash) to reopen the Math Keyboard.",disclaimer:"Keyboard shortcut combinations may differ from one region to another. These were created using an English: United States keyboard.",close:"Close"},mathKeyboardTitle:{handwriting:"Handwriting",qwerty:"Keyboard",basic:"Basic",basic_junior:"Basic Junior",basic_author:"Basic",algebra:"Algebra",comparison:"Comparison",geometry:"Geometry",matrices:"Matrices",trigonometry:"Trigonometry",sets:"Sets",units_si:"Units (SI)",units_us:"Units (US Customary)",greek:"Greek letters",chemistry:"Chemistry",chemistry_author:"Chemistry",grouping:"Grouping Symbols",calculus:"Calculus",misc:"Miscellaneous",discrete:"Discrete",general:"General"},ariaLabel:{stemEnumerationItem:"Item {{index}}",classification:{cell:"Drop response in row {{row}} of column {{column}}",instructions:"Put responses in the correct input to answer the question. Select a response, navigate to the desired input and insert the response. Responses can be selected and inserted using the space bar, enter key, left mouse button or touchpad. Responses can also be moved by dragging with a mouse."},association:{draggableItemContainer:"Container for movable item",draggableItem:"Movable item. {{item}}",instructions:"Put responses in the correct input to answer the question. Select a response, navigate to the desired input and insert the response. Responses can be selected and inserted using the space bar, enter key, left mouse button or touchpad. Responses can also be moved by dragging with a mouse."},audioAdv:{transcriptContent:"Transcript: {{transcript}}"},clozeAssociation:{instructions:"Put responses in the correct input to answer the question. Select a response, navigate to the desired input and insert the response. Responses can be selected and inserted using the space bar, enter key, left mouse button or touchpad. Responses can also be moved by dragging with a mouse."},drawing:{highlight:"To highlight the image, hold space and use your arrow keys.",keyboardPaintable:"Use the arrow keys to move the cursor and hold down the space or enter key to draw.",textEditorMove:"Use the arrow keys to move the text editor."},orderList:{instructions:"Arrange responses in the correct order to answer the question. Select a response, navigate to the desired position and insert response at that position. Responses can be selected and inserted using the space bar, enter key, left mouse button or touchpad. Responses can be moved using the up and down arrow keys or by dragging with a mouse."},longTextV2:{toolbar:"Text controls"},mathKeyboard:{title:"Formula keypad",help:"Formula keypad help",close:"Close Formula keypad",symbolGroupRole:"Dropdown",selectSymbolGroup:"Select the symbol group to use",currentSymbolGroup:"The current symbol groups is {{title}}. You can use this dropdown to select a new symbol group or continue to navigate the keyboard using arrow keys"},fileUpload:{title:"File upload question type"},graphPlotting:{title:"Graph Plotting Question",keyboardInstructionsButton:"Keyboard Instructions, press enter or space to display instructions on how to navigate the graph.",keyboardInstructionsCloseButton:"Keyboard instructions, close button",graph:"You have entered the graph.",toolbar:"You are in a toolbar, press tab to enter it and then use the arrows to move around the tools.",plotted:"You have plotted {{shape}}",point:"Point with coordinates {{point}}",circle:"Circle with origin on {{origin}} and passing through {{point}}",segment:"Segment from {{startPoint}} to {{endPoint}}",vector:"Vector from {{startPoint}} to {{endPoint}}",line:"Line passing through {{pointA}} and {{pointB}}",sine:"Sine passing through {{pointA}} and {{pointB}}",ray:"Ray starting on {{pointA}} passing through {{pointB}}",parabola:"Parabola with vertex on {{vertex}} and passing through {{point}}",polygon:"Polygon with coordinates: {{points}}",labelled:"labelled: {{label}}",axisHeading:"Initial graph state",horizontalAxisInfo:"The horizontal axis goes from {{min}} to {{max}} with ticks spaced every {{step}} unit(s).",verticalAxisInfo:"The vertical axis goes from {{min}} to {{max}} with ticks spaced every {{step}} unit(s).",questionResponseShapesHeading:"Created graph shapes"},griddedText:{decimalPointInput:"Enter a decimal point",rangeInput:"enter a value between {{range1}} and {{range2}} .",disclaimer:"Enter either plus or minus for positive or negative value",decimal:"decimal point"},imageUpload:{title:"Image upload question type",toolbar:"Image upload toolbar"},numberLinePlot:{title:"Number Line Plot question"},plainText:{answer:"Answer for {{stimulus}}"},popUp:{popUpScreenReaderHeading:"Pop-up content",popUpButton:{title:"Click to view pop-up content"},popUpClose:{title:"Click to close pop-up content",description:"Click to close pop-up content"}},simpleChart:{title:"Simple Chart question"},simpleShading:{title:"Simple Shading Question - Press tab to enter question",cell:"Cell: row {{row}}, column {{column}}"},sortList:{instructions:"To answer, arrange responses in the correct order. Select a response, navigate to the desired position and insert response at that position. Responses can be selected and inserted using the space bar, enter key, left mouse button or touchpad. Responses can also be moved by dragging or by using the up and down arrow keys.",draggableItemContainer:"Container for movable item",draggableItem:"Movable item. {{item}}",direction:{toSource:"Move selected option to highest {{source}} position",toTarget:"Move selected option to highest {{target}} position",moveUpInTarget:"Move selected option up one position",moveDownInTarget:"Move selected option down one position"}},textHighlight:{title:"Text Highlight question"},calculator:{instructions:"To use calculator navigate to its toolbar with tab and then use left, right, up and down arrows to navigate inside it.",calculatorHeading:"Calculator",closeButton:"Close calculator",moveButton:"Move calculator",moveInstructions:"Select to move button with arrow keys",moveDropped:"Calculator dropped",moveGrabbed:"Calculator grabbed. Use arrow keys to move around the screen, press enter when finished.",inputLabel:"Calculator",toggleUnit:"Angle unit is {{currentUnit}}, click to change to {{newUnit}}",clearEntireInput:"C (Clear the entire input)",clearLastSymbol:"CE (Clear the last symbol entered)",percent:"Percent",squareRoot:"Square root",division:"Division",multiplication:"Multiplication",subtraction:"Subtraction",decimalPoint:"Decimal point",evaluate:"Equals",addition:"Addition",memoryClear:"MC (Memory Clear)",recallValue:"MR (Recall the value from the calculator's memory)",addToMemory:"M+ (Add the current value to memory)",substractFromMemory:"M- (Subtract the current value from the value in memory)",pi:"Pi",plusOrMinus:"Plus or Minus",leftParenthesis:"Left parenthesis",rightParenthesis:"Right parenthesis",showAdvanced:"Show advanced trigonometric functions",reciprocal:"Reciprocal (1 over x)",exponent:"Exponent (x to the y)",square:"Square (x squared)",naturalLogarithm:"Natural logarithm (logn)",cubicRoot:"Cubic root",nthRoot:"Nth root",eulersNumber:"e (Euler's number)",sine:"Sine",inverseSine:"Inverse sine",cosine:"Cosine",inverseCosine:"Inverse cosine",tangent:"Tangent",inverseTangent:"Inverse Tangent",permutations:"nPr (Permutations)",combinations:"nCr (Combinations)",hyperbolicSine:"Hyperbolic sine",hyperbolicInverseSine:"Hyperbolic inverse sine",hyperbolicCosine:"Hyperbolic cosine",hyperbolicInverseCosine:"Hyperbolic inverse cosine",hyperbolicTangent:"Hyperbolic tangent",hyperbolicInverseTangent:"Hyperbolic inverse tangent",factorial:"Factorial",randomNumber:"Random number"},compass:{moveCenter:"Use the arrow keys to move the compass center",adjustRadius:"Use the arrow keys to adjust radius size",rotateRadius:"Use the arrow keys to rotate the radius arm",draw:"Hold down the space bar and use the arrow keys to draw"},distractorRationale:{distractorRationale:"distractor rationale",perQuestion:"distractor rationale per question",perResponseIncorrect:"distractor rationale per response incorrect",perResponseCorrect:"distractor rationale per response correct"},imagecloze:{text:"Add your responses in the text fields to answer the question. Navigate to the desired text input and type in your response.",dropdown:"Select responses from the drop down fields to answer the question. Navigate to the desired drop down and select your response.",dropdownSelectionOption:"Please select an option - "},imageclozeassociationV2:{dropZonesContainer:"Drop targets"},mcq:{responses:"Responses"},dragDrop:{possibleResponses:"Possible responses",responseZone:"Press a button below to begin moving the response to the drop targets or drop your response here to return it to possible responses pool."},clozeDropdown:{selectOption:"Please select an option - "}},ariaLiveText:{correctResponse:"response - correct",incorrectResponse:"response - incorrect",numberOfCorrectAnswers:"{{number}} correct answers: ",oneCorrectAnswer:"correct answer: ",numberOfIncorrectAnswers:"{{number}} incorrect answers: ",oneIncorrectAnswer:"incorrect answer: ",numberOfExpectedAnswers:"{{number}} expected answers: ",oneExpectedAnswer:"expected answer: ",correct:"{{prefix}}correct",incorrect:"{{prefix}}incorrect",selected:"selected",missed:"{{prefix}}not selected, this is the correct answer",noResponseGiven:"{{prefix}}no response given",minResponseMessage:"{{prefix}} this question requires at least 1 answer",minResponsesMessage:"{{prefix}} this question requires at least {{minSelection}} answers",maxResponseMessage:"{{prefix}} only 1 answer is allowed",maxResponsesMessage:"{{prefix}} only {{maxSelection}} answers are allowed",choiceMatrix:{correctResponse:"Correct response",incorrectResponse:"Incorrect response",expectedResponse:"Expected response",group:"Group: {{group}} - ",noResponse:"no response given. "},classification:{row:"Row {{number}}",col:"Column {{number}}",correct:"correct",incorrect:"incorrect"},graphPlotting:{positionUpdated:"x {{x}}, y {{y}}, is your current position",movingPoint:"You are moving the point at x={{x}}, y={{y}}",pointMoved:"The point has been moved to x={{x}}, y={{y}}"},imageclozeassociationV2:{correctAnswer:"correct answer",incorrectAnswer:"incorrect answer",expectedAnswer:"expected answer",dropTarget:"Drop target: {{target}}. "},orderList:{itemValidity:"Item {{index}}: {{response}} - {{validity}}. ",correctAnswer:"Correct answer for item {{index}}: {{text}}. "},tokenHighlight:{highlighted:"Highlighted: {{content}}",notHighlighted:"Not highlighted: {{content}}",correctAnswers:"correct answers: {{answers}} ",incorrectAnswers:"incorrect answers: {{answers}} ",expectedAnswers:"expected answers: {{answers}} ",explanation:"To interact with this question use tab to move through the text tokens. Use space or enter to select or deselect the relevant tokens"},clozeAssociation:{activatedResponse:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been selected. Press tab to choose a response area, and spacebar to insert it. Press escape to cancel.',activatedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been selected from position {{dropzoneNumber}} of {{totalDropzones}}. Press tab to choose a response area, and spacebar to insert it. Press escape to cancel.',deactivatedResponse:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been deselected.',deactivatedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been deselected and is back in position {{dropzoneNumber}} of {{totalDropzones}}.',droppedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been inserted in position {{dropzoneNumber}} of {{totalDropzones}}.',droppedResponseBackInList:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been inserted back into the option list.'},association:{activatedResponse:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been selected. Press tab to choose a response area, and spacebar to insert it. Press escape to cancel.',activatedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been selected from position {{dropzoneNumber}} of {{totalDropzones}}. Press tab to choose a response area, and spacebar to insert it. Press escape to cancel.',deactivatedResponse:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been deselected.',deactivatedResponseInDropzone:'The operation has been cancelled. The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been released back into position {{dropzoneNumber}} of {{totalDropzones}} which corresponds to "{{dropzoneLabel}}". You are no longer moving any option.',droppedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been inserted in position {{dropzoneNumber}} of {{totalDropzones}}.',droppedResponseBackInList:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been inserted back into the option list.'},mathKeyboard:{mathKeyboardOpened:"Formula keypad has been opened. Press TAB to use it and then navigate using the arrows.",mathKeyboardClosed:"Formula keypad has been closed. Press Control + Backslash to open it again."}},ariaRoleDescription:{clozeAssociation:{dropzone:"Insert option in position {{dropzoneNumber}} of {{totalDropzones}}.",dropzoneWithResponse:'Insert option in position {{dropzoneNumber}} of {{totalDropzones}}, which currently contains the option "{{response}}" ({{responseNumber}} of {{totalResponses}}).',dropzoneReadOnly:"Empty response in position {{dropzoneNumber}} of {{totalDropzones}}.",dropzoneReadOnlyWithResponse:'Option "{{response}}" ({{responseNumber}} of {{totalResponses}}) in position {{dropzoneNumber}} of {{totalDropzones}}.'},association:{dropzone:'"{{dropzoneLabel}}"',dropzoneWithResponse:'"{{dropzoneLabel}}", which currently contains the option "{{response}}".',dropzoneReadOnly:'Empty response in "{{dropzoneLabel}}".',dropzoneReadOnlyWithResponse:'Option "{{response}}" in "{{dropzoneLabel}}".'}},masking:{ariaLabelMask:"Mask",ariaLabelUnmask:"Unmask"}}},22052:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(34651)),h=_interopRequireDefault(l(42165)),g=_interopRequireDefault(l(73341));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var v=["recordAuthRememberHtml","recordAuthRememberTroubleLink"];function sanitise(i){d.default.each(i,(function(u,l){d.default.isString(u)||d.default.isNumber(u)?d.default.contains(v,l)?i[l]=h.default.sanitizeHTML(u):i[l]=d.default.escape((0,p.default)("<div>").append(u).text()):(p.default.isPlainObject(u)||d.default.isArray(u))&&sanitise(u)}))}var y=function exportLabels(i){sanitise(i=i||{}),this.labels=d.default.deepExtend({},g.default,i),this.sameLabels=function(i){return d.default.isEqual(this.labels,i)}};u.default=y},77721:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(1285));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var h=p.default.extend({initialize:function initialize(){p.default.prototype.initialize.call(this),this.responsesToSet={},this.has("responses")&&(this.responsesToSet=this.get("responses"))},validateActivity:function validateActivity(){if(p.default.prototype.validateActivity.call(this),this.has("responses")&&this.get("state")!==this.STATE.RESUME&&this.get("state")!==this.STATE.REVIEW)throw new this.ValidationError('"responses" attribute can only be provided if "type" is "'+this.STATE.RESUME+'" or "'+this.STATE.REVIEW+'"');if(this.has("responses")&&!this.get("hasQuestions"))throw new this.ValidationError('"responses" attribute can only be provided if "questions" are provided');d.default.each(this.get("responses"),(function(i,u){var l=d.default.find(this.get("questions"),(function(i){return u===i.response_id}));if(d.default.isUndefined(l))throw new this.ValidationError('The response object provided for "response_id": '+u+" has no matching question object")}),this)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return(this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW)&&!d.default.isEmpty(this.responsesToSet)},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(i){d.default.isEmpty(this.responsesToSet)||d.default.each(this.responsesToSet,(function(i,u){this.get("questionResponses").find((function(i){return u===i.get("response_id")})).update({response:i}),delete this.responsesToSet[u]}),this),i()},append:function append(i){i&&d.default.isObject(i.responses)&&d.default.extend(this.responsesToSet,i.responses),p.default.prototype.append.call(this,i)},captureQuestionResponses:function captureQuestionResponses(){throw new Error("captureQuestionResponses function not supported for Local Practice activities")},save:function save(){throw new Error("save function not supported for Local Practice activities")},discard:function discard(){throw new Error("discard function not supported for Local Practice activities")}});u.default=h},25713:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(34651)),h=_interopRequireDefault(l(1285)),g=_interopRequireDefault(l(2355)),v=_interopRequireDefault(l(77804)),y=_interopRequireDefault(l(11389)),S=_interopRequireDefault(l(95022)),E=_interopRequireDefault(l(12400));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var R=h.default.extend({initialize:function initialize(){h.default.prototype.initialize.call(this),this.saving=!1,this.cachedSaveCallArguments=null,this.retrievedQuestionResponsesCache={}},validateActivity:function validateActivity(){h.default.prototype.validateActivity.call(this);try{v.default.init()}catch(i){throw new this.ValidationError("initialising an offline_app type but indexed db is not supported in this browser")}if(this.has("session_id")&&!S.default.check.test(this.get("session_id").toLowerCase()))throw new this.ValidationError('"session_id" attribute is not a valid UUID');if(this.get("renderSubmitButton")&&0===(0,p.default)(".learnosity-submit-button").length)throw new this.ValidationError('"renderSubmitButton" attribute is true, but no DOM element was found to render');if(this.get("renderSaveButton")&&0===(0,p.default)(".learnosity-save-button").length)throw new this.ValidationError('"renderSaveButton" attribute is true, but no DOM element was found to render');if(this.has("responses"))throw new this.ValidationError('"responses" attribute found in Activity, but not supported for type: '+this.get("type"))},initialiseQuestionResponses:function initialiseQuestionResponses(i,u){if(this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW){var l=this,p=d.default.map(i,(function(i){return g.default.prototype.getIdForResponseId(i.response_id,this.get("user_id"),this.get("consumer").get("id"))}),this);v.default.getQuestionResponses(p).then((function(h){return d.default.each(h,(function(i){l.retrievedQuestionResponsesCache[i.id]=i})),!l.has("session_id")&&h.length>0&&d.default.isString(h[0].session_id)&&l.set({session_id:h[0].session_id},{silent:!0}),d.default.map(p,(function(p,g){var v=i[g],y=d.default.findWhere(h,{id:p}),S=1===d.default.keys(v).length;return y?(S||"raw"!==l.get("questionSource"))&&(v=y.question):u||l.get("captureOnResumeError")&&!S||(v.error=10005),v}))}),(function(u){return l.get("captureOnResumeError")||d.default.each(i,(function(i){i.error=10005})),y.default.log(u),i})).then((function(i){h.default.prototype.initialiseQuestionResponses.call(l,i,u)}))}else h.default.prototype.initialiseQuestionResponses.call(this,i,u)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(i){d.default.each(this.retrievedQuestionResponsesCache,(function(i){if(d.default.isObject(i)){var u=this.get("questionResponses").get(i.id);this.retrievedQuestionResponsesCache[i.id]=!0,u.update({creation_date:i.creation_date,response:i.response,saved:!0})}}),this),i()},save:function save(i){if(this.saving)this.cacheSaveCall(Array.prototype.slice.call(arguments));else{this.saving=!0,this.trigger(this.EVENT.SAVE);var u,l=this.get("questionResponses").getInvalidQuestionResponses();if(l.length>0)return this.saving=!1,void this.saveFailedInvalidQuestions(i,l);var d=this.get("questionResponses").getQuestionResponsesModificationTimes(),p=this;i.submit&&!this.has("session_id")?(this.set({session_id:S.default.v4()},{silent:!0}),u=this.get("questionResponses").models):u=this.get("questionResponses").filter((function(i){return i.toBeSaved()})),v.default.saveQuestionResponses(u,this.get("session_id"),this.get("consumer").get("key")).then((function(){return p.saveSession(i,p.get("questionResponses").pluck("id"))})).then((function(){p.saving=!1,p.saveComplete(i,u,d)}),(function(u){p.saving=!1,p.saveFailed(i,u)})).then((function(){p.callCachedSaveCall()})),i.submit&&this.get("validateOnSubmit")&&this.validateQuestionsResponses()}},saveSession:function saveSession(i,u){if(i&&i.progress&&i.progress({state:"saving",percentage:90,bytesTotal:0,bytesUploaded:0}),!this.has("session_id")||!this.get("consumer").get("dashboardEnabled"))return E.default.resolve();if(!d.default.isString(this.get("id"))||this.get("id").length>36)return E.default.reject('must initialise with an "id" attribute that doesn\'t exceed 36 characters in length');if(!d.default.isString(this.get("name")))return E.default.reject('must initialise with a "name" attribute');if(this.has("description")&&(!d.default.isString(this.get("description"))||this.get("description").length>800))return E.default.reject('initialised with a "description" attribute that is not a valid string of less than 801 characters');var l={session_id:this.get("session_id"),user_id:this.get("user_id"),activity_id:this.get("id"),activity_name:this.get("name"),course_id:this.get("course_id"),consumer_key:this.get("consumer").get("key"),questions:u};return i.submit&&(l.submit=!0),this.has("description")&&(l.activity_description=this.get("description")),this.has("product_id")&&(l.product_id=this.get("product_id")),d.default.isObject(this.get("metadata"))||d.default.isObject(i.metadata)?l.metadata=d.default.extend({},this.get("metadata"),i.metadata):l.metadata={},l.metadata.user_agent=window.navigator.userAgent,v.default.saveSession(l)},saveComplete:function saveComplete(i,u,l){d.default.each(u,(function(i){i.getLastModifiedTime()===l[i.id]&&i.setAsSaved()})),i&&i.progress&&i.progress({state:"saving",percentage:100,bytesTotal:0,bytesUploaded:0}),i&&(i.submit?this.trigger(this.EVENT.SUBMITTED):this.trigger(this.EVENT.SAVED),i.success&&i.success(d.default.map(u,(function(i){return i.get("response_id")}))))},saveFailed:function saveFailed(i,u){var l={i18n:this.get("i18n")};d.default.isString(u)&&-1!==u.indexOf("ConstraintError")?(l.code=10002,l.detail="At least one of the response_id has been previously provided"):(l.code=10004,l.detail="Save responses failed"+(u?": "+u.toString():"")),y.default.exception(l,i?i.error:null)},saveFailedInvalidQuestions:function saveFailedInvalidQuestions(i,u){var l=[],p=[];d.default.each(u,(function(i){l.push('Question "'+i.get("response_id")+'" of type "'+i.get("type")+'" has an invalid response'),p.push(i.get("response_id"))})),y.default.exception({code:10013,detail:l.join(", "),response_id:p,i18n:this.get("i18n")},i?i.error:null)},discard:function discard(i){throw new Error('"discard" public method is not supported on type: offline_app')},callCachedSaveCall:function callCachedSaveCall(){if(d.default.isArray(this.cachedSaveCallArguments)){var i=this.cachedSaveCallArguments;this.clearCachedSaveCall(),this.save.apply(this,i)}},cacheSaveCall:function cacheSaveCall(i){this.cachedSaveCallArguments=i},clearCachedSaveCall:function clearCachedSaveCall(){this.cachedSaveCallArguments=null}});u.default=R},41882:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(34651)),h=_interopRequireDefault(l(33534)),g=_interopRequireDefault(l(11389)),v=_interopRequireDefault(l(1285)),y=_interopRequireDefault(l(2355)),S=_interopRequireDefault(l(95022)),E=_interopRequireDefault(l(2262));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var R=v.default.extend({initialize:function initialize(){v.default.prototype.initialize.call(this),this.questionsBeingCaptured={},this.questionsToCaptureIfResumeFailed={},this.questionResponseIdsToFetch={},this.fetchedQuestionResponses={},this.saving=!1,this.cachedSaveCallArguments=null,this.on(this.EVENT.READY,(function(){this.get("state")!==this.STATE.INITIAL&&this.get("state")!==this.STATE.RESUME||this.captureQuestionResponses()}),this),this.has("consumer")&&this.get("consumer").has("syncMsgFrequencyOnSave")&&(this.throttlingSessionDataSync=!0,this.lastSessionDataSyncTimeMs=0)},validateActivity:function validateActivity(){if(v.default.prototype.validateActivity.call(this),this.get("consumer").get("dashboardEnabled")){if(!d.default.isString(this.get("id")))throw new this.ValidationError('Valid "id" attribute missing from Activity');if(this.get("id").length>36)throw new this.ValidationError('"id" attribute should not exceed 36 characters');if(this.get("user_id").length>50)throw new this.ValidationError('"user_id" attribute should not exceed 50 characters');if(!d.default.isString(this.get("name")))throw new this.ValidationError('Valid "name" attribute missing from Activity');if(!d.default.isString(this.get("course_id")))throw new this.ValidationError('Valid "course_id" attribute missing from Activity');if(this.has("description")&&(!d.default.isString(this.get("description"))||this.get("description").length>800))throw new this.ValidationError('Provided "description" attribute is not a valid string of less than 801 characters');if(this.has("session_id")&&!S.default.check.test(this.get("session_id").toLowerCase()))throw new this.ValidationError('"session_id" attribute is not a valid UUID')}if(this.get("renderSubmitButton")&&0===(0,p.default)(".learnosity-submit-button").length)throw new this.ValidationError('"renderSubmitButton" attribute is true, but no DOM element was found to render');if(this.get("renderSaveButton")&&0===(0,p.default)(".learnosity-save-button").length)throw new this.ValidationError('"renderSaveButton" attribute is true, but no DOM element was found to render');if(this.has("responses"))throw new this.ValidationError('"responses" attribute found in Activity, but not supported for type: '+this.get("type"))},initialiseQuestionResponses:function initialiseQuestionResponses(i,u){var l=this,p=this.makeQuestionResponseIds(d.default.pluck(i,"response_id")),h=this.haveToFetchQuestionResponses(),g=h&&("raw"!==this.get("questionSource")||d.default.some(i,(function(i){return 1===d.default.keys(i).length})));d.default.each(p,(function(i){h&&(l.questionResponseIdsToFetch[i]=!0),(u||h&&l.get("captureOnResumeError"))&&(l.questionsToCaptureIfResumeFailed[i]=!0)})),g?this.getQuestionResponses(p,(function(){var p=[];d.default.each(l.fetchedQuestionResponses,(function(u){if(d.default.isObject(u)){if(!u.hasOwnProperty("question")){var h=y.default.prototype.getResponseId(u.id,l.get("user_id"),l.get("consumer").get("id")),g=d.default.findWhere(i,{response_id:h});10005===u.error&&l.questionsToCaptureIfResumeFailed[u.id]&&d.default.isObject(g)&&d.default.keys(g).length>1?u.question=g:u.question={response_id:h,error:u.error}}p.push(u.question)}})),v.default.prototype.initialiseQuestionResponses.call(l,p,u)})):v.default.prototype.initialiseQuestionResponses.call(this,i,u)},makeQuestionResponseIds:function makeQuestionResponseIds(i){return d.default.map(i,(function(i){return y.default.prototype.getIdForResponseId(i,this.get("user_id"),this.get("consumer").get("id"))}),this)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return d.default.some(this.questionResponseIdsToFetch)&&this.haveToFetchQuestionResponses()},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(i){var u=this.get("questionResponses").filter((function(i){return d.default.isUndefined(this.fetchedQuestionResponses[i.get("id")])}),this);if(u.length){var l=d.default.pluck(u,"id");this.getQuestionResponses(l,d.default.bind((function(){this.setResponsesFromQuestionResponsesCache(),i()}),this))}else this.setResponsesFromQuestionResponsesCache(),i()},haveToFetchQuestionResponses:function haveToFetchQuestionResponses(){return this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW},setResponsesFromQuestionResponsesCache:function setResponsesFromQuestionResponsesCache(){d.default.each(this.fetchedQuestionResponses,(function(i){if(d.default.isObject(i)){var u=this.get("questionResponses").get(i.id);this.fetchedQuestionResponses[i.id]=!0,this.questionResponseIdsToFetch[i.id]=!1,u.has("question")&&(delete i.question,delete i.type),10005===i.error&&this.questionsToCaptureIfResumeFailed[i.id]&&u.has("question")&&delete i.error,u.update(i)}}),this)},isCapturingQuestions:function isCapturingQuestions(){return!d.default.isEmpty(this.questionsBeingCaptured)},allQuestionsCaptured:function allQuestionsCaptured(){return this.get("questionResponses").every((function(i){return i.isCaptured()}))},captureQuestionResponses:function captureQuestionResponses(){if(this.questionResponsesReady){var i=this.get("questionResponses").getToBeCapturedQuestionResponseJson();if(0!==(i=d.default.filter(i,(function(i){return!this.questionsBeingCaptured[i.id]}),this)).length){var u=this;d.default.each(i,(function(i){this.questionsBeingCaptured[i.id]=!0}),this);var l=function clearCapturingQuestions(){d.default.each(i,(function(i){delete u.questionsBeingCaptured[i.id]}))};h.default.request({url:"/questionresponses",action:h.default.ACTION.SET,security:this.get("security").getRequestParameters(),analytics:{sessionId:this.get("session_id"),authTimestamp:this.get("authTimestamp")},data:{questionResponses:i},success:function success(i){u.get("questionResponses").markAsCaptured(i.response.data),l(),u.callCachedSaveCall()},failure:function failure(i){var p,h;d.default.isArray(u.cachedSaveCallArguments)&&u.cachedSaveCallArguments.length>0&&d.default.isFunction(u.cachedSaveCallArguments[0].error)&&(h=u.cachedSaveCallArguments[0].error),l(),u.clearCachedSaveCall(),i&&409===i.status?p={code:10002,detail:"At least one of the response_id has been previously provided",i18n:u.get("i18n")}:(p={code:10016,detail:"There was an error trying to capture the questions",i18n:u.get("i18n")},i&&(p.detail+=": "+i.status+" - ",d.default.isObject(i.response)&&i.response.meta?p.detail+=i.response.meta.message:p.detail+=i.response),u.get("uiErrorOnCaptureFailure")||(p.errorUI="none")),g.default.exception(p,h)}})}}},getQuestionResponses:function getQuestionResponses(i,u){var l=this;d.default.each(i,(function(i){this.fetchedQuestionResponses[i]=!0}),this),h.default.request({url:"/questionresponses",action:h.default.ACTION.GET,security:this.get("security").getRequestParameters(),analytics:{sessionId:this.get("session_id"),authTimestamp:this.get("authTimestamp")},data:{questionResponseIds:i,questionSource:this.get("questionSource")},success:function success(i){d.default.each(i.response.data,(function(i){l.fetchedQuestionResponses[i.id]=i})),u()},failure:function failure(i){g.default.exception({code:10025,detail:"Status: "+i.status+(-1===i.status?", "+i.response:""),i18n:l.get("i18n")})}})},persistQuestionResponses:function persistQuestionResponses(i,u){var l=this,p={},v=function savedSuccessfully(d){var p=l.EVENT,h={state:"saving",percentage:100,bytesTotal:u.totalBytes,bytesUploaded:u.bytesUploaded};if(i&&i.progress&&i.progress(h),l.trigger(p.SAVE_PROGRESSING,h),i){var g=i.submit;g?l.trigger(p.SUBMITTED,{responseIds:d,submit:g}):l.trigger(p.SAVED,{responseIds:d,submit:g}),i.success&&i.success(d)}l.callCachedSaveCall()},y=this.shouldSendSessionDataToSync(i);if(y&&(p.submit=i.submit,p.state=this.get("state"),p.user_id=this.get("user_id"),p.activity_id=this.get("id"),p.activity_name=this.get("name"),this.has("description")&&(p.activity_description=this.get("description")),p.course_id=this.get("course_id"),this.has("product_id")&&(p.product_id=this.get("product_id")),this.has("session_id")&&(p.session_id=this.get("session_id")),d.default.isObject(this.get("metadata"))||d.default.isObject(i.metadata)?p.metadata=d.default.extend({},this.get("metadata"),i.metadata):p.metadata={},p.metadata.user_agent=window.navigator.userAgent,p.init_metadata=this.get("initMetadata")),p.questionResponses=this.get("questionResponses").getToBeSavedQuestionResponseJson(),p.submit&&(p.questionResponseIdsForReScore=this.get("questionResponses").getQuestionResponseIdsForReScore()),p.questionResponses.length>0||y){var S=this.get("questionResponses").getQuestionResponsesModificationTimes();h.default.request({url:"/questionresponses",action:h.default.ACTION.UPDATE,security:this.get("security").getRequestParameters(),analytics:{sessionId:this.get("session_id"),authTimestamp:this.get("authTimestamp"),submit:i.submit},data:p,success:function success(i){var u=i.response.data;l.saving=!1,l.get("questionResponses").markAsSavedIfModified(u,S),y&&l.throttlingSessionDataSync&&(l.lastSessionDataSyncTimeMs=Date.now()),v(l.get("questionResponses").getResponseIds(u))},failure:function failure(u){l.saving=!1;var p=i?i.error:void 0,h={code:10004,detail:"Save responses failed",i18n:l.get("i18n")};u&&(h.detail+=": "+u.status,d.default.isObject(u.response)&&u.response.meta?h.detail+=" - "+u.response.meta.message:h.detail+=" - "+u.response),g.default.exception(h,p),l.callCachedSaveCall()}})}else l.saving=!1,v([])},shouldSendSessionDataToSync:function shouldSendSessionDataToSync(i){if(i.submit)return!0;if(this.has("session_id")){if(!this.throttlingSessionDataSync)return!0;if((Date.now()-this.lastSessionDataSyncTimeMs)/1e3>=this.get("consumer").get("syncMsgFrequencyOnSave"))return!0}return!1},checkSaveProgressThenPersistQuestionResponses:function checkSaveProgressThenPersistQuestionResponses(i){var u=this.EVENT.SAVE_PROGRESSING,l=!0,p=0,h=0;if(d.default.each(this.hooks.saveProgress,(function(i){if(d.default.isFunction(i)){var u=i();l=l&&u.uploadComplete,p+=u.bytesUploaded,h+=u.totalBytes}})),l){var g={state:"saving",percentage:90,bytesTotal:h,bytesUploaded:p};i.progress&&i.progress(g),this.trigger(u,g),this.persistQuestionResponses(i,{totalBytes:h,bytesUploaded:p})}else{var v=Math.round(p/h*85),y={state:h===p?"saving":"uploading",percentage:v,bytesTotal:h,bytesUploaded:p};i.progress&&i.progress(y),this.trigger(u,y),d.default.delay(d.default.bind(this.checkSaveProgressThenPersistQuestionResponses,this),500,i)}},save:function save(i){if(this.isCapturingQuestions()||this.saving)this.cacheSaveCall(Array.prototype.slice.call(arguments));else if(this.allQuestionsCaptured()){this.saving=!0,this.trigger(this.EVENT.SAVE,{submit:i.submit});var u=this.get("questionResponses").getInvalidQuestionResponses();if(u.length){this.saving=!1;var l=i?i.error:void 0,p=[],h=[];d.default.each(u,(function(i){p.push('Question "'+i.get("response_id")+'" of type "'+i.get("type")+'" has an invalid response'),h.push(i.get("response_id"))})),g.default.exception({code:10013,detail:p.join(", "),response_id:h},l)}else this.checkSaveProgressThenPersistQuestionResponses(i),i.submit&&this.get("validateOnSubmit")&&this.validateQuestionsResponses()}else this.cacheSaveCall(Array.prototype.slice.call(arguments)),this.captureQuestionResponses()},discard:function discard(i){var u=this;h.default.request({url:"/questionresponses",action:h.default.ACTION.DELETE,security:this.get("security").getRequestParameters(),analytics:{sessionId:this.get("session_id"),authTimestamp:this.get("authTimestamp")},data:{activity_id:this.get("id"),activity_name:this.get("name"),course_id:this.get("course_id"),session_id:this.get("session_id")},success:function success(l){d.default.isFunction(i.success)&&i.success(l),u.trigger(u.EVENT.DISCARDED)},failure:function failure(l){var p=i?i.error:void 0,h={code:10021,detail:"Discard responses failed",i18n:u.get("i18n")};l&&(h.detail+=": "+l.status,d.default.isObject(l.response)&&l.response.meta?h.detail+=" - "+l.response.meta.message:h.detail+=" - "+l.response),g.default.exception(h,p)}})},callCachedSaveCall:function callCachedSaveCall(){if(d.default.isArray(this.cachedSaveCallArguments)){var i=this.cachedSaveCallArguments;this.clearCachedSaveCall(),this.save.apply(this,i)}},cacheSaveCall:function cacheSaveCall(i){this.cachedSaveCallArguments=i},clearCachedSaveCall:function clearCachedSaveCall(){this.cachedSaveCallArguments=null},validateQuestionsJson:function validateQuestionsJson(i){var u=this.get("questionResponses").RESPONSE_ID_MAX_CHAR;v.default.prototype.validateQuestionsJson.call(this,i),i.forEach((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i.response_id&&i.response_id.length>u)throw new E.default("At least one of the response_id is invalid")}))}});u.default=R},1285:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(34651)),g=_interopRequireDefault(l(21893)),v=_interopRequireDefault(l(11389)),y=_interopRequireDefault(l(80891)),S=_interopRequireDefault(l(68709)),E=_interopRequireDefault(l(2355)),R=_interopRequireDefault(l(4550)),T=_interopRequireDefault(l(31700)),O=_interopRequireDefault(l(39835)),M=_interopRequireDefault(l(66353)),I=_interopRequireDefault(l(42165)),P=_interopRequireDefault(l(95022)),D=_interopRequireDefault(l(2262)),N=l(38891);function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var q=d.default.Model.extend({TYPE:{LOCAL_PRACTICE:"local_practice",OFFLINE_APP:"offline_app",SUBMIT_PRACTICE:"submit_practice",TEST:"test"},STATE:{INITIAL:"initial",RESUME:"resume",REVIEW:"review",PREVIEW:"preview"},EVENT:{READY:"ready",SAVE:"save",SAVE_PROGRESSING:"save:progressing",SAVED:"saved",SUBMITTED:"submitted",DISCARDED:"discarded"},ValidationError:D.default,defaults:{domain:g.default.domain,type:"local_practice",state:"initial",beta_flags:{}},initialize:function initialize(){var i={id:P.default.v4()};p.default.isNumber(this.get("initTime"))?(i.time=this.get("initTime"),i.deviceTime=!1):(i.time=Math.floor(Date.now()/1e3),i.deviceTime=!0),this.questionResponsesReady=!1,this.featuresReady=!1,this.set({initMetadata:i,questionResponses:new S.default([]),featureModels:new R.default([]),hasQuestions:p.default.isArray(this.get("questions"))&&this.get("questions").length>0,hasFeatures:p.default.isArray(this.get("features"))&&this.get("features").length>0},{silent:!0}),this.qrGroupFeatureViewsMap={validation_group:M.default},this.qrGroupFeatures=[],this.hooks={reset:[],unload:[],saveProgress:[]}},init:function init(){var i=this.get("hasQuestions"),u=this.get("hasFeatures");try{this.validateActivity(),i&&this.validateQuestionsJson(this.get("questions")),u&&this.validateFeaturesJson(this.get("features")),this.has("description")&&this.set({description:I.default.sanitizeHTML(this.get("description"))},{silent:!0}),i?(this.initialiseQuestionResponses(this.get("questions")),this.unset("questions",{silent:!0})):this.initialisationCompleted("questionResponses"),u?(this.intialiseFeatures(this.get("features")),this.unset("features",{silent:!0})):this.initialisationCompleted("features")}catch(i){if(!(i instanceof D.default))throw i;v.default.log({code:10001,detail:"Activity JSON Poorly formed. "+i})}},loadFeatureBundles:function loadFeatureBundles(i,u){var l=y.default.getBundleOptions(this.get("beta_flags"));return y.default.requireBundlesForFeatureTypes(i,u,l)},validateActivity:function validateActivity(){if(!p.default.include(this.TYPE,this.get("type")))throw new D.default('Invalid "type" attribute provided: '+this.get("type"));if(!p.default.include(this.STATE,this.get("state")))throw new D.default('Invalid "state" attribute provided: '+this.get("state"));var i=this.get("show_distractor_rationale");if(p.default.isObject(i)){var u=i.per_question,l=i.per_response;if(!p.default.isUndefined(u)&&!(0,N.isValidShowDistractorRationalePerQuestion)(u))throw new D.default('Invalid show_distractor_rationale.per_question value provided. Must be one of: "'+N.ALLOWED_PER_QUESTION_VALUES.join('", "')+'".');if(!p.default.isUndefined(l)&&!(0,N.isValidShowDistractorRationalePerResponse)(l))throw new D.default('Invalid show_distractor_rationale.per_response value provided. Must be one of: "'+N.ALLOWED_PER_RESPONSE_VALUES.join('", "')+'".')}else if(!p.default.isUndefined(i)&&!p.default.isBoolean(i))throw new D.default("Invalid show_distractor_rationale value provided. Must be a boolean or object.")},validateQuestionsJson:function validateQuestionsJson(i){for(var u=0;u<i.length;u++){var l=i[u]||{};if(!l.hasOwnProperty("response_id"))throw new D.default("The question object at index "+u+' is missing the "response_id" attribute');if(!E.default.prototype.VALID_RESPONSE_ID_RE.test(l.response_id))throw new D.default("The question object at index "+u+' has a "response_id" attribute with invalid characters: '+l.response_id);if(0===(0,h.default)(".learnosity-response.question-"+l.response_id).length)throw new D.default("The question object at index "+u+' with "response_id": '+l.response_id+" has no matching DOM element");if(p.default.keys(l).length>1){if(!l.hasOwnProperty("type")&&this.get("consumer").get("requireQuestionType"))throw new D.default("The question object at index "+u+' is missing the "type" attribute');if(l.hasOwnProperty("type")||(l.type=E.default.prototype.TYPE.AUDIOADV),!p.default.include(E.default.prototype.TYPE,l.type))throw new D.default("The question object at index "+u+' has an invalid "type" attribute: '+l.type)}else if(this.get("state")!==this.STATE.RESUME&&this.get("state")!==this.STATE.REVIEW)throw new D.default("The question object at index "+u+' has no attributes, but the activity "state" is not "resume" or "review"')}},validateFeaturesJson:function validateFeaturesJson(i){for(var u=0;u<i.length;u++){var l=i[u]||{};if(!l.hasOwnProperty("feature_id"))throw new D.default("The feature object at index "+u+' is missing the "feature_id" attribute');if(0===(0,h.default)(".learnosity-feature.feature-"+l.feature_id).length)throw new D.default("The feature object at index "+u+' with "feature_id": '+l.feature_id+" has no matching DOM element");if(!l.hasOwnProperty("type")||!p.default.include(T.default.prototype.TYPE,l.type))throw new D.default("The feature object at index "+u+' has an invalid "type" attribute: '+l.type)}},initialiseQuestionResponses:function initialiseQuestionResponses(i,u){var l=this,d=[],h=y.default.getBundleOptions(this.get("beta_flags"));p.default.each(i,(function(i){i.type===E.default.prototype.TYPE.UNKNOWN||p.default.include(d,i.type)||d.push(i.type)})),y.default.requireBundlesForQuestionTypes(d,(function processLoadedBundles(u){if(p.default.isEmpty(u))v.default.log("No bundles were loaded for the required Question types: "+d.join(", "));else{l.initQuestionResponseModels(u,i);var h=l.get("questionResponses").getModelsValidState();h.valid?(l.initQuestionGroupFeatures(u),l.hasToLoadResponsesIntoQuestionResponses()?l.loadResponsesIntoQuestionResponses(p.default.bind((function(){this.initialisationCompleted("questionResponses")}),l)):l.initialisationCompleted("questionResponses")):v.default.log({code:10001,detail:"Activity JSON Poorly formed. "+h.errors.join(" |\n")})}}),h)},initQuestionResponseModels:function initQuestionResponseModels(i,u){var l=this,d=[];p.default.each(u,(function(u){var h={id:E.default.prototype.getIdForResponseId(u.response_id,this.get("user_id"),this.get("consumer").get("id")),response_id:u.response_id,user_id:this.get("user_id")};u.error&&(h.error=u.error,u.type||(u.type=E.default.prototype.TYPE.UNKNOWN)),h.question=u,h.type=u.type;var g=i[u.type],y=new g.Model(h,{state:l.get("state"),type:l.get("type"),attribute_overrides:l.attributes.attribute_overrides});y.setApiVersion(this.get("apiVersion")),g.hasOwnProperty("View")?y.viewClass=g.View:p.default.isFunction(g.getViewFor)?y.viewClass=g.getViewFor(u):v.default.log("Bundle for question: "+u.type+" does not contain View attribute or getViewFor function"),y.setActivity(this),d.push(y)}),this),this.get("questionResponses").add(d)},initQuestionGroupFeatures:function initQuestionGroupFeatures(i){p.default.each(i,(function(i){i.hasOwnProperty("featureViewsMapEntry")&&(this.qrGroupFeatureViewsMap[i.featureViewsMapEntry.jsonAttribute]=i.featureViewsMapEntry.viewClass)}),this),this.get("questionResponses").each((function(i){var u=i.getGroupJsonAttributes();p.default.each(u,(function(u){var l=p.default.find(this.qrGroupFeatures,(function(i){return i.jsonAttribute===u.name&&i.groupId===u.value}));p.default.isUndefined(l)&&(l=new O.default(null,{jsonAttribute:u.name,groupId:u.value,viewClass:this.qrGroupFeatureViewsMap[u.name]}),this.qrGroupFeatures.push(l)),l.add(i)}),this)}),this)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return!1},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(i){i()},intialiseFeatures:function intialiseFeatures(i){var u=[];p.default.each(i,(function(i){i.type===T.default.prototype.TYPE.UNKNOWN||p.default.include(u,i.type)||u.push(i.type)})),this.loadFeatureBundles(u,p.default.bind((function(l){if(p.default.isEmpty(l))v.default.log("No bundles were loaded for the required Feature types:"+u.join(", "));else{var d=[],h=this;p.default.each(i,(function(i){var u=p.default.first(h.get("featureModels").where({feature_id:i.feature_id}));if(u)u.trigger(u.EVENT.RE_INIT);else{var g=l[i.type],y=new g.Model(i);g.hasOwnProperty("View")?y.viewClass=g.View:p.default.isFunction(g.getViewFor)?y.viewClass=g.getViewFor(i):v.default.log("Bundle for feature: "+i.type+" does not contain View attribute or getViewFor function"),y.activity=h,d.push(y)}})),this.get("featureModels").add(d),this.initialisationCompleted("features")}}),this))},initialisationCompleted:function initialisationCompleted(i){if("questionResponses"===i){var u=this.get("questionResponses").models;this.questionResponsesReady=!0,u&&p.default.each(u,(function(i){return i.trigger(i.EVENT.READY)}))}else"features"===i&&(this.featuresReady=!0);this.questionResponsesReady&&this.featuresReady&&this.trigger(this.EVENT.READY)},append:function append(i){var u,l;try{if(!p.default.isObject(i))throw new D.default("First parameter must be an object");if(u=p.default.isArray(i.questions)&&i.questions.length>0,l=p.default.isArray(i.features)&&i.features.length>0,!u&&!l)throw new D.default("Either questions or features must be provided");u&&(this.validateQuestionsJson(i.questions),this.questionResponsesReady=!1),l&&(this.validateFeaturesJson(i.features),this.featuresReady=!1),u&&this.initialiseQuestionResponses(i.questions,!0),l&&this.intialiseFeatures(i.features)}catch(i){if(!(i instanceof D.default))throw i;v.default.log({code:10020,detail:i.message})}},showQuestionNumbers:function showQuestionNumbers(){return this.get("number_questions")&&this.get("questionResponses").length>1},captureQuestionResponses:function captureQuestionResponses(){},save:function save(i){},discard:function discard(i){},getAttemptedResponseIds:function getAttemptedResponseIds(){return this.get("questionResponses").getAttemptedResponseIds()},safeToUnload:function safeToUnload(){if(this.get("type")!==this.TYPE.LOCAL_PRACTICE){if(this.has("questionResponses")&&this.get("questionResponses").areThereQuestionsModified())return!1;var safeToUnload=!p.default.any(this.hooks.unload,(function(i){return!i()}));return safeToUnload&&!this.saving}return!0},validateQuestionsResponses:function validateQuestionsResponses(i){i=i||{},this.get("questionResponses").each((function(u){p.default.isFunction(u.callValidate)&&u.callValidate(i)}))},getValidResponseIds:function getValidResponseIds(){return this.get("questionResponses").getValidResponseIds()}});u.default=q},43088:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(73781));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var h=d.default.Model.extend({initialize:function initialize(){this.set({requireQuestionType:!p.default.contains(["0003","0005","0006","0007","0044","0045"],this.get("id"))})},hasPermissions:function hasPermissions(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",u=this.get("featureFlags")||{},l=u.video_student,d=!1;switch(i){case"fileupload_video":d=!!this.get("processVideo");break;case"video_student":d=p.default.isBoolean(l)&&l}return d}});u.default=h},31700:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(42165)),g=l(62071);function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var v=d.default.Model.extend({TYPE:g.FEATURE_TYPES,EVENT:{RE_INIT:"reinit"},FONTSIZE_PREFIX:"lrn_font_size_",FONTSIZE:{SMALL:"small",NORMAL:"normal",LARGE:"large",XLARGE:"xlarge",XXLARGE:"xxlarge"},richTextAttributes:[],initialize:function initialize(){var i=this;this.richTextAttributes.forEach((function(u){p.default.deepSet(i.attributes,u,(function(i){return h.default.sanitizeHTML(i)}))}))},getFontClass:function getFontClass(){var i="";return p.default.isUndefined(this.activity)||p.default.isUndefined(this.activity.get("fontsize"))||(i=this.FONTSIZE[this.activity.get("fontsize").toUpperCase()]||""),i&&(i=this.FONTSIZE_PREFIX+i),i},getFeatureJsonForClient:function getFeatureJsonForClient(){return p.default.deepClone(this.toJSON())}});u.default=v},77804:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(33534)),h=_interopRequireDefault(l(32774)),g=_interopRequireDefault(l(12400));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var v="questionresponses",y="sessions",S={init:function init(){if(!this.storage)try{this.storage=new h.default({name:"LrnQuestionsApi",version:1,stores:[{name:v,optionalParameters:{keyPath:"id"},indices:[{name:"needs_pushing",keyPath:"needs_pushing"},{name:"session_id",keyPath:"session_id"}]},{name:y,optionalParameters:{keyPath:"session_id"},indices:[{name:"needs_pushing",keyPath:"needs_pushing"}]}]})}catch(i){this.initError=i}if(this.initError)throw this.initError;return this},formatQuestionResponses:function formatQuestionResponses(i,u){var l=d.default.filter(i,(function(i){return i.consumer_key===u.consumer_key&&i.user_id===u.user_id}));return{qrsData:d.default.map(l,(function(i){var u,l,p,h;if(i.pushed_once)u={id:i.id,response:i.response,pushed_once:i.pushed_once};else{var g=(u=i).question.metadata;g&&g.prepackaged_question&&delete u.question.metadata.prepackaged_question}return l=d.default.getNested(i.question.metadata,"offline.assets"),u.question&&l&&(delete u.question.metadata.offline,p=JSON.stringify(u.question),d.default.map(l,(function(i){return p=p.replace(new RegExp(i.replacement,"g"),i.url)})),u.question=JSON.parse(p)),u.response&&l&&(h=JSON.stringify(u.response),d.default.map(l,(function(i){return h=h.replace(new RegExp(i.replacement,"g"),i.url)})),u.response=JSON.parse(h)),u})),toBePushed:l,security:u}},getQuestionResponses:function getQuestionResponses(i){return this.storage?this.storage.getAll(v,i):g.default.reject(this.initError?this.initError:"Offline storage not initialised")},saveQuestionResponses:function saveQuestionResponses(i,u,l){if(!this.storage)return g.default.reject(this.initError?this.initError:"Offline storage not initialised");var p=this,h=[],y=[],S=[],E=(new Date).getTime(),R=this.getDateString();return d.default.each(i,(function(i,d){var p;i.isCaptured()?(p={id:i.get("id"),response:i.get("response"),mod_date:R,needs_pushing:"true"},u&&(p.session_id=u),S.push(p)):(p={id:i.get("id"),type:i.get("type"),response_id:i.get("response_id"),user_id:i.get("user_id"),question:i.get("question"),response:i.get("response"),creation_date:R,consumer_key:l,order:E+"_"+d,mod_date:R,needs_pushing:"true",pushed_once:!1},u&&(p.session_id=u),y.push(p),h.push(i))})),this.storage.addAll(v,y).then((function(){return d.default.each(h,(function(i){i.set({creation_date:R},{silent:!0}),i.setAsCaptured()})),p.storage.updateAll(v,S)}))},getSession:function getSession(i){var u=this;return this.validateStorage().then((function(){return u.storage.get(y,i)}))},saveSession:function saveSession(i){if(!this.storage)return g.default.reject(this.initError?this.initError:"Offline storage not initialised");var u=this;return this.storage.get(y,i.session_id).then((function(l){return l&&("true"===l.needs_pushing&&(i.questions=d.default.union(l.questions,i.questions)),i=d.default.deepExtend({},l,i)),i.mod_date=u.getDateString(),i.needs_pushing="true",u.storage.set(y,i)}))},submitQuestionResponses:function submitQuestionResponses(i){var u=i.qrsData,l=i.toBePushed,h=i.security,y=this;return 0===u.length?g.default.resolve():new g.default((function(i,l){p.default.request({url:"/push/questionresponses",action:p.default.ACTION.UPDATE,security:h,data:{questionResponses:u},success:function success(u){i()},failure:function failure(i){var u="Failed pushing sessions: "+(i.status>0?i.status+" - ":"");d.default.isObject(i.response)&&i.response.meta?u+=i.response.meta.message:u+=i.response,l(u)}})})).then((function(){var i=d.default.map(l,(function(i){return{id:i.id,mod_date:i.mod_date,needs_pushing:"false"}}));return y.storage.updateAll(v,i,null,"mod_date")})).then((function(){var i=[];if(d.default.each(l,(function(u){u.pushed_once||i.push({id:u.id,pushed_once:!0})})),i.length>0)return y.storage.updateAll(v,i)}))},needsPushing:function needsPushing(i){return g.default.all([this.storage.getAllByIndexWithValue(y,"needs_pushing","true"),this.storage.getAllByIndexWithValue(v,"needs_pushing","true")]).then((function(u){return{sessions:d.default.pluck(d.default.filter(u[0],(function(u){return u.consumer_key===i.consumer_key&&u.user_id===i.user_id})),"session_id"),questions:d.default.pluck(d.default.filter(u[1],(function(u){return u.consumer_key===i.consumer_key&&u.user_id===i.user_id})),"response_id")}}))},pushBySessionId:function pushBySessionId(i,u){var l=this;return this.validateStorage().then((function(){return l.pushQuestionResponses(i,"session_id",u)})).then((function(){return l.pushSession(i,u)}))},pushAll:function pushAll(i){var u=this;return this.validateStorage().then((function(){return u.pushQuestionResponses(i)})).then((function(){return u.pushSessions(i)}))},pushQuestionResponses:function pushQuestionResponses(i){var u=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"needs_pushing",d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"true";return this.storage.getAllByIndexWithValue(v,l,d).then((function(l){return u.formatQuestionResponses(l,i)})).then((function(i){return u.submitQuestionResponses(i)}))},requestToPushSession:function requestToPushSession(i,u){var l=this,h=d.default.filter(u,(function(u){return u.consumer_key===i.consumer_key&&u.user_id===i.user_id}));return 0===h.length?g.default.resolve():new g.default((function(u,l){p.default.request({url:"/push/sessions",action:p.default.ACTION.UPDATE,security:i,data:{sessions:h},success:function success(i){u()},failure:function failure(i){var u="Failed pushing sessions: "+(i.status>0?i.status+" - ":"");d.default.isObject(i.response)&&i.response.meta?u+=i.response.meta.message:u+=i.response,l(u)}})})).then((function(){var i=d.default.map(h,(function(i){return{session_id:i.session_id,mod_date:i.mod_date,needs_pushing:"false"}}));return l.storage.updateAll(y,i,null,"mod_date")}))},pushSession:function pushSession(i,u){var l=this;return this.storage.getWithValue(y,u).then((function(u){return l.requestToPushSession(i,[u])}))},pushSessions:function pushSessions(i){var u=this;return this.storage.getAllByIndexWithValue(y,"needs_pushing","true").then((function(l){return u.requestToPushSession(i,l)}))},getDateString:function getDateString(){var i,u=new Date;return i=u.getUTCFullYear(),i+="-"+(u.getUTCMonth()+1<10?"0":"")+(u.getUTCMonth()+1),i+="-"+(u.getUTCDate()<10?"0":"")+u.getUTCDate(),i+=" "+(u.getUTCHours()<10?"0":"")+u.getUTCHours(),i+=":"+(u.getUTCMinutes()<10?"0":"")+u.getUTCMinutes(),i+=":"+(u.getUTCSeconds()<10?"0":"")+u.getUTCSeconds()},validateStorage:function validateStorage(){return this.storage?g.default.resolve():g.default.reject(this.initError?this.initError:"Offline storage not initialised")}};u.default=S},2355:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(42165)),g=_interopRequireDefault(l(50581)),v=_interopRequireDefault(l(11389)),y=l(62071),S=_interopRequireDefault(l(58800)),E=_interopRequireDefault(l(79230)),R=l(41864),T=l(23057);function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _toConsumableArray(i){return function _arrayWithoutHoles(i){if(Array.isArray(i))return _arrayLikeToArray(i)}(i)||function _iterableToArray(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||function _unsupportedIterableToArray(i,u){if(!i)return;if("string"==typeof i)return _arrayLikeToArray(i,u);var l=Object.prototype.toString.call(i).slice(8,-1);"Object"===l&&i.constructor&&(l=i.constructor.name);if("Map"===l||"Set"===l)return Array.from(i);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return _arrayLikeToArray(i,u)}(i)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(i,u){(null==u||u>i.length)&&(u=i.length);for(var l=0,d=new Array(u);l<u;l++)d[l]=i[l];return d}var O=/v(\d+).(\d+).(\d+)/,M=d.default.Model.extend({VALID_RESPONSE_ID_RE:/^[\w\-]+$/,STATE:{INITIAL:"initial",MODIFIED:"modified",SAVED:"saved"},TYPE:y.QUESTION_TYPES,RESPONSE_TYPE:{ARRAY:"array",AUDIO:"audio",AUDIOPNG:"audio+png",BOOLEAN:"boolean",IMAGE:"image",NUMERIC:"numeric",OBJECT:"object",STRING:"string",VIDEO:"video"},EVENT:{MODIFIED:"modified",CALLVALIDATE:"callValidate",MASKED:"masked",READY:"ready"},FONTSIZE_PREFIX:"lrn_font_size_",FONTSIZE:R.FONTSIZE,FONTSIZE_MAP:R.FONTSIZE_MAP,VALID_OVERRIDDEN_ATTRIBUTES_LIST:["spellcheck","instant_feedback"],BASE_RICH_TEXT_ATTRIBUTES:["description","instructor_stimulus","metadata.acknowledgements","metadata.distractor_rationale","metadata.sample_answer","stimulus","stimulus.content","stimulus_review"],richTextAttributes:[],RESET_STATE:{RESET:"reset",ATTEMPTED_AFTER_RESET:"attemptedAfterReset"},initialize:function initialize(i){var u=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validState={valid:!0,errors:[]},this.state=this.STATE.INITIAL,this.lastModified=(new Date).getTime(),this.captured=!1,this.viewClass=null,this.activity=null,this.asyncScoring=!1,this.scoringBusyPromise=Promise.resolve(),this.once(this.EVENT.READY,(function(){u.ready=!0})),this.activityOptions=l,this.setOriginalQuestion(this.get("question")),p.default.isEmpty(this.activityOptions.attribute_overrides)||this.overrideQuestionAttributes()},overrideQuestionAttributes:function overrideQuestionAttributes(){var i=this;p.default.each(i.VALID_OVERRIDDEN_ATTRIBUTES_LIST,(function(u){var l=p.default.getNested(i.activityOptions.attribute_overrides,u);i.get("question")[u]!==l&&(i.get("question")[u]=l)}))},setOriginalQuestion:function setOriginalQuestion(i){var u=this.activityOptions;this.set({originalQuestion:p.default.deepClone(i),question:p.default.deepClone(i)},{silent:!0}),this.dynamicContentService&&(this.set("isDynamicContent",!1),this.dynamicContentService.reset(),delete this.dynamicContentService),E.default.isDynamicContentModel(this)?(this.dynamicContentService=new E.default(this,u),this.set("isDynamicContent",!0)):this.validateStartup()},trackEvent:function trackEvent(i){g.default.trackEvent("QuestionType Event",this.get("type"),i,0,!0)},validateStartup:function validateStartup(){var i=this.get("question"),u=this.sanitizeValue.bind(this);p.default.uniq([].concat(_toConsumableArray(this.BASE_RICH_TEXT_ATTRIBUTES),_toConsumableArray(this.richTextAttributes))).forEach((function(l){p.default.deepSet(i,l,u)}))},getApiVersion:function getApiVersion(){return this.apiVersion},setApiVersion:function setApiVersion(i){this.apiVersion=i},getResponseApiVersion:function getResponseApiVersion(){return this.hasResponse()?this.get("response").hasOwnProperty("apiVersion")?this.get("response").apiVersion:"v1.19.6":null},isHigherApiVersion:function isHigherApiVersion(i,u){if("latest"===i)return i!==u;var l=i.match(O).splice(1),d=u.match(O).splice(1);return l[0]>d[0]||l[0]===d[0]&&l[1]>d[1]||l[0]===d[0]&&l[1]===d[1]&&l[2]>d[2]},update:function update(i){this.set(i,{silent:!0}),this.has("creation_date")&&this.setAsCaptured(),this.get("saved")&&this.setAsSaved()},hasResponse:function hasResponse(){return this.has("response")&&!p.default.isEmpty(this.get("response"))},hasResponseValue:function hasResponseValue(){return this.hasResponse()&&!p.default.isNull(this.get("response").value)},clearResponse:function clearResponse(){this.hasResponse()&&(this.unset("response"),this.state=this.STATE.INITIAL,this.lastModified=(new Date).getTime(),this.trigger(this.EVENT.MODIFIED))},getResponseMetadata:function getResponseMetadata(){return this.hasResponse()?p.default.deepClone(this.get("response").metadata):void 0},setActivity:function setActivity(i){return this.activity=i,this.processActivityFlags(),this},processActivityFlags:function processActivityFlags(){},setResponseMetadata:function setResponseMetadata(i){return this.hasResponse()?(this.get("response").metadata=i,this.setAsModified(),!0):(v.default.exception({code:10026,detail:"Cannot set response metadata; question with response ID "+this.get("response_id")+" has no response"}),!1)},getResponseValue:function getResponseValue(){return this.hasResponse()?this.get("response").value:void 0},updateResponseValue:function updateResponseValue(i,u){this.processResponseValue(i),u&&!1===u.setAsModified||this.setResponseMandatoryInformation()},processResponseValue:function processResponseValue(i){throw new Error("Unimplemented function processResponseValue for question type:"+this.get("type"))},hasAllowedResponse:function hasAllowedResponse(){return!0},hasStimulus:function hasStimulus(){return p.default.isString(this.get("question").stimulus)},hasStimulusObject:function hasStimulusObject(){return p.default.isObject(this.get("question").stimulus)},hasStimulusReview:function hasStimulusReview(){return p.default.isString(this.get("question").stimulus_review)||p.default.isString(this.get("question").description)},getStimulus:function getStimulus(){return this.hasStimulus()?this.get("question").stimulus:this.hasStimulusObject()&&this.get("question").stimulus.content?this.get("question").stimulus.content:""},getStimulusReview:function getStimulusReview(){return p.default.isString(this.get("question").stimulus_review)?this.get("question").stimulus_review:p.default.isString(this.get("question").description)?this.get("question").description:""},getInstructorStimulus:function getInstructorStimulus(){return p.default.isString(this.get("question").instructor_stimulus)?this.get("question").instructor_stimulus:""},hasReachedMinLimit:function hasReachedMinLimit(){var i=this.getResponseValue(),u=p.default.getNested(this.get("question"),"min_selection");return u?!!i&&u<=i.length:null},isType:function isType(i){return this.get("type")===i},isAttempted:function isAttempted(){return this.hasResponse()&&!this.hasBeenReset()},isCaptured:function isCaptured(){return this.captured},isModified:function isModified(){return this.state===this.STATE.MODIFIED},isSaved:function isSaved(){return this.state===this.STATE.SAVED},toBeSaved:function toBeSaved(){return this.state!==this.STATE.SAVED},setAsCaptured:function setAsCaptured(){this.captured=!0},setAsModified:function setAsModified(){if(this.state!==this.STATE.MODIFIED){this.state=this.STATE.MODIFIED;var i=this.get("response");p.default.isObject(i)&&(p.default.isNumber(i.revision)?i.revision+=1:i.revision=1)}this.lastModified=(new Date).getTime(),this.trigger(this.EVENT.MODIFIED)},setAsSaved:function setAsSaved(){this.state=this.STATE.SAVED,this.lastModified=(new Date).getTime()},getLastModifiedTime:function getLastModifiedTime(){return this.lastModified},resetResponse:function resetResponse(){this.hasResponse()&&(this.updateResponseToResetValue(),this.setAsModified())},updateResponseToResetValue:function updateResponseToResetValue(){var i=this.get("response");i.resetState=T.RESET_STATE.RESET,i.value=null},updateResetResponseState:function updateResetResponseState(i){this.hasResponse()&&(this.get("response").resetState=i)},hasBeenReset:function hasBeenReset(){return this.getResetState()===T.RESET_STATE.RESET},getResetState:function getResetState(){return this.hasResponse()&&this.get("response").resetState||null},getScorerClassDefaultOptions:function getScorerClassDefaultOptions(){return{}},getScorer:function getScorer(){if(!this.scorer){var i=this.getScorerClass(),u=this.getScorerClassDefaultOptions();0,this.scorer=new i(u)}if(this._prevModifiedForScorer!==this.lastModified||!this.lastModified){this._prevModifiedForScorer=this.lastModified;var l=p.default.deepClone(this.attributes),d=this.scorer.executeScoring(l);this.asyncScoring&&(this.scoringBusyPromise=this.scoringBusyPromise.then((function(){return d})))}return this.scorer},getScorerClass:function getScorerClass(){return S.default},executeScoring:function executeScoring(){var i=this;return Promise.resolve().then((function(){return i.getScorer()})).then((function(){return i.scoringBusyPromise}))},getScore:function getScore(){var i=this.getScorer();return p.default.isNumber(i.maxScore())?{max_score:i.maxScore(),score:i.score()}:null},getResponseId:function getResponseId(i,u,l){var d=new RegExp(l+"_"+u+"_([\\w\\-]+)").exec(i);return d?d[1]:null},getIdForResponseId:function getIdForResponseId(i,u,l){return l+"_"+u+"_"+i},getJsonToCapture:function getJsonToCapture(){return{id:this.get("id"),type:this.get("type"),response_id:this.get("response_id"),user_id:this.get("user_id"),question:this.get("originalQuestion")}},getJsonToSave:function getJsonToSave(){var i={id:this.id};return this.isModified()&&(i.response=this.get("response")),i},getResponseJsonForClient:function getResponseJsonForClient(){return this.hasResponse()?p.default.deepClone(this.get("response")):null},getQuestionJsonForClient:function getQuestionJsonForClient(){return p.default.deepClone(this.get("originalQuestion"))},getMetadataForClient:function getMetadataForClient(){return p.default.deepClone(this.getMetadata())},getMetadata:function getMetadata(){return this.get("question").metadata},getGroupJsonAttributes:function getGroupJsonAttributes(){var i=[],u=this.get("question");return u.hasOwnProperty("validation_group")&&i.push({name:"validation_group",value:u.validation_group}),i},getFontClass:function getFontClass(){var i=this.get("question"),u="";return p.default.isUndefined(this.activity.get("fontsize"))||(u=this.FONTSIZE[this.activity.get("fontsize").toUpperCase()]||""),p.default.hasProperty(i,"ui_style.fontsize")&&p.default.contains(this.FONTSIZE,i.ui_style.fontsize)&&(u=this.FONTSIZE[i.ui_style.fontsize.toUpperCase()]||""),u&&(u=this.FONTSIZE_PREFIX+u),u},getFontSize:function getFontSize(){return this.FONTSIZE_MAP[this.getFontClass().replace(new RegExp(this.FONTSIZE_PREFIX),"")]||this.FONTSIZE_MAP[this.FONTSIZE.NORMAL]},mapValidationMetadata:function mapValidationMetadata(){return!1},sanitizeValue:function sanitizeValue(i){var u=this;return p.default.isEmpty(i)||(p.default.isString(i)?i=h.default.sanitizeHTML(i):p.default.isArray(i)&&(i=p.default.map(i,(function(i){return u.sanitizeValue(i)})))),i},setResponseMandatoryInformation:function setResponseMandatoryInformation(){var i=this.get("response");i&&(i.apiVersion=this.getApiVersion(),p.default.isUndefined(i.resetState)||(i.resetState=T.RESET_STATE.ATTEMPTED_AFTER_RESET),this.setAsModified())}});u.default=M},37758:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(21893));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var h=d.default.Model.extend({defaults:{domain:p.default.domain},getRequestParameters:function getRequestParameters(){var i={consumer_key:this.get("consumer_key"),domain:this.get("domain"),timestamp:this.get("timestamp"),user_id:this.get("user_id"),signature:this.get("signature")};return this.has("expires")&&(i.expires=this.get("expires")),i},getTimestamp:function getTimestamp(){var i=this.get("timestamp");return Date.UTC(i.substr(0,4),parseInt(i.substr(4,2),10)-1,i.substr(6,2))}});u.default=h},79230:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(67426));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var h=function(){function DynamicContentService(i){var u=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,DynamicContentService);var d=l.state;this.model=i,this.activityState=d,this.addModelDynamicContentFacade(),i.once(i.EVENT.READY,(function(){u.initialize()}))}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(DynamicContentService,[{key:"initialize",value:function initialize(){var i,u=this,l=this.model,p=l.get("response")||{},h=p.value,g=p.dynamic||{},v=g.attempts,y=g.id;if("review"===this.activityState&&!d.default.isEmpty(v)&&y){var S=d.default.findWhere(v,{id:y});S?S.value=h:v.push({id:y,value:h})}this.originalQuestion=l.get("originalQuestion"),i=this.getStoredResponseRowId()||this.getDefaultRowId(),this._isInitializing=!0,delete this._rowId,this.setModelDataWithRowId(i),this._isInitializing=!1,"review"!==this.activityState&&l.on(l.EVENT.MODIFIED,(function(){var i=l.get("response").value;u.setResponseDynamicData(u._rowId,i)}))}},{key:"addModelDynamicContentFacade",value:function addModelDynamicContentFacade(){var i=this;this.model.dynamic={nextAttempt:function nextAttempt(){var u=i.getPotentialRowId(!0);return i.setModelDataWithRowId(u)},previousAttempt:function previousAttempt(){var u=i.getPotentialRowId(!1);return i.setModelDataWithRowId(u)},totalAttempts:function totalAttempts(){var u=i.getRows();return d.default.isArray(u)?u.length:0},currentAttemptIndex:function currentAttemptIndex(){var u=i.getRowById(i._rowId),l=i.getRows();return d.default.indexOf(l,u)}}}},{key:"setResponseDynamicData",value:function setResponseDynamicData(i,u){if("review"!==this.activityState&&!d.default.isUndefined(u)){var l,p=this.model,h=p.get("response")||{},g=this.getStoredResponseRowId()||this.getDefaultRowId(),v=h.dynamic||{};v.id=i,v.attempts=v.attempts||[],(l=d.default.findWhere(v.attempts,{id:g}))||(l={},v.attempts.push(l)),l.id=g,l.value=d.default.deepClone(u),h.dynamic=v,p.set({response:h},{silent:!0})}}},{key:"setModelDataWithRowId",value:function setModelDataWithRowId(i){if(!d.default.isUndefined(i)){var u=this.model,l=this.getTransformedQuestion(i),p=u.get("response"),h=p&&p.value||null;if(u.set("question",l,{silent:!0}),u.validateStartup(),u.set("dynamicContentRowId",i),u.trigger("dynamicContent:changed",i),!this._isInitializing)if("review"===this.activityState){var g=this.getResponseValueByRowId(i),v=d.default.isUndefined(g)?null:g;u.updateResponseValue(v,{setAsModified:!1}),u.getScorer().executeScoring(d.default.deepClone(u.attributes))}else u.updateResponseValue(null),this.setResponseDynamicData(i,h);return this._rowId=i,l}}},{key:"getResponseValueByRowId",value:function getResponseValueByRowId(i){var u=(this.model.get("response")||{}).dynamic||{},l=d.default.findWhere(u.attempts,{id:i});return l&&l.value}},{key:"getPotentialRowId",value:function getPotentialRowId(i){var u=this.getStoredResponseRowId()||this.getDefaultRowId(),l=this.getRowById(u),p=this.getRows(),h=d.default.indexOf(p,l);return p[i?h+1<=p.length-1?h+1:0:h-1>=0?h-1:p.length-1].id}},{key:"getRowById",value:function getRowById(i){var u=(this.originalQuestion||{}).dynamic;return d.default.findWhere(u&&u.rows,{id:i})}},{key:"getStoredResponseRowId",value:function getStoredResponseRowId(){if("review"===this.activityState&&!d.default.isUndefined(this._rowId))return this._rowId;var i=this.model.get("response")||{},u=d.default.getNested(i,"dynamic.id");return d.default.isString(u)?u:this._rowId}},{key:"getDefaultRowId",value:function getDefaultRowId(){var i=this.getRows();if(i)return i[0].id}},{key:"getRows",value:function getRows(){var i=(this.originalQuestion||{}).dynamic;if(!d.default.isEmpty(i.rows))return i.rows}},{key:"getTransformedQuestion",value:function getTransformedQuestion(i){return p.default.getFormattedQuestion(this.originalQuestion,i)}},{key:"reset",value:function reset(){var i=this.model;i.shuffleService?i.shuffleService.reInitialize():i.shuffleServices&&d.default.each(i.shuffleServices,(function(i){return i.reInitialize()}))}}],[{key:"isDynamicContentModel",value:function isDynamicContentModel(i){var u=i.get("question"),l=u.dynamic,h=u.type;return p.default.isWhiteListed(h)&&!(!l||d.default.isEmpty(l.rows)||d.default.isEmpty(l.cols))}}]),DynamicContentService}();u.default=h},49041:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(2355));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var h=p.default.extend({initialize:function initialize(){return this.scorer=null,p.default.prototype.initialize.apply(this,arguments)},updateFeedbackAttemptsCount:function updateFeedbackAttemptsCount(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=this.get("response");u&&(u.feedbackAttemptsCount=i)},processActivityFlags:function processActivityFlags(){this._updateQuestionBasedOnActivity(this.get("question"))},_updateQuestionBasedOnActivity:function _updateQuestionBasedOnActivity(i){var u=this.activity.get("allow_negative_scores");return!d.default.isEmpty(i.validation)&&d.default.isBoolean(u)&&(i.validation.allow_negative_scores=u),i},getJsonToCapture:function getJsonToCapture(){var i=p.default.prototype.getJsonToCapture.apply(this,arguments);return i.question=this._updateQuestionBasedOnActivity(i.question),i},getScorerClass:function getScorerClass(){throw new Error("getScorerClass method not implemented")},canValidateResponse:function canValidateResponse(){return this.getScorer().canValidateResponse(this.get("question"))},isResponseValid:function isResponseValid(){return this.getScorer().isValid()},getResponseValidDetailed:function getResponseValidDetailed(){var i={correct:this.isResponseValid()},u=this.getPartialValidation();return d.default.isNull(u)||(i.partial=u),i},getPartialValidation:function getPartialValidation(){var i=this.getScorer();return d.default.isFunction(i.validateIndividualResponses)?i.validateIndividualResponses():null},getPartialScoring:function getPartialScoring(){var i=this.get("question");return!d.default.isObject(i.validation)||!d.default.isBoolean(i.validation.partial_scoring)||i.validation.partial_scoring},getShowPartialValidationUI:function getShowPartialValidationUI(){var i=this.get("question").validation||{};return!!i.scoring_type||(i.show_partial_ui?i.show_partial_ui:void 0)},getShowGlobalValidationUi:function getShowGlobalValidationUi(){var i=this.get("question").validation||{};return i.scoring_type?"exactMatch"===i.scoring_type&&this.showsGlobalValUiForExactMatch():!this.getPartialScoring()},getMappableResponses:function getMappableResponses(){return this.getResponseValue()},getMappableValidation:function getMappableValidation(){return this.getResponseValidDetailed().partial},mapValidationMetadata:function mapValidationMetadata(i){var u,l=this.getMetadata()&&this.getMetadata()[i],p=this.getMappableValidation(),h=this.getMappableResponses(),g=d.default.isArray(l),v=d.default.isArray(h),y=d.default.isArray(p);return!!(g&&v&&y)&&(u={correct:[],incorrect:[],unattempted:[]},d.default.each(d.default.keys(u),(function(i){u[i]=this.mapValidationMetadataToResponseState({targetState:i,metadata:l})}),this),u)},mapValidationMetadataToResponseState:function mapValidationMetadataToResponseState(i){var u=this.getMappableValidation(),l=this.getMappableResponses(),p=[];return d.default.each(l,(function(l,h){(function isTargetResponse(l,p){var h;return"unattempted"===i.targetState?d.default.isNull(l):(h="correct"===i.targetState,d.default.exists(l)&&u[p]===h)})(l,h)&&p.push({value:l,metadata:i.metadata[h],index:h})})),p},showsGlobalValUiForExactMatch:function showsGlobalValUiForExactMatch(){var i=!d.default.contains(["shorttext","formula","formulaV2"],this.get("type"));return"mcq"===this.get("type")&&(i=!!this.get("question").multiple_responses),i},callValidate:function callValidate(i){this.canValidateResponse()&&this.trigger(this.EVENT.CALLVALIDATE,i)},getValidResponse:function getValidResponse(){var i,u,l,p,h;return this.canValidateResponse()&&((p=(u=this.get("question")).valid_responses||u.validation.valid_responses)?i=(h=d.default.map(p,d.default.first)).length&&h[0]?{value:h}:{value:d.default.pluck(p,"value")}:((l=this.getScorer()).suggestedResponse&&(i=l.suggestedResponse()),!i&&u.validation.valid_response&&((i=u.validation.valid_response).value||(i={value:i})))),i||{}}});u.default=h},62071:function(i){"use strict";i.exports={QUESTION_TYPES:{ASSOCIATION:"association",AUDIO:"audio",AUDIOADV:"audioadv",BOOLEAN:"boolean",CHEMISTRY:"chemistry",CHOICEMATRIX:"choicematrix",CLASSIFICATION:"classification",CLOZEASSOCIATION:"clozeassociation",CLOZEDROPDOWN:"clozedropdown",CLOZEFORMULA:"clozeformula",CLOZEFORMULAV2:"clozeformulaV2",CLOZEINLINETEXT:"clozeinlinetext",CLOZETEXT:"clozetext",CLOZECHEMISTRY:"clozechemistry",CUSTOM:"custom",DRAWING:"drawing",FILEUPLOAD:"fileupload",FILLSHAPE:"fillshape",FORMULA:"formula",FORMULA_DEV:"formula_dev",FORMULAESSAY:"formulaessay",FORMULAESSAYV2:"formulaessayV2",CHEMISTRYESSAY:"chemistryessay",CHEMISTRYESSAYV2:"chemistryessayV2",FORMULAV2:"formulaV2",GRAPHPLOTTING:"graphplotting",GRIDDED:"gridded",HIGHLIGHT:"highlight",HOTSPOT:"hotspot",IMAGECLOZEASSOCIATION:"imageclozeassociation",IMAGECLOZEASSOCIATIONV2:"imageclozeassociationV2",IMAGECLOZEDROPDOWN:"imageclozedropdown",IMAGECLOZEFORMULA:"imageclozeformula",IMAGECLOZECHEMISTRY:"imageclozechemistry",IMAGECLOZETEXT:"imageclozetext",IMAGEUPLOAD:"imageupload",LONGTEXT:"longtext",LONGTEXTV2:"longtextV2",MCQ:"mcq",NUMBERLINE:"numberline",NUMBERLINEPLOT:"numberlineplot",ORDERLIST:"orderlist",PLAINTEXT:"plaintext",RATING:"rating",SCORE:"score",SHORTTEXT:"shorttext",SIMPLECHART:"simplechart",SIMPLESHADING:"simpleshading",SORTLIST:"sortlist",TEXTHIGHLIGHT:"texthighlight",TOKENHIGHLIGHT:"tokenhighlight",VIDEO:"video",UNKNOWN:"unknown"},FEATURE_TYPES:{AUDIO_PLAYER:"audioplayer",CALCULATOR:"calculator",COUNTER:"counter",FORMULAINPUT:"formulainput",IMAGE_TOOL:"imagetool",LINE_READER:"linereader",POP_UP:"popup",SCROLLABLE_PASSAGE:"scrollablepassage",SHARED_PASSAGE:"sharedpassage",UNKNOWN:"unknown",VIDEO_PLAYER:"videoplayer",CUSTOM_FEATURE:"customfeature"}}},7636:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=function getOfflineFacade(){return{getSession:function getSession(i,u){return initOfflineStorage(i).then((function(){return p.default.getSession(u)}))},push:function push(i,u){return initOfflineStorage(i).then((function(){return p.default.pushBySessionId(i,u)}))}}};var d=_interopRequireDefault(l(21893)),p=_interopRequireDefault(l(77804));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function initOfflineStorage(i){return new Promise((function(u,l){if(i){i.domain=d.default.domain;try{p.default.init(),u()}catch(i){l({event:{code:10027,detail:i.toString()}})}}else l({event:{code:10027,detail:"Missing security object"}})}))}},91789:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(34651)),h=_interopRequireDefault(l(80891)),g=_interopRequireDefault(l(11389)),v=_interopRequireDefault(l(31700)),y=_interopRequireDefault(l(77908)),S=_interopRequireDefault(l(12400)),E=_interopRequireDefault(l(95022));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _slicedToArray(i,u){return function _arrayWithHoles(i){if(Array.isArray(i))return i}(i)||function _iterableToArrayLimit(i,u){var l=null==i?null:"undefined"!=typeof Symbol&&i[Symbol.iterator]||i["@@iterator"];if(null==l)return;var d,p,h=[],g=!0,v=!1;try{for(l=l.call(i);!(g=(d=l.next()).done)&&(h.push(d.value),!u||h.length!==u);g=!0);}catch(i){v=!0,p=i}finally{try{g||null==l.return||l.return()}finally{if(v)throw p}}return h}(i,u)||_unsupportedIterableToArray(i,u)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(i){return function _arrayWithoutHoles(i){if(Array.isArray(i))return _arrayLikeToArray(i)}(i)||function _iterableToArray(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||_unsupportedIterableToArray(i)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(i,u){if(i){if("string"==typeof i)return _arrayLikeToArray(i,u);var l=Object.prototype.toString.call(i).slice(8,-1);return"Object"===l&&i.constructor&&(l=i.constructor.name),"Map"===l||"Set"===l?Array.from(i):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?_arrayLikeToArray(i,u):void 0}}function _arrayLikeToArray(i,u){(null==u||u>i.length)&&(u=i.length);for(var l=0,d=new Array(u);l<u;l++)d[l]=i[l];return d}var R=[],T=/^data\-(.+)$/;function prepareFeatures(i){var u,l=[],p=(0,d.default)(v.default.prototype.TYPE).without(v.default.prototype.TYPE.UNKNOWN),h=(0,d.default)(i).map((function(i){var u,h,g=i.getAttribute("data-type");return(0,d.default)(p).contains(g)?l.push(g):g=v.default.prototype.TYPE.UNKNOWN,{domNode:i,type:g,dataAttributes:(u=i,h={},d.default.each(u.attributes,(function(i){if(T.test(i.nodeName)){var u=i.nodeName.match(T)[1];h[u]=i.nodeValue}})),d.default.isUndefined(h.simplefeature_id)&&(h.simplefeature_id=E.default.v4()),h)}}));return(u=R).push.apply(u,_toConsumableArray(i)),[h,(0,d.default)(l).uniq()]}var O=function SimpleFeaturesRenderer(){this.initCalled=!1};d.default.extend(O.prototype,{i18n:null,init:function init(i){this.features=[],this.simpleFeatureFacades={},this.i18n=i,this.initCalled=!0,y.default.init()},getSimpleFeatureNodes:function getSimpleFeatureNodes(i){return(0,p.default)(".learnosity-feature",i.$scope).not((function(){return this.className.match(/(^|\s)feature-/)||i.excludeWidgets&&(0,p.default)(this).closest(".lrn_widget").length})).get()},hasInitBeenCalled:function hasInitBeenCalled(){return this.initCalled},render:function render(i){var u=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getSimpleFeatureNodes({excludeWidgets:!0}),p=arguments.length>2?arguments[2]:void 0,v=this;i=i||{};var y=new S.default((function(g,y){var S=(l=(0,d.default)(l).difference(R)).length;if(S){var E=_slicedToArray(prepareFeatures(l),2),T=E[0],O=E[1],M={},I=h.default.getBundleOptions(i);h.default.requireBundlesForFeatureTypes(O,(function(i){d.default.isEmpty(i)?y("No bundles were loaded for the required Feature types: "+O.join(", ")):(0,d.default)(T).each((function(l){var h=i[l.type],y=new h.View({model:new h.Model(l.dataAttributes),activity:p,el:l.domNode,i18n:u.i18n,initialisationCallback:function initialisationCallback(){--S||(R=(0,d.default)(R).without(l.domNode),g(M))},services:{renderViewSimpleFeatures:d.default.debounce((function(){y&&y.renderSimpleFeatures(v)}),10)}});u.registerFacade(y,M),u.features.push(y)}))}),I)}else g()}));return y.catch(g.default.log),y},registerFacade:function registerFacade(i,u){var l=i.model.get("simplefeature_id");l&&(this.simpleFeatureFacades[l]=u[l]=i.getFacade())},reset:function reset(){(0,d.default)(this.features).invoke("reset"),this.features=[],this.simpleFeatureFacades={},this.initCalled=!1,y.default.reset()},setScrollablePassagesContextHeight:function setScrollablePassagesContextHeight(i){d.default.each(this.features,(function(u){"scrollablepassage"===u.model.get("type")&&u.setContextHeight(i)}))},onAppReady:function onAppReady(){(0,d.default)(this.features).invoke("postAppReady")},stopHideAll:function stopHideAll(){d.default.each(this.features,(function(i){var u=i.getFacade();u.stop(),u.toggle(!1)}))},unregisterFacades:function unregisterFacades(i){var u=this;d.default.chain(i).keys().each((function(i){delete u.simpleFeatureFacades[i]}))}});var M=O;u.default=M},28972:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(73781)),p=l(23057);var h={QUESTION_UPDATE_RESPONSE_VALUE:"question:updateResponseValue",QUESTION_TOGGLE_DISABLED:"question:toggleDisabled",QUESTION_RENDER_MATH_IF_REQUIRED:"question:renderMathIfRequired",QUESTION_SET_MASKING_STATE:"question:toggleMaskingMode",QUESTION_TOGGLE_COMPONENT_MASK:"question:toggleComponentMask",QUESTION_NOTIFY_MATH_RENDERED:"question:notifyMathRendered",QUESTION_NOTIFY_RENDERED:"question:notifyRendered",QUESTION_CACHE_RENDERED_MATH:"question:cacheRenderedMath",QUESTION_UPDATE_RESPONSE_RESET_STATE:"question:updateResponseResetState",QUESTION_LEGACY_BEGIN_RESPONSE:"question:legacy:beginResponse",SET_LEGACY_ATTRIBUTES:"question:legacy:setAttributes"};function renderMathIfRequired(i){return function(u,l,p){p.mathService.renderIfRequired().then((function(u){u&&i&&d.default.isFunction(i.success)&&i.success()})),u({type:h.QUESTION_RENDER_MATH_IF_REQUIRED})}}function renderSimpleFeatures(){return function(i,u,l){l.simpleFeatureService.render()}}function notifyRendered(){return{type:h.QUESTION_NOTIFY_RENDERED}}function legacyBeginResponse(){return{type:h.QUESTION_LEGACY_BEGIN_RESPONSE}}function triggerEvent(i,u){return function(l,d,p){p.dataService.triggerQuestionFacadeEvent(i,u)}}var g={actionTypes:h,updateResponseValue:function updateResponseValue(i){return function(u,l,d){u({type:h.QUESTION_UPDATE_RESPONSE_VALUE,payload:{value:i}}),l().base.resetState===p.RESET_STATE.RESET&&u({type:h.QUESTION_UPDATE_RESPONSE_RESET_STATE,payload:{resetState:p.RESET_STATE.ATTEMPTED_AFTER_RESET}}),d.dataService.updateResponseValue(i)}},setDisabled:function setDisabled(i){return{type:h.QUESTION_TOGGLE_DISABLED,payload:{disabled:i}}},setLegacyAttributes:function setLegacyAttributes(i){return{type:h.SET_LEGACY_ATTRIBUTES,payload:{attributes:i}}},setMaskingState:function setMaskingState(i){return function(u,l){var d=l().base,p=d.isReviewState,g=d.isPreviewState;p||g||u({type:h.QUESTION_SET_MASKING_STATE,payload:{inMaskingState:i}})}},toggleComponentMask:function toggleComponentMask(i){return function(u,l,p){u({type:h.QUESTION_TOGGLE_COMPONENT_MASK,payload:{maskId:i}});var g=p.dataService.triggerQuestionFacadeEvent,v=l().base,y=v.responseId,S=v.maskIds;d.default.contains(S,i)&&g("masked",y)}},renderMathIfRequired:renderMathIfRequired,renderSimpleFeatures:renderSimpleFeatures,notifyRendered:notifyRendered,notifyRenderComplete:function notifyRenderComplete(){return function(i,u,l){u().base.isRendered||(i(notifyRendered()),i(renderMathIfRequired()),i((function(i,u,l){l.simpleFeatureService.render()})),i(triggerEvent("rendered")))}},notifyMathRendered:function notifyMathRendered(i){return function(u){u({type:h.QUESTION_NOTIFY_MATH_RENDERED,payload:i}),u((function(i,u,l){l.simpleFeatureService.render()}))}},cacheRenderedMath:function cacheRenderedMath(i){return{type:h.QUESTION_CACHE_RENDERED_MATH,payload:i}},triggerEvent:triggerEvent,resetResponse:function resetResponse(){return function(i,u,l){l.dataService.resetResponse(),i({type:h.QUESTION_UPDATE_RESPONSE_RESET_STATE,payload:{resetState:p.RESET_STATE.RESET}})}},legacyRenderEmbeddedFeature:function legacyRenderEmbeddedFeature(i){var u=i.el,l=i.feature,d=i.isLastFeature,p=i.removeOnComplete,h=l.type;return function(i,g,v){var y=g().base.i18n,S=v.dataService,E=S.get("legacyFeatures",[]);S.loadFeatureBundles([h],(function(v){var S=v[h],R=S.View,T=new(0,S.Model)(l),O=new R({el:u,model:T,i18n:y});E.push(O),d&&function handleLegacyEvents(i,u,l){var d=u().base,p=d.stimulus,h=d.isReviewState,g=p.legacyEvents,v=l.getFacade(),y=g.begin_response_on;h||("last-feature-begin"===y?v.on("begin",(function(){i(legacyBeginResponse)})):y&&"last-feature-complete"!==y||v.on("complete",(function(){i(legacyBeginResponse)})))}(i,g,O),p&&function removeViewOnComplete(i,u){i.getFacade().on("complete",(function(){var l=i.$el.parent();u.splice(u.indexOf(i),1),i.model.destroy(),i.remove(),l.children().length||l.remove()}))}(O,E)}))}},legacyBeginEmbeddedFeatures:function legacyBeginEmbeddedFeatures(){return function(i,u,l){var p=d.default.map(l.dataService.get("legacyFeatures"),(function(i){return i.getFacade()})),h=function beginNextFacade(){g++,p[g]&&p[g].begin()},g=-1;d.default.each(p,(function(i){i.off("complete",h),i.once("complete",h)})),h()}},legacyTriggerEmbeddedFeaturesAction:function legacyTriggerEmbeddedFeaturesAction(i){return function(u,l,p){var h=p.dataService.get("legacyFeatures");d.default.each(h,(function(u){var l=u.getFacade();l&&d.default.isFunction(l[i])&&l[i]()}))}}};u.default=g},74876:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(73781));function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var p=50,h=0,g=0,v=2,y=70,S=30;function getElementLayoutData(i){var u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=i.type,E=p,R=y,T=S,O=h,M=g,I=v,P=i.width;d.default.isNumber(P)?P<T?P=T:P>R&&(P=R):P=E;var D=i.padding_left;d.default.isNumber(D)||(D=O),D*=P/100;var N=i.padding_right;return d.default.isNumber(N)||(N=u?I:M),{type:l,width:P,paddingLeft:D,paddingRight:N*=P/100}}var E=function(){function BaseDataService(i,u){!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,BaseDataService),this.model=i,this.questionFacade=u,this.initialise()}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(BaseDataService,[{key:"initialise",value:function initialise(){this.activity=this.model.activity,this.question=this.model.get("question"),this.data={},this.attributes={}}},{key:"prepare",value:function prepare(i){i(this)}},{key:"getInitialState",value:function getInitialState(){this.initialise();var i=this.activity,u=this.question,l=this.isReviewState,p=this.isResumeState,h=this.isPreviewState,g=!!d.default.getNested(i.get("render_optimization"),"defer_render"),v=!!d.default.getNested(i.get("beta_flags"),"lds");return{base:{isRenderDeferred:g,isResumeState:p,isReviewState:l,isPreviewState:h,isLocalPractice:i.get("type")===i.TYPE.LOCAL_PRACTICE,responseId:u.response_id,modelId:this.model.id,questionType:u.type,i18n:i.get("i18n"),state:i.get("state"),readOnly:this.readOnly,isMath:this.isMath,isRendered:!g,cacheRenderedMath:null,stimulus:this.stimulus,stimulusReview:this.stimulusReview,stimulusInstructor:this.stimulusInstructor,widgetLayout:this.widgetLayout,fontSizeClass:this.fontClass,disabled:!1,isAttempted:l||this.isAttempted,extraClassNames:this.extraClassNames,disableSpokenmathDistractors:i.get("disable_spokenmath_distractors"),disableSpokenmathUserInputs:i.get("disable_spokenmath_user_inputs"),isLDS:v,resetState:this.resetState}}}},{key:"getFacade",value:function getFacade(){var i=this;return this._facade||(this._facade={},this.EXPOSED_METHODS.forEach((function(u){i._facade[u]=i[u].bind(i)}))),this._facade}},{key:"get",value:function get(i,u){return this.attributes[i]||d.default.isUndefined(u)||this.set(i,u),this.attributes[i]}},{key:"set",value:function set(i,u){var l=this.attributes;d.default.isObject(i)?d.default.each(i,(function(i,u){l[u]=i})):d.default.isString(i)&&(this.attributes[i]=u)}},{key:"loadFeatureBundles",value:function loadFeatureBundles(i,u){return this.activity.loadFeatureBundles(i,u)}},{key:"updateResponseValue",value:function updateResponseValue(i){return this.model.updateResponseValue(i)}},{key:"getResponse",value:function getResponse(){return this.model.get("response")}},{key:"canValidateResponse",value:function canValidateResponse(){return this.model.canValidateResponse()}},{key:"validateResponse",value:function validateResponse(){return this.model.validateResponse()}},{key:"isResponseValid",value:function isResponseValid(){return this.model.isResponseValid()}},{key:"hasNewResponse",value:function hasNewResponse(){var i=this.getResponse();if(!i)return!1;var u=!d.default.isEqual(i.value,this.get("prevResponseValue"));return this.set("prevResponseValue",d.default.deepClone(i.value)),u}},{key:"triggerQuestionFacadeEvent",value:function triggerQuestionFacadeEvent(){var i;(i=this.questionFacade).trigger.apply(i,arguments)}},{key:"isReviewState",get:function get(){var i=this.data,u=this.activity;return d.default.isUndefined(i.isReviewState)&&(i.isReviewState=u.get("state")===u.STATE.REVIEW),i.isReviewState}},{key:"isResumeState",get:function get(){var i=this.data,u=this.activity;return d.default.isUndefined(i.isResumeState)&&(i.isResumeState=u.get("state")===u.STATE.RESUME),i.isResumeState}},{key:"isPreviewState",get:function get(){var i=this.data,u=this.activity;return d.default.isUndefined(i.isPreviewState)&&(i.isPreviewState=u.get("state")===u.STATE.PREVIEW),i.isPreviewState}},{key:"isMath",get:function get(){return!!this.question.is_math}},{key:"isAttempted",get:function get(){return this.model.isAttempted()}},{key:"stimulus",get:function get(){var i=this.data;if(d.default.isUndefined(i.stimulus)){var u=this.question.stimulus;if(d.default.isObject(u))i.stimulus=function legacyGetStimulusObject(i){var u,l=i.features,p=d.default.last(l),h=i.content,g=d.default.filter(l,(function(i){return"overlay"===i.position})),v=d.default.filter(l,(function(i){return"vertical"===i.position||d.default.isUndefined(i.position)})),y=(u={},d.default.each(i,(function(i,l){"content"!==l&&"features"!==l&&(u[l]=i)})),u);return p&&(p._last=!0),{visible:!0,content:h,legacyVerticalFeatures:v,legacyOverlayFeatures:g,legacyEvents:y}}(u);else{var l,p=!1;d.default.isString(u)&&(p=!0,l=u),i.stimulus={visible:p,content:l}}}return i.stimulus}},{key:"stimulusReview",get:function get(){var i=this.data;if(d.default.isUndefined(i.stimulusReview)){var u,l=this.question,p=!1;d.default.isString(l.stimulus_review)?(p=!0,u=l.stimulus_review):d.default.isString(l.description)&&(p=!0,u=l.description),i.stimulusReview={visible:p,content:u}}return i.stimulusReview}},{key:"stimulusInstructor",get:function get(){var i=this.data;if(d.default.isUndefined(i.stimulusInstructor)){var u,l,p=this.activity,h=this.question.instructor_stimulus;d.default.isString(h)&&(u=!(!p.get("showInstructorStimulus")||!h.length),l=h),i.stimulusInstructor={visible:u,content:l}}return i.stimulusInstructor}},{key:"fontsize",get:function get(){var i=this.activity.get("fontsize"),u=d.default.getNested(this.question,"ui_style.fontsize");return d.default.isUndefined(i)?u||void 0:i}},{key:"fontClass",get:function get(){var i=this.data;if(d.default.isUndefined(i.fontClass)){var u,l=this.model,p=this.fontsize;p&&(u=l.FONTSIZE[p.toUpperCase()]),u=u?l.FONTSIZE_PREFIX+u:"",i.fontClass=u}return i.fontClass}},{key:"readOnly",get:function get(){if(d.default.isUndefined(this.data.readOnly)){var i=this.activity,u=i.get("state");this.data.readOnly=u===i.STATE.REVIEW||u===i.STATE.PREVIEW}return this.data.readOnly}},{key:"widgetLayout",get:function get(){var i=this.data;if(d.default.isUndefined(i.widgetLayout)){var u=this.question.widget_layout,l=!!(u&&d.default.isArray(u.elements)&&this.stimulus.visible),p={enabled:l};l&&(p.elements=function getProcessedWidgetLayoutElements(i){var u=[];return d.default.each(i,(function(i){var l=i.type;d.default.isString(l)&&l.length&&!d.default.findWhere(u,{type:l})&&u.push(i)})),d.default.each(["stimulus","interaction"],(function(i){d.default.findWhere(u,{type:i})||u.push(getElementLayoutData({type:i}))})),d.default.map(u,(function(i,l){return getElementLayoutData(i,l===u.length-1)}))}(u.elements)),i.widgetLayout=p}return i.widgetLayout}},{key:"extraClassNames",get:function get(){return{}}},{key:"resetResponse",value:function resetResponse(){this.model.resetResponse()}},{key:"resetState",get:function get(){return this.model.getResetState()}}]),BaseDataService}();E.prototype.EXPOSED_METHODS=["get","set","loadFeatureBundles","updateResponseValue","getResponse","hasNewResponse","canValidateResponse","triggerQuestionFacadeEvent","isResponseValid","validateResponse","resetResponse"];var R=E;u.default=R},76583:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d,p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(28972)),g=_interopRequireDefault(l(59371));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _defineProperty(i,u,l){return u in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i}var v=h.default.actionTypes,y=(_defineProperty(d={},v.QUESTION_TOGGLE_DISABLED,(function(i,u){return{disabled:u.disabled}})),_defineProperty(d,v.QUESTION_SET_MASKING_STATE,(function(i,u){return{inMaskingState:u.inMaskingState,maskingMode:u.maskingMode}})),_defineProperty(d,v.QUESTION_TOGGLE_COMPONENT_MASK,(function(i,u){var l=u.maskId,d=i.maskIds||[],p=d.indexOf(l);return p>=0?d.splice(p,1):d.push(l),{maskIds:d}})),_defineProperty(d,v.QUESTION_UPDATE_RESPONSE_VALUE,(function(){return{isAttempted:!0}})),_defineProperty(d,v.QUESTION_NOTIFY_MATH_RENDERED,(function(i,u){return{cacheRenderedMath:u.cacheRenderedMath}})),_defineProperty(d,v.QUESTION_NOTIFY_RENDERED,(function(i){return{isRendered:!0}})),_defineProperty(d,v.QUESTION_UPDATE_RESPONSE_RESET_STATE,(function(i,u){return{resetState:u.resetState}})),_defineProperty(d,v.SET_LEGACY_ATTRIBUTES,(function(i,u){var l={};return p.default.isObject(u.attributes)&&(l.__legacyAttributes=u.attributes),(0,p.default)({}).assign(i,l)})),d),S=(0,g.default)(y,{inMaskingState:!1,disabled:!1});u.default=S},30287:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.legacyBeginEmbeddedFeatures=function legacyBeginEmbeddedFeatures(i){var u=i.getDataService(),l=u.isReviewState;if(!d.default.isEmpty(u.get("legacyFeatures"))&&!l)return i.getStore().dispatch(p.default.legacyBeginEmbeddedFeatures()),!0;return!1},u.legacyTriggerEmbeddedFeaturesAction=function legacyTriggerEmbeddedFeaturesAction(i,u){i.getStore().dispatch(p.default.legacyTriggerEmbeddedFeaturesAction(u))};var d=_interopRequireDefault(l(95023)),p=_interopRequireDefault(l(28972));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}},77211:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(70640)),h=_interopRequireDefault(l(74854)),g=_interopRequireDefault(l(28972)),v=l(30287),y=_interopRequireDefault(l(11389));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var S=function(){function QuestionFacade(i){!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,QuestionFacade);var u=i.model;this.view=i,this.model=u,i.simpleFeatureFacades=i.simpleFeatureFacades||{},u.on(u.EVENT.MODIFIED,(function(){this.facade.trigger("change changed")}),this)}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(QuestionFacade,[{key:"facade",get:function get(){var i=this;if(this._facade)return this._facade;var u=this.view,l=this.model,S=l.activity,E=S.get("type"),R=function callbackForAsync(i,u){return d.default.isFunction(i)?l.executeScoring().then((function(){return i(u())})):u()};if(this._facade={on:p.default.Events.on,off:p.default.Events.off,once:p.default.Events.once,trigger:p.default.Events.trigger,response:{getMetadata:function getMetadata(){return l.getResponseMetadata()},setMetadata:function setMetadata(i){return l.setResponseMetadata(i)}},enable:function enable(){return u.setDisabled(!1)},disable:function disable(){return u.setDisabled(!0)},isEnabled:function isEnabled(){return!u.getStore().getState().base.disabled||!1},getAttemptedStatus:function getAttemptedStatus(){return{hasReachedMinLimit:l.hasReachedMinLimit()}},getMetadata:function getMetadata(){return l.getMetadataForClient()},getQuestion:function getQuestion(){return l.getQuestionJsonForClient()},getResponse:function getResponse(){return l.getResponseJsonForClient()},executeScoring:function executeScoring(){return d.default.isFunction(l.executeScoring)?l.executeScoring():Promise.resolve()},getScore:function getScore(i){return R(i,(function(){return d.default.isFunction(l.getScore)?l.getScore():null}))},isAttempted:function isAttempted(){return l.isAttempted()},isValid:function isValid(i,u){return R(u,(function(){return d.default.isFunction(l.canValidateResponse)&&l.canValidateResponse()&&l.hasResponseValue()?i?l.getResponseValidDetailed():l.isResponseValid():void 0}))},validate:function validate(i,l){return R(l,(function(){return d.default.isFunction(u.callValidate)?u.callValidate.apply(u,[i]):void 0}))},mapValidationMetadata:function mapValidationMetadata(i,u){return R(u,(function(){return l.mapValidationMetadata.call(l,i)}))},checkImages:function checkImages(){if(u.imageLoader)return u.imageLoader.checkImages()},checkValidation:function checkValidation(){var i=l.canValidateResponse;return{has_validation:!!d.default.isFunction(i)&&!!i.apply(l)}},begin:function begin(){(0,v.legacyBeginEmbeddedFeatures)(u)?"begin"===l.get("question").begin_response_on&&u.beginResponse():u.beginResponse()},pause:function pause(){d.default.each(u.simpleFeatureFacades,(function(i){return i.pause&&i.pause()})),(0,v.legacyTriggerEmbeddedFeaturesAction)(u,"pause"),u.pauseResponse()},stop:function stop(){d.default.each(u.simpleFeatureFacades,(function(i){return i.stop&&i.stop()})),(0,v.legacyTriggerEmbeddedFeaturesAction)(u,"stop"),u.stopResponse()},masking:function masking(){if(this.isMaskable())return u.masking.apply(u,arguments)},isMaskable:function isMaskable(){return u.maskable||!1},render:function render(){return u.forceRender()},isRendered:function isRendered(){return u.isRendered()},resetValidationUI:function resetValidationUI(){u.getStore().dispatch(h.default.clearValidationUI())},retryLoadImages:function retryLoadImages(){u.imageLoader&&u.imageLoader.loadImages()},simpleFeatures:function simpleFeatures(){return d.default.clone(u.simpleFeatureFacades)},simpleFeature:function simpleFeature(i){return u.simpleFeatureFacades[i]},resetResponse:function resetResponse(){S.get("state")!==S.STATE.REVIEW&&this.isEnabled()&&(u.getStore().dispatch(g.default.resetResponse()),u.update())},isResponseReset:function isResponseReset(){return l.hasBeenReset()}},"local_practice"===E&&(this._facade.update=function(u){var d=l.get("question").type;if(u.type!==d)return y.default.exception({code:10030,detail:'type: "'.concat(u.type,"\" does not match current question instance's type")});u.response_id=l.get("response_id"),l.setOriginalQuestion(u),i.updateInstance(u)}),l.get("isDynamicContent")){var T=l.dynamic;this._facade.dynamic={nextAttempt:function nextAttempt(){return i.updateInstance(T.nextAttempt())},previousAttempt:function previousAttempt(){return i.updateInstance(T.previousAttempt())},currentAttemptIndex:function currentAttemptIndex(){return T.currentAttemptIndex()},totalAttempts:function totalAttempts(){return T.totalAttempts()}}}return this._facade}},{key:"updateInstance",value:function updateInstance(i){this.view.update()}}]),QuestionFacade}(),E=S;u.default=E},74854:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;(function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}})(l(73781));var d=l(38891);var p={SET_LEGACY_ATTRIBUTES:"validatable:legacy:setAttributes",VALIDATABLE_CHECK_ANSWER:"validatable:checkAnswer",VALIDATABLE_SHOW_SUGGESTED_ANSWERS:"validatable:showSuggestedAnswers",VALIDATABLE_UPDATE_ARIA_LIVE_DATA:"validatable:updateAriaLiveData",VALIDATABLE_CLEAR_VALIDATION_UI:"validatable:clearValidationUI",VALIDATABLE_CLEAR_VALIDATION_ARIA_LIVE:"validatable:clearValidationAriaLive",VALIDATABLE_INCREASE_FEEDBACK_ATTEMPT_COUNT:"validatable:increaseFeedbackAttemptCount"};function updateAriaLiveData(i){return{type:p.VALIDATABLE_UPDATE_ARIA_LIVE_DATA,payload:i}}var h={actionTypes:p,checkAnswer:function checkAnswer(i){return function(u,l,h){var g=l(),v=g.base,y=g.validatable,S=y.feedbackAttemptsLimit,E=y.feedbackAttemptsCount,R=h.dataService,T=i.canShowCorrectAnswers,O=i.canShowGlobalValidationUI,M=i.showDistractorRationale,I=void 0===M?R.getActivityShowDistractorRationale():M,P=i.skipAttemptCountLimit;if((i.shouldValidateUnattemptedResponse||v.isAttempted)&&(P||0===S||!(E>=S))){var D;if(!v.isReviewState)if(R.triggerQuestionFacadeEvent("beforeValidate",{preventDefault:function preventDefault(){return D=!0}}),D)return;var N=R.isResponseValid(),q=R.getValidatedResponses(),L=T?R.getSuggestedResponses():null,V=I.perResponse!==d.SHOW_DISTRACTOR_RATIONALE_NEVER?R.getResponseLevelDistractorRationale():null,U=l().validatable.validatedEventRequestCount;u({type:p.VALIDATABLE_CHECK_ANSWER,payload:{canShowGlobalValidationUI:O,isResponseValid:N,responseLevelDistractorRationale:V,showDistractorRationale:I,validatedResponses:q}});var B=T;u(updateAriaLiveData({message:R.getAriaLiveMessage(B),mappedValidatedResponses:R.getMappedValidatedResponsesData(q),mappedSuggestedResponses:B?R.getMappedSuggestedResponsesData(L&&L.value):null,isShowingCorrectAnswers:B})),u({type:p.VALIDATABLE_SHOW_SUGGESTED_ANSWERS,payload:{suggestedResponses:L,isShowingCorrectAnswers:B}}),!P&&R.hasNewResponse()&&(u({type:p.VALIDATABLE_INCREASE_FEEDBACK_ATTEMPT_COUNT}),h.dataService.updateFeedbackAttemptsCount(l().validatable.feedbackAttemptsCount)),l().validatable.validatedEventRequestCount!==U&&R.triggerQuestionFacadeEvent("validated")}}},clearValidationUI:function clearValidationUI(){return{type:p.VALIDATABLE_CLEAR_VALIDATION_UI}},clearValidationAriaLive:function clearValidationAriaLive(){return{type:p.VALIDATABLE_CLEAR_VALIDATION_ARIA_LIVE}},setLegacyAttributes:function setLegacyAttributes(i){return{type:p.SET_LEGACY_ATTRIBUTES,payload:{attributes:i}}},updateAriaLiveData:updateAriaLiveData};u.default=h},66790:function(i,u,l){"use strict";function _typeof(i){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(i)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(74876)),h=l(38891);function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(i,u,l){var d=_superPropBase(i,u);if(d){var p=Object.getOwnPropertyDescriptor(d,u);return p.get?p.get.call(arguments.length<3?i:l):p.value}},_get.apply(this,arguments)}function _superPropBase(i,u){for(;!Object.prototype.hasOwnProperty.call(i,u)&&null!==(i=_getPrototypeOf(i)););return i}function _setPrototypeOf(i,u){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,u){return i.__proto__=u,i},_setPrototypeOf(i,u)}function _createSuper(i){var u=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(i){return!1}}();return function _createSuperInternal(){var l,d=_getPrototypeOf(i);if(u){var p=_getPrototypeOf(this).constructor;l=Reflect.construct(d,arguments,p)}else l=d.apply(this,arguments);return _possibleConstructorReturn(this,l)}}function _possibleConstructorReturn(i,u){if(u&&("object"===_typeof(u)||"function"==typeof u))return u;if(void 0!==u)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(i)}function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _getPrototypeOf(i){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)},_getPrototypeOf(i)}function _defineProperty(i,u,l){return u in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i}var g=function(i){!function _inherits(i,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),u&&_setPrototypeOf(i,u)}(ValidatableDataService,i);var u=_createSuper(ValidatableDataService);function ValidatableDataService(){var i;_classCallCheck(this,ValidatableDataService);for(var l=arguments.length,d=new Array(l),p=0;p<l;p++)d[p]=arguments[p];return _defineProperty(_assertThisInitialized(i=u.call.apply(u,[this].concat(d))),"VALIDATION_STATES",{CORRECT:"correct",INCORRECT:"incorrect"}),i}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(ValidatableDataService,[{key:"getInitialState",value:function getInitialState(){var i=_get(_getPrototypeOf(ValidatableDataService.prototype),"getInitialState",this).call(this),u=this.canCheckAnswer,l=this.canShowCorrectAnswers,p=this.canShowGlobalValidationUI,g=this.feedbackAttemptsCount,v=this.feedbackAttemptsLimit,y=this.isReviewState,S=this.questionLevelDistractorRationale,E=this.validationState,R=this.validationStemNumeration,T=this.getActivityShowDistractorRationale(),O=T.perResponse!==h.SHOW_DISTRACTOR_RATIONALE_NEVER?this.getResponseLevelDistractorRationale():null;return d.default.extend({},i,{validatable:{ariaGlobal:{visible:!1},ariaLive:{visible:!1},canCheckAnswer:u,canShowCorrectAnswers:l,canShowGlobalValidationUI:p,feedbackAttemptsCount:g,feedbackAttemptsLimit:v,isShowingCorrectAnswers:y&&l,questionLevelDistractorRationale:S,responseLevelDistractorRationale:O,showDistractorRationale:T,suggestedResponses:y?this.getSuggestedResponses():null,validatedEventRequestCount:0,validatedResponses:y&&this.canValidateResponse()?this.getValidatedResponses():null,validationState:E,validationStemNumeration:R}})}},{key:"getValidatedResponses",value:function getValidatedResponses(){}},{key:"getMappedValidatedResponsesData",value:function getMappedValidatedResponsesData(i){}},{key:"getMappedSuggestedResponsesData",value:function getMappedSuggestedResponsesData(i){}},{key:"getAriaLiveMessage",value:function getAriaLiveMessage(i){}},{key:"getSuggestedResponses",value:function getSuggestedResponses(){var i,u,l,p,h=this.model;if(!this.canValidateResponse())return{};var g=this.question;return(l=g.valid_responses||d.default.getNested(g,"validation.valid_responses"))?(p=d.default.first(l))&&(i={value:p}):((u=h.getScorer()).suggestedResponse&&(i=u.suggestedResponse()),!i&&g.validation&&g.validation.valid_response&&((i=g.validation.valid_response).value||(i={value:i}))),i||{}}},{key:"getActivityShowDistractorRationale",value:function getActivityShowDistractorRationale(){var i=this.activity.get("show_distractor_rationale");return d.default.isObject(i)?(0,h.getShowDistractorRationale)({perQuestion:i.per_question,perResponse:i.per_response}):(0,h.getShowDistractorRationale)(i)}},{key:"getResponseLevelDistractorRationale",value:function getResponseLevelDistractorRationale(){var i=this.questionFacade;return i&&i.mapValidationMetadata("distractor_rationale_response_level")||null}},{key:"updateFeedbackAttemptsCount",value:function updateFeedbackAttemptsCount(i){this.model.updateFeedbackAttemptsCount(i)}},{key:"feedbackAttemptsCount",get:function get(){var i=this.model.get("response");return i&&i.feedbackAttemptsCount||0}},{key:"feedbackAttemptsLimit",get:function get(){if(d.default.isUndefined(this.data.feedbackAttempts)){var i=this.question.feedback_attempts||0;d.default.isString(i)&&(i="unlimited"===i.toLowerCase()?1/0:parseInt(i,10)),this.data.feedbackAttempts=i||1/0}return this.data.feedbackAttempts}},{key:"canCheckAnswer",get:function get(){var i=this.question,u=!!this.canValidateResponse();return!this.isReviewState&&i.instant_feedback&&!i.validation_group&&u}},{key:"canShowCorrectAnswers",get:function get(){if(d.default.isUndefined(this.data.canShowCorrectAnswers)){var i=this.activity.get("showCorrectAnswers"),u=this.canValidateResponse(),l=this.isReviewState;if(d.default.isBoolean(i))return i;this.data.canShowCorrectAnswers=!!(d.default.isUndefined(i)&&l&&u)}return this.data.canShowCorrectAnswers}},{key:"validationState",get:function get(){var i=this.isReviewState,u=this.canShowGlobalValidationUI,l=this.VALIDATION_STATES,p=l.CORRECT,h=l.INCORRECT;if(i&&u){var g=this.isResponseValid();if(d.default.isBoolean(g))return g?p:h}return null}},{key:"validationStemNumeration",get:function get(){var i=this.data;if(d.default.isUndefined(i.validationStemNumeration)){var u=this.question.validation_stem_numeration||d.default.getNested(this.question,"ui_style.validation_stem_numeration");d.default.contains(["number","lower-alpha","upper-alpha"],u)||(u="number"),i.validationStemNumeration=u}return i.validationStemNumeration}},{key:"canShowGlobalValidationUI",get:function get(){if(!this.canValidateResponse())return!1;var i=this.question,u=this.scoringType;if(u){var l=function(i){var u=!d.default.contains(["formula","formulaV2"],i.type);return"mcq"===i.type?!!i.multiple_responses:u}(i);return"exactMatch"===u&&l}return!this.model.getPartialScoring()}},{key:"scoringType",get:function get(){return(this.question.validation||{}).scoring_type}},{key:"questionLevelDistractorRationale",get:function get(){return d.default.getNested(this.question,"metadata.distractor_rationale")||null}}]),ValidatableDataService}(p.default);g.prototype.EXPOSED_METHODS=p.default.prototype.EXPOSED_METHODS.concat(["getActivityShowDistractorRationale","getAriaLiveMessage","getMappedSuggestedResponsesData","getMappedValidatedResponsesData","getResponseLevelDistractorRationale","getSuggestedResponses","getValidatedResponses","updateFeedbackAttemptsCount"]);var v=g;u.default=v},72509:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d,p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(74854)),g=_interopRequireDefault(l(59371));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _defineProperty(i,u,l){return u in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i}var v=h.default.actionTypes,y={ariaGlobal:{},ariaLive:{},isShowingCorrectAnswers:null,responseLevelDistractorRationale:null,suggestedResponses:null,validatedEventRequestCount:0,validatedResponses:null,validationState:null},S=(_defineProperty(d={},v.SET_LEGACY_ATTRIBUTES,(function(i,u){var l={};return p.default.isObject(u.attributes)&&(l.__legacyAttributes=u.attributes),(0,p.default)({}).assign(i,l)})),_defineProperty(d,v.VALIDATABLE_CHECK_ANSWER,(function(i,u){var l=u.isResponseValid,d=u.responseLevelDistractorRationale,h=u.showDistractorRationale,g=u.canShowGlobalValidationUI,v=u.validatedResponses,S={responseLevelDistractorRationale:d,showDistractorRationale:h,validatedEventRequestCount:(i||y).validatedEventRequestCount+1,validatedResponses:v,validationState:g&&p.default.isBoolean(l)?l?"correct":"incorrect":null};return p.default.isBoolean(l)&&(0,p.default)(S).assign({ariaGlobal:{visible:!0,label:l?"correct":"incorrect"}}),S})),_defineProperty(d,v.VALIDATABLE_SHOW_SUGGESTED_ANSWERS,(function(i,u){return{suggestedResponses:u.suggestedResponses,isShowingCorrectAnswers:u.isShowingCorrectAnswers}})),_defineProperty(d,v.VALIDATABLE_CLEAR_VALIDATION_UI,(function(){return y})),_defineProperty(d,v.VALIDATABLE_INCREASE_FEEDBACK_ATTEMPT_COUNT,(function(i){return{feedbackAttemptsCount:i.feedbackAttemptsCount+1}})),_defineProperty(d,v.VALIDATABLE_UPDATE_ARIA_LIVE_DATA,(function(i,u){var l=u.message,d=u.mappedValidatedResponses,h=u.mappedSuggestedResponses,g=u.isShowingCorrectAnswers;return{ariaLive:{visible:!0,message:l,correct:p.default.filter(d,(function(i){return!0===i.validatedValue})),incorrect:p.default.filter(d,(function(i){return!1===i.validatedValue})),suggestedResponses:!!g&&h}}})),_defineProperty(d,v.VALIDATABLE_CLEAR_VALIDATION_ARIA_LIVE,(function(){return{ariaLive:{visible:!1}}})),d),E=(0,g.default)(S,y);u.default=E},46994:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(92797)),h=_interopRequireDefault(l(85727)),g=_interopRequireDefault(l(20171));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var v=function(){function MathService(i,u){!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,MathService),this.type=u,this.view=i,this.model=i.model}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(MathService,[{key:"getWidgetData",value:function getWidgetData(){var i=this.type;return"question"===i?this.model.get(i):this.model.attributes}},{key:"isMath",value:function isMath(){return!!d.default.getNested(this.getWidgetData(),"is_math")}},{key:"renderIfRequired",value:function renderIfRequired(i){var u=this;return this.isMath()?new Promise((function(l){u.mathquillRendering()?(u.renderMathquill(i),l(!0)):g.default&&(g.default.once(g.default.EVENT.RENDERED,(function(){return l(!0)})),g.default.render(i))})):Promise.resolve(!1)}},{key:"mathquillRendering",value:function mathquillRendering(){var i=this.model;if(this.isMath()){var u=i.activity.get("math_renderer");return u?"mathquill"===u:"mathquill"===this.getWidgetData().math_renderer}}},{key:"renderMathquill",value:function renderMathquill(i){var u=this,l=function(){var l=i||u.view.el,d=document.body;return d.contains(l)?l:d}();return this.mathquillRenderer||(this.mathquillRenderer=new p.default(h.default.isChemistry.call(this))),this.mathquillRenderer.render(l)}}]),MathService}();u.default=v},38891:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.SHOW_DISTRACTOR_RATIONALE_WHEN_INCORRECT=u.SHOW_DISTRACTOR_RATIONALE_WHEN_CORRECT=u.SHOW_DISTRACTOR_RATIONALE_NEVER=u.SHOW_DISTRACTOR_RATIONALE_ALWAYS=u.DEFAULT_DISTRACTOR_RATIONALE_ENABLED=u.DEFAULT_DISTRACTOR_RATIONALE_DISABLED=u.ALLOWED_PER_RESPONSE_VALUES=u.ALLOWED_PER_QUESTION_VALUES=void 0,u.getShowDistractorRationale=function getShowDistractorRationale(i){if(d.default.isObject(i)){var u=i.perQuestion,l=i.perResponse;return d.default.isUndefined(u)?u=R.perQuestion:isValidShowDistractorRationalePerQuestion(u)||(u=h),d.default.isUndefined(l)?l=R.perResponse:isValidShowDistractorRationalePerResponse(l)||(l=h),{perQuestion:u,perResponse:l}}if(!0===i)return R;return E},u.getVisibleResponseLevelDistractorRationale=function getVisibleResponseLevelDistractorRationale(i,u){if(!i||u===h)return[];if(u===p){var l=i.correct,g=i.incorrect;return l.concat(g).filter(isNonEmptyDistractorRationale)}return i[u].filter(isNonEmptyDistractorRationale);function isNonEmptyDistractorRationale(i){return d.default.isString(i.metadata)&&/\S/.test(i.metadata)}},u.isValidShowDistractorRationalePerQuestion=isValidShowDistractorRationalePerQuestion,u.isValidShowDistractorRationalePerResponse=isValidShowDistractorRationalePerResponse;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(73781));var p="always";u.SHOW_DISTRACTOR_RATIONALE_ALWAYS=p;var h="never";u.SHOW_DISTRACTOR_RATIONALE_NEVER=h;var g="correct";u.SHOW_DISTRACTOR_RATIONALE_WHEN_CORRECT=g;var v="incorrect";u.SHOW_DISTRACTOR_RATIONALE_WHEN_INCORRECT=v;var y=[p,h,g,v];u.ALLOWED_PER_QUESTION_VALUES=y;var S=[p,h];u.ALLOWED_PER_RESPONSE_VALUES=S;var E={perQuestion:h,perResponse:h};u.DEFAULT_DISTRACTOR_RATIONALE_DISABLED=E;var R={perQuestion:v,perResponse:p};function isValidShowDistractorRationalePerQuestion(i){return d.default.isString(i)&&d.default.contains(y,i)}function isValidShowDistractorRationalePerResponse(i){return d.default.isString(i)&&d.default.contains(S,i)}u.DEFAULT_DISTRACTOR_RATIONALE_ENABLED=R},59371:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=function _default(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l="";function mergingReducer(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,h=arguments.length>1?arguments[1]:void 0,g=h.type,v=h.payload;if("UPDATE_ALL"===g)return v.data[l];var y=i[g];if(y){var S=y(p,v);return d.default.extend({},p,S)}return p}return mergingReducer.setName=function(i){return l=i},mergingReducer};var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(73781))},42740:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,u.isUnloadInProgress=function isUnloadInProgress(){if(d.default.isEmpty(h))return!1;return d.default.some(h,(function(i){return!!i.unloadInProgress}))},u.reset=function reset(){for(;h.length;){h.pop().reset()}};var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(16104));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var h=[];var g=function(){function UnloadHandler(){var i=this;!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,UnloadHandler),function _defineProperty(i,u,l){return u in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i}(this,"onBeforeUnload",(function(u){if(i.unloadInProgress=!0,setTimeout((function(){setTimeout((function(){i.unloadInProgress=!1}),1e3)}),1),d.default.isFunction(i.customUnload)){var l=i.customUnload();l&&(u.returnValue=l)}else i.safeToUnload&&!i.safeToUnload()&&(u.returnValue=i.i18n.labels.onbeforeunload)}))}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(UnloadHandler,[{key:"init",value:function init(i){this.i18n=i.i18n,this.safeToUnload=i.safeToUnload,p.default.isChromeApp||(this.customUnload=i.customUnload),window.addEventListener("beforeunload",this.onBeforeUnload),p.default.isIOS&&window.addEventListener("pagehide",this.onBeforeUnload),h.push(this)}},{key:"reset",value:function reset(){window.removeEventListener("beforeunload",this.onBeforeUnload),p.default.isIOS&&window.removeEventListener("pagehide",this.onBeforeUnload);var i=h.indexOf(this);i>=0&&h.splice(i,1)}}]),UnloadHandler}();u.default=g},9966:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(34651)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(20712));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var g="[data-lrn-access-review-source]",v="data-lrn-access-review-source";function elementHasClass(i,u){return i.get(0)instanceof SVGElement?function svgElementHasClass(i,u){return h.default.polygonHasClass(i.get(0),u)}(i,u):i.hasClass(u)}function findElement(i,u){return i.get(0).getElementsByClassName?i.find(u):(0,d.default)(i.get(0).querySelectorAll(".lrn-accessibility-label"))}var y={getResponseData:function getResponseData(i,u){var l,d,h={responseIndex:void 0,responseText:void 0,responseStatus:void 0},g={VALID:"lrn_valid",CORRECT:"lrn_correct",INCORRECT:"lrn_incorrect",UNATTEMPTED:"lrn_not_attempted"},v="."+p.default.values(g).join(",."),y=findElement(i,".lrn_responseIndex");return y.length&&(h.responseIndex=y.text()),y.remove(),(d=u?u(i):this.getSourceContent(i))&&(h.responseText=d),(l=findElement(i,v)).length||(l=i),elementHasClass(l,g.CORRECT)?h.responseStatus="correct":elementHasClass(l,g.INCORRECT)?h.responseStatus="incorrect":elementHasClass(l,g.UNATTEMPTED)?h.responseStatus="no response given":elementHasClass(l,g.VALID)?h.responseStatus="no response given - missed":h.responseStatus="no response given",h},hasAttr:function hasAttr(i,u){var l=i.attr(u);return void 0!==l&&!1!==l},getSourceElement:function getSourceElement(i){var u,l=[".lrn_draggable"],d=findElement(i,g);if(this.hasAttr(i,v)&&(d=i),!d.length)for(u=0;u<l.length&&!(d=findElement(i,l[u])).length;u++);return d.length?d:i},getSourceContent:function getSourceContent(i){var u,l="",p=this;return findElement(i,"select").remove(),i.is("input")?this.getInputContent(i):findElement(i,'input:not([type="checkbox"],[type="radio"])').length?(findElement(i,"input").each((function(){l+=p.getInputContent((0,d.default)(this))})),l):null!==(u=findElement(i,".lrn-spokenmath"))&&void 0!==u&&u.length?findElement(i,".lrn-spokenmath").text():i.text()},getInputContent:function getInputContent(i){return i.is(":radio")||i.is(":checkbox")?i.prop("checked")?"selected":"":i.val()},setReviewAriaLabel:function setReviewAriaLabel(i){var u=i.$el,l=i.ariaLabel,h=i.keepChildrenVisible,g=i.onLabelClick,v=(0,d.default)('<span class="lrn-accessibility-label"></span>');u.attr("aria-label")&&u.attr("aria-label-default",u.attr("aria-label")),v.text(l),h||findElement(u,'> *:not([type="checkbox"]):not([type="radio"])').attr("aria-hidden",!0),u.attr("aria-label",l).append(v),p.default.isFunction(g)&&v.on("click",(function(i){i.stopPropagation(),g()}))},unsetReviewAriaLabel:function unsetReviewAriaLabel(i){if(i.length){var u=i.attr("aria-label-default");if(u)i.attr("aria-label",u);else{var l=i.attr("aria-label-static");l?i.attr("aria-label",l):i.removeAttr("aria-label")}var d=i.get(0);d.removeAttribute("aria-label-default"),p.default.each(d.children,(function(i){return i.removeAttribute("aria-hidden")})),findElement(i,".lrn-accessibility-label").remove()}}};u.default=y},10879:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(70640));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var h=function AccessibilityBaseHelper(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.view=i,this.initialize(i,u)};h.extend=p.default.View.extend,d.default.extend(h.prototype,{initialize:function initialize(i){this.$el=this.view.$el},apply:function apply(){},restore:function restore(){}});var g=h;u.default=g},31467:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;_interopRequireDefault(l(73781)),_interopRequireDefault(l(70640)),_interopRequireDefault(l(34651));var d=_interopRequireDefault(l(10879)),p=_interopRequireDefault(l(9966));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var h=d.default.extend({SELECTORS:{RESPONSE_WRAPPER:".lrn-response-validate-wrapper"},initialize:function initialize(){this.$responseWrapper=this.view.$(this.SELECTORS.RESPONSE_WRAPPER)},apply:function apply(){p.default.setReviewAriaLabel({$el:this.$responseWrapper,ariaLabel:this.getGlobalWrapperAriaLabel(this.$responseWrapper),keepChildrenVisible:!0})},restore:function restore(){p.default.unsetReviewAriaLabel(this.$responseWrapper)},getGlobalWrapperAriaLabel:function getGlobalWrapperAriaLabel(i){var u="lrn_correct",l="lrn_incorrect",d="response - correct",p="response - incorrect";return i.hasClass(u)?d:i.hasClass(l)?p:""}});u.default=h},50971:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=(_interopRequireDefault(l(70640)),_interopRequireDefault(l(34651))),h=_interopRequireDefault(l(10879)),g=_interopRequireDefault(l(9966));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var v=h.default.extend({SELECTORS:{ACCESSIBILITY_DEST:"[data-lrn-access-review-dest]"},initialize:function initialize(i,u){this.getTextFn=!!d.default.isFunction(u.getSourceText)&&u.getSourceText},apply:function apply(){this.setAriaLabelsOnDest()},restore:function restore(){this.view.$(this.SELECTORS.ACCESSIBILITY_DEST).each((function(){g.default.unsetReviewAriaLabel((0,p.default)(this))}))},setAriaLabelsOnDest:function setAriaLabelsOnDest(){var i=this;this.view.$(this.SELECTORS.ACCESSIBILITY_DEST).each((function(){var u=(0,p.default)(this),l=g.default.getSourceElement(u);g.default.setReviewAriaLabel({$el:u,ariaLabel:i.getReviewAriaLabel(l,i.getTextFn),onLabelClick:function onLabelClick(){var l,d,p,h=[".lrn_draggable","input","select"];for(p=0;p<h.length&&(l=h[p],!(d=u.find(l)).length);p++);u.trigger("click"),d&&d.length?d.is("input")||d.is("select")?d.focus():d.trigger("click"):i.view.clearValidationUI()}})}))},getReviewAriaLabel:function getReviewAriaLabel(i,u){i=i.clone();var l=g.default.getResponseData(i,u);return d.default.toArray(l).filter((function(i){return i})).join(" - ")}});u.default=v},15192:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=(_interopRequireDefault(l(70640)),_interopRequireDefault(l(34651))),h=_interopRequireDefault(l(10879)),g=_interopRequireDefault(l(9966));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var v=h.default.extend({SELECTORS:{ACCESSIBILITY_DEST:"[data-lrn-access-review-dest]"},initialize:function initialize(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getTextFn=!!d.default.isFunction(i.getSourceText)&&i.getSourceText,this.ariaLiveFallbackData={overallCorrect:void 0,groups:[{correct:[],incorrect:[],expected:[]}]},this.validationReaderTimeout=-1,this.validationClearTimeout=-1,h.default.prototype.initialize.call(this)},apply:function apply(){this.updateAriaLiveRegion()},restore:function restore(){clearTimeout(this.validationReaderTimeout),clearTimeout(this.validationClearTimeout),this.$el.find(".lrn-accessibility-arialive").text("")},updateAriaLiveRegion:function updateAriaLiveRegion(i){var u=this,l=this.$el.find(".lrn-accessibility-arialive"),p=(i=i||this.setupDefaultData()).overallCorrect?i.overallCorrect+". ":"";d.default.each(i.groups,function(i){p+=this._buildAnswersString(i)}.bind(this)),l.text(""),clearTimeout(this.validationReaderTimeout),clearTimeout(this.validationClearTimeout),this.validationReaderTimeout=setTimeout((function(){l.text(p),u.validationClearTimeout=setTimeout((function(){l.text("")}),200)}),200)},_buildAnswersString:function _buildAnswersString(i){var u="",l=0===i.correct.length&&0===i.incorrect.length&&0===i.expected.length;return!l&&i.index&&(u+=" Response group "+i.index+": "),!l&&i.label&&(u+=" "+i.label+". "),i.groupCorrect&&(u+=" "+i.groupCorrect+". "),u+=this._buildStringByAnswerStatus("correct",i.correct)+this._buildStringByAnswerStatus("incorrect",i.incorrect)+this._buildStringByAnswerStatus("expected",i.expected)},_buildStringByAnswerStatus:function _buildStringByAnswerStatus(i,u){var l,d=u.constructor===Array,p=d?u.length:1,h=d?u.join(", "):u;return d||u.length?(l=1===p?i+this._pluralizeAnswers(p):p+" "+i+this._pluralizeAnswers(p),h=h.length?": "+h:"",p?l+h+". ":""):""},_pluralizeAnswers:function _pluralizeAnswers(i){return 1===i?" answer":" answers"},setupDefaultData:function setupDefaultData(){var i,u,l,d,h=this,v=[],y=[],S=[];return this.view.$(this.SELECTORS.ACCESSIBILITY_DEST).each((function(){switch(l=(l=g.default.getSourceElement((0,p.default)(this))).clone(),i=g.default.getResponseData(l,h.getTextFn),u=i.responseText,i.responseStatus){case"correct":v.push(u);break;case"incorrect":y.push(u);break;case"no response given - missed":S.push(u)}})),d=this.ariaLiveFallbackData.groups[0],this.ariaLiveFallbackData.overallCorrect=this.$el.find(".lrn-response-validate-wrapper").attr("aria-label"),d.correct=v,d.incorrect=y,d.expected=S,this.ariaLiveFallbackData},convertAlphabeticalResponseToNumerical:function convertAlphabeticalResponseToNumerical(i,u,l){var d=String.fromCharCode(i+97),p=String.fromCharCode(i+65),h=i+1,g=function getResponseIndex(i){return u.find(".lrn_responseIndex:contains(".concat(i,")"))};return l&&"number"!==l?"lower-alpha"===l?g(d):"upper-alpha"===l?g(p):void 0:g(h)},generateRowBasedAriaGroups:function generateRowBasedAriaGroups(i,u){var l=u&&u.labelSelector||"",d=u&&u.correctAnswerSelector||".lrn_correctAnswerList",p=[],h={overallCorrect:this.$el.find(".lrn-response-validate-wrapper").attr("aria-label")},g=this.$el.find(d),v=this.view.displayLogic.validation_stem_numeration;return this.$el.find(i).each(function(i,u){this.addIndividualRowInformation(i,u,{labelSelector:l,$correctAnswers:g,stemNumeration:v,groups:p})}.bind(this)),h.groups=p,h},addIndividualRowInformation:function addIndividualRowInformation(i,u,l){var d,h,g,v,y,S;d=i,h=(S=(0,p.default)(u)).find(l.labelSelector).addBack(l.labelSelector).text(),g=S.find(".lrn_correct").addBack(".lrn_correct").find(".lrn_item").text(),v=S.find(".lrn_incorrect").addBack(".lrn_incorrect").find(".lrn_item").text(),y=this.convertAlphabeticalResponseToNumerical(i,l.$correctAnswers,l.stemNumeration).siblings(".lrn_responseText").text(),l.groups.push({index:d+1,label:h,correct:g,incorrect:v,expected:y})}});u.default=v},13171:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(73781));var p="data-lrn-mathjax-postprocessed",h=function isQEWidget(i){var u=["mathml_ckwidget","latex_ckwidget"];return d.default.some(i.parentNode.classList,(function(i){return u.indexOf(i)>-1}))},g=function removeMathJaxA11yFeatures(i){var u=i.querySelector(".MJX_Assistive_MathML");i.removeAttribute("data-mathml"),u&&u.parentNode.removeChild(u)},v={postProcessMathJaxV2Nodes:function postProcessMathJaxV2Nodes(i){var u=MathJax.Hub.getAllJax(i);d.default.each(u,(function(i){if(i){var u=function findFrameNodeFor(i){return document.getElementById(i.inputID+"-Frame")}(i);if(u&&!function isFrameNodeAlreadyPostProcessed(i){return i.getAttribute(p)||h(i)}(u)){var l=function getAuthoredAriaLabelNode(i){return function getARIALabelFromWrappingSpan(i){if("span"===i.parentNode.tagName.toLowerCase())return i.parentNode.getAttribute("aria-label")}(i)?i.parentNode:function getARIALabelFromDisplayBlockParent(i){if("div"===i.parentNode.tagName.toLowerCase()&&"MathJax_Display"===i.parentNode.className)return i.parentNode.parentNode.getAttribute("aria-label")}(i)?i.parentNode.parentNode:void 0}(u);l&&function placeAriaLabel(i,u){var l=u.getAttribute("aria-label"),d=document.createElement(u.tagName);g(i),u.removeAttribute("aria-label"),d.setAttribute("aria-label",l),d.setAttribute("role","math"),u.parentNode.insertBefore(d,u),d.appendChild(u)}(u,l),function removeTabIndex(i){i.removeAttribute("tabindex")}(u),function markPostProcessed(i){i.setAttribute(p,"true")}(u)}}}))},preProcessMathJaxV2Nodes:function preProcessMathJaxV2Nodes(){var i=document.querySelectorAll(".lrn math[alttext]");d.default.each(i,(function(i){if(i.parentNode){var u=document.createElement("span"),l=i.getAttribute("alttext");u.setAttribute("aria-label",l),i.parentNode.insertBefore(u,i),u.appendChild(i),i.removeAttribute("alttext")}}))},postProcessMathJaxV3Nodes:function postProcessMathJaxV3Nodes(){Array.from(document.querySelectorAll("span[aria-label]")).filter((function(i){return i.querySelector(":scope > mjx-container")})).forEach((function(i){return i.setAttribute("role","math")}))}};u.default=v},50581:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(21893)),h=_interopRequireDefault(l(7618)),g=_interopRequireDefault(l(1611));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var v,y,S="Questions API",E={CONSUMER:"dimension1",API_VERSION:"dimension2",REQUESTED_API_VERSION:"dimension3",QUESTION_TYPES:"dimension4",CONTEXT:"dimension5",TYPE:"dimension6",STATE:"dimension7",NUM_QUESTIONS_PER_ACT:"dimension8",CONSUMER_KEY:"dimension9",CONSUMER_PAGE_URL:"dimension10",ASSESS_LAYOUT:"dimension11",NO_ITEMS_PER_ACTIVITY:"dimension12",APPLICATION:"dimension13",ASSESS_API_VERSION:"dimension14",REQUESTED_ASSESS_API_VERSION:"dimension15",ITEMS_API_VERSION:"dimension16",REQUESTED_ITEMS_API_VERSION:"dimension17",QE_API_VERSION:"dimension18",REQUESTED_QE_API_VERSION:"dimension19",AUTHOR_API_VERSION:"dimension20",REQUESTED_AUTHOR_API_VERSION:"dimension21",REPORTS_API_VERSION:"dimension22",REQUESTED_REPORTS_API_VERSION:"dimension23",EVENTS_API_VERSION:"dimension24",REQUESTED_EVENTS_API_VERSION:"dimension25",DATA_API_VERSION:"dimension26",REQUESTED_DATA_API_VERSION:"dimension27",NUM_QUESTIONS:"dimension28",NUM_MATH_QUESTIONS:"dimension29",NUM_ITEMS:"dimension30",IS_EXISTING_SESSION:"dimension34"},R="metric1",T="metric2",O="(not set)",M=O,I=O,P=LearnosityApp.version||O,D=LearnosityApp.requestedApiVersion||O,N=O,q=O,L=O,V=O,U=O,B=0,H=0,z=0,Q={},G=!1,Y=!0;function setDimensions(){var i=O,u=O,l=O,p=B,g={},y=function getCleanUrl(){return window.location.hostname+window.location.pathname}(),R=O;d.default.isObject(v)&&(i=function extractQuestionTypes(){var i=O;if(d.default.has(v,"questions")&&v.questions.length){var u=d.default.uniq(d.default.compact(d.default.map(v.questions,(function(i){return i.type})))).sort();u.length&&(i=u.join(","))}return i}(),v.type&&(u=v.type),v.state&&(l=v.state),d.default.isBoolean(v.existing_session)&&(R="".concat(v.existing_session))),d.default.chain({CONSUMER:M,API_VERSION:P,REQUESTED_API_VERSION:D,QUESTION_TYPES:i,CONTEXT:U,TYPE:u,STATE:l,NUM_QUESTIONS_PER_ACT:p,CONSUMER_KEY:I,CONSUMER_PAGE_URL:y,NUM_QUESTIONS:B,NUM_MATH_QUESTIONS:H,ITEMS_API_VERSION:N,REQUESTED_ITEMS_API_VERSION:q,ASSESS_API_VERSION:L,REQUESTED_ASSESS_API_VERSION:V,IS_EXISTING_SESSION:R}).forEach((function(i,u){Y&&h.default.universalAnalyticsPush(["set",E[u],i]),g[u]=i})),push({application:S,dimensions:g}),z++}function setConsumerKey(i){I=i||O}function extractVersion(i,u){var l,p,h=O;switch(i){case"items":l=u.match(/Items API - (inline|assess) \((v\d+\.\d+\.\d+|\w+)\)/i),!d.default.isEmpty(l)&&d.default.isString(l[2])&&(h=l[2]);break;case"assess":p=u.match(/Assess API \((v\d+\.\d+\.\d+|\w+)\)/i),!d.default.isEmpty(p)&&d.default.isString(p[1])&&(h=p[1])}return h}function trackEvent(){var i={};G&&(z||setDimensions(),Y&&h.default.trackEvent.apply(null,arguments),arguments.length>=3?i={category:arguments[0],action:arguments[1],label:arguments[2],value:arguments[3],noninteraction:arguments[4]}:arguments.length>0&&d.default.isObject(arguments[0])&&(i=arguments[0]),push({application:S,eventData:i}))}function trackTimingStart(i,u,l){var d=i+":"+u;l=l||createTimestamp(),Q[d]||(Q[d]=[]),Q[d].push(l)}function trackTimingEnd(i,u,l,p,g){var v,y=i+":"+u,E=Q[y],R=l||createTimestamp(),T=i;return d.default.isString(p)&&(T=p+" "+i),E&&E.length>0&&(v=R-E.shift(),g||function trackUserTiming(){var i,u={};G&&(z||setDimensions(),Y&&h.default.trackTiming.apply(null,arguments),arguments.length>=3&&(u={category:arguments[0],variable:arguments[1],value:arguments[2]},d.default.isString(arguments[3])&&(i=arguments[3])),arguments.length>0&&d.default.isObject(arguments[0])&&(u=arguments[0]),push({application:i||S,timing:u}))}(T,u,v,p),E.length<=0&&delete Q[y]),{category:i,event:u,duration:v}}function createTimestamp(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}function push(i){var u=[],l=[];if(i){try{var p=O;if(i.application&&(p=i.application),d.default.isObject(i.dimensions))try{g.default.setDataLayerObject("dimensions",i.dimensions)}catch(i){l.push(i),u.push("dimensions")}if(d.default.isObject(i.metrics))try{g.default.setDataLayerObject("metrics",i.metrics)}catch(i){l.push(i),u.push("metrics")}if(i.pageview||"track_pageview"===i.event)try{g.default.trackPageview(i.pageview,p)}catch(i){l.push(i),u.push("pageview")}if(d.default.isObject(i.eventData))try{g.default.trackEvent(i.eventData,p)}catch(i){l.push(i),u.push("eventData")}if(d.default.isObject(i.timing))try{if(d.default.isString(i.event))switch(i.event){case"timing_start":i.timing&&i.timing.category&&i.timing.variable&&trackTimingStart(i.timing.category,i.timing.variable,i.timing.timestamp);break;case"timing_end":i.timing&&i.timing.category&&i.timing.variable&&trackTimingEnd(i.timing.category,i.timing.variable,i.timing.timestamp,p);break;default:g.default.trackTiming(i.timing,p)}else g.default.trackTiming(i.timing,p)}catch(i){l.push(i),u.push("timing")}if(d.default.isObject(i.custom))try{g.default.trackCustom(i.custom,p)}catch(i){l.push(i),u.push("custom")}if(d.default.isArray(i))try{i.forEach((function(i){push(i)}))}catch(i){l.push(i)}}catch(i){console.error(i)}d.default.isEmpty(u)||u.forEach(g.default.resetDataLayerObject),d.default.isEmpty(l)||(console.error("LrnAnalytics push error: "+l.join(" - ")),u.forEach(g.default.resetDataLayerObject))}}y=d.default.once((function(i){h.default.init(i),G=!0,d.default.isObject(i)&&d.default.isEmpty(i.classicProperty)&&(Y=!1)}));var X={init:function init(i){i,y(i)},setActivity:function setActivity(i){if((v=i||{}).questions){B=v.questions.length;var u=d.default.countBy(v.questions,(function(i){return i.is_math?"math":"not_math"}));H=u.math?u.math:0}},setConsumer:function setConsumer(i){M=i&&i.get("name")?i.get("name"):M,I=i&&i.get("key")?i.get("key"):I},setConsumerKey:setConsumerKey,setContext:function setContext(i){N=extractVersion("items",U=i||U),L=extractVersion("assess",U)},setFullContext:function setFullContext(i){d.default.isObject(i)&&(N=i.itemsVersion||O,q=i.itemsRequested||O,L=i.assessVersion||O,V=i.assessRequested||O)},trackPageview:function trackPageview(){if(G){var i,u,l,g={},y=h.default.analyticsPush;setDimensions(),Y&&(y(["lrn._setDomainName",p.default.domain]),y(["lrn._setCustomVar",1,M,P]),v&&((i=v.questions)&&(u=[],l=i.length,d.default.each(i,(function(i){i.type&&u.push(i.type)})),y(["lrn._setCustomVar",2,""+l,""+d.default.unique(u).sort()]),y(["lrn._setCustomVar",3,v.state,v.type])),y(["lrn._setCustomVar",4,M,v.state+", "+v.type])),y(["lrn._setCustomVar",5,P,M]),y(["lrn._trackPageview"]),g[R]=B,g[T]=H,h.default.trackPageview(g)),push({application:S,pageview:{url:"/"+window.location.hostname+"/"+M,title:M}})}},trackEvent:trackEvent,trackError:function trackError(i,u,l,p){d.default.isString(p)&&setConsumerKey(p),trackEvent({category:"LearnosityApp Error",action:i+": "+u,label:""+l,value:1,noninteraction:!0})},trackTimingStart:trackTimingStart,trackTimingEnd:trackTimingEnd,push:push};p.default&&p.default.analytics&&!0===p.default.analytics.disable&&d.default.forEach(d.default.keys(X),(function(i){X[i]=function(){}}));var ee=X;u.default=ee},1611:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;(function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}})(l(21893));var d="lrnDataLayer";function _baseTypeCheck(i,u){return("Object"===i||"String"===i||"Array"===i||"Number"===i)&&Object.prototype.toString.call(u)==="[object "+i+"]"}function _isObject(i){return _baseTypeCheck("Object",i)}function _isString(i){return _baseTypeCheck("String",i)}function hasDataLayer(){return!!window[d]}function push(i,u){window.lrnAnalytics=window.lrnAnalytics||[],hasDataLayer()&&_isObject(i)&&(i.isInternal=!0,_isString(i.application)&&!i["dimensions.APPLICATION"]&&(i["dimensions.APPLICATION"]=i.application),window.lrnAnalytics.push(i),u&&resetDataLayerPush(i))}function setDataLayerObject(i,u){var l,d={};if(hasDataLayer()&&_isString(i)&&_isObject(u))for(l in u)u[l]&&(d[i+"."+l]=u[l]);d.event="set_"+i,push(d,!1)}function resetDataLayerPush(i){var u,l={};if(hasDataLayer()&&_isObject(i)){for(u in i)void 0!==i[u]&&(l[u]=void 0);l.event="reset_data",push(l)}}function resetDataLayerObject(i){var u={};hasDataLayer()&&_isString(i)&&(u.event="reset_"+i,u[i]=void 0,push(u))}var p={init:function init(i,u,l){_isObject(i)||(i={}),_isString(i.gtmDataLayer)&&(d=i.gtmDataLayer),_isString(i.gtmContainerID)&&i.gtmContainerID,_isObject(u)&&u,_isObject(l)&&l},push:push,setDataLayerObject:setDataLayerObject,trackPageview:function trackPageview(i,u){var l={};hasDataLayer()&&(_isObject(i)&&setDataLayerObject("pageview",i),l.event="track_pageview",l.application=u,push(l,!0),resetDataLayerObject("pageview"))},trackEvent:function trackEvent(i,u){var l={},d={};hasDataLayer()&&(i&&_isObject(i)&&(l=i),d.event="track_event",d.application=u,d.eventData=l,push(d,!0))},trackTiming:function trackTiming(i,u){var l,d={};hasDataLayer()&&(_isObject(i)&&(l=i),_isObject(l)&&(d.event="track_timing",d.application=u,d.timing=l,push(d,!0)))},trackCustom:function trackCustom(i,u){hasDataLayer()&&_isObject(i)&&(_isString(i.event)||(i.event="set_custom"),push(i,!0))},resetDataLayerObject:resetDataLayerObject,resetDataLayerPush:resetDataLayerPush};u.default=p},7618:function(i,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l="",d="lrnUA",p="lrn_ga";function _arrayArgs(){return Array.prototype.slice.call(arguments)}function _baseTypeCheck(i,u){return("Object"===i||"String"===i||"Array"===i||"Number"===i)&&Object.prototype.toString.call(u)==="[object "+i+"]"}function _isObject(i){return _baseTypeCheck("Object",i)}function _isArray(i){return _baseTypeCheck("Array",i)}function _isString(i){return _baseTypeCheck("String",i)}function loadUA(){l&&!window.lrn_ga&&function(i,u,l,d,p,h,g){i.GoogleAnalyticsObject=p,i[p]=i[p]||function(){(i[p].q=i[p].q||[]).push(arguments)},i[p].l=1*new Date,h=u.createElement(l),g=u.getElementsByTagName(l)[0],h.async=1,h.src="https://www.google-analytics.com/analytics.js",g.parentNode.insertBefore(h,g)}(window,document,"script",0,p)}function universalAnalyticsPush(i){l&&(loadUA(),_isArray(i)&&(i[0]=d+"."+i[0],window.lrn_ga.apply(null,i)))}function analyticsPush(i){l&&(!function loadGaq(){if(l&&!window._gaq){window._gaq=[];var i=document.createElement("script");i.async=!0,i.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(i,u),analyticsPush(["lrn._setAccount",l])}}(),_isArray(i)&&window._gaq.push(i))}var h={init:function init(i){var u={};_isObject(i)||(i={}),i.classicProperty&&_isString(i.classicProperty)&&-1===i.classicProperty.indexOf("{:")&&(l=i.classicProperty),l&&(u.name=function setTracker(i){return _isString(i)&&i.length&&(d=i),"."===d.slice(-1)&&(d=d.slice(0,d.length-1)),d}(i.tracker),u.cookieDomain=window.location.hostname,function _isNumber(i){return _baseTypeCheck("Number",i)}(i.siteSpeedSampleRate)&&(u.siteSpeedSampleRate=i.siteSpeedSampleRate),loadUA(),window.lrn_ga("create",l,u))},trackEvent:function trackEvent(){if(l){var i,u=_arrayArgs.apply(null,arguments);1===u.length&&_isObject(u[0])&&(i=u[0],u[0]=i.category,u[1]=i.action,u[2]=i.label,u[3]=i.value,u[4]=i.noninteraction),u[4]={nonInteraction:!!u[4]},universalAnalyticsPush(["send","event"].concat(u))}},trackTiming:function trackTiming(){if(l){var i,u=_arrayArgs.apply(null,arguments);1===u.length&&_isObject(u[0])&&(i=u[0],u[0]=i.timingCategory,u[1]=i.timingVar,u[2]=i.timingValue,u[3]=i.timingLabel),u[2]>0&&universalAnalyticsPush(["send","timing"].concat(u))}},trackPageview:function trackPageview(){if(l){var i=["send","pageview"];arguments.length&&(i=i.concat(_arrayArgs.apply(null,arguments))),universalAnalyticsPush(i)}},analyticsPush:analyticsPush,universalAnalyticsPush:universalAnalyticsPush};u.default=h},666:function(i,u){"use strict";function _isString(i){return"[object String]"===Object.prototype.toString.call(i)}function isValidConfig(i){return _isString(i)&&i.length>0&&-1===i.indexOf("{:")}function loadGTM(i,u){!window[u]&&i&&u&&function(i,u,l,d,p){i[d]=i[d]||[],i[d].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var h=u.getElementsByTagName(l)[0],g=u.createElement(l),v="dataLayer"!==d?"&l="+d:"";g.async=!0,g.src="https://www.googletagmanager.com/gtm.js?id="+p+v,h.parentNode.insertBefore(g,h)}(window,document,"script",u,i)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l={init:function init(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=i.instance,l=i.config,d=void 0===l?{}:l,p=isValidConfig(i.gtmContainerID)?i.gtmContainerID:"",h=isValidConfig(i.gtmDataLayer)?i.gtmDataLayer:"";window.lrnAnalytics=window.lrnAnalytics||[],_isString(i.app)&&window.lrnAnalytics.push({application:i.app,event:"app_init",instance:u,gtmContainerID:p,dataLayerVariable:h,config:d}),i.disableGTM||loadGTM(p,h)}};u.default=l},27081:function(i,u){"use strict";function isChrome(){return navigator.userAgent.includes("Chrome")}function isEdge(){return navigator.userAgent.includes("Edg")}function isFirefox(){return navigator.userAgent.includes("Firefox")}Object.defineProperty(u,"__esModule",{value:!0}),u.isChrome=isChrome,u.isEdge=isEdge,u.isFirefox=isFirefox,u.isSafari=function isSafari(){return navigator.userAgent.includes("Safari")&&!isFirefox()&&!isChrome()&&!isEdge()}},93393:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(58716));var p={loadClientCSS:function loadClientCSS(i){var u=d.default.isExternalURL(i);u?d.default.containsURLScheme(i)||(i=d.default.DEFAULT_URL_SCHEME+i):i="/stylesheets/css/clients/"+i,LearnosityApp._internal.loadCss(i,u)}};u.default=p},55536:function(i,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.triggerEvent=void 0;u.triggerEvent=function triggerEvent(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u={detail:i};try{var l=new CustomEvent("learnosity",u);document.dispatchEvent(l)}catch(u){var d=document.createEvent("CustomEvent");d.initCustomEvent("learnosity",!1,!1,i),document.dispatchEvent(d)}}},13064:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=(_interopRequireDefault(l(34651)),_interopRequireDefault(l(33767))),h=_interopRequireDefault(l(87361));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}function _defineProperty(i,u,l){return u in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i}l(55689);var g=50,v=0,y=0,S=2,E=70,R=30,T=".lrn_widget",O={STIMULUS:'[data-lrn-widget-component="stimulus"]',INTERACTION:'[data-lrn-widget-component="interaction"]'},M=document;var I=function(){function WidgetLayout(i,u){var l=this;!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,WidgetLayout),_defineProperty(this,"_onOverviewSizeChange",d.default.debounce((function(){var i=l.mode,u=l.$elements,d=l.grid,p=u.$wrapper.width()*d.interaction.width/100<400,h=!p&&"stack"===i;p&&"split"===i?l._setLayoutMode("stack"):h&&l._setLayoutMode("split")}),500)),_defineProperty(this,"onRemove",(function(){M.unbindLeave(l.selector),l.resizeSensor.detach(l._onOverviewSizeChange)})),this.view=i,u&&(this.selector='[id="'.concat(i.model.get("response_id"),'"]'),this.widgetLayout=function invalidateWidgetLayout(i){var u=[];return d.default.each(i.elements,(function(i){var l=i.type;d.default.isString(l)&&l.length&&!d.default.findWhere(u,{type:l})&&u.push(i)})),d.default.each(["stimulus","interaction"],(function(i){d.default.findWhere(u,{type:i})||u.push({type:i})})),i.elements=u,i}(d.default.clone(u)),i.render=d.default.wrap(i.render,(function(u){return u.call(i),l.initialized||(l.initialized=!0,l._prepare(),l._canApplyGridLayout()&&l._applyGridLayout()),i})))}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(WidgetLayout,[{key:"getLayoutElements",value:function getLayoutElements(){return this.widgetLayout.elements}},{key:"_prepare",value:function _prepare(){var i=this.view,u=T,l=O,d=i.$el.closest(u),p=d.find(l.STIMULUS),h=d.find(l.INTERACTION);this.$elements={$wrapper:d,$components:{stimulus:p,interaction:h}}}},{key:"_canApplyGridLayout",value:function _canApplyGridLayout(){var i=this.widgetLayout,u=this.$elements.$components,l=u.stimulus,p=u.interaction;return!!(i&&d.default.isArray(i.elements)&&l.length&&p.length)}},{key:"_applyGridLayout",value:function _applyGridLayout(){var i=this,u=this.view,l=this.selector;this.resizeSensor=(0,h.default)(u.el,(function(){return new p.default(u.el,i._onOverviewSizeChange)})),this._generateLayoutGridData(),this._setGrid(),this._setLayoutMode("split"),this._onOverviewSizeChange(),M.leave(l,this.onRemove)}},{key:"_generateLayoutGridData",value:function _generateLayoutGridData(){var i={},u=this.widgetLayout.elements,l=u.length;d.default.each(u,(function(u,p){return i[u.type]=function getElementLayoutData(i){var u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=g,p=E,h=R,T=v,O=y,M=S,I=i.width;d.default.isNumber(I)?I<h?I=h:I>p&&(I=p):I=l;var P=i.padding_left;d.default.isNumber(P)||(P=T),P*=I/100;var D=i.padding_right;return d.default.isNumber(D)||(D=u?M:O),{width:I,paddingLeft:P,paddingRight:D*=I/100}}(u,p===l-1)})),this.grid=i}},{key:"_setGrid",value:function _setGrid(){var i=this.$elements,u=this.widgetLayout,l=this.grid,p=i.$components;i.$wrapper.addClass("clearfix"),d.default.each(u.elements,(function(i){var u=i.type,d=p[u],h=l[u],g=h.width,v=h.paddingLeft,y=h.paddingRight;d.css({width:"".concat(g,"%"),paddingLeft:"".concat(v,"%"),paddingRight:"".concat(y,"%"),float:"left"})}))}},{key:"_unsetGrid",value:function _unsetGrid(){var i=this.$elements,u=this.widgetLayout,l=i.$components,p=i.$wrapper;p.removeClass("clearfix"),d.default.each(u.elements,(function(i){var u=i.type;l[u].css({width:"",paddingLeft:"",paddingRight:"",float:""})}))}},{key:"_setLayoutMode",value:function _setLayoutMode(i){this.mode=i,"split"===i?this._setGrid():"stack"===i&&this._unsetGrid()}}]),WidgetLayout}(),P=I;u.default=P},38018:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d,p=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(70640));d=p.default.View,p.default.View=function(i){this.options=i||{},d.apply(this,arguments),this.delegateEvents()},p.default.View.prototype=d.prototype,p.default.View.extend=d.extend;var h=p.default;u.default=h},79896:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(73781));function _typeof(i){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(i)}function pad(i){var u="0000";return(u+i).slice(-u.length)}function getLength(i){return null==i?void 0:i.length}d.default.mixin({getNested:function getNested(i,u){if(d.default.isObject(i)){var l=u.match(/(.+?)\.(.*)/);return l?this.getNested(i[l[1]],l[2]):i[u]}},cancellableThrottle:function cancellableThrottle(i,u,l){var d,p,h,g,v=u,y=0,S=0;if("function"!=typeof i)throw new TypeError("Expected a function");function invokeFunc(u){var l=d,g=p;return d=p=void 0,S=u,h=i.apply(g,l)}function leadingEdge(i){return S=i,g=setTimeout(timerExpired,u),l?invokeFunc(i):h}function shouldInvoke(i){var l=i-y;return!y||l>=u||l<0||i-S>=v}function timerExpired(){var i=Date.now();if(shouldInvoke(i))return trailingEdge(i);g=setTimeout(timerExpired,function remainingWait(i){var l=i-S,d=u-(i-y);return Math.min(d,v-l)}(i))}function trailingEdge(i){return clearTimeout(g),g=void 0,d?invokeFunc(i):(d=p=void 0,h)}function throttled(){var i=Date.now(),l=shouldInvoke(i);return d=arguments,p=this,y=i,l?void 0===g?leadingEdge(y):(clearTimeout(g),g=setTimeout(timerExpired,u),invokeFunc(y)):(void 0===g&&(g=setTimeout(timerExpired,u)),h)}return throttled.cancel=function cancel(){void 0!==g&&clearTimeout(g),y=S=0,d=p=g=void 0},throttled.flush=function flush(){return void 0===g?h:trailingEdge(Date.now())},throttled},deepClone:function deepClone(i){if(!i||"object"!==_typeof(i))return i;if(d.default.isString(i))return String.prototype.slice.call(i);if(d.default.isDate(i))return new Date(i.valueOf());if(d.default.isFunction(i.clone))return i.clone();var u,l;if(d.default.isArray(i))u=Array.prototype.slice.call(i);else{if(i.constructor!=={}.constructor)return i;u={}}for(l in i)i.hasOwnProperty(l)&&(u[l]=d.default.deepClone(i[l]));return u},deepExtend:function deepExtend(){var i,u,l,p,h,g,v=arguments[0]||{},y=1,S=getLength(arguments);if("object"===_typeof(v)||d.default.isFunction(v)||(v={}),1===S)return v;for(;y<S;y++)if(null!=(h=arguments[y]))for(p in h)if(h.hasOwnProperty(p)){if(i=v[p],v===(l=h[p]))continue;l&&((u=d.default.isArray(l))||d.default.isObject(l)&&!d.default.isFunction(l))?(u?(u=!1,g=[]):g=i&&d.default.isObject(i)?i:{},v[p]=d.default.deepExtend(g,l)):void 0!==l&&(v[p]=l)}return v},deepSet:function deepSet(i,u,l){var p=u.split("."),h=/[\[-\]]/g,g=/\[[0-9]+\]/,v=/\[*\]/,y=/\[[*]\]|\[[0-9]+\]/g;if(d.default.isArray(i)){var S=p.shift().match(y),E=S.shift(),R=!!E.match(g),T=!!E.match(v),O=Number(E.replace(h,""));if(R&&d.default.isUndefined(i[O]))return;d.default.isEmpty(S)||p.unshift(S.join("")),R?d.default.isEmpty(p)?i[O]=l(i[O]):d.default.deepSet(i[O],p.join("."),l):T&&(d.default.isEmpty(p)?i.forEach((function(u,p){d.default.deepSet(i,"[".concat(p,"]"),l)})):i.forEach((function(i){d.default.deepSet(i,p.join("."),l)})))}else if(d.default.isPlainObject(i)){for(;p.length>1;){var M=p.shift();if(!!M.match(y)){var I=M.match(y).join(""),P=M.replace(I,"");return p.unshift(I),void d.default.deepSet(i[P],p.join("."),l)}var D=i[M];d.default.isUndefined(D)||(i=D)}if(d.default.isPlainObject(i)){var N=p.shift();if(!!N.match(y)){var q=N.match(y).join(""),L=N.replace(q,"");d.default.deepSet(i[L],q,l)}else if(d.default.has(i,N)){var V=i[N];i[N]=l(V)}}}},isPlainObject:function isPlainObject(i){return"[object Object]"===Object.prototype.toString.call(i)},getDayOfYear:function getDayOfYear(i){var u=new Date(i.getFullYear(),0,1);return Math.ceil((new Date(i)-u)/864e5)},getISOString:function getISOString(){var i=new Date;return Date.prototype.toISOString?i.toISOString():i.getUTCFullYear()+"-"+pad(i.getUTCMonth()+1)+"-"+pad(i.getUTCDate())+"T"+pad(i.getUTCHours())+":"+pad(i.getUTCMinutes())+":"+pad(i.getUTCSeconds())+"."+String((i.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},deferWithContext:function deferWithContext(i,u){return function(){var l=Array.prototype.slice.call(arguments);setTimeout((function(){i.apply(u,l)}),1)}},exists:function exists(i){return null!=i},hasProperty:function hasProperty(i,u){var l=u.indexOf(".");return""===u||"[object Object]"===Object.prototype.toString.call(i)&&(-1===l?i.hasOwnProperty(u):i.hasOwnProperty(u.substr(0,l))&&this.hasProperty(i[u.substr(0,l)],u.substring(l+1,getLength(u))))},trim:function trim(i){return i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},capitalize:function capitalize(i){return i.charAt(0).toUpperCase()+i.substring(1)},insertCharacters:function insertCharacters(i,u,l,d){var p=d-l,h=i.split("");return h.splice(l,p,u),h.join("")},conditionallyBuildString:function conditionallyBuildString(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,d.default)(i).reduce((function(i,l,d){return l?i+u+d:i}),"")}});var p=d.default;u.default=p},63252:function(i,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l="http://www.w3.org/2000/svg",d={},p={isCanvasSupported:function isCanvasSupported(){var i=document.createElement("canvas");return!(!i.getContext||!i.getContext("2d"))},isHtml5AudioSupported:function isHtml5AudioSupported(){return!!document.createElement("audio").canPlayType},isTouchDevice:function isTouchDevice(){return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof DocumentTouch},isTouchScalable:function isTouchScalable(){var i,u=document.querySelector('meta[name="viewport"]'),l=!1;return u&&(l="string"==typeof(i=u.getAttribute("content"))&&i.indexOf("user-scalable=no")>=0),this.isTouchDevice()&&!l},isPointerEventsSupported:function isPointerEventsSupported(){return!!window.PointerEvent},isPassiveEventListenersSupported:function isPassiveEventListenersSupported(){var i=!1;function noop(){}try{window.addEventListener("scroll",noop,{get passive(){return i=!0,!0}}),window.removeEventListener("scroll",noop)}catch(i){}return i},isSvgSupported:function isSvgSupported(){return!!document.createElementNS&&!!document.createElementNS(l,"svg").createSVGRect},isJsonStringifyBroken:function isJsonStringifyBroken(){return!window.JSON||'{"u":"ó"}'!==window.JSON.stringify({u:"ó"})},isPlaceholderSupported:function isPlaceholderSupported(){return"placeholder"in document.createElement("input")},getOs:function getOs(){var i=navigator.appVersion,u="unknown";return-1!==i.indexOf("Win")&&(u="windows"),-1!==i.indexOf("Mac")&&(u="osx"),-1!==i.indexOf("X11")&&(u="unix"),-1!==i.indexOf("Linux")&&(u="linux"),u},getRecorderMediaType:function getRecorderMediaType(i){var u;if("undefined"!=typeof MediaRecorder)for(var l=0;l<i.length;l++)if(MediaRecorder.isTypeSupported(i[l])){u=i[l];break}return u},isTextareaMaxlengthSupported:function isTextareaMaxlengthSupported(){return void 0===document.createElement("textarea").maxLength},isDropzoneSupported:function isDropzoneSupported(){var i=document.createElement("span");return"webkitdropzone"in i||"mozdropzone"in i||"msdropzone"in i||"odropzone"in i},hasLayout:function hasLayout(){return!0===(document.body.currentStyle&&document.body.currentStyle.hasLayout)},isGetUserMediaSupported:function isGetUserMediaSupported(){return"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices},isMediaCaptureSupported:function isMediaCaptureSupported(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.MediaRecorder)}};function getSupport(i,u){return function(){var l=i;return u&&(l+=JSON.stringify(arguments)),d.hasOwnProperty(l)?d[l]:!!p[i]&&(d[l]=p[i].apply(this,arguments),d[l])}}var h={isCanvasSupported:getSupport("isCanvasSupported"),isHtml5AudioSupported:getSupport("isHtml5AudioSupported"),isTouchDevice:getSupport("isTouchDevice"),isTouchScalable:getSupport("isTouchScalable"),isPointerEventsSupported:getSupport("isPointerEventsSupported"),isPassiveEventListenersSupported:getSupport("isPassiveEventListenersSupported"),isJsonStringifyBroken:getSupport("isJsonStringifyBroken"),isSvgSupported:getSupport("isSvgSupported"),isPlaceholderSupported:getSupport("isPlaceholderSupported"),isGetUserMediaSupported:getSupport("isGetUserMediaSupported"),isMediaCaptureSupported:getSupport("isMediaCaptureSupported"),getOs:getSupport("getOs"),isTextareaMaxlengthSupported:getSupport("isTextareaMaxlengthSupported"),isDropzoneSupported:getSupport("isDropzoneSupported"),hasLayout:getSupport("hasLayout"),getRecorderMediaType:getSupport("getRecorderMediaType",!0)};u.default=h},87361:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(34651));_interopRequireDefault(l(16104));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var p=[],h="lrn-hidden-element-helper",g="lrn-hidden-element-shown";function getHiddenObject(i,u){for(var l=0;l<p.length;l++)if(p[l].el===i)return u?l:p[l]}var v=function HiddenElementHelper(i){this.$target=(0,d.default)(i)};v.prototype.makeVisible=function(){var i=[];function cacheHiddenAncestors(u,l){!u||!l&&u.clientWidth||(l&&u.classList.contains(g)&&l--,i.push(u),cacheHiddenAncestors(u.parentElement,l))}if(document.body.id||(document.body.id=h),document.body.classList.add(h),this.$target.each((function(){cacheHiddenAncestors(this,(0,d.default)(this).parents().addBack().filter("."+g).length)})),this.$hiddenElements=(0,d.default)(i),this.$hiddenElements.length){var u=this;this.$hiddenElements.each((function(){!function addHiddenObject(i,u){var l=getHiddenObject(i);l?l.instances.push(u):i&&i.classList&&(i.classList.add(g),p.push({el:i,instances:[u]}))}(this,u)}))}},v.prototype.restore=function(){var i=this;this.$hiddenElements.each((function(){!function restoreHiddenObject(i,u){var l,d=getHiddenObject(i);d&&(1===d.instances.length?(i.classList.remove(g),l=getHiddenObject(i,!0),p.splice(l,1)):(l=d.instances.indexOf(u))>-1&&d.instances.splice(l,1))}(this,i)})),document.body.id!==h||p.length||(document.body.id=""),document.body.classList.remove(h)};var y=function makeVisibleAndDispatch(i,u){var l,d=!!u.length,p=new v(i);function restore(){p.restore()}return p.makeVisible(),d?l=u(restore):(l=u(),restore()),l};u.default=y},8328:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(34651)),h=_interopRequireDefault(l(18707)),g=_interopRequireDefault(l(12400)),v=_interopRequireDefault(l(16104));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var y="lrn-loading-image-hidden",S="lrn-image-load-error-spinner-container";function getImagePromise(i){return new g.default((function(u,l){i.onload=u,i.onerror=l}))}function loadImage(i){return new g.default((function(u,l){!function handleImageLoad(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};i.retryCount>0&&addLoadingSpinnerOverlay(i.el);function removeSpinnerIfHasRetried(){i.retryCount>0&&removeLoadingSpinnerOverlay(i.el)}i.promise.then((function(){removeSpinnerIfHasRetried(),i.retryCount=0,u(i.el)})).catch((function(){removeSpinnerIfHasRetried(),i.retryCount++,l(i.el)}))}(i,u,l)}))}function resetImage(i){if(i.retryCount>0){var u,l=i.el,d=i.originalSrc;i.el.removeAttribute("src"),u=i.el.cloneNode(!1),i.el=u,i.promise=getImagePromise(i.el),l.parentNode.replaceChild(i.el,l),v.default.isMicrosoft&&(d+="&bust="+ +new Date),i.el.setAttribute("src",d)}}function addLoadingSpinnerOverlay(i){var u=(0,p.default)(i);u.siblings("."+S).length||u.addClass(y).after((0,h.default)())}function removeLoadingSpinnerOverlay(i){(0,p.default)(i).removeClass(y).siblings("."+S).remove()}var E=function imageLoader(i,u){var l,p,h=(null==u?void 0:u.blacklist)||[];return function(){return l=l||i.getElementsByTagName("img"),l=d.default.filter(l,(function(i){return!h.some((function(u){return i.matches(u)}))})),p?(0,d.default)(p).forEach(resetImage):p=function getImageMap(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,d.default)(Array.prototype.slice.call(i)).map((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{el:i,originalSrc:i.src,retryCount:0,promise:getImagePromise(i)}}))}(l),new g.default((function(i,u){0!==p.length?g.default.all((0,d.default)(p).map(loadImage)).then(i).catch(u):i(p)}))}};u.default=E},14233:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;_interopRequireDefault(l(70640));var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(12400)),h=_interopRequireDefault(l(8328));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var g=function(){function ImageLoader(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,ImageLoader),!d.default.isElement(i.element))throw new Error("The type of the element passed to ImageLoader is not HTMLDivElement");this.element=i.element,this.imageLoadPromise=null,this.loader=(0,h.default)(this.element,{blacklist:(null==i?void 0:i.blacklist)||[]})}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(ImageLoader,[{key:"addFacadeMethods",value:function addFacadeMethods(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.checkImages=d.default.bind((function(){return this.checkImages()}),this),i.retryLoadImages=d.default.bind((function(){this.loadImages()}),this)}},{key:"checkImages",value:function checkImages(){var i=this;return new p.default((function(u,l){return i.imageLoadPromise.then(u,l)}))}},{key:"loadImages",value:function loadImages(){var i=this;this.imageLoadPromise=new p.default((function(u,l){i.loader().then(u).catch((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(i)}))})),this.imageLoadPromise.then(null).catch((function(){}))}}]),ImageLoader}();u.default=g},20171:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(73781)),h=(_interopRequireDefault(l(63252)),_interopRequireDefault(l(21893))),g=_interopRequireDefault(l(11389)),v=_interopRequireDefault(l(13171)),y=_interopRequireDefault(l(12400)),S=_interopRequireDefault(l(34651));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var E=!1,R=[],T=!1,O=null;function isMathJaxV2(){return parseInt(window.MathJax.version)<3}var M=p.default.extend({EVENT:{RENDERED:"rendered"},isInitialised:function isInitialised(){var i;return!p.default.isUndefined(null===(i=window.MathJax)||void 0===i?void 0:i.version)||E},init:function init(){var i=this;return new y.default((function(u,d){var v;if(p.default.isUndefined(null===(v=window.MathJax)||void 0===v?void 0:v.version)&&!E){var y=i;E=!0,p.default.isUndefined(window.MathJax)&&(window.MathJax={options:{enableMenu:!1,ignoreHtmlClass:"lrn_noMath"},tex:{inlineMath:[["\\(","\\)"],["$$","$$"]],displayMath:[["\\[","\\]"]],macros:{abs:["{|#1|}",1],degree:["°"],longdiv:["{\\enclose{longdiv}{#1}}",1],atomic:["{_{#1}^{#2}}",2],polyatomic:["{_{#2}{}^{#1}}",2],circledot:["{\\odot}"],parallelogram:["\\unicode{x25B1}"],ngtr:["\\unicode{x226F}"],nless:["\\unicode{x226E}"],MathQuillVarField:["#1",1],overarc:["{\\overparen{#1}}",1]}},chtml:{minScale:1,matchFontHeight:!1,fontURL:h.default.assetsHost+"/fonts/MathJax/HTML-CSS/TeX/woff"}}),l.e(1445).then(l.bind(l,13075)).then((function(){window.MathJax.startup.promise.then((function(){E=!1,y._triggerRendered(),u()}))})).catch((function(i){g.default.log("Math rendering error: "+i),E=!1,d()}))}}))},preventReRender:function preventReRender(i){var u=i.querySelectorAll('script[type="math/tex"]');p.default.each(u,(function(i){i.parentNode.removeChild(i)}))},_triggerRendered:function _triggerRendered(){isMathJaxV2()||v.default.postProcessMathJaxV3Nodes(),R.length?this._renderFromQueue():this.trigger(this.EVENT.RENDERED)},_renderFromQueue:function _renderFromQueue(){var i,u,l=this;return!1===T&&(O=new y.default((function(d){if(0!==R.length){if(i=R.shift(),T=!0,isMathJaxV2()){var p=Array.isArray(i.el)?null:i.el;window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,p],(function(){for(v.default.postProcessMathJaxV2Nodes(p),u=0;u<i.callbacks.length;u++)i.callbacks[u]()}))}else{for(u=0;u<i.callbacks.length;u++)i.callbacks[u]();window.MathJax.startup.promise.then((function(){var u;if(null!==(u=i)&&void 0!==u&&u.el){var l=Array.isArray(i.el)?i.el.map((function(i){return(0,S.default)("[data-lrn-widget-container=".concat(i,"]"))[0]})):[i.el];return window.MathJax.typesetPromise(l)}return window.MathJax.typesetPromise()}))}T=!1,l._triggerRendered(),d()}else d()}))),O},render:function render(i,u){return function addTypesetCallToTheQueue(i,u){var l,d,h;for(l=0;l<R.length;l++)if(R[l].el===i){if(p.default.isFunction(u)){for(d=0;d<R[l].callbacks.length;d++)if(R[l].callbacks[d]===u)return;R[l].callbacks.push(u)}return}h={el:i,callbacks:[]},p.default.isFunction(u)&&h.callbacks.push(u),R.push(h)}(i,u),!E&&window.MathJax?this._renderFromQueue():y.default.resolve()},remove:function remove(i){var u,l;if(i&&!E&&window.MathJax&&(l=window.MathJax.Hub.getAllJax(i),p.default.isArray(l)))for(u=0;u<l.length;u++)window.MathJax.Hub.Queue(["Remove",l[u]])}},d.default.Events);u.default=M},92797:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(34651)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(87361)),g=_interopRequireDefault(l(83853)),v=_interopRequireDefault(l(12400));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var y=[[/(?:\$\$)(.*?)(?:\$\$)/g,"span"],[/(?:\\\()(.*?)(?:\\\))/g,"span"],[/(?:\\\[)(.*?)(?:\\\])/g,"div"]],S="lrn_widget",E="lrn_math_static",R="lrn_math_renderer_processed",T='[data-lrn-component="content"]';function MathQuillRenderer(i){this.options={disableItalics:!!i}}function prepareTextNodes(i){var u;return i.each((function(){var i,l,h,g=function getTextNodesIn(i,u){var l=[],d=/\S/;return function containsMathDelimiters(i){var u=i.textContent||i.innerText;return p.default.any(y,(function(i){return u.match(i[0])}))}(i)&&function getTextNodes(i){var p;if(3===i.nodeType)(u||d.test(i.nodeValue))&&l.push(i);else for(p=0;p<i.childNodes.length;p++)getTextNodes(i.childNodes[p])}(i),l}(this);for(h=0;h<g.length;h++)g[h]&&g[h].nodeValue&&(l=replaceText(i=p.default.escape(g[h].nodeValue)))!==i&&((0,d.default)(l).insertBefore(g[h]),g[h].parentNode.removeChild(g[h]),u=!0)})),u}function renderPrepared(i,u){var y=i.find(".lrn_math_static").not("."+R);return new v.default((function(i){l.e(7173).then(l.t.bind(l,40719,23)).then((function(l){var S=[];l=l.default?l.default:l,y.each((function(){var i=(0,d.default)(this),y=i.find(T).get(0);S.push(new v.default((function(d){(0,h.default)(i,(function(){var h=l.InertMath(y,u);!function setupHiddenAriaElement(i,u,l){var d=i.parent().parent().attr("aria-label"),h=function placeLabel(u){u=p.default.escape(u),i.prepend('<span class="lrn-spokenmath">'.concat(u,"</span>")).find(T).attr("role","math").children().attr("aria-hidden","true"),l()};d?h(d):g.default.translateOrEmptyString(u,h)}(i,h.latex(),d)})),i.addClass(R)})))})),v.default.all(S).then(i)}))}))}function replaceText(i){var u,l,d=i,p=!1;for(u=0;u<y.length;u++)l=i.replace(y[u][0],(function(i,l){return"<".concat(y[u][1],' class="').concat(E,'">\n                    <').concat(y[u][1],' data-lrn-component="content">\n                        ').concat(l,"\n                    </").concat(y[u][1],">\n                </").concat(y[u][1],">")})),i!==l&&"div"===y[u][2]&&(p=!0),i=l;return d!==i&&(i=p?"<div>"+i+"</div>":"<span>"+i+"</span>"),i}p.default.extend(MathQuillRenderer.prototype,{render:function render(i,u){var l;return i?!0===u?l=(0,d.default)(i):0===(l=(0,d.default)(i).hasClass(S)?(0,d.default)(i):(0,d.default)(i).parents(".lrn_widget")).length&&(l=(0,d.default)(i).find(".lrn_widget")):l=(0,d.default)(".lrn").filter((function(){return 0===(0,d.default)(this).parents(".lrn").length})),l.length&&prepareTextNodes(l)?renderPrepared(l,this.options):new v.default((function(i){i("Nothing to render")}))}});var O=MathQuillRenderer;u.default=O},80802:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(11389)),g=l(21445);function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var v=!1,y=p.default.extend({isInitialised:function isInitialised(){return v},init:function init(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(v)i&&i();else{var u="WebAssembly"in window,l="Worker"in window;u?l?(window.mathrust=(0,g.createWorkerProcessor)("mathrust",[LearnosityApp._internal.config.assetsHost+"/dist/vendor/mathrust-mathcore/lib/pyodide.js"],i),v=!0):h.default.log("Your browser does not support Web Workers, which are required for enhanced math scoring."):h.default.log("Your browser does not support Web Assembly, which is required for enhanced math scoring.")}}},d.default.Events);u.default=y},525:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(33534));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var h=function MyscriptHandwriting(){},g=0,v={equation:{resultTypes:["LATEX"],components:[]}};function format(i){var u=[];return d.default.each(i,(function(i){var l={type:"stroke",x:[],y:[]};d.default.each(i.points,(function(i){l.x.push(i.x),l.y.push(i.y)})),u.push(l)})),u}d.default.extend(h.prototype,{TYPE:{EQUATION:"equation"},BASE_URL:"/handwriting/recognise",recognise:function recognise(i){try{if(i.marks.length){var u=function getInk(i,u){return d.default.extend(d.default.clone(v[i]),{components:format(u)})}(i.type,i.marks);!function callRecognition(i,u,l){var d;l.handwritingRecognises&&(u.userResources=[l.handwritingRecognises]),d=g+=1,p.default.request({url:i,security:l.security.getRequestParameters(),action:p.default.ACTION.SET,data:{myscript:{equationInput:JSON.stringify(u)}},success:function success(i){var u;if(d===g){try{u=i.response.data[0].value}catch(i){l.failFn("Could not access response data")}l.successFn(u)}},failure:function failure(i){d===g&&l.failFn("Recognition api failure");try{40001===i.response.meta.code&&console.error(i.response.meta.message)}catch(i){}}})}(this.BASE_URL+i.type,u,i)}else d.default.defer(i.successFn,"")}catch(u){i.failFn(u)}},cancel:function cancel(){g+=1},format:format});var y=new h;u.default=y},14930:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.performanceTrackTimingEnd=function performanceTrackTimingEnd(i,u,l,h){if(!d.default.isObject(i)||!hasRequiredStringAttributes(u,l))return;d.default.isObject(i._internal)||(i._internal={});d.default.isArray(i._internal.performanceMetrics)||(i._internal.performanceMetrics=[]);i._internal.performanceMetrics.push(p.default.trackTimingEnd(u,l,null,null,h))},u.performanceTrackTimingStart=function performanceTrackTimingStart(i,u){hasRequiredStringAttributes(i,u)&&p.default.trackTimingStart(i,u)};var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(50581));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function hasRequiredStringAttributes(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];return u.reduce((function(i,u){return i&&d.default.isString(u)&&u.length>0}))}},77908:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(34651));var p=function Tab(i){this.element=(0,d.default)(i)},h=[];function eventHandler(i){var u=(0,d.default)(this),l=u.data("lrn.tab");"click"!==i.type&&0!==i.keyCode&&32!==i.keyCode||(i.preventDefault(),l||(l=new p(this),u.data("lrn.tab",l),h.push(l)),l.show())}p.prototype.show=function(){var i,u=this.element,l=u.closest("ul:not(.dropdown-menu)"),d=u.data("tab-target");d||(d=(d=u.attr("href"))&&d.replace(/.*(?=#[^\s]*$)/,"")),i=l.next(".tab-content").find(d),this.activate(u.parent("li"),l),this.activate(i,i.parent())},p.prototype.activate=function(i,u){var l=u.find("> .active");l.find("> .dropdown-menu > .active").addBack().removeClass("active"),i.addClass("active").removeClass("fade"),i.parent(".dropdown-menu")&&i.closest("li.dropdown").addClass("active"),l.removeClass("in")};var g={init:function init(){(0,d.default)("body").on("click.lrn.tab.data-api keypress.lrn.tab.data-api",'.lrn [data-toggle="tab"], .lrn [data-toggle="pill"]',eventHandler)},reset:function reset(){for(var i=h.length-1;i>=0;i--)(0,d.default)(h[i].element).removeData("lrn.tab");h=[],(0,d.default)("body").off("click.lrn.tab.data-api")}};u.default=g},12400:function(i,u){"use strict";function _typeof(i){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(i)}function isFunction(i){return"[object Function]"===Object.prototype.toString.call(i)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,window.Promise=function _nativePromise(){var i,u=!1;return isFunction(window.Promise)&&isFunction(window.Promise.all)&&isFunction(window.Promise.resolve)&&isFunction(window.Promise.reject)&&isFunction((i=new Promise((function(i,u){i()}))).then)&&isFunction(i.catch)&&(u=!0),u}()?window.Promise:function _promisePolyfill(){var i,u,l,d=Object.prototype.toString,p="undefined"!=typeof setImmediate?function timer(i){return setImmediate(i)}:setTimeout;try{Object.defineProperty({},"x",{}),i=function builtInProp(i,u,l,d){return Object.defineProperty(i,u,{value:l,writable:!0,configurable:!1!==d})}}catch(u){i=function builtInProp(i,u,l){return i[u]=l,i}}function schedule(i,d){l.add(i,d),u||(u=p(l.drain))}function isThenable(i){var u,l=_typeof(i);return null===i||"object"!==l&&"function"!==l||(u=i.then),"function"==typeof u&&u}function notify(){for(var i=0;i<this.chain.length;i++)notifyIsolated(this,1===this.state?this.chain[i].success:this.chain[i].failure,this.chain[i]);this.chain.length=0}function notifyIsolated(i,u,l){var d,p;try{!1===u?l.reject(i.msg):(d=!0===u?i.msg:u.call(void 0,i.msg))===l.promise?l.reject(new TypeError("Promise-chain cycle")):(p=isThenable(d))?p.call(d,l.resolve,l.reject):l.resolve(d)}catch(i){l.reject(i)}}function resolve(i){var u,l=this;if(!l.triggered){l.triggered=!0,l.def&&(l=l.def);try{(u=isThenable(i))?schedule((function(){var d=new MakeDefWrapper(l);try{u.call(i,(function $resolve$(){resolve.apply(d,arguments)}),(function $reject$(){reject.apply(d,arguments)}))}catch(i){reject.call(d,i)}})):(l.msg=i,l.state=1,l.chain.length>0&&schedule(notify,l))}catch(i){reject.call(new MakeDefWrapper(l),i)}}}function reject(i){var u=this;u.triggered||(u.triggered=!0,u.def&&(u=u.def),u.msg=i,u.state=2,u.chain.length>0&&schedule(notify,u))}function iteratePromises(i,u,l,d){for(var p=0;p<u.length;p++)!function IIFE(p){i.resolve(u[p]).then((function $resolver$(i){l(p,i)}),d)}(p)}function MakeDefWrapper(i){this.def=i,this.triggered=!1}function MakeDef(i){this.promise=i,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Promise(i){if("function"!=typeof i)throw new TypeError("Not a function");if(0!==this.__NPO__)throw new TypeError("Not a promise");this.__NPO__=1;var u=new MakeDef(this);this.then=function then(i,l){var d={success:"function"!=typeof i||i,failure:"function"==typeof l&&l};return d.promise=new this.constructor((function extractChain(i,u){if("function"!=typeof i||"function"!=typeof u)throw new TypeError("Not a function");d.resolve=i,d.reject=u})),u.chain.push(d),0!==u.state&&schedule(notify,u),d.promise},this.catch=function $catch$(i){return this.then(void 0,i)};try{i.call(void 0,(function publicResolve(i){resolve.call(u,i)}),(function publicReject(i){reject.call(u,i)}))}catch(i){reject.call(u,i)}}l=function Queue(){var i,l,d;function Item(i,u){this.fn=i,this.self=u,this.next=void 0}return{add:function add(u,p){d=new Item(u,p),l?l.next=d:i=d,l=d,d=void 0},drain:function drain(){var d=i;for(i=l=u=void 0;d;)d.fn.call(d.self),d=d.next}}}();var h=i({},"constructor",Promise,!1);return Promise.prototype=h,i(h,"__NPO__",0,!1),i(Promise,"resolve",(function Promise$resolve(i){return i&&"object"===_typeof(i)&&1===i.__NPO__?i:new this((function executor(u,l){if("function"!=typeof u||"function"!=typeof l)throw new TypeError("Not a function");u(i)}))})),i(Promise,"reject",(function Promise$reject(i){return new this((function executor(u,l){if("function"!=typeof u||"function"!=typeof l)throw new TypeError("Not a function");l(i)}))})),i(Promise,"all",(function Promise$all(i){var u=this;return"[object Array]"!==d.call(i)?u.reject(new TypeError("Not an array")):0===i.length?u.resolve([]):new u((function executor(l,d){if("function"!=typeof l||"function"!=typeof d)throw new TypeError("Not a function");var p=i.length,h=[],g=0;h.length=p,iteratePromises(u,i,(function resolver(i,u){h[i]=u,++g===p&&l(h)}),d)}))})),i(Promise,"race",(function Promise$race(i){var u=this;return"[object Array]"!==d.call(i)?u.reject(new TypeError("Not an array")):new u((function executor(l,d){if("function"!=typeof l||"function"!=typeof d)throw new TypeError("Not a function");iteratePromises(u,i,(function resolver(i,u){l(u)}),d)}))})),Promise}();var l=window.Promise;u.default=l},67732:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(73781));function _toConsumableArray(i){return function _arrayWithoutHoles(i){if(Array.isArray(i))return _arrayLikeToArray(i)}(i)||function _iterableToArray(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||function _unsupportedIterableToArray(i,u){if(!i)return;if("string"==typeof i)return _arrayLikeToArray(i,u);var l=Object.prototype.toString.call(i).slice(8,-1);"Object"===l&&i.constructor&&(l=i.constructor.name);if("Map"===l||"Set"===l)return Array.from(i);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return _arrayLikeToArray(i,u)}(i)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(i,u){(null==u||u>i.length)&&(u=i.length);for(var l=0,d=new Array(u);l<u;l++)d[l]=i[l];return d}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var p={stagger:!1,stagger_interval:250},h=function(){function RenderOptimizationHelper(i){!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,RenderOptimizationHelper),this.options=i,this.run()}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(RenderOptimizationHelper,[{key:"deferRenderOptions",get:function get(){if(!this.isRenderDeferred)return null;var i=d.default.isObject(this.renderOptimizationOptions.defer_render)?this.renderOptimizationOptions.defer_render:{};return{stagger:d.default.isBoolean(i.stagger)?i.stagger:p.stagger,stagger_interval:d.default.isNumber(i.stagger_interval)?i.stagger_interval:p.stagger_interval}}},{key:"renderOptimizationOptions",get:function get(){var i=this.options.activity.get("render_optimization");return d.default.isObject(i)?i:{}}},{key:"isRenderDeferred",get:function get(){return!!this.renderOptimizationOptions.defer_render}},{key:"isRenderStaggered",get:function get(){return!d.default.isNull(this.deferRenderOptions)&&this.deferRenderOptions.stagger}},{key:"isStaggeredRenderingRunning",get:function get(){return d.default.isNumber(this.timeoutID)}},{key:"unrenderedWidgets",get:function get(){var i=this.options.app,u=[].concat(_toConsumableArray(d.default.values(i.questions())),_toConsumableArray(d.default.values(i.features())));return d.default.reject(u,(function(i){return i.isRendered()||!d.default.isFunction(i.render)}))}},{key:"destroy",value:function destroy(){clearTimeout(this.timeoutID),delete this.timeoutID}},{key:"renderRandomWidgetInBackgroundAtInterval",value:function renderRandomWidgetInBackgroundAtInterval(){var i=this;if(this.isRenderStaggered&&!d.default.isEmpty(this.unrenderedWidgets)&&!this.isStaggeredRenderingRunning){var u=d.default.random(0,this.unrenderedWidgets.length-1),l=this.unrenderedWidgets[u];this.timeoutID=setTimeout((function(){delete i.timeoutID,l.render(),i.renderRandomWidgetInBackgroundAtInterval()}),this.deferRenderOptions.stagger_interval)}}},{key:"run",value:function run(){this.renderRandomWidgetInBackgroundAtInterval()}}]),RenderOptimizationHelper}();u.default=h},42591:function(i,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l={RIGHT:"ArrowRight",LEFT:"ArrowLeft"};function getTextDirection(){return window.LearnosityApp._internal.config.textDirection}function isRtl(){return"rtl"===getTextDirection()||"ltr-rtl"===getTextDirection()}var d={direction:l,isRtl:isRtl,getTextDirection:getTextDirection,getDirection:function getDirection(){return isRtl()?"rtl":"ltr"},getKeyDirection:function getKeyDirection(i){if(isRtl()){if(i===l.LEFT)return l.RIGHT;if(i===l.RIGHT)return l.LEFT}return i},getPreviousIndex:function getPreviousIndex(i,u){return isRtl()?i===u.length-1?0:i+1:i?i-1:u.length-1},getNextIndex:function getNextIndex(i,u){return isRtl()?i?i-1:u.length-1:i===u.length-1?0:i+1}};u.default=d},83853:function(i,u,l){"use strict";function _typeof(i){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(i)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireWildcard(i,u){if(!u&&i&&i.__esModule)return i;if(null===i||"object"!==_typeof(i)&&"function"!=typeof i)return{default:i};var l=_getRequireWildcardCache(u);if(l&&l.has(i))return l.get(i);var d={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in i)if("default"!==h&&Object.prototype.hasOwnProperty.call(i,h)){var g=p?Object.getOwnPropertyDescriptor(i,h):null;g&&(g.get||g.set)?Object.defineProperty(d,h,g):d[h]=i[h]}d.default=i,l&&l.set(i,d);return d}(l(14218));function _getRequireWildcardCache(i){if("function"!=typeof WeakMap)return null;var u=new WeakMap,l=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(i){return i?l:u})(i)}function SpokenMath(){}SpokenMath.translate=d.Core.translate.bind(d.Core,null),SpokenMath.translateOrEmptyString=function(i,u){if(""===i)u("");else try{SpokenMath.translate(i,(function(i,l){u(i?l||"":l)}))}catch(i){u("")}};var p=SpokenMath;u.default=p},32774:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(12400));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var h=function IndexedStorage(i){if(!window.indexedDB)throw new Error("Storage Error: IndexedDB is not supported");if(d.default.isEmpty(i)||!d.default.isString(i.name)||!d.default.isNumber(i.version)||i.version<1||!d.default.isArray(i.stores)||0===i.stores.length)throw new Error("Storage Error: incorrect database configuration passed");this.name=i.name,this.version=i.version,this.storeDefinitions=i.stores,this.databasePromise=null};function doObjectStoreAction(i,u,l,p){return d.default.isUndefined(p)||d.default.isNull(p)?i[u](l):i[u](l,p)}d.default.extend(h.prototype,{get:function get(i,u){return this._execute("get",(function(l,d,p){var h=l.transaction(i,"readonly").objectStore(i).get(u);h.onsuccess=function(){d(h.result)}}))},set:function set(i,u,l){return this._execute("set",(function(d,p,h){doObjectStoreAction(d.transaction(i,"readwrite").objectStore(i),"put",u,l).onsuccess=p}))},update:function update(i,u,l,p){return this._execute("set",(function(h,g,v){var y=h.transaction(i,"readwrite").objectStore(i),S=y.get(d.default.isEmpty(l)?u[y.keyPath]:l);S.onsuccess=function(){if(!S.result&&p)return v("Storage Error running update: missing object"),void y.transaction.abort();var i,h=d.default.deepExtend({},S.result,u);d.default.isEmpty(l)||(i=l),doObjectStoreAction(y,"put",h,i).onsuccess=g}}))},add:function add(i,u,l){return this._execute("add",(function(d,p,h){doObjectStoreAction(d.transaction(i,"readwrite").objectStore(i),"add",u,l).onsuccess=p}))},remove:function remove(i,u){return this._execute("remove",(function(l,d,p){l.transaction(i,"readwrite").objectStore(i).delete(u).onsuccess=d}))},clear:function clear(i){return this._execute("clear",(function(u,l,d){u.transaction(i,"readwrite").objectStore(i).clear().onsuccess=l}))},getAll:function getAll(i,u){return this._execute("getAll",(function(l,p,h){if(0!==u.length){var g=0,v=[];u=d.default.sortBy(u),l.transaction(i,"readonly").objectStore(i).openCursor().onsuccess=function(i){var l=i.target.result;if(l){for(var d=l.key;d>u[g];)if((g+=1)===u.length)return void p(v);d===u[g]?(v.push(l.value),l.continue()):l.continue(u[g])}else p(v)}}else p([])}))},setAll:function setAll(i,u,l){return this._execute("setAll",(function(p,h,g){if(d.default.isArray(l)&&u.length!==l.length)g("Storage Error running setAll: keys array provided with different length to values array");else{var v=p.transaction(i,"readwrite").objectStore(i),y=-1;!function insertObject(){var i;(y+=1)<u.length?(d.default.isArray(l)&&(i=l[y]),doObjectStoreAction(v,"put",u[y],i).onsuccess=insertObject):h()}()}}))},addAll:function addAll(i,u,l){return this._execute("addAll",(function(p,h,g){if(d.default.isArray(l)&&u.length!==l.length)g("Storage Error running addAll: keys array provided with different length to values array");else{var v=p.transaction(i,"readwrite").objectStore(i),y=-1;!function insertObject(){var i;(y+=1)<u.length?(d.default.isArray(l)&&(i=l[y]),doObjectStoreAction(v,"add",u[y],i).onsuccess=insertObject):h()}()}}))},updateAll:function updateAll(i,u,l,p){return this._execute("setPartials",(function(h,g,v){var y,S=h.transaction(i,"readwrite").objectStore(i);d.default.isArray(l)&&u.length!==l.length?v("Storage Error running updateAll: keys array provided with different length to partialValues array"):!d.default.isArray(l)||d.default.isEmpty(S.keyPath)?d.default.isArray(l)||!d.default.isEmpty(S.keyPath)?(y=-1,function updateObject(){if((y+=1)<u.length){var i=u[y],h=d.default.isArray(l)?l[y]:i[S.keyPath],E=S.get(h);E.onsuccess=function(){if(!E.result)return v("Storage Error running updateAll: missing object for key: "+h),void S.transaction.abort();var u,g=E.result;d.default.isArray(l)&&(u=h),d.default.isString(p)&&i[p]!==g[p]?updateObject():(g=d.default.deepExtend({},g,i),doObjectStoreAction(S,"put",g,u).onsuccess=updateObject)}}else g()}()):v("Storage Error running updateAll: no keys provided and storage doesn't have keyPath"):v("Storage Error running updateAll: keys array provided but storage is defined with keyPath")}))},getAllByIndex:function getAllByIndex(i,u){return this._execute("getAllByIndex",(function(l,d,p){var h=l.transaction(i,"readonly").objectStore(i).index(u),g=[];h.openCursor().onsuccess=function(){var i=event.target.result;i?(g.push(i.value),i.continue()):d(g)}}))},getWithValue:function getWithValue(i,u){return this._execute("getWithValue",(function(l,d,p){var h=l.transaction(i,"readonly").objectStore(i).get(u);h.onsuccess=function(i){d(i.target.result)},h.onerror=function(i){p(i)}}))},getAllByIndexWithValue:function getAllByIndexWithValue(i,u,l,d){return d=d||"==",this._execute("getAllByIndexWithValue",(function(p,h,g){var v,y=p.transaction(i,"readonly").objectStore(i).index(u),S=[];switch(d){case">":v=window.IDBKeyRange.lowerBound(l,!0);break;case">=":v=window.IDBKeyRange.lowerBound(l);break;case"<":v=window.IDBKeyRange.upperBound(l,!0);break;case"<=":v=window.IDBKeyRange.upperBound(l);break;default:v=window.IDBKeyRange.only(l)}y.openCursor(v).onsuccess=function(){var i=event.target.result;i?(S.push(i.value),i.continue()):h(S)}}))},getAllByIndexBetweenValues:function getAllByIndexBetweenValues(i,u,l,d,p){return p=!!p,this._execute("getAllByIndexWithValue",(function(h,g,v){var y=h.transaction(i,"readonly").objectStore(i).index(u),S=window.IDBKeyRange.bound(l,d,p,p),E=[];y.openCursor(S).onsuccess=function(){var i=event.target.result;i?(E.push(i.value),i.continue()):g(E)}}))},_execute:function _execute(i,u){return this._openDatabase().then((function(l){return new p.default((function(d,p){l.onerror=function(u){p("Storage Error running "+i+": "+(u.target?u.target.error.name+" "+u.target.error.message:u.message))},u(l,d,p)}))}))},_openDatabase:function _openDatabase(){if(!this.databasePromise){var i=this;this.databasePromise=new p.default((function(u,l){try{var p=window.indexedDB.open(i.name,i.version);p.onerror=function(i){l("Storage Error: database open error: "+(i.target?i.target.error:i.toString()))},p.onsuccess=function(i){u(i.target.result)},p.onupgradeneeded=function(u){var p=u.target.result,h=u.target.transaction,g=d.default.difference(p.objectStoreNames,d.default.pluck(i.storeDefinitions,"name"));try{d.default.each(i.storeDefinitions,(function(i){var u,l;u=d.default.contains(p.objectStoreNames,i.name)?h.objectStore(i.name):p.createObjectStore(i.name,i.optionalParameters),l=d.default.difference(u.indexNames,d.default.pluck(i.indices,"name")),d.default.each(i.indices,(function(i){d.default.contains(u.indexNames,i.name)||u.createIndex(i.name,i.keyPath,{unique:!0===i.unique})})),d.default.each(l,(function(i){u.deleteIndex(i)}))})),d.default.each(g,(function(i){p.deleteObjectStore(i)}))}catch(i){l("Storage Error: database create/upgrade error: "+i.toString())}}}catch(i){l("Storage Error: database open error: "+i.toString())}}))}return this.databasePromise}});var g=h;u.default=g},20465:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(11389)),h=_interopRequireDefault(l(12400));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var g={namespace:"lrn_",dbName:"LrnKeyedStorage",dbVersion:1},v=function LrnIndexedDB(i){this.options=d.default.extend({},g,i),this.initialised=!1},y=function handleInitIndexedDBError(i){p.default.warning("Failed to persist Application state. IndexedDB, Local Storage, or Cookies might be disabled."),p.default.warning(i)};d.default.extend(v.prototype,{get:function get(i){var u=this;return this._initIndexedDB().then((function(){return new h.default((function(l,d){u._indexedDBTransaction().then((function(p){var h=p.get(_wrapNamespace(i,u.options));h.onsuccess=function(){l(h.result)},h.onerror=function(i){d("INDEXEDDB_ERR: get error: "+(i.target?i.target.errorCode:i.message))}}))}))}))},set:function set(i,u){var l=this;return this._initIndexedDB().then((function(){return new h.default((function(d,p){l._indexedDBTransaction().then((function(h){var g=h.put(u,_wrapNamespace(i,l.options));g.onsuccess=d,g.onerror=function(i){p("INDEXEDDB_ERR: set error: "+(i.target?i.target.errorCode:i.message))}}))}))})).catch(y)},remove:function remove(i){var u=this;return this._initIndexedDB().then((function(){return new h.default((function(l,d){u._indexedDBTransaction().then((function(p){var h=p.delete(_wrapNamespace(i,u.options));h.onsuccess=l,h.onerror=function(i){d("INDEXEDDB_ERR: remove error: "+(i.target?i.target.errorCode:i.message))}}))}))})).catch(y)},clear:function clear(){var i=this;return this._initIndexedDB().then((function(){return new h.default((function(u,l){i._indexedDBTransaction().then((function(i){var d=i.clear();d.onsuccess=function(){u()},d.onerror=function(i){l("INDEXEDDB_ERR: clear error: "+(i.target?i.target.errorCode:i.message))}}))}))})).catch(y)},_initIndexedDB:function _initIndexedDB(){var i=this;return this.initialised||(this.initialised=!0,this.status=new h.default((function(u,l){i.storage=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;var d=i.storage.open(i.options.dbName,i.options.dbVersion);d.onupgradeneeded=function(i){var u=i.target.result;try{u.createObjectStore("storage")}catch(u){"ConstraintError"!==u.name&&l("INDEXEDDB_ERR: database create/upgrade error: "+(i.target?i.target.errorCode:i.message))}},d.onerror=function(i){l("INDEXEDDB_ERR: database open error: "+(i.target?i.target.errorCode:i.message))},d.onsuccess=function(l){i.database=l.target.result,u()}}))),this.status},_indexedDBTransaction:function _indexedDBTransaction(){try{var i=this.database.transaction(["storage"],"readwrite").objectStore("storage");return h.default.resolve(i)}catch(i){return h.default.reject(i)}}});var S=function LrnLocalStorage(i){this.options=d.default.extend({},g,i),this.isIndexed=!1;try{this.storage=window.localStorage||{}}catch(i){this.storage=null}};function _wrapNamespace(i,u){return(u.namespace||"")+i}d.default.extend(S.prototype,{rejectUninitializedStorage:function rejectUninitializedStorage(){return h.default.reject("LOCALSTORAGE_ERR: "+this.options.notInitialisedMessage)},get:function get(i){if(!this.storage)return h.default.resolve();var u=this.storage.getItem(_wrapNamespace(i,this.options));return h.default.resolve(function _unserialize(i){if("string"!=typeof i)return;try{return JSON.parse(i)}catch(u){return i}}(u))},set:function set(i,u){if(!this.storage)return this.rejectUninitializedStorage();var l=this,d=function setValue(d,p){l.storage.setItem(_wrapNamespace(i,l.options),function _serialize(i){return JSON.stringify(i)}(u)),d()};return new h.default(d).then(null,(function(){return l.remove(i),new h.default(d)})).then(null,(function(){return l.rejectUninitializedStorage()}))},remove:function remove(i){return this.storage?(this.storage.removeItem(_wrapNamespace(i,this.options)),h.default.resolve()):h.default.resolve()},clear:function clear(){return this.storage?(this.storage.clear(),h.default.resolve()):h.default.resolve()}});var E=function _supportsIndexedDB(){try{var i=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(i){var u=i.open(g.dbName+"_",g.dbVersion);return u.onsuccess=u.onerror=function(){i.deleteDatabase(g.dbName+"_")},!0}return!1}catch(i){return!1}}()?v:S;u.default=E},95022:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d={check:/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-?[a-f0-9]{12}/,v4:l(75412).v4};u.default=d},58716:function(i,u){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l={isValidURL:function isValidURL(i){return!!i&&new RegExp("^(http://www.|https://www.|http://|https://)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?$","g").test(i)},DEFAULT_URL_SCHEME:"//",containsURLScheme:function containsURLScheme(i){return new RegExp("[/]{2}").test(i)},isExternalURL:function isExternalURL(i){return new RegExp(".*\\/.*\\.css").test(i)}};u.default=l},2262:function(i,u){"use strict";function _typeof(i){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(i)}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}function _setPrototypeOf(i,u){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,u){return i.__proto__=u,i},_setPrototypeOf(i,u)}function _createSuper(i){var u=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(i){return!1}}();return function _createSuperInternal(){var l,d=_getPrototypeOf(i);if(u){var p=_getPrototypeOf(this).constructor;l=Reflect.construct(d,arguments,p)}else l=d.apply(this,arguments);return _possibleConstructorReturn(this,l)}}function _possibleConstructorReturn(i,u){if(u&&("object"===_typeof(u)||"function"==typeof u))return u;if(void 0!==u)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(i)}function _getPrototypeOf(i){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)},_getPrototypeOf(i)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=function(i){!function _inherits(i,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),u&&_setPrototypeOf(i,u)}(ValidationError,i);var u=_createSuper(ValidationError);function ValidationError(i){var l;return function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,ValidationError),(l=u.call(this)).name="ValidationError",l.message=i,l}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(ValidationError)}(function _extendableBuiltin(i){function ExtendableBuiltin(){i.apply(this,arguments)}return ExtendableBuiltin.prototype=Object.create(i.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(ExtendableBuiltin,i):ExtendableBuiltin.__proto__=i,ExtendableBuiltin}(Error));u.default=l},18380:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(73781));var p={renderSimpleFeatures:function renderSimpleFeatures(i,u,l){var p=this,h=l.getSimpleFeatureNodes({$scope:i}),g=u&&u.get("beta_flags");return l.render(g,h,u).then((function(i){d.default.size(i)&&(u.hooks.reset.push((function(){l.unregisterFacades(i),p.simpleFeatureFacades={}})),d.default.extend(p.simpleFeatureFacades,i))}))}};u.default=p},21445:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.createWorkerProcessor=createWorkerProcessor,u.spokenMathWorkerProcess=void 0;var d=_interopRequireDefault(l(12400)),p=_interopRequireDefault(l(80891));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _createForOfIteratorHelper(i,u){var l="undefined"!=typeof Symbol&&i[Symbol.iterator]||i["@@iterator"];if(!l){if(Array.isArray(i)||(l=function _unsupportedIterableToArray(i,u){if(!i)return;if("string"==typeof i)return _arrayLikeToArray(i,u);var l=Object.prototype.toString.call(i).slice(8,-1);"Object"===l&&i.constructor&&(l=i.constructor.name);if("Map"===l||"Set"===l)return Array.from(i);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return _arrayLikeToArray(i,u)}(i))||u&&i&&"number"==typeof i.length){l&&(i=l);var d=0,p=function F(){};return{s:p,n:function n(){return d>=i.length?{done:!0}:{done:!1,value:i[d++]}},e:function e(i){throw i},f:p}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h,g=!0,v=!1;return{s:function s(){l=l.call(i)},n:function n(){var i=l.next();return g=i.done,i},e:function e(i){v=!0,h=i},f:function f(){try{g||null==l.return||l.return()}finally{if(v)throw h}}}}function _arrayLikeToArray(i,u){(null==u||u>i.length)&&(u=i.length);for(var l=0,d=new Array(u);l<u;l++)d[l]=i[l];return d}var h={},g=0;function createWorkerProcessor(i){var u,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,y=i+"Worker",S=new d.default((function(i){p.default.getExposedExternalBundle(y)().then((function(d){(u=new d).onmessage=function(u){var l=u.data,d=l.id,p=l.results;if("ready"===l.type)v&&v(),i();else{var g=h[d];delete h[d],g&&g(p)}};var p,g=_createForOfIteratorHelper(l);try{for(g.s();!(p=g.n()).done;){var y=p.value;u.postMessage({load:y})}}catch(i){g.e(i)}finally{g.f()}}))}));return function(i,l){g=(g+1)%Number.MAX_SAFE_INTEGER,h[g]=l;var d=g;S.then((function(){return u.postMessage({id:d,request:i})}))}}var v=createWorkerProcessor("spokenmath");u.spokenMathWorkerProcess=v},99279:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(12400));function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var p,h,g="x-origin-frame",v="application/x-www-form-urlencoded; charset=UTF-8",y=function isString(i){return"[object String]"===Object.prototype.toString.call(i)},S=function isFunction(i){return"[object Function]"===Object.prototype.toString.call(i)},E=!!(window.chrome&&window.chrome.runtime&&S(window.chrome.runtime.getManifest)),R=E?"webview":"iframe",T=0,O=!1,M=[];function _param(i){var u=[],l=function add(i,l){u[u.length]="".concat(encodeURIComponent(i),"=").concat(encodeURIComponent(l))};if(function isArray(i){return"[object Array]"===Object.prototype.toString.call(i)}(i))for(var d,p=i.length-1;p>=0;p--)l((d=i[p]).name,d.value);else for(var h in i)if(i.hasOwnProperty(h)){var g=i[h];y(g)||(g=JSON.stringify(g)),l(h,g)}return u.join("&").replace(/%20/g,"+")}var I=null,P=!1,D=function(){function PostMessageProxyRequest(){!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,PostMessageProxyRequest),this.headers={}}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(PostMessageProxyRequest,[{key:"open",value:function open(i,u){this.method=i,this.url=u}},{key:"setRequestHeader",value:function setRequestHeader(i,u){this.headers[i]=u}},{key:"getResponseHeader",value:function getResponseHeader(i){return this.responseHeaders[i]}},{key:"send",value:function send(i){var u=this;if(PostMessageProxyRequest.iFrame){var l=function _getRequestId(){return T++}(),d={method:this.method,url:this.url,headers:this.headers,data:i,requestId:l};window.addEventListener("message",(function messageHandler(i){var d;if(0===u.url.indexOf(i.origin)){if("string"==typeof i.data)try{d=JSON.parse(i.data)}catch(i){console.error("Error parsing JSON from iframe message",i)}d&&d.id===l&&(window.removeEventListener("message",messageHandler),u.responseHeaders=function _parseResponseHeaders(i){var u={};if(!i)return u;for(var l=i.split("\r\n"),d=0;d<l.length;d++){var p=l[d],h=p.indexOf(": ");if(h>0){var g=p.substring(0,h),v=p.substring(h+2);u[g]=v}}return u}(d.headers),u.status=d.status,u.responseText=d.responseText,d.status>0?u.onload.call(u):u.onerror.call(u))}})),PostMessageProxyRequest.iFrame.contentWindow.postMessage(JSON.stringify(d),h)}else!1!==PostMessageProxyRequest.iFrameLoadingTimeout?M.push([this,i]):(this.status=0,this.responseText="The fallback iframe failed to load",this.onerror.call(this))}}],[{key:"iFrame",get:function get(){return I},set:function set(i){I=i}},{key:"iFrameLoadingTimeout",get:function get(){return P},set:function set(i){P=i}}]),PostMessageProxyRequest}();function sendRequest(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.data=_param(i.data),i.method=i.method||"GET",i.error=S(i.error)?i.error:function(){},i.success=S(i.success)?i.success:function(){},i.parseResponse=!i.hasOwnProperty("parseResponse")||i.parseResponse;var u=new D;if("GET"===i.method){var l="?";-1!==i.url.indexOf("?")&&(l+="&"),i.url+=l+i.data}if(u.open(i.method,p+i.url),i.headers)for(var d in i.headers)i.headers.hasOwnProperty(d)&&u.setRequestHeader(d,i.headers[d]);function callError(u,l){if(i.parseResponse)try{l=JSON.parse(l)}catch(i){}i.error.call(null,{status:u,response:l})}u.setRequestHeader("Content-Type",v),u.onload=function(){var l=u.responseText;if(u.status>=200&&u.status<=300)try{l&&l.length>0&&i.parseResponse&&(l=JSON.parse(l));try{i.success.call(null,{status:u.status,response:l})}catch(i){callError(-1,"".concat(i.name," on success handler, msg: ").concat(i.message))}}catch(i){callError(-1,"error parsing response: ".concat(i.message,". Response: ").concat(l))}else callError(u.status,l)},u.onerror=function(){callError(u.status,u.responseText)};try{u.send("POST"===i.method||"PUT"===i.method?i.data:null)}catch(i){var h=i.name&&i.message?"".concat(i.name," when sending request, msg: ").concat(i.message):"Failed to initialize xdomain iframe, throw: ".concat(i.toString());callError(-1,h)}}function init(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new d.default((function(u,l){if(O)u();else{if(!p&&!y(i.baseUrl))throw new Error("baseUrl must be a string.");if(!h&&!y(i.iframeBaseUrl))throw new Error("iframeBaseUrl must be a string.");p=i.baseUrl||p,h=i.iframeBaseUrl||h;var d,v,S=E?"?chromeApp":"",T="".concat("/xdomain").concat(S),I=".".concat(g),P=setTimeout((function(){D.iFrameLoadingTimeout=!0,window.removeEventListener("message",N),l({status:"timeout"})}),1e4),N=function readyHandler(i){if(h&&0===h.indexOf(i.origin)){var l;if("string"==typeof i.data)try{l=JSON.parse(i.data)}catch(i){console.error("Error parsing JSON from iframe message",i)}if(l&&l.ready){O=!0,D.iFrame=v,D.iFrameLoadingTimeout=!1,clearTimeout(P);for(var d=0;d<M.length;d++)M[d][0].send(M[d][1]);M=[],window.removeEventListener("message",readyHandler),u()}}};if(document.querySelectorAll)d=document.querySelectorAll(I);else{d=[];for(var q=document.getElementsByTagName(R),L=q.length-1;L>=0;L--)-1!==q[L].className.indexOf(I)&&d.push(q[L])}for(var V=d.length-1;V>=0;V--)-1!==d[V].src.indexOf(h+T)&&(v=d[V]);if(void 0===v&&((v=document.createElement(R)).className=g,v.frameBorder=0,v.marginWidth=0,v.marginHeight=0,v.style.width=0,v.style.height=0,v.style.position="absolute",v.style.top="-1000px",v.setAttribute("aria-hidden","true"),v.tabIndex="-1",v.src=h+T,document.body.appendChild(v)),E?v.addEventListener("loadstop",(function(i){window.addEventListener("message",N),v.contentWindow.postMessage({command:"handshake"},"*")})):window.addEventListener("message",N),"[object Function]"===Object.prototype.toString.call(i.wrongIframeMsgCallback)){window.addEventListener("message",(function wrongIframeMsgHandler(u){if(0===h.indexOf(u.origin)){var l=JSON.parse(u.data);l.error&&i.wrongIframeMsgCallback(l.error,l.data)}}))}}}))}var N={request:function request(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments;i.error=i.error||function(){},init().then((function(){return sendRequest.apply(null,u)})).catch((function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.error.call(null,u)}))},init:init};u.default=N},20712:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(34651)),h=_interopRequireDefault(l(70640)),g=_interopRequireDefault(l(99870)),v=l(27081);function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var y,S=function Label(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldRenderAriaLabels:!0};this.options=i},E=function Polygon(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=i},R=function getAbsolutePosition(i,u){return i/100*u};d.default.extend(S.prototype,{getHtml:function getHtml(){var i=this.getPosition(),u=(0,p.default)("<li>");return u.css({top:i.top,left:i.left}),u.text(this.options.text).addClass(this.options.className),this.options.shouldRenderAriaLabels&&u.attr("aria-label",this.options.ariaLabel),u[0].outerHTML},getPosition:function getPosition(){var i=this.options.polygon.coordinates[0];return{top:R(i.y,this.options.containerHeight),left:R(i.x,this.options.containerWidth)}}}),d.default.extend(E.prototype,{getHtml:function getHtml(){var i,u=(0,p.default)("<polygon>"),l=d.default.map(this.getAbsoluteCoordinates(),(function(i){return[i.x,i.y].join(",")}));return this.options.isFocusable&&(i=(0,p.default)('<a xlink:href="#"/>'),u.attr("aria-hidden","true"),i.append(u)),u.attr("points",l.join(", ")).css({fill:this.options.fill,stroke:this.options.stroke}),i?i.addClass(this.options.className):y.addPolygonClass(u.get(0),this.options.className),(0,d.default)(this.options.elementAttributes).forEach((function(l,d){(i||u).get(0).setAttribute(d,l)})),(i||u)[0].outerHTML},getAbsoluteCoordinates:function getAbsoluteCoordinates(){return d.default.map(this.options.coordinates,(function(i){return{x:R(i.x,this.options.containerWidth),y:R(i.y,this.options.containerHeight)}}),this)}}),y=h.default.View.extend({SELECTORS:{labels:".lrn-polygons-labels",focusable:"a",polygons:"polygon"},events:{"click a":"preventFocusLinks","touchend a":"preventFocusLinks"},className:(0,g.default)("lrn-polygons",{"lrn-polygons-support-safari":(0,v.isSafari)(),"lrn-polygons-support-edge":(0,v.isEdge)(),"lrn-polygons-support-firefox":(0,v.isFirefox)(),"lrn-polygons-support-chrome":(0,v.isChrome)()}),initialize:function initialize(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=i,this.render()},appendLabels:function appendLabels(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.renderLabels(i,d.default.extend({},u,{removeExistingLabels:!1})),this},getShapeElements:function getShapeElements(){return this.options.makeFocusable?this.el.querySelectorAll(this.SELECTORS.focusable):this.el.querySelectorAll(this.SELECTORS.polygons)},preventFocusLinks:function preventFocusLinks(i){i.preventDefault()},removeLabels:function removeLabels(){return this.$labels&&(this.$labels.remove(),delete this.$labels),this},render:function render(){var i=this,u=(0,d.default)(this.options.polygons).map((function(u){var l=d.default.extend({},u,{isFocusable:!!i.options.makeFocusable,containerWidth:i.options.width,containerHeight:i.options.height});return new E(l)})),l=(0,p.default)("<svg>").css({width:this.options.width,height:this.options.height});return this.options.renderAsList&&l.attr("role","list"),(0,d.default)(u).forEach((function(u){var d=u.getHtml();i.options.renderAsList&&(d='<g role="listitem">'.concat(d,"</g>")),l.append(d)})),this.$el.empty().append(l[0].outerHTML),this},renderLabels:function renderLabels(i,u){var l=d.default.extend({ariaHidden:!1,removeExistingLabels:!0},u),h=this.SELECTORS.labels.replace(/^\./,"");return l.removeExistingLabels&&this.removeLabels(),this.$labels=this.$labels||(0,p.default)("<ul>").addClass(h),l.ariaHidden&&this.$labels.attr("aria-hidden","true"),d.default.each(i,(function(i){var u=this.options.polygons[i.polygonIndex],p=new S(d.default.extend({shouldRenderAriaLabels:!l.ariaHidden,containerWidth:this.options.width,containerHeight:this.options.height,polygon:u},i));this.$labels.append(p.getHtml())}),this),this.$el.append(this.$labels),this}},{polygonHasClass:function polygonHasClass(i,u){return i.classList&&d.default.isFunction(i.classList.contains)?i.classList.contains(u):d.default.contains(y.getPolygonClasses(i),u)},addPolygonClass:function addPolygonClass(i,u){var l;if(u&&!y.polygonHasClass(i,u)){if(i.classList&&d.default.isFunction(i.classList.add))return i.classList.add(u);(l=y.getPolygonClasses(i)).push(u),(0,p.default)(i).attr("class",l.join(" "))}},getPolygonClasses:function getPolygonClasses(i){var u;return i.classList?d.default.map(i.classList,(function(i){return i})):(u=(0,p.default)(i).attr("class"),d.default.isString(u)?(u=u.replace(/\s+/g," "),d.default.filter(u.split(" "),(function(i){return i.length}))):[])},removePolygonClass:function removePolygonClass(i,u){var l;return!!y.polygonHasClass(i,u)&&(i.classList&&d.default.isFunction(i.classList.remove)?(i.classList.remove(u),!0):(l=d.default.without(y.getPolygonClasses(i),u),(0,p.default)(i).attr("class",l.join(" ")),!0))},removePolygonClasses:function removePolygonClasses(i,u){d.default.each(u,(function(u){y.removePolygonClass(i,u)}))},togglePolygonClass:function togglePolygonClass(i,u){return y.polygonHasClass(i,u)?(y.removePolygonClass(i,u),!1):(y.addPolygonClass(i,u),!0)}});var T=y;u.default=T},3089:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;_interopRequireDefault(l(34651));var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(15192)),h=_interopRequireDefault(l(31467)),g=_interopRequireDefault(l(50971));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var v={STATE:{INITIAL:"initial",REVIEW:"review"},events:{"blur .lrn_validate:not([disabled])":"clearAnnouncedCheckAnswers"},accessibility:{helperTypes:{global:h.default,live:p.default,label:g.default}},processAccessibility:function processAccessibility(i){var u=(i=i||{})?i.state:this.STATE.INITIAL,l=this.getAccessibilityHelpers(i);u===this.STATE.REVIEW?d.default.invoke(l,"apply"):d.default.invoke(l,"restore")},getAccessibilityHelpers:function getAccessibilityHelpers(i){return this._a11yHelpers||(this._a11yHelpers=[],d.default.each(this.accessibility.helperTypes,(function(u){this._a11yHelpers.push(new u(this,i))}),this)),this._a11yHelpers},clearAnnouncedCheckAnswers:function clearAnnouncedCheckAnswers(){this.$el.find(".lrn-accessibility-arialive").text("")}};u.default=v},85727:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(73781)),p=_interopRequireDefault(l(34651)),h=_interopRequireDefault(l(525));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var g="lrn-math-keep-keyboard-open",v="lrn-math-force-keyboard-close";function onItemBlurred(i,u,l){d.default.defer((function(){var d=document.activeElement||document.createElement("div"),h=l&&p.default.contains(l,d);!d.classList.contains(v)&&(d.classList.contains(g)||p.default.contains(u,d)||h)||i.trigger(i.EVENT.EDITOR_BLURRED)}))}var y={addFacadeMethods:function addFacadeMethods(i){var u=this.model&&this.model.get("response"),l=this.keyboardView;function convertToInk(i){return{handwriting:d.default.object(d.default.keys(i),d.default.map(i,h.default.format))}}l&&l.hasHandwriting()?i.getHandwriting=function(){return convertToInk(l.getHandwriting())}:u&&u.handwriting&&(i.getHandwriting=function(){return convertToInk(u.handwriting)})},handleBlurEvents:function handleBlurEvents(i){var u=this.editorView.mathEvents,l=this.keyboardView;this.listenTo(u,u.EVENT.ITEM_BLURRED,(function(){onItemBlurred(u,i,l&&l.el)}))},isChemistry:function isChemistry(){return this.model.get("type").toLowerCase().indexOf("chemistry")>-1},onAttach:function onAttach(){this.editorView&&this.editorView.onAttach(),this.keyboardView&&this.keyboardView.onAttach()},onItemBlurred:onItemBlurred,setDisabled:function setDisabled(i,u){d.default.each(i,(function(i){i.mathEvents.trigger(i.mathEvents.EVENT.CHANGE_DISABLED_STATE,u)}))},usesLazyKeyboard:function usesLazyKeyboard(i){return i.get("enable_formula_keyboard_lazy_render")},addAriaLabelToValidationUi:function addAriaLabelToValidationUi(){if(this.model.getValidResponse()&&this.model.getValidResponse().value){var i=function getAriaLabelsFromValidResponse(i){var u=d.default.pluck(d.default.flatten(i.value),"aria_label");return(0,d.default)(u).map((function(i,u){return"Correct Answer "+(u+1)+": "+(i||"screenreader friendly version of equation not available")+"."})).join(" ")}(this.model.getValidResponse());this.$(".lrn_correctAnswers").attr("aria-label",i)}}};u.default=y},96258:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(34651)),g=_interopRequireDefault(l(96788));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var v=d.default.View.extend({template:g.default,progressCalledFirstTime:!1,events:{"click .lrn_btn:not(:disabled)":"persistQuestions"},initialize:function initialize(){var i=this.options.activity,u=i.EVENT;this.activity=i,this.i18n=this.activity.get("i18n"),this.app=this.options.app;var l=".learnosity-save-button";this.options.submit&&(l=".learnosity-submit-button");var d=(0,h.default)(l+".activity-"+this.activity.get("localActRef"));this.activity.has("localActRef")&&d.length>0?this.setElement(d[0]):this.setElement(p.default.find((0,h.default)(l),(function(i){for(var u=i.className.split(/\s+/),l=!1,d=0;d<u.length&&!l;d++)l=l||0===u[d].indexOf("activity-");return!l})));var g=this.activity.get("questionResponses");g.bind(g.EVENT.MODIFIED,this.questionModifiedHandler,this),this.progressHandler=this.progressHandler.bind(this),i.on(u.SAVE,this.persistControlInitialState,this),this.options.submit?i.on(u.SUBMITTED,this.activityPersistHandler,this):i.on(u.SAVED,this.activityPersistHandler,this),this.displayLogic={},this.addRenderingLogic(),this.render()},render:function render(){var i=(this.activity.id?this.activity.id:this.cid)+(this.options.submit?"-submit":"-save"),u=this.$el,l=(0,h.default)(this.template({id:i,displayLogic:this.displayLogic}));return this.setElement(l),u.replaceWith(l),this},addRenderingLogic:function addRenderingLogic(){var i=this.i18n,u=this.activity,l=this.options.submit,d=u.get("questionResponses");this.displayLogic.submit=l,this.displayLogic.label=l?i.labels.submitButtonLabel:i.labels.saveButtonLabel,this.displayLogic.disabled=l&&"resume"===u.get("state")?!d.areThereQuestionsAnswered():!d.areThereQuestionsModified()},persistControlInitialState:function persistControlInitialState(i){if(this.options.submit===i.submit){var u=this.activity;this.$(".lrn_btn").attr("disabled","disabled"),u.off(u.EVENT.SAVE_PROGRESSING,this.progressHandler).on(u.EVENT.SAVE_PROGRESSING,this.progressHandler)}},questionModifiedHandler:function questionModifiedHandler(){!this.activity.saving&&this.$(".lrn_btn:disabled").length>0&&this.$(".lrn_btn").removeAttr("disabled").children("span").text(this.options.submit?this.i18n.labels.submitButtonLabel:this.i18n.labels.saveButtonLabel)},activityPersistHandler:function activityPersistHandler(i){var u=i.responseIds,l=i.submit,d=this.activity;this.options.submit===l&&this.$(".lrn_btn").attr("disabled","disabled"),d.off(d.EVENT.SAVE_PROGRESSING,this.progressHandler),this.successHandler(u)},persistQuestions:function persistQuestions(){this.options.submit?this.app.submit():this.app.save()},successHandler:function successHandler(i){this.$(".lrn_spinner").remove(),this.$(".lrn_btn span").text(this.options.submit?this.i18n.labels.submitComplete:this.i18n.labels.saveComplete),this.progressCalledFirstTime=!1,this.app.options&&this.app.options.saveSuccess&&this.app.options.saveSuccess(i)},progressHandler:function progressHandler(i){if(0===this.$(".lrn_spinner").length){var u=this.options.submit?this.i18n.labels.submitInProgress:this.i18n.labels.saveInProgress;!this.progressCalledFirstTime&&parseInt(i.percentage,10)>85?(this.$(".lrn_btn").prepend('<div class="lrn_spinner"></div>'),this.$(".lrn_btn span").text(u)):this.$(".lrn_btn span").text(u+" "+i.percentage+"%")}this.progressCalledFirstTime=!0,this.app.options&&this.app.options.saveProgress&&this.app.options.saveProgress(i)}});u.default=v},52783:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(34651)),g=_interopRequireDefault(l(92797)),v=_interopRequireDefault(l(18380)),y=_interopRequireDefault(l(85727)),S=_interopRequireDefault(l(11389)),E=_interopRequireDefault(l(14233)),R=_interopRequireDefault(l(73728)),T=_interopRequireDefault(l(13064)),O=_interopRequireDefault(l(46994)),M=_interopRequireDefault(l(16104));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var I=R.default,P=[{type:"stimulus"},{type:"interaction"}],D=function callbackForAsync(i,u,l){return p.default.isFunction(u)?i.model.executeScoring().then((function(){return u(l())})):l()},N=d.default.View.extend({lastFeatureComplete:!1,initialize:function initialize(){d.default.View.prototype.initialize.call(this);var i=this.model;if(i){var u=i.get("question").widget_layout;u&&(this.widgetLayout=new T.default(this,u))}this.mathService=new O.default(this,"question")},getFacade:function getFacade(){var i=this;if(p.default.isUndefined(this.questionFacade)){var u=this.model;if(this.questionFacade={},this.questionFacade.on=d.default.Events.on,this.questionFacade.off=function(i,u){if(!p.default.isString(i)||!p.default.isFunction(u))throw new Error("off method only supported with event and callback parameters");d.default.Events.off.apply(this,arguments)},this.questionFacade.trigger=d.default.Events.trigger,this.questionFacade.once=d.default.Events.once,this.questionFacade.begin=p.default.bind(this.begin,this),this.questionFacade.pause=p.default.bind(this.pause,this),this.questionFacade.stop=p.default.bind(this.stop,this),this.questionFacade.response={getMetadata:p.default.bind((function(){return this.model.getResponseMetadata()}),this),setMetadata:p.default.bind((function(i){return this.model.setResponseMetadata(i)}),this)},this.questionFacade.disable=p.default.bind(this.toggleDisabled,this,!0),this.questionFacade.enable=p.default.bind(this.toggleDisabled,this,!1),this.questionFacade.isEnabled=function(){return!i.model.get("disabled")},this.listenTo(this.model,"change:disabled",p.default.bind((function(i,u){this.setDisabled(u)}),this)),this.questionFacade.getAttemptedStatus=function(){return{hasReachedMinLimit:i.model.hasReachedMinLimit()}},this.questionFacade.getMetadata=p.default.bind((function(){return this.model.getMetadataForClient()}),this),this.questionFacade.getQuestion=p.default.bind((function(){return this.model.getQuestionJsonForClient()}),this),this.questionFacade.getResponse=p.default.bind((function(){return this.model.getResponseJsonForClient()}),this),this.questionFacade.executeScoring=p.default.bind((function(){return this.model.executeScoring()}),this),this.questionFacade.getScore=p.default.bind((function(i){var u=this;return D(this,i,(function(){return p.default.isFunction(u.model.getScore)?u.model.getScore():null}))}),this),this.questionFacade.isAttempted=p.default.bind((function(){return this.model.isAttempted()}),this),this.questionFacade.isValid=p.default.bind((function(i,u){var l=this;return D(this,u,(function(){return p.default.isFunction(l.model.canValidateResponse)&&l.model.canValidateResponse()&&l.model.hasResponseValue()?i?l.model.getResponseValidDetailed():l.model.isResponseValid():void 0}))}),this),this.questionFacade.validate=p.default.bind((function(){var i=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0;return D(this,l,(function(){return p.default.isFunction(i.model.callValidate)?i.model.callValidate(u):void 0}))}),this),this.questionFacade.mapValidationMetadata=p.default.bind((function(i,u){var l=this;return D(this,u,(function(){return l.model.mapValidationMetadata.call(l.model,i)}))}),this),this.questionFacade.checkValidation=p.default.bind((function(){var i=this.model,u=i.canValidateResponse;return{has_validation:!!p.default.isFunction(u)&&!!u.apply(i)}}),this),this.questionFacade.masking=p.default.bind(this.masking,this),this.questionFacade.isMaskable=p.default.bind((function(){return this.maskable||!1}),this),this.questionFacade.isRendered=function(){return!0},this.questionFacade.render=function(){return!1},this.imageLoader&&this.imageLoader.addFacadeMethods(this.questionFacade),this.simpleFeatureFacades=this.simpleFeatureFacades||{},this.questionFacade.simpleFeatures=function(){return p.default.clone(i.simpleFeatureFacades)},this.questionFacade.simpleFeature=function(u){return i.simpleFeatureFacades[u]},this.questionFacade.resetValidationUI=function(){i.showingValidationUI&&p.default.isFunction(i.clearValidationUI)?i.clearValidationUI():i.showingAnswer&&p.default.isFunction(i.clearCorrectAnswers)&&i.clearCorrectAnswers()},u.get("isDynamicContent")){var l=u.dynamic;this.questionFacade.dynamic={nextAttempt:function nextAttempt(){return i.updateInstance(l.nextAttempt())},previousAttempt:function previousAttempt(){return i.updateInstance(l.previousAttempt())},currentAttemptIndex:function currentAttemptIndex(){return l.currentAttemptIndex()},totalAttempts:function totalAttempts(){return l.totalAttempts()}}}"local_practice"===this.activity.get("type")&&(this.questionFacade.update=function(l){var d=u.get("question").type;if(l.type!==d)return S.default.exception({code:10030,detail:'type: "'.concat(l.type,"\" does not match current question instance's type")});l.response_id=u.get("response_id"),u.setOriginalQuestion(l),i.updateInstance(l)}),this.questionFacade.resetResponse=function(){i.resetResponse()},this.questionFacade.isResponseReset=function(){return i.model.hasBeenReset()},this.addFacadeMethods(this.questionFacade),this.model.on(this.model.EVENT.MODIFIED,(function(){this.questionFacade.trigger("change changed")}),this)}return this.questionFacade},addFacadeMethods:function addFacadeMethods(i){},updateInstance:function updateInstance(i){this.setElement(this.$el.closest(".lrn.lrn_widget")),this.displayLogic={},this.addRenderingLogic(),this.render(),this.mathService&&this.mathService.renderIfRequired()},renderViewContent:function renderViewContent(i,u){var l,d,g,v=this.model.get("question"),y=this.options.activity.get("state")===this.options.activity.STATE.REVIEW&&this.model.hasStimulusReview(),S=y?this.model.getStimulusReview():this.model.getStimulus(),R=this.model.getInstructorStimulus(),T=!y&&this.model.hasStimulusObject()&&v.stimulus.hasOwnProperty("features")&&p.default.isArray(v.stimulus.features)?v.stimulus.features:[],O=p.default.some(T,(function(i){return i&&("vertical"===i.position||p.default.isUndefined(i.position))})),D=p.default.some(T,(function(i){return i&&"overlay"===i.position})),N=S&&S.length>0||O,q=!(!this.options.activity.get("showInstructorStimulus")||!R.length),L=this.model.getFontClass()||"",V=p.default.isString(i),U=this.widgetLayout;u=p.default.isUndefined(u)?"":u,L+=M.default.isIOS?" lrn-ios":"",this.pendingViews=T.length+1,l=I({responseId:v.response_id,questionType:this.model.get("type"),showStimulus:N,showInstructorStimulus:q,stimulusContent:S,instructorStimulusContent:R,hasVerticalFeatures:O,hasOverlayFeatures:D,extraClasses:u,globalExtraClasses:L,responseContent:V?i:"",widgetLayoutElements:U?U.getLayoutElements():P}),d=this.$el,this.$qrEl=(0,h.default)(l),g=this.$qrEl.find(".lrn_response_wrapper > .lrn_response"),V||g.append(i),this.imageLoader=new E.default({element:this.$qrEl[0],blacklist:this.imageLoaderBlacklist}),this.imageLoader.addFacadeMethods(this.questionFacade),this.imageLoader.loadImages(),this.setElement(g),d.replaceWith(this.$qrEl),!V&&this.onAttach&&this.onAttach(),T.length>0&&this.loadStimulusFeatures(T),this.$qrEl.attr("data-lrn-widget-container",this.model.get("response_id")).attr("data-lrn-widget-type","question")},loadStimulusFeatures:function loadStimulusFeatures(i){var u=this,l=p.default.pluck(i,"type");this.featureViews=[],this.activity.loadFeatureBundles(l,(function(d){if(p.default.isEmpty(d))S.default.log("No bundles were loaded for the required Feature types: "+l.join(", "));else{if(p.default.forEach(i,(function(i){var l,g=d[i.type],v=new g.Model(i),y=v.has("position")?v.get("position"):"vertical";l="overlay"===y?(0,h.default)('<div class="lrn_stimulus_features_overlay" style="visibility: hidden"><div></div></div>').insertAfter(u.$qrEl.find(".lrn_response_wrapper .lrn_response")).children("div")[0]:(0,h.default)("<div></div>").appendTo(u.$qrEl.find(".lrn_stimulus_features_vertical"))[0];var S=new g.View({model:v,el:l,i18n:u.options.activity.get("i18n"),initialisationCallback:p.default.bind(u.initialisationCompleted,u)});"overlay"===y&&S.getFacade().on("complete",(function(){S.$el.parent().remove(),S.remove(),u.$qrEl.find(".lrn_response_wrapper.lrn_overlaying_features > div:last-child").css({visibility:"inherit"})})),u.featureViews.push(S)})),u.model.hasStimulusObject()){var g=u.model.get("question").stimulus,v=u.featureViews[u.featureViews.length-1].getFacade();g.hasOwnProperty("begin_response_on")?g.hasOwnProperty("begin_response_on")&&"begin"!==g.begin_response_on&&u.options.activity.get("state")!==u.options.activity.STATE.REVIEW&&("last-feature-complete"===g.begin_response_on?v.on("complete",u.beginResponse,u):"last-feature-begin"===g.begin_response_on&&v.on("begin",u.beginResponse,u)):v.on("complete",(function(){this.lastFeatureComplete&&(this.beginResponse(),this.lastFeatureComplete=!1)}),u)}u.$qrEl.find(".lrn_response_wrapper.lrn_overlaying_features > div:last-child").css({visibility:"inherit"})}}))},begin:function begin(){var i=this.model.get("question"),u=this.options.activity.get("state")===this.options.activity.STATE.REVIEW,l=i.begin_response_on&&"begin"===i.begin_response_on;if(this.lastFeatureComplete=!(this.model.hasStimulusObject()&&i.stimulus.hasOwnProperty("begin_response_on")||u),this.featureViews&&this.featureViews.length>0&&!u){var d=this,h=0;p.default.each(this.featureViews,(function(i){i.getFacade().on("complete",(function(){++h<d.featureViews.length&&d.featureViews[h].getFacade().begin()}))})),this.featureViews[h].getFacade().begin(),l&&this.beginResponse()}else this.beginResponse()},pause:function pause(){p.default.each(this.simpleFeatureFacades,(function(i){return i.pause&&i.pause()})),p.default.each(this.featureViews,(function(i){i.getFacade().pause()})),this.pauseResponse()},stop:function stop(){p.default.each(this.simpleFeatureFacades,(function(i){return i.stop&&i.stop()})),p.default.each(this.featureViews,(function(i){i.getFacade().stop()})),this.stopResponse()},masking:function masking(){},beginResponse:function beginResponse(){},pauseResponse:function pauseResponse(){},stopResponse:function stopResponse(){},setDisabled:function setDisabled(i){this.setEventsDisabled(i)},setEventsDisabled:function setEventsDisabled(i){i?this.undelegateEvents():this.delegateEvents()},setButtonsDisabled:function setButtonsDisabled(i){this.$(".lrn_btn").each((function(){var u=(0,h.default)(this),l=u.data("previously-disabled");return!i&&l?u.removeData("previously-disabled"):(l=u.hasClass("lrn_disabled")||u.prop("disabled")||u.attr("disabled"),i&&l?u.data("previously-disabled",!!l):(u.toggleClass("lrn_disabled",i).attr("aria-disabled",i),void("button"===this.type?u.prop("disabled",i):u.attr("disabled",i))))}))},toggleDisabled:function toggleDisabled(i){var u=this.activity.get("state"),l=[this.activity.STATE.INITIAL,this.activity.STATE.RESUME];return!(!p.default.contains(l,u)||this.model.get("disabled")===i)&&(this.model.set("disabled",i),!0)},mathquillRendering:function mathquillRendering(){var i=this.model.get("question")&&this.model.get("question").is_math;return this.model.activity&&this.model.activity.get("math_renderer")?i&&"mathquill"===this.model.activity.get("math_renderer"):i&&"mathquill"===this.model.get("question").math_renderer},renderMathquill:function renderMathquill(){this.mathquillRenderer||(this.mathquillRenderer=new g.default(y.default.isChemistry.call(this))),this.mathquillRenderer.render(this.el)},renderSimpleFeatures:function renderSimpleFeatures(i){return v.default.renderSimpleFeatures.call(this,this.$qrEl,this.activity,i)},initialisationCompleted:function initialisationCompleted(){this.mathquillRendering()&&this.renderMathquill(),this.pendingViews--,0===this.pendingViews&&this.options.initialisationCallback&&p.default.defer(this.options.initialisationCallback)},reset:function reset(){this.getFacade().trigger("reset")},resetResponse:function resetResponse(){var i=this.options,u=this.model,l=this.widgetLayout,d=i.activity.get("state")===i.activity.STATE.REVIEW,p=!!u.get("disabled");d||p||(u.resetResponse(),l&&l.initialized&&(l.initialized=!1),this.updateInstance(u.get("originalQuestion")))}});u.default=N},66353:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(70640)),p=_interopRequireDefault(l(34651)),h=(_interopRequireDefault(l(73781)),_interopRequireDefault(l(32270)));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var g=d.default.View.extend({template:h.default,events:{"click .lrn_btn":"validateQuestions"},initialize:function initialize(){this.setElement(".learnosity-validation.group-"+this.collection.groupId),this.activity=this.options.activity,this.i18n=this.activity.get("i18n"),this.render()},render:function render(){var i=this.$el,u=(0,p.default)(this.template({id:this.collection.id,labels:this.i18n.labels}));return this.setElement(u),i.replaceWith(u),this},validateQuestions:function validateQuestions(){this.collection.each((function(i,u){i.callValidate&&i.callValidate({feedback_attempts:!0})}))}});u.default=g},8333:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(34651)),p=_interopRequireDefault(l(73781)),h=_interopRequireDefault(l(52783)),g=_interopRequireDefault(l(3089)),v=_interopRequireDefault(l(20171));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var y=h.default.extend({showMasking:!1,events:{"click .lrn_validate:not([disabled])":"validateResponse"},initialize:function initialize(){h.default.prototype.initialize.call(this);var i=this.model,u=i.get("question"),l=i.get("response");this.validationAttempts=l&&l.feedbackAttemptsCount||0,this.validationAttemptsLimit=0,u.feedback_attempts&&(p.default.isString(u.feedback_attempts)&&("unlimited"===u.feedback_attempts.toLowerCase()?u.feedback_attempts=0:u.feedback_attempts=parseInt(u.feedback_attempts,10)),p.default.isNumber(u.feedback_attempts)&&(this.validationAttemptsLimit=u.feedback_attempts))},addRenderingLogic:function addRenderingLogic(){var i=this.model.get("question"),u=this.activity.get("state")===this.activity.STATE.REVIEW,l=this.activity.get("showCorrectAnswers");i.ui_style&&p.default.isString(i.ui_style.validation_stem_numeration)&&(this.displayLogic.validation_stem_numeration=i.ui_style.validation_stem_numeration),this.displayLogic.isReviewState=this.activity.get("state")===this.activity.STATE.REVIEW,this.displayLogic.isPreviewState=this.activity.get("state")===this.activity.STATE.PREVIEW,this.displayLogic.showValidationButton=!u&&i.instant_feedback&&!i.validation_group&&this.model.canValidateResponse(),this.displayLogic.showValidation=!!this.model.canValidateResponse(),this.displayLogic.displayCorrectAnswer=p.default.isUndefined(l)&&u&&this.displayLogic.showValidation||!!l,this.displayLogic.isLDS=!!p.default.getNested(this.activity.get("beta_flags"),"lds")},renderViewContent:function renderViewContent(){h.default.prototype.renderViewContent.apply(this,arguments),this.updateCheckAnswerButtonState()},renderValidatableUI:function renderValidatableUI(){this.displayLogic.showValidation&&this.showValidationUI(),this.displayLogic.displayCorrectAnswer&&this.showCorrectAnswer(),this.processAccessibility({state:this.STATE.REVIEW})},validateResponse:function validateResponse(i,u){var l,d=this,p=this.activity.get("state")===this.activity.STATE.REVIEW;if(!p&&this.model.isAttempted()&&(this.getFacade().trigger("beforeValidate",{preventDefault:function preventDefault(){return l=!0}}),l))return;this.model.canValidateResponse()&&(this.showingValidationUI&&this.clearValidationUI(),(this.isValidationAllowed()||u)&&(this.model.hasResponse()&&!this.model.hasBeenReset()||this.displayLogic.displayCorrectAnswer&&p)&&this.model.executeScoring().then((function(){d.renderValidatableUI(),u||d.incrementValidationAttempts(),d.updateCheckAnswerButtonState(),d.getFacade().trigger("validated")})))},isValidationAllowed:function isValidationAllowed(){return 0===this.validationAttemptsLimit||this.validationAttempts<this.validationAttemptsLimit},updateCheckAnswerButtonState:function updateCheckAnswerButtonState(){this.isValidationAllowed()||this.$(".lrn_btn.lrn_validate").attr("disabled","disabled")},incrementValidationAttempts:function incrementValidationAttempts(){var i=this.model,u=i.getResponseValue();p.default.isEqual(u,this.previousResponseValue)||(this.previousResponseValue=p.default.clone(u),this.validationAttempts++,i.updateFeedbackAttemptsCount(this.validationAttempts))},clearValidationUI:function clearValidationUI(){this.$el.removeClass("lrn_display_correct_answer_enabled"),this._restoreDisplayCorrectAnswer(),this.processAccessibility()},showCorrectAnswer:function showCorrectAnswer(){throw new Error("Unimplemented function showCorrectAnswer for question type:"+this.model.get("type"))},callValidateHandler:function callValidateHandler(){var i=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=function validate(){i.clearValidationUI(),i._defaultDisplayCorrectAnswer=i.displayLogic.displayCorrectAnswer;var l=!(!u||!u.showCorrectAnswer&&!u.showCorrectAnswers),d=p.default.isBoolean(u.feedbackAttempts)?u.feedbackAttempts:!!u.feedback_attempts;u&&(i.displayLogic.displayCorrectAnswer=l,i.validateResponse(void 0,!d)),l&&i.showCorrectAnswer(),u.testCallback&&u.testCallback()};this.model.asyncScoring?this.model.executeScoring().then((function(){return l()})):l()},showValidationUI:function showValidationUI(){var i=this.model.validateResponse();return this.showingValidationUI=!0,!(this.model.getShowGlobalValidationUi()&&(this.model.hasResponse()&&this.$(".lrn-response-validate-wrapper").removeClass("lrn_correct lrn_incorrect").addClass(this.model.isResponseValid()?"lrn_correct":"lrn_incorrect"),!this.model.getShowPartialValidationUI()))&&i},initialisationCompleted:function initialisationCompleted(){h.default.prototype.initialisationCompleted.apply(this,arguments),this.model.canValidateResponse()&&this.model.on(this.model.EVENT.CALLVALIDATE,this.callValidateHandler,this)},masking:function masking(i){this.showMasking=i,this.showMasking?this.enableMaskingUI():this.disableMaskingUI()},createMaskingSVG:function createMaskingSVG(i,u){for(var l="",d=15;d<i+u;d+=15)l+='<line class="lrn-line1" x1="0" y1='.concat(d," x2=").concat(d,' y2="0"></line>');return'\n            <svg class="lrn-mask" xmlns="http://www.w3.org/2000/svg">\n                <rect x="0" y="0" width="100%" height="100%" fill="transparent"/>\n                '.concat(l,"\n            </svg>\n        ")},toggleMasking:function toggleMasking(){if(this.showMasking){var i=arguments[0].currentTarget?(0,d.default)(arguments[0].currentTarget):arguments[0],u=i.find(".lrn-mask"),l=i[0].clientWidth,p=i[0].clientHeight;this.maskingSVG=this.createMaskingSVG(l,p),u.length?u.remove():i.is(":empty")||(i.append((0,d.default)(this.maskingSVG)),this.questionFacade.trigger(this.model.EVENT.MASKED,this.model.get("response_id")))}},enableMaskingUI:function enableMaskingUI(){this.$el.addClass("lrn-masking")},disableMaskingUI:function disableMaskingUI(){this.$el.removeClass("lrn-masking")},clearMaskingUI:function clearMaskingUI(){this.$(".lrn-mask").remove(),this.$(".lrn-mask-strike-through :only-child").unwrap()},getCorrectResponseTextByIndex:function getCorrectResponseTextByIndex(i){throw new Error("Unimplemented function getCorrectResponseTextByIndex for question type: ".concat(this.model.get("type")))},shouldDisplayCorrectAnswerList:function shouldDisplayCorrectAnswerList(){throw new Error("Unimplemented function shouldDisplayCorrectAnswerList for question type: ".concat(this.model.get("type")))},showCorrectAnswerList:function showCorrectAnswerList(){var i,u,l,d;if(this.displayLogic.displayCorrectAnswer&&!this.showingAnswer){if(l=this.displayLogic.isMath||this.model.get("question")&&this.model.get("question").is_math,d=this.model.get("question").type,this.$el.addClass("lrn_display_correct_answer_enabled"),this.$correctAnswerList||(this.$correctAnswerList=this.$(".lrn_correctAnswerList")),i="",u=this.getValidatedResponses(),p.default.contains(["formulaV2","chemistry"],d)){var h,g,showCorrectAnswerList=!1;if((0,p.default)(u).forEach((function(i,u){(p.default.isBoolean(i)?!1===i:this.shouldDisplayCorrectAnswerList(i,u))&&(showCorrectAnswerList=!0)}),this),showCorrectAnswerList&&(h=this.model.getValidResponse().value,p.default.isArray(h)&&h.length)){for(var y=0;y<h.length;y++){var S=h[y].value;if(p.default.isString(S)){g="\\("+p.default.escape(S)+"\\)";break}}g&&(i='\n                                <li>\n                                    <span class="lrn_responseIndex">0</span>\n                                    <span class="lrn_responseText">'.concat(g,"</span>\n                                </li>\n                            "))}}else(0,p.default)(u).forEach((function(l,d){var h=p.default.isBoolean(l)?!1===l:this.shouldDisplayCorrectAnswerList(l,d),g=this.getCorrectResponseTextByIndex(d);if(h){var v="<li>";p.default.isEmpty(g)&&(g="&nbsp;"),u.length&&(v+='<span class="lrn_responseIndex">'.concat(this.getResponseIndexLabel(d),"</span>")),v+='<span class="lrn_responseText">'+g+"</span>",i+=v+="</li>"}}),this);i&&(this.$correctAnswerList.empty().append(i),this.$(".lrn_correctAnswers").removeClass("lrn_hide")),l&&(this.mathquillRendering()?this.renderMathquill():v.default&&v.default.render(this.$el[0])),this.showingAnswer=!0}},getValidatedResponses:function getValidatedResponses(){var i,u,l=this.model.validateResponse();if(p.default.isBoolean(l)&&(l=[l]),(!l||!l.length)&&this.model.canValidateResponse()){u=0,i=this.model.getValidResponse(),p.default.isArray(i.value)?u=i.value.length:p.default.isArray(i)?u=i.length:p.default.isString(i)&&(u=1),l=[];for(var d=0;d<u;d++)l.push(!1)}return l},clearCorrectAnswers:function clearCorrectAnswers(){this.showingAnswer&&(this.$(".lrn_correctAnswers").addClass("lrn_hide"),this.$(".lrn_responseIndex").remove(),this.$correctAnswerList&&this.$correctAnswerList.empty(),this.$("[data-lrn-suggested-answer-template]").remove(),this.showingAnswer=!1,this.processAccessibility())},getResponseIndexLabel:function getResponseIndexLabel(i){var u=1;if(this.displayLogic.validation_stem_numeration)switch(this.displayLogic.validation_stem_numeration){case"number":break;case"lower-alpha":u="a";break;case"upper-alpha":u="A";break;default:delete this.displayLogic.validation_stem_numeration}return this.displayLogic.validation_stem_numeration&&"number"!==this.displayLogic.validation_stem_numeration?String.fromCharCode(u.charCodeAt(0)+i):u+i},_restoreDisplayCorrectAnswer:function _restoreDisplayCorrectAnswer(){p.default.isUndefined(this._defaultDisplayCorrectAnswer)||(this.displayLogic.displayCorrectAnswer=this._defaultDisplayCorrectAnswer,delete this._defaultDisplayCorrectAnswer)}});p.default.deepExtend(y.prototype,g.default);var S=y;u.default=S},72529:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(32352)),p=_interopRequireDefault(l(90990)),h=_interopRequireDefault(l(74962));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var g=function(){function DependentScorer(i){!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,DependentScorer),this.questions=i}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(DependentScorer,[{key:"score",value:function score(){var score;score=d.default.isNumber(p.default.sumNullableNumbers(d.default.pluck(this.questions,"score")))?0:null;for(var i=0;i<this.questions.length&&(score=p.default.sumNullableNumbers([score,this.questions[i].score]),d.default.isNumber(this.questions[i].score)&&!(this.questions[i].score<this.questions[i].max_score));i++);return score}},{key:"maxScore",value:function maxScore(){for(var maxScore=null,i=0;i<this.questions.length&&(maxScore=p.default.sumNullableNumbers([maxScore,this.questions[i].max_score]),d.default.isNumber(this.questions[i].max_score));i++);return maxScore}},{key:"maxScoreOfAttempted",value:function maxScoreOfAttempted(){for(var maxScoreOfAttempted=0,i=0;i<this.questions.length;i++)this.questions[i].attempted&&(maxScoreOfAttempted=p.default.sumNullableNumbers([maxScoreOfAttempted,this.questions[i].max_score]));return maxScoreOfAttempted}},{key:"maxScoreOfUnmarked",value:function maxScoreOfUnmarked(){for(var maxScoreOfUnmarked=null,i=0;i<this.questions.length&&this.questions[i].attempted;i++)if(h.default.isQuestionUnmarked(this.questions[i])||d.default.isNumber(maxScoreOfUnmarked))maxScoreOfUnmarked=p.default.sumNullableNumbers([maxScoreOfUnmarked,this.questions[i].max_score]);else if(!h.default.isQuestionCorrect(this.questions[i]))break;return d.default.isNumber(maxScoreOfUnmarked)||(maxScoreOfUnmarked=0),maxScoreOfUnmarked}}]),DependentScorer}();u.default=g},93606:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(32352)),p=_interopRequireDefault(l(90990)),h=_interopRequireDefault(l(74962));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var g=function(){function DichotomousScorer(i){!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,DichotomousScorer),this.questions=i}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(DichotomousScorer,[{key:"score",value:function score(){var score=p.default.sumNullableNumbers(d.default.pluck(this.questions,"score")),i=this.maxScore();return null===score?null:score<i?0:i}},{key:"maxScore",value:function maxScore(){return p.default.sumNullableNumbers(d.default.pluck(this.questions,"max_score"))}},{key:"maxScoreOfAttempted",value:function maxScoreOfAttempted(){for(var maxScoreOfAttempted=0,i=0;i<this.questions.length;i++)if(this.questions[i].attempted){maxScoreOfAttempted=p.default.sumNullableNumbers(d.default.pluck(this.questions,"max_score"));break}return maxScoreOfAttempted}},{key:"maxScoreOfUnmarked",value:function maxScoreOfUnmarked(){for(var maxScoreOfUnmarked=0,i=0;i<this.questions.length;i++)if(h.default.isQuestionUnmarked(this.questions[i])){maxScoreOfUnmarked=p.default.sumNullableNumbers(d.default.pluck(this.questions,"max_score"));break}return maxScoreOfUnmarked}}]),DichotomousScorer}();u.default=g},87705:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(32352)),p=(_interopRequireDefault(l(90990)),_interopRequireDefault(l(74962))),h=_interopRequireDefault(l(68142)),g=_interopRequireDefault(l(93606)),v=_interopRequireDefault(l(72529));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var y={"per-question":h.default,dichotomous:g.default,dependent:v.default};function round(i,u){if(!d.default.isNumber(i))return i;var l=Math.pow(10,u);return Math.round(i*l)/l}var S=function GroupScorer(i){if(!i.type)throw"Scoring type is required";if(!d.default.contains(d.default.keys(y),i.type))throw"Scoring type is invalid.";if(!i.questions||!d.default.isArray(i.questions)||!i.questions.length)throw"An array of at least one question score is required";i.questions=d.default.map(i.questions,(function(i){return d.default.isObject(i)?i:{}}));var u=new y[i.type](i.questions);this.score=function(){return round(u.score(),2)},this.maxScore=function(){return round(u.maxScore(),2)},this.maxScoreOfAttempted=function(){return round(u.maxScoreOfAttempted(),2)},this.maxScoreOfUnmarked=function(){return round(u.maxScoreOfUnmarked(),2)},this.attempted=function(){var u=!1;return d.default.forEach(i.questions,(function(i){i.attempted&&(u=!0)})),u},this.unmarked=function(){var u=!1;return d.default.forEach(i.questions,(function(i){p.default.isQuestionUnmarked(i)&&(u=!0)})),u}};u.default=S},68142:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(32352)),p=_interopRequireDefault(l(90990)),h=_interopRequireDefault(l(74962));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var g=function(){function PerQuestionScorer(i){!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,PerQuestionScorer),this.questions=i}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(PerQuestionScorer,[{key:"score",value:function score(){return p.default.sumNullableNumbers(d.default.pluck(this.questions,"score"))}},{key:"maxScore",value:function maxScore(){return p.default.sumNullableNumbers(d.default.pluck(this.questions,"max_score"))}},{key:"maxScoreOfAttempted",value:function maxScoreOfAttempted(){for(var maxScoreOfAttempted=0,i=0;i<this.questions.length;i++)this.questions[i].attempted&&(maxScoreOfAttempted=p.default.sumNullableNumbers([maxScoreOfAttempted,this.questions[i].max_score]));return maxScoreOfAttempted}},{key:"maxScoreOfUnmarked",value:function maxScoreOfUnmarked(){for(var maxScoreOfUnmarked=0,i=0;i<this.questions.length;i++)h.default.isQuestionUnmarked(this.questions[i])&&(maxScoreOfUnmarked=p.default.sumNullableNumbers([maxScoreOfUnmarked,this.questions[i].max_score]));return maxScoreOfUnmarked}}]),PerQuestionScorer}();u.default=g},58800:function(i,u,l){"use strict";function _typeof(i){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(i)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(84611)),p=_interopRequireDefault(l(90990));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}function _setPrototypeOf(i,u){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,u){return i.__proto__=u,i},_setPrototypeOf(i,u)}function _createSuper(i){var u=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(i){return!1}}();return function _createSuperInternal(){var l,d=_getPrototypeOf(i);if(u){var p=_getPrototypeOf(this).constructor;l=Reflect.construct(d,arguments,p)}else l=d.apply(this,arguments);return _possibleConstructorReturn(this,l)}}function _possibleConstructorReturn(i,u){if(u&&("object"===_typeof(u)||"function"==typeof u))return u;if(void 0!==u)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(i)}function _getPrototypeOf(i){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)},_getPrototypeOf(i)}var h=function(i){!function _inherits(i,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),u&&_setPrototypeOf(i,u)}(NonValidatableScorer,i);var u=_createSuper(NonValidatableScorer);function NonValidatableScorer(){return _classCallCheck(this,NonValidatableScorer),u.apply(this,arguments)}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(NonValidatableScorer,[{key:"isValid",value:function isValid(){return null}},{key:"score",value:function score(){return this.scoringData.score}},{key:"maxScore",value:function maxScore(){return this.scoringData.maxScore}},{key:"error",value:function error(){}},{key:"canValidateResponse",value:function canValidateResponse(i){return!1}},{key:"scoreQuestionResponse",value:function scoreQuestionResponse(i){this.scoringData={automarkable:!1},p.default.normalizeScores(this.scoringData,i)}}]),NonValidatableScorer}(d.default),g=h;u.default=g},84611:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=_interopRequireDefault(l(32352)),p=_interopRequireDefault(l(49082)),h=_interopRequireDefault(l(67426));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var g=function(){function BaseScorer(){var i=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,BaseScorer),u.includeError&&(0,p.default)(this,u),u.scoringErrorHandler=function(u){return i.scoringErrors=u},this.checkSynchronicityOption(u),this.options=u}return function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}(BaseScorer,[{key:"applyDynamicContentQuestionFormatting",value:function applyDynamicContentQuestionFormatting(i){var u=i.question,l=i.response;if(u&&!d.default.isEmpty(u.dynamic)){var p=l&&d.default.getNested(l,"dynamic.id");i.question=h.default.getFormattedQuestion(u,p)}return i}},{key:"stripSimplefeature",value:function stripSimplefeature(i){!function walkObject(i){Object.keys(i).forEach((function(u){d.default.isObject(i[u])&&!d.default.isEmpty(i[u])?walkObject(i[u]):d.default.isString(i[u])&&(i[u]=function removeAnySimplefeatureIdDataAttribute(i){return i.replace(/data-simplefeature_id="[^"]+"/gi,"")}(i[u]))}))}(i)}},{key:"setError",value:function setError(i){this.scoringData={error:i}}},{key:"checkSynchronicityOption",value:function checkSynchronicityOption(i){if(null!=i&&i.async)throw"This scorer does not support asynchronous scoring."}},{key:"isValid",value:function isValid(){return this.scoringData.isValid}},{key:"score",value:function score(){return this.scoringData.score}},{key:"scoreWithFullPenalty",value:function scoreWithFullPenalty(){return this.scoringData.scoreWithFullPenalty}},{key:"validateIndividualResponses",value:function validateIndividualResponses(){return this.scoringData.responsesValid}},{key:"maxScore",value:function maxScore(){return this.scoringData.maxScore}},{key:"suggestedResponse",value:function suggestedResponse(){return this.scoringData.suggestedResponse}},{key:"error",value:function error(){var i;return null===(i=this.scoringData)||void 0===i?void 0:i.error}},{key:"canValidateResponse",value:function canValidateResponse(i){throw new Error("Must implement canValidateResponse method on this scorer child")}},{key:"executeScoring",value:function executeScoring(i){return this.applyDynamicContentQuestionFormatting(i),this.stripSimplefeature(i),this.questionResponse=i,this.scoringErrors=null,this.scoreQuestionResponse(i)}},{key:"scoreQuestionResponse",value:function scoreQuestionResponse(i){throw new Error("Must implement scoreQuestionResponse method on this scorer child")}}]),BaseScorer}();u.default=g},90990:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(32352));function _toConsumableArray(i){return function _arrayWithoutHoles(i){if(Array.isArray(i))return _arrayLikeToArray(i)}(i)||function _iterableToArray(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||function _unsupportedIterableToArray(i,u){if(!i)return;if("string"==typeof i)return _arrayLikeToArray(i,u);var l=Object.prototype.toString.call(i).slice(8,-1);"Object"===l&&i.constructor&&(l=i.constructor.name);if("Map"===l||"Set"===l)return Array.from(i);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return _arrayLikeToArray(i,u)}(i)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(i,u){(null==u||u>i.length)&&(u=i.length);for(var l=0,d=new Array(u);l<u;l++)d[l]=i[l];return d}function _typeof(i){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(i)}function round(i,u){switch(u){case"none":return i;case"ceiling":return Math.ceil(i);default:return Math.floor(i)}}function generateScore(i){var u=d.default.extend({allowNegative:!1,rawScore:null,maxScore:null},i),l=u.rawScore;return d.default.isNumber(l)?(l=Math.min(l,u.maxScore),u.allowNegative||(l=Math.max(0,l)),l):l}function areStringsEqual(i,u,l){var p=d.default.isString(i)&&d.default.isString(u);return p&&!l.caseSensitive&&(i=i.toLowerCase(),u=u.toLowerCase()),p&&l.removeWhitespace&&(i=i.replace(/ | /g,""),u=u.replace(/ | /g,"")),i===u}function validateValueString(i,u,l){return!(l.strictEquality&&(d.default.isUndefined(u)||null===u)&&!d.default.isUndefined(i)&&null!==i&&_typeof(u)!==_typeof(i))&&(l.trimWhiteSpace&&d.default.isString(u)&&d.default.isString(i)&&(u=u.trim(),i=i.trim()),d.default.isEmpty(u)&&d.default.isEmpty(i)||areStringsEqual(u,i,l))}function validateValueMath(i,u,l){var d=i?[i]:[];return l.async?validateMathLists(u,d,l.validateSingleSpec,1,null,l).then((function(i){return!!i.isValid})):!!validateMathLists(u,d,l.validateSingleSpec,1,null,l).isValid}function validateValues(i,u,l){var p={validateValuesString:function validateValuesString(i,u,l){return d.default.map(i,(function(i,d){return validateValueString(u[d],i,l)}))},validateValuesEquality:function validateValuesEquality(i,u){return d.default.map(i,(function(i,l){return d.default.isEqual(i,u[l])}))},validateValuesIgnoreOrder:function validateValuesIgnoreOrder(i,u){var l=d.default.clone(u);return d.default.map(i,(function(i){var u=d.default.indexOf(l,i);return u>=0&&(delete l[u],!0)}))},validateValuesMath:function validateValuesMath(i,u,l){return d.default.map(i,(function(i,d){return validateValueMath(u[d],i,l)}))},customValidation:function customValidation(i,u,l){if(d.default.isFunction(l.customValidation))return l.customValidation(i,u,l)}},h=p[getValidationFunctionName(l)].apply(null,[i,u,l]);return l.async?Promise.all(h):h}function findMaxValueElements(i,u){if(!i.length)return[];var l=[],h=u(i[0]);return d.default.each(i,(function(i){var d=u(i);d>h?(h=d,l=[i]):p(d,h)&&l.push(i)})),l}function countValue(i,u){return i.filter((function(i){return i===u})).length}function chooseBestValidationResult(i){var u=i;return u=findMaxValueElements(u,(function(i){return i.score||0})),u=findMaxValueElements(u,(function(i){return countValue(i.validityPerValue||[],!0)})),(u=findMaxValueElements(u,(function(i){return i.maxScore||0})))[0]}function chooseBestSuggestedResponse(i){var u=i;return u=findMaxValueElements(u,(function(i){return i.maxScore||0})),(u=findMaxValueElements(u,(function(i){return countValue(i.validityPerValue||[],!0)})))[0]}function getScoringSettings(i,u,l){return{scoringType:u.validation.scoring_type,scoreIfCorrect:d.default.isNumber(i.score)?i.score:l.score,penaltyIfIncorrect:-Math.abs(d.default.isNumber(u.validation.penalty)?u.validation.penalty:l.penaltyScore),rounding:u.validation.rounding||l.rounding}}function getSubmittedValues(i){var u=[];return i.response&&i.response.value&&(u=i.response.value),u}function addGlobalValidityAndScore(i,u,l,p){i.globalValidity=function computeGlobalValidity(i,u,l){switch(i){case"exactMatch":return function computeGlobalValidityExactMatch(i,u){return i.length?i.length===u.length&&!!d.default.all(i):void 0}(u,l);case"partialMatch":case"partialMatchV2":return function computeGlobalValidityPartialMatch(i,u){return i.length?!!d.default.any(i):void 0}(u)}}(u.scoringType,i.validityPerValue,l),i.score=function computeScore(i,u,l,d,p,h,g){function computeScorePartialMatch(i,u,l){var d=0;return l.forEach((function(l){switch(l){case!1:case null:case void 0:d+=u;break;case!0:d+=i}})),d}switch(i){case"exactMatch":return function computeScoreExactMatch(i,u,l){switch(l){case!1:return u;case!0:return i;default:return 0}}(u,l,d);case"partialMatch":return computeScorePartialMatch(u,l,p);case"partialMatchV2":return round(computeScorePartialMatch(u,l,p)/h,g)}}(u.scoringType,u.scoreIfCorrect,u.penaltyIfIncorrect,i.globalValidity,i.validityPerValue,l.length,u.rounding),i.maxScore=function computeMaxScore(i,u,l){return"partialMatch"===i?u*l.length:u}(u.scoringType,u.scoreIfCorrect,l);var h=p.response;h&&"reset"===h.resetState&&d.default.isNull(h.value)&&(i.score=null);var g=JSON.stringify(p.response);return"{}"!==g&&"[]"!==g||(i.score=null),i}function generateValidationResultFromAllPossibleAnswers(i,u,l,p){var h=function getAllPossibleAnswers(i){var u=[];return d.default.each(i,(function(i){d.default.each(i.value,(function(i,l){d.default.isUndefined(u[l])&&(u[l]=[]),u[l].push(i)}))})),u}(u);if(d.default.isEmpty(h))return p.async?Promise.resolve({}):{};var g=i.question,v=getSubmittedValues(i),y=getScoringSettings(u[0],g,l),S=function validateValuesForAllPossibleAnswers(i,u,l){var p={validateValuesString:function validateValuesString(i,u,l){var p=[];return{valueList:d.default.map(i,(function(i,h){var g=u[h],v=d.default.findIndex(g,(function(u){return!d.default.isEmpty(u)&&validateValueString(u,i,l)}));return-1!==v&&(d.default.isUndefined(p[v])?p[v]=1:p[v]++,!0)})),indexMatchCount:p}},validateValuesEquality:function validateValuesEquality(i,u,l){var p=[];return{valueList:d.default.map(i,(function(i,l){var h=u[l],g=d.default.findIndex(h,(function(u){return d.default.isEqual(i,u)}));return-1!==g&&(d.default.isUndefined(p[g])?p[g]=1:p[g]++,!0)})),indexMatchCount:p}},validateValuesIgnoreOrder:function validateValuesIgnoreOrder(i,u,l){var p=d.default.clone(u),h=[];return{valueList:d.default.map(i,(function(i){var u=-1;d.default.each(p,(function(l,g){var v=d.default.indexOf(l,i);return-1===u&&d.default.indexOf(l,v>=0)&&(u=g,d.default.isUndefined(h[v])?h[v]=1:h[v]++),u>=0&&(delete p[u],!0)}))})),indexMatchCount:h}},validateValuesMath:function validateValuesMath(i,u,l){var p=[],h=function determineValueAndIncrementIndexMatchCount(i){var u=i.indexOf(!0);return-1!==u&&(d.default.isUndefined(p[u])?p[u]=1:p[u]++,!0)};return l.async?Promise.all(i.map((function(i,d){return Promise.all(u[d].map((function(u){return validateValueMath(u,i,l)}))).then((function(i){return h(i)}))}))).then((function(i){return{valueList:i,indexMatchCount:p}})):{valueList:i.map((function(i,d){var p=u[d].map((function(u){return validateValueMath(u,i,l)}));return h(p)})),indexMatchCount:p}},customValidation:function customValidation(i,u,l){if(d.default.isFunction(l.customValidation))return l.customValidation(i,u,l)}},h=p[getValidationFunctionName(l)].apply(null,[i,u,l]);return!l.async||h instanceof Promise||(h=Promise.resolve(h)),h}(v,h,p),E=function processResults(l){var p=0,g=0;d.default.each(l.indexMatchCount,(function(i,u){d.default.isNumber(i)&&i>g&&(g=i,p=u)}));var v={validityPerValue:l.valueList};return u[p]?(v.authoredResponse=u[p],v.authoredResponse.score=y.scoreIfCorrect):v.authoredResponse=u[0],v=addGlobalValidityAndScore(v,y,h,i)};return p.async?S.then(E):E(S)}function generateValidationResults(i,u,l,d){var p;p=!0===(null==d?void 0:d.matchAllPossibleResponses)?[generateValidationResultFromAllPossibleAnswers(i,u,l,d)]:u.filter((function(i){return i.value})).map((function(u){return function generateValidationResult(i,u,l,d){var p=getSubmittedValues(i),h=function processResult(d){var p=i.question,h={authoredResponse:u,validityPerValue:d};return addGlobalValidityAndScore(h,getScoringSettings(u,p,l),u.value,i)};return d.async?validateValues(p,u.value,d).then(h):h(validateValues(p,u.value,d))}(i,u,l,d)}));var h=function processResults(i){return i.length<=0&&(i=[{authoredResponse:void 0,validityPerValue:null,globalValidity:void 0,score:null,maxScore:0}]),i};return d.async?Promise.all(p).then(h):h(p)}function getValidationFunctionName(i){return!i||d.default.isEmpty(i)?"validateValuesEquality":i.validateSingleSpec?"validateValuesMath":i.ignoreOrder?"validateValuesIgnoreOrder":d.default.isFunction(i.customValidation)?"customValidation":"validateValuesString"}var p=function epsEqu(i,u){return Math.abs(i-u)<1e-6};function validateMathLists(i,u,l,p,h){for(var g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},v=[],y=[],S=-1/0,E=0;E<u.length;E++){var R=u[E],T=void 0,O=void 0;d.default.isArray(R)?(S=O=p,T=R):(O=d.default.isNumber(R.score)?R.score:p,S=Math.max(S,O),T=R.value),v.push(O),T=T||[];var M=[];if(d.default.isString(i))for(var I=0;I<T.length;I++){var P=T[I];d.default.isString(P.options)&&(P.options=JSON.parse(P.options)),M.push([P,i])}M.length&&y.push(M)}S=S===-1/0?p:S;var D=function processResults(u){for(var l=-1/0,p=null,y=null,E=0;E<u.length;E++){for(var R=u[E].length>0,T=0;T<u[E].length;T++){var O,M,I,P=u[E][T],D=P.spec,N=P.evaluation,q=!0===N.result||!0===(null==N||null===(O=N.result)||void 0===O||null===(M=O.data)||void 0===M||null===(I=M.score[0])||void 0===I?void 0:I.result);if(R=R&&q,!d.default.isBoolean(N.result)&&!d.default.isObject(N.result)){var L,V,U,B=["method: "+(null==D||null===(L=D[0])||void 0===L?void 0:L.method)];null!=D&&null!==(V=D[0])&&void 0!==V&&V.value&&B.push("value: '"+D[0].value+"'"),null!=D&&null!==(U=D[0])&&void 0!==U&&U.options&&B.push("options: "+JSON.stringify(D[0].options)),y={code:N.errorCode,name:"MathQuestionException",message:N.message+" Failed validating user input '"+i+"' against validation object: "+B.join(", "),location:N.location}}}R&&(l=Math.max(l,v[E])),p=p||R}l=l===-1/0?void 0:l,!u.length||p||d.default.isUndefined(h)||(l=-h);var H={maxScore:S,isValid:p,scoreWithFullPenalty:generateScore({allowNegative:!0,rawScore:l,maxScore:S})};return y&&(d.default.isFunction(g.scoringErrorHandler)&&g.scoringErrorHandler(y),H.error=y),H};if(g.async)return Promise.all(y.map((function(i){return Promise.all(i.map((function(i){return Promise.resolve(l.apply(void 0,_toConsumableArray(i))).then((function(u){return{spec:i,evaluation:u}}))})))}))).then(D);var N=y.map((function(i){return i.map((function(i){return{spec:i,evaluation:l.apply(void 0,_toConsumableArray(i))}}))}));return D(N)}function isPlainObj(i){return i&&"object"==_typeof(i)&&i.constructor&&i.constructor==Object}function recursiveParameterClean(i){return isPlainObj(i)?(d.default.each(i,(function(u,l){if(isPlainObj(u))i[l]=recursiveParameterClean(u);else if(d.default.isArray(u))i[l]=d.default.map(u,recursiveParameterClean);else if(d.default.isString(u))switch(l){case"score":case"valid_score":case"penalty_score":i[l]=parseFloat(u);break;case"pairwise":case"case_sensitive":case"is_math":i[l]="true"===u.toLowerCase()||"false"!==u.toLowerCase()&&null,d.default.isNull(i[l])&&delete i[l]}})),i):i}function setCompatibilityOption(i){return"equivLiteral"===i.method&&(i.options.compatibility="v1.37"),i}var h={round:round,normalizeScores:function normalizeScores(i,u){var l=i.isAttempted,p=d.default.getNested(u,"question.validation.min_score_if_attempted"),h=d.default.getNested(u,"question.validation.max_score"),g=d.default.getNested(u,"question.validation.unscored");d.default.isUndefined(l)&&(l=u.response&&isPlainObj(u.response)&&!!u.response.value),d.default.isBoolean(i.isValid)||(i.isValid=null),!0===g?(i.score=null,i.maxScore=null):(d.default.isNumber(i.score)?i.score=parseFloat(i.score.toFixed(4)):i.score=null,d.default.isNumber(i.maxScore)?(i.maxScore=parseFloat(i.maxScore.toFixed(4)),l&&d.default.isNull(i.score)&&i.maxScore>0&&(i.score=0)):i.maxScore=null,!1===i.automarkable&&d.default.isNumber(h)&&(i.maxScore=h),d.default.isUndefined(p)||(l&&(i.score=Math.max(i.score,p)),i.maxScore=Math.max(i.maxScore,p))),d.default.isUndefined(i.automarkable)&&(i.automarkable=!0)},scoreArray:function scoreArray(i,u,l){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},p=function processResults(u){var l=chooseBestValidationResult(u),d=chooseBestSuggestedResponse(u);return{responsesValid:l.validityPerValue,isValid:l.globalValidity,suggestedResponse:d.authoredResponse,maxScore:d.maxScore,scoreWithFullPenalty:generateScore({allowNegative:!0,rawScore:l.score,maxScore:l.maxScore}),score:generateScore({allowNegative:i.question.validation.allow_negative_scores,rawScore:l.score,maxScore:l.maxScore})}};if(d.async)return generateValidationResults(i,u,l,d).then(p);var h=generateValidationResults(i,u,l,d);return p(h)},generateScore:generateScore,addIfDefined:function addIfDefined(i,u){return d.default.isNumber(u)&&(d.default.isUndefined(i)&&(i=0),i+=u),i},stringCompare:areStringsEqual,scoreList:function scoreList(i,u){var l,p,h,g,v,y,S=i.question.validation,E=S.valid_response,R=d.default.isNumber(S.valid_score)?S.valid_score:u.score,T=i.response.value||[],O=R*E.length,M="orderlist"===i.question.type&&!0===S.pairwise,I=[],P=0,D=0;if(T.length){if(h=0,M){for(l=d.default.map(T,(function(i){return d.default.indexOf(E,i)})),v=0;v<l.length;v++)for(y=v+1;y<l.length;y++)D++,l[v]<l[y]&&P++;h=parseFloat((E.length*P/D).toPrecision(2)),D&&(g=d.default.isUndefined(S.partial_scoring)||S.partial_scoring?P>0:D===P)}for(v=0;v<T.length;v++)p=void 0,E[v]==T[v]?(p=R,I.push(!0)):I.push(!1),M||d.default.isUndefined(p)?!M&&d.default.isNumber(S.penalty_score)&&(h-=Math.abs(S.penalty_score)):h+=p;!M&&I.length&&(g=d.default.isUndefined(S.partial_scoring)||S.partial_scoring?d.default.any(I):d.default.all(I)),d.default.isUndefined(S.partial_scoring)||S.partial_scoring||h===O||(h=0)}return{maxScore:O,score:h,isValid:g,responsesValid:I}},normalizeParameters:function normalizeParameters(i){return recursiveParameterClean(i=d.default.clone(i))},validateMathLists:validateMathLists,sumNullableNumbers:function sumNullableNumbers(i){return d.default.reduce(i,(function(i,u){return u=d.default.isNumber(u)?u:null,d.default.isNumber(u)||d.default.isNumber(i)?u+i:null}),null)},InvalidScoringTypeException:function InvalidScoringTypeException(i,u){this.message=i+" does not support scoring type "+u,this.name="InvalidScoringTypeException",this.toString=function(){return this.name+": "+this.message}},epsEquals:p,processCompatibility:function processCompatibility(i){return d.default.each(i.question.validation.valid_response.value,(function(i){d.default.isArray(i)?d.default.each(i,(function(i){i=setCompatibilityOption(i)})):i=setCompatibilityOption(i)})),d.default.each(i.question.validation.alt_responses,(function(i){d.default.each(i.value,(function(i){d.default.isArray(i)?d.default.each(i,(function(i){i=setCompatibilityOption(i)})):i=setCompatibilityOption(i)}))})),i}};u.default=h},74962:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(32352));var p={isQuestionCorrect:function isQuestionCorrect(i){return d.default.isNumber(i.score)&&i.score===i.max_score},isQuestionUnmarked:function isQuestionUnmarked(i){return d.default.isObject(i)&&d.default.isNull(i.score)&&i.attempted&&!i.automarkable}};u.default=p},32352:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(95023));function _typeof(i){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(i)}d.default.mixin({getNested:function getNested(i,u){if(i){var l=u.match(/(.+?)\.(.*)/);return l?this.getNested(i[l[1]],l[2]):i[u]}},exists:function exists(i){return null!=i},deepClone:function deepClone(i,u){if(!i||"object"!==_typeof(i))return i;if(d.default.isString(i))return String.prototype.slice.call(i);if(d.default.isDate(i))return new Date(i.valueOf());if(d.default.isFunction(i.clone))return i.clone();var l;if(d.default.isArray(i))l=Array.prototype.slice.call(i);else{if(i.constructor!=={}.constructor)return i;l=d.default.extend({},i)}if(!d.default.isUndefined(u)&&u>0)for(var p in l)l[p]=d.default.deepClone(l[p],u-1);return l}});var p=d.default;u.default=p},67426:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(32352));var p=["association","choicematrix","classification","clozeassociation","clozedropdown","clozeformula","formulaV2","imageclozedropdown","imageclozeassociationV2","mcq"],h=function isWhiteListed(i){return d.default.contains(p,i)};var g={getFormattedQuestion:function getFormattedQuestion(i,u){if(i){var l=d.default.deepClone(i),p=l.dynamic;if(!d.default.isEmpty(p)&&h(l.type)){var g=p.rows,v=p.cols,y=!d.default.isString(u)||d.default.isEmpty(u)?g[0]:d.default.findWhere(g,{id:u});if(y){var S=y.values,E=function(){var i={};return d.default.each(v,(function(u,l){i[u]=S[l]})),i}(),R=JSON.stringify(l).replace(/{{var:([a-z0-9 _]+)}}/gi,(function(i,u){var l=E[u];return d.default.isString(l)?JSON.stringify(l).slice(1,-1):i}));try{l=JSON.parse(R)}catch(i){}}}return l}},isWhiteListed:h};u.default=g},49082:function(i,u,l){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=function enhanceWithErrorHandler(i){if(d.default.isFunction(i.executeScoring)){var u=i.executeScoring.bind(i);i.executeScoring=function(){var l=u.apply(void 0,arguments),p=function errorThrower(){var u=i.error();if(u){if("MathQuestionException"!==u.name)throw new Error(u);console.error(u)}};if(d.default.isFunction(null==l?void 0:l.then))return l.then(p);p()}}};var d=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}(l(95023))},95023:function(i){i.exports=function(){var i="1.13.1",u="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},l=Array.prototype,d=Object.prototype,p="undefined"!=typeof Symbol?Symbol.prototype:null,h=l.push,g=l.slice,v=d.toString,y=d.hasOwnProperty,S="undefined"!=typeof ArrayBuffer,E="undefined"!=typeof DataView,R=Array.isArray,T=Object.keys,O=Object.create,M=S&&ArrayBuffer.isView,I=isNaN,P=isFinite,D=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],q=Math.pow(2,53)-1;function j(i,u){return u=null==u?i.length-1:+u,function(){for(var l=Math.max(arguments.length-u,0),d=Array(l),p=0;p<l;p++)d[p]=arguments[p+u];switch(u){case 0:return i.call(this,d);case 1:return i.call(this,arguments[0],d);case 2:return i.call(this,arguments[0],arguments[1],d)}var h=Array(u+1);for(p=0;p<u;p++)h[p]=arguments[p];return h[u]=d,i.apply(this,h)}}function _(i){var u=typeof i;return"function"===u||"object"===u&&!!i}function w(i){return void 0===i}function A(i){return!0===i||!1===i||"[object Boolean]"===v.call(i)}function x(i){var u="[object "+i+"]";return function(i){return v.call(i)===u}}var L=x("String"),V=x("Number"),U=x("Date"),B=x("RegExp"),H=x("Error"),z=x("Symbol"),Q=x("ArrayBuffer"),G=x("Function"),Y=u.document&&u.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof Y&&(G=function(i){return"function"==typeof i||!1});var X=G,ee=x("Object"),te=E&&ee(new DataView(new ArrayBuffer(8))),ne="undefined"!=typeof Map&&ee(new Map),re=x("DataView"),ie=te?function(i){return null!=i&&X(i.getInt8)&&Q(i.buffer)}:re,ae=R||x("Array");function W(i,u){return null!=i&&y.call(i,u)}var oe=x("Arguments");!function(){oe(arguments)||(oe=function(i){return W(i,"callee")})}();var se=oe;function $(i){return V(i)&&I(i)}function C(i){return function(){return i}}function K(i){return function(u){var l=i(u);return"number"==typeof l&&l>=0&&l<=q}}function J(i){return function(u){return null==u?void 0:u[i]}}var ue=J("byteLength"),le=K(ue),ce=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,de=S?function(i){return M?M(i)&&!ie(i):le(i)&&ce.test(v.call(i))}:C(!1),fe=J("length");function Z(i,u){u=function(i){for(var u={},l=i.length,d=0;d<l;++d)u[i[d]]=!0;return{contains:function(i){return u[i]},push:function(l){return u[l]=!0,i.push(l)}}}(u);var l=N.length,p=i.constructor,h=X(p)&&p.prototype||d,g="constructor";for(W(i,g)&&!u.contains(g)&&u.push(g);l--;)(g=N[l])in i&&i[g]!==h[g]&&!u.contains(g)&&u.push(g)}function nn(i){if(!_(i))return[];if(T)return T(i);var u=[];for(var l in i)W(i,l)&&u.push(l);return D&&Z(i,u),u}function rn(i,u){var l=nn(u),d=l.length;if(null==i)return!d;for(var p=Object(i),h=0;h<d;h++){var g=l[h];if(u[g]!==p[g]||!(g in p))return!1}return!0}function tn(i){return i instanceof tn?i:this instanceof tn?void(this._wrapped=i):new tn(i)}function en(i){return new Uint8Array(i.buffer||i,i.byteOffset||0,ue(i))}tn.VERSION=i,tn.prototype.value=function(){return this._wrapped},tn.prototype.valueOf=tn.prototype.toJSON=tn.prototype.value,tn.prototype.toString=function(){return String(this._wrapped)};var pe="[object DataView]";function on(i,u,l,d){if(i===u)return 0!==i||1/i==1/u;if(null==i||null==u)return!1;if(i!=i)return u!=u;var h=typeof i;return("function"===h||"object"===h||"object"==typeof u)&&function n(i,u,l,d){i instanceof tn&&(i=i._wrapped),u instanceof tn&&(u=u._wrapped);var h=v.call(i);if(h!==v.call(u))return!1;if(te&&"[object Object]"==h&&ie(i)){if(!ie(u))return!1;h=pe}switch(h){case"[object RegExp]":case"[object String]":return""+i==""+u;case"[object Number]":return+i!=+i?+u!=+u:0==+i?1/+i==1/u:+i==+u;case"[object Date]":case"[object Boolean]":return+i==+u;case"[object Symbol]":return p.valueOf.call(i)===p.valueOf.call(u);case"[object ArrayBuffer]":case pe:return n(en(i),en(u),l,d)}var g="[object Array]"===h;if(!g&&de(i)){if(ue(i)!==ue(u))return!1;if(i.buffer===u.buffer&&i.byteOffset===u.byteOffset)return!0;g=!0}if(!g){if("object"!=typeof i||"object"!=typeof u)return!1;var y=i.constructor,S=u.constructor;if(y!==S&&!(X(y)&&y instanceof y&&X(S)&&S instanceof S)&&"constructor"in i&&"constructor"in u)return!1}d=d||[];for(var E=(l=l||[]).length;E--;)if(l[E]===i)return d[E]===u;if(l.push(i),d.push(u),g){if((E=i.length)!==u.length)return!1;for(;E--;)if(!on(i[E],u[E],l,d))return!1}else{var R,T=nn(i);if(E=T.length,nn(u).length!==E)return!1;for(;E--;)if(!W(u,R=T[E])||!on(i[R],u[R],l,d))return!1}return l.pop(),d.pop(),!0}(i,u,l,d)}function an(i){if(!_(i))return[];var u=[];for(var l in i)u.push(l);return D&&Z(i,u),u}function fn(i){var u=fe(i);return function(l){if(null==l)return!1;var d=an(l);if(fe(d))return!1;for(var p=0;p<u;p++)if(!X(l[i[p]]))return!1;return i!==be||!X(l[he])}}var he="forEach",ge="has",me=["clear","delete"],ve=["get",ge,"set"],ye=me.concat(he,ve),be=me.concat(ve),_e=["add"].concat(me,he,ge),Se=ne?fn(ye):x("Map"),Ee=ne?fn(be):x("WeakMap"),we=ne?fn(_e):x("Set"),Re=x("WeakSet");function jn(i){for(var u=nn(i),l=u.length,d=Array(l),p=0;p<l;p++)d[p]=i[u[p]];return d}function _n(i){for(var u={},l=nn(i),d=0,p=l.length;d<p;d++)u[i[l[d]]]=l[d];return u}function wn(i){var u=[];for(var l in i)X(i[l])&&u.push(l);return u.sort()}function An(i,u){return function(l){var d=arguments.length;if(u&&(l=Object(l)),d<2||null==l)return l;for(var p=1;p<d;p++)for(var h=arguments[p],g=i(h),v=g.length,y=0;y<v;y++){var S=g[y];u&&void 0!==l[S]||(l[S]=h[S])}return l}}var Ae=An(an),Te=An(nn),xe=An(an,!0);function Mn(i){if(!_(i))return{};if(O)return O(i);var r=function(){};r.prototype=i;var u=new r;return r.prototype=null,u}function En(i){return _(i)?ae(i)?i.slice():Ae({},i):i}function Bn(i){return ae(i)?i:[i]}function Nn(i){return tn.toPath(i)}function In(i,u){for(var l=u.length,d=0;d<l;d++){if(null==i)return;i=i[u[d]]}return l?i:void 0}function Tn(i,u,l){var d=In(i,Nn(u));return w(d)?l:d}function kn(i){return i}function Dn(i){return i=Te({},i),function(u){return rn(u,i)}}function Rn(i){return i=Nn(i),function(u){return In(u,i)}}function Fn(i,u,l){if(void 0===u)return i;switch(null==l?3:l){case 1:return function(l){return i.call(u,l)};case 3:return function(l,d,p){return i.call(u,l,d,p)};case 4:return function(l,d,p,h){return i.call(u,l,d,p,h)}}return function(){return i.apply(u,arguments)}}function Vn(i,u,l){return null==i?kn:X(i)?Fn(i,u,l):_(i)&&!ae(i)?Dn(i):Rn(i)}function Pn(i,u){return Vn(i,u,1/0)}function qn(i,u,l){return tn.iteratee!==Pn?tn.iteratee(i,u):Vn(i,u,l)}function Un(){}function Wn(i,u){return null==u&&(u=i,i=0),i+Math.floor(Math.random()*(u-i+1))}tn.toPath=Bn,tn.iteratee=Pn;var Ce=Date.now||function(){return(new Date).getTime()};function Ln(i){var r=function(u){return i[u]},u="(?:"+nn(i).join("|")+")",l=RegExp(u),d=RegExp(u,"g");return function(i){return i=null==i?"":""+i,l.test(i)?i.replace(d,r):i}}var Oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Me=Ln(Oe),Ie=Ln(_n(Oe)),Pe=tn.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ke=/(.)^/,De={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Ne=/\\|'|\r|\n|\u2028|\u2029/g;function Xn(i){return"\\"+De[i]}var qe=/^\s*(\w|\$)+\s*$/,Le=0;function nr(i,u,l,d,p){if(!(d instanceof u))return i.apply(l,p);var h=Mn(i.prototype),g=i.apply(h,p);return _(g)?g:h}var Fe=j((function(i,u){var l=Fe.placeholder,e=function(){for(var d=0,p=u.length,h=Array(p),g=0;g<p;g++)h[g]=u[g]===l?arguments[d++]:u[g];for(;d<arguments.length;)h.push(arguments[d++]);return nr(i,e,this,this,h)};return e}));Fe.placeholder=tn;var je=j((function(i,u,l){if(!X(i))throw new TypeError("Bind must be called on a function");var d=j((function(p){return nr(i,d,u,this,l.concat(p))}));return d})),Ve=K(fe);function ur(i,u,l,d){if(d=d||[],u||0===u){if(u<=0)return d.concat(i)}else u=1/0;for(var p=d.length,h=0,g=fe(i);h<g;h++){var v=i[h];if(Ve(v)&&(ae(v)||se(v)))if(u>1)ur(v,u-1,l,d),p=d.length;else for(var y=0,S=v.length;y<S;)d[p++]=v[y++];else l||(d[p++]=v)}return d}var Ue=j((function(i,u){var l=(u=ur(u,!1,!1)).length;if(l<1)throw new Error("bindAll must be passed function names");for(;l--;){var d=u[l];i[d]=je(i[d],i)}return i})),Be=j((function(i,u,l){return setTimeout((function(){return i.apply(null,l)}),u)})),He=Fe(Be,tn,1);function fr(i){return function(){return!i.apply(this,arguments)}}function cr(i,u){var l;return function(){return--i>0&&(l=u.apply(this,arguments)),i<=1&&(u=null),l}}var ze=Fe(cr,2);function sr(i,u,l){u=qn(u,l);for(var d,p=nn(i),h=0,g=p.length;h<g;h++)if(u(i[d=p[h]],d,i))return d}function pr(i){return function(u,l,d){l=qn(l,d);for(var p=fe(u),h=i>0?0:p-1;h>=0&&h<p;h+=i)if(l(u[h],h,u))return h;return-1}}var Qe=pr(1),We=pr(-1);function yr(i,u,l,d){for(var p=(l=qn(l,d,1))(u),h=0,g=fe(i);h<g;){var v=Math.floor((h+g)/2);l(i[v])<p?h=v+1:g=v}return h}function dr(i,u,l){return function(d,p,h){var v=0,y=fe(d);if("number"==typeof h)i>0?v=h>=0?h:Math.max(h+y,v):y=h>=0?Math.min(h+1,y):h+y+1;else if(l&&h&&y)return d[h=l(d,p)]===p?h:-1;if(p!=p)return(h=u(g.call(d,v,y),$))>=0?h+v:-1;for(h=i>0?v:y-1;h>=0&&h<y;h+=i)if(d[h]===p)return h;return-1}}var Ge=dr(1,Qe,yr),$e=dr(-1,We);function mr(i,u,l){var d=(Ve(i)?Qe:sr)(i,u,l);if(void 0!==d&&-1!==d)return i[d]}function jr(i,u,l){var d,p;if(u=Fn(u,l),Ve(i))for(d=0,p=i.length;d<p;d++)u(i[d],d,i);else{var h=nn(i);for(d=0,p=h.length;d<p;d++)u(i[h[d]],h[d],i)}return i}function _r(i,u,l){u=qn(u,l);for(var d=!Ve(i)&&nn(i),p=(d||i).length,h=Array(p),g=0;g<p;g++){var v=d?d[g]:g;h[g]=u(i[v],v,i)}return h}function wr(i){var r=function(u,l,d,p){var h=!Ve(u)&&nn(u),g=(h||u).length,v=i>0?0:g-1;for(p||(d=u[h?h[v]:v],v+=i);v>=0&&v<g;v+=i){var y=h?h[v]:v;d=l(d,u[y],y,u)}return d};return function(i,u,l,d){var p=arguments.length>=3;return r(i,Fn(u,d,4),l,p)}}var Ye=wr(1),Je=wr(-1);function Sr(i,u,l){var d=[];return u=qn(u,l),jr(i,(function(i,l,p){u(i,l,p)&&d.push(i)})),d}function Or(i,u,l){u=qn(u,l);for(var d=!Ve(i)&&nn(i),p=(d||i).length,h=0;h<p;h++){var g=d?d[h]:h;if(!u(i[g],g,i))return!1}return!0}function Mr(i,u,l){u=qn(u,l);for(var d=!Ve(i)&&nn(i),p=(d||i).length,h=0;h<p;h++){var g=d?d[h]:h;if(u(i[g],g,i))return!0}return!1}function Er(i,u,l,d){return Ve(i)||(i=jn(i)),("number"!=typeof l||d)&&(l=0),Ge(i,u,l)>=0}var Xe=j((function(i,u,l){var d,p;return X(u)?p=u:(u=Nn(u),d=u.slice(0,-1),u=u[u.length-1]),_r(i,(function(i){var h=p;if(!h){if(d&&d.length&&(i=In(i,d)),null==i)return;h=i[u]}return null==h?h:h.apply(i,l)}))}));function Nr(i,u){return _r(i,Rn(u))}function Ir(i,u,l){var d,p,h=-1/0,g=-1/0;if(null==u||"number"==typeof u&&"object"!=typeof i[0]&&null!=i)for(var v=0,y=(i=Ve(i)?i:jn(i)).length;v<y;v++)null!=(d=i[v])&&d>h&&(h=d);else u=qn(u,l),jr(i,(function(i,l,d){((p=u(i,l,d))>g||p===-1/0&&h===-1/0)&&(h=i,g=p)}));return h}function Tr(i,u,l){if(null==u||l)return Ve(i)||(i=jn(i)),i[Wn(i.length-1)];var d=Ve(i)?En(i):jn(i),p=fe(d);u=Math.max(Math.min(u,p),0);for(var h=p-1,g=0;g<u;g++){var v=Wn(g,h),y=d[g];d[g]=d[v],d[v]=y}return d.slice(0,u)}function kr(i,u){return function(l,d,p){var h=u?[[],[]]:{};return d=qn(d,p),jr(l,(function(u,p){var g=d(u,p,l);i(h,u,g)})),h}}var Ke=kr((function(i,u,l){W(i,l)?i[l].push(u):i[l]=[u]})),Ze=kr((function(i,u,l){i[l]=u})),et=kr((function(i,u,l){W(i,l)?i[l]++:i[l]=1})),tt=kr((function(i,u,l){i[l?0:1].push(u)}),!0),nt=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function qr(i,u,l){return u in l}var rt=j((function(i,u){var l={},d=u[0];if(null==i)return l;X(d)?(u.length>1&&(d=Fn(d,u[1])),u=an(i)):(d=qr,u=ur(u,!1,!1),i=Object(i));for(var p=0,h=u.length;p<h;p++){var g=u[p],v=i[g];d(v,g,i)&&(l[g]=v)}return l})),it=j((function(i,u){var l,d=u[0];return X(d)?(d=fr(d),u.length>1&&(l=u[1])):(u=_r(ur(u,!1,!1),String),d=function(i,l){return!Er(u,l)}),rt(i,d,l)}));function zr(i,u,l){return g.call(i,0,Math.max(0,i.length-(null==u||l?1:u)))}function Lr(i,u,l){return null==i||i.length<1?null==u||l?void 0:[]:null==u||l?i[0]:zr(i,i.length-u)}function $r(i,u,l){return g.call(i,null==u||l?1:u)}var at=j((function(i,u){return u=ur(u,!0,!0),Sr(i,(function(i){return!Er(u,i)}))})),ot=j((function(i,u){return at(i,u)}));function Jr(i,u,l,d){A(u)||(d=l,l=u,u=!1),null!=l&&(l=qn(l,d));for(var p=[],h=[],g=0,v=fe(i);g<v;g++){var y=i[g],S=l?l(y,g,i):y;u&&!l?(g&&h===S||p.push(y),h=S):l?Er(h,S)||(h.push(S),p.push(y)):Er(p,y)||p.push(y)}return p}var st=j((function(i){return Jr(ur(i,!0,!0))}));function Hr(i){for(var u=i&&Ir(i,fe).length||0,l=Array(u),d=0;d<u;d++)l[d]=Nr(i,d);return l}var ut=j(Hr);function Xr(i,u){return i._chain?tn(u).chain():u}function Yr(i){return jr(wn(i),(function(u){var l=tn[u]=i[u];tn.prototype[u]=function(){var i=[this._wrapped];return h.apply(i,arguments),Xr(this,l.apply(tn,i))}})),tn}jr(["pop","push","reverse","shift","sort","splice","unshift"],(function(i){var u=l[i];tn.prototype[i]=function(){var l=this._wrapped;return null!=l&&(u.apply(l,arguments),"shift"!==i&&"splice"!==i||0!==l.length||delete l[0]),Xr(this,l)}})),jr(["concat","join","slice"],(function(i){var u=l[i];tn.prototype[i]=function(){var i=this._wrapped;return null!=i&&(i=u.apply(i,arguments)),Xr(this,i)}}));var lt=Yr({__proto__:null,VERSION:i,restArguments:j,isObject:_,isNull:function(i){return null===i},isUndefined:w,isBoolean:A,isElement:function(i){return!(!i||1!==i.nodeType)},isString:L,isNumber:V,isDate:U,isRegExp:B,isError:H,isSymbol:z,isArrayBuffer:Q,isDataView:ie,isArray:ae,isFunction:X,isArguments:se,isFinite:function(i){return!z(i)&&P(i)&&!isNaN(parseFloat(i))},isNaN:$,isTypedArray:de,isEmpty:function(i){if(null==i)return!0;var u=fe(i);return"number"==typeof u&&(ae(i)||L(i)||se(i))?0===u:0===fe(nn(i))},isMatch:rn,isEqual:function(i,u){return on(i,u)},isMap:Se,isWeakMap:Ee,isSet:we,isWeakSet:Re,keys:nn,allKeys:an,values:jn,pairs:function(i){for(var u=nn(i),l=u.length,d=Array(l),p=0;p<l;p++)d[p]=[u[p],i[u[p]]];return d},invert:_n,functions:wn,methods:wn,extend:Ae,extendOwn:Te,assign:Te,defaults:xe,create:function(i,u){var l=Mn(i);return u&&Te(l,u),l},clone:En,tap:function(i,u){return u(i),i},get:Tn,has:function(i,u){for(var l=(u=Nn(u)).length,d=0;d<l;d++){var p=u[d];if(!W(i,p))return!1;i=i[p]}return!!l},mapObject:function(i,u,l){u=qn(u,l);for(var d=nn(i),p=d.length,h={},g=0;g<p;g++){var v=d[g];h[v]=u(i[v],v,i)}return h},identity:kn,constant:C,noop:Un,toPath:Bn,property:Rn,propertyOf:function(i){return null==i?Un:function(u){return Tn(i,u)}},matcher:Dn,matches:Dn,times:function(i,u,l){var d=Array(Math.max(0,i));u=Fn(u,l,1);for(var p=0;p<i;p++)d[p]=u(p);return d},random:Wn,now:Ce,escape:Me,unescape:Ie,templateSettings:Pe,template:function(i,u,l){!u&&l&&(u=l),u=xe({},u,tn.templateSettings);var d=RegExp([(u.escape||ke).source,(u.interpolate||ke).source,(u.evaluate||ke).source].join("|")+"|$","g"),p=0,h="__p+='";i.replace(d,(function(u,l,d,g,v){return h+=i.slice(p,v).replace(Ne,Xn),p=v+u.length,l?h+="'+\n((__t=("+l+"))==null?'':_.escape(__t))+\n'":d?h+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(h+="';\n"+g+"\n__p+='"),u})),h+="';\n";var g,v=u.variable;if(v){if(!qe.test(v))throw new Error("variable is not a bare identifier: "+v)}else h="with(obj||{}){\n"+h+"}\n",v="obj";h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{g=new Function(v,"_",h)}catch(i){throw i.source=h,i}var f=function(i){return g.call(this,i,tn)};return f.source="function("+v+"){\n"+h+"}",f},result:function(i,u,l){var d=(u=Nn(u)).length;if(!d)return X(l)?l.call(i):l;for(var p=0;p<d;p++){var h=null==i?void 0:i[u[p]];void 0===h&&(h=l,p=d),i=X(h)?h.call(i):h}return i},uniqueId:function(i){var u=++Le+"";return i?i+u:u},chain:function(i){var u=tn(i);return u._chain=!0,u},iteratee:Pn,partial:Fe,bind:je,bindAll:Ue,memoize:function(i,u){var t=function(l){var d=t.cache,p=""+(u?u.apply(this,arguments):l);return W(d,p)||(d[p]=i.apply(this,arguments)),d[p]};return t.cache={},t},delay:Be,defer:He,throttle:function(i,u,l){var d,p,h,g,v=0;l||(l={});var f=function(){v=!1===l.leading?0:Ce(),d=null,g=i.apply(p,h),d||(p=h=null)},c=function(){var y=Ce();v||!1!==l.leading||(v=y);var S=u-(y-v);return p=this,h=arguments,S<=0||S>u?(d&&(clearTimeout(d),d=null),v=y,g=i.apply(p,h),d||(p=h=null)):d||!1===l.trailing||(d=setTimeout(f,S)),g};return c.cancel=function(){clearTimeout(d),v=0,d=p=h=null},c},debounce:function(i,u,l){var d,p,h,g,v,f=function(){var y=Ce()-p;u>y?d=setTimeout(f,u-y):(d=null,l||(g=i.apply(v,h)),d||(h=v=null))},y=j((function(y){return v=this,h=y,p=Ce(),d||(d=setTimeout(f,u),l&&(g=i.apply(v,h))),g}));return y.cancel=function(){clearTimeout(d),d=h=v=null},y},wrap:function(i,u){return Fe(u,i)},negate:fr,compose:function(){var i=arguments,u=i.length-1;return function(){for(var l=u,d=i[u].apply(this,arguments);l--;)d=i[l].call(this,d);return d}},after:function(i,u){return function(){if(--i<1)return u.apply(this,arguments)}},before:cr,once:ze,findKey:sr,findIndex:Qe,findLastIndex:We,sortedIndex:yr,indexOf:Ge,lastIndexOf:$e,find:mr,detect:mr,findWhere:function(i,u){return mr(i,Dn(u))},each:jr,forEach:jr,map:_r,collect:_r,reduce:Ye,foldl:Ye,inject:Ye,reduceRight:Je,foldr:Je,filter:Sr,select:Sr,reject:function(i,u,l){return Sr(i,fr(qn(u)),l)},every:Or,all:Or,some:Mr,any:Mr,contains:Er,includes:Er,include:Er,invoke:Xe,pluck:Nr,where:function(i,u){return Sr(i,Dn(u))},max:Ir,min:function(i,u,l){var d,p,h=1/0,g=1/0;if(null==u||"number"==typeof u&&"object"!=typeof i[0]&&null!=i)for(var v=0,y=(i=Ve(i)?i:jn(i)).length;v<y;v++)null!=(d=i[v])&&d<h&&(h=d);else u=qn(u,l),jr(i,(function(i,l,d){((p=u(i,l,d))<g||p===1/0&&h===1/0)&&(h=i,g=p)}));return h},shuffle:function(i){return Tr(i,1/0)},sample:Tr,sortBy:function(i,u,l){var d=0;return u=qn(u,l),Nr(_r(i,(function(i,l,p){return{value:i,index:d++,criteria:u(i,l,p)}})).sort((function(i,u){var l=i.criteria,d=u.criteria;if(l!==d){if(l>d||void 0===l)return 1;if(l<d||void 0===d)return-1}return i.index-u.index})),"value")},groupBy:Ke,indexBy:Ze,countBy:et,partition:tt,toArray:function(i){return i?ae(i)?g.call(i):L(i)?i.match(nt):Ve(i)?_r(i,kn):jn(i):[]},size:function(i){return null==i?0:Ve(i)?i.length:nn(i).length},pick:rt,omit:it,first:Lr,head:Lr,take:Lr,initial:zr,last:function(i,u,l){return null==i||i.length<1?null==u||l?void 0:[]:null==u||l?i[i.length-1]:$r(i,Math.max(0,i.length-u))},rest:$r,tail:$r,drop:$r,compact:function(i){return Sr(i,Boolean)},flatten:function(i,u){return ur(i,u,!1)},without:ot,uniq:Jr,unique:Jr,union:st,intersection:function(i){for(var u=[],l=arguments.length,d=0,p=fe(i);d<p;d++){var h=i[d];if(!Er(u,h)){var g;for(g=1;g<l&&Er(arguments[g],h);g++);g===l&&u.push(h)}}return u},difference:at,unzip:Hr,transpose:Hr,zip:ut,object:function(i,u){for(var l={},d=0,p=fe(i);d<p;d++)u?l[i[d]]=u[d]:l[i[d][0]]=i[d][1];return l},range:function(i,u,l){null==u&&(u=i||0,i=0),l||(l=u<i?-1:1);for(var d=Math.max(Math.ceil((u-i)/l),0),p=Array(d),h=0;h<d;h++,i+=l)p[h]=i;return p},chunk:function(i,u){if(null==u||u<1)return[];for(var l=[],d=0,p=i.length;d<p;)l.push(g.call(i,d,d+=u));return l},mixin:Yr,default:tn});return lt._=lt,lt}()},73781:function(i){var u;u=function(){var i="1.13.1",u="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},l=Array.prototype,d=Object.prototype,p="undefined"!=typeof Symbol?Symbol.prototype:null,h=l.push,g=l.slice,v=d.toString,y=d.hasOwnProperty,S="undefined"!=typeof ArrayBuffer,E="undefined"!=typeof DataView,R=Array.isArray,T=Object.keys,O=Object.create,M=S&&ArrayBuffer.isView,I=isNaN,P=isFinite,D=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],q=Math.pow(2,53)-1;function restArguments(i,u){return u=null==u?i.length-1:+u,function(){for(var l=Math.max(arguments.length-u,0),d=Array(l),p=0;p<l;p++)d[p]=arguments[p+u];switch(u){case 0:return i.call(this,d);case 1:return i.call(this,arguments[0],d);case 2:return i.call(this,arguments[0],arguments[1],d)}var h=Array(u+1);for(p=0;p<u;p++)h[p]=arguments[p];return h[u]=d,i.apply(this,h)}}function isObject(i){var u=typeof i;return"function"===u||"object"===u&&!!i}function isUndefined(i){return void 0===i}function isBoolean(i){return!0===i||!1===i||"[object Boolean]"===v.call(i)}function tagTester(i){var u="[object "+i+"]";return function(i){return v.call(i)===u}}var L=tagTester("String"),V=tagTester("Number"),U=tagTester("Date"),B=tagTester("RegExp"),H=tagTester("Error"),z=tagTester("Symbol"),Q=tagTester("ArrayBuffer"),G=tagTester("Function"),Y=u.document&&u.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof Y&&(G=function(i){return"function"==typeof i||!1});var X=G,ee=tagTester("Object"),te=E&&ee(new DataView(new ArrayBuffer(8))),ne="undefined"!=typeof Map&&ee(new Map),re=tagTester("DataView"),ie=te?function ie10IsDataView(i){return null!=i&&X(i.getInt8)&&Q(i.buffer)}:re,ae=R||tagTester("Array");function has$1(i,u){return null!=i&&y.call(i,u)}var oe=tagTester("Arguments");!function(){oe(arguments)||(oe=function(i){return has$1(i,"callee")})}();var se=oe;function isNaN$1(i){return V(i)&&I(i)}function constant(i){return function(){return i}}function createSizePropertyCheck(i){return function(u){var l=i(u);return"number"==typeof l&&l>=0&&l<=q}}function shallowProperty(i){return function(u){return null==u?void 0:u[i]}}var ue=shallowProperty("byteLength"),le=createSizePropertyCheck(ue),ce=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,de=S?function isTypedArray(i){return M?M(i)&&!ie(i):le(i)&&ce.test(v.call(i))}:constant(!1),fe=shallowProperty("length");function collectNonEnumProps(i,u){u=function emulatedSet(i){for(var u={},l=i.length,d=0;d<l;++d)u[i[d]]=!0;return{contains:function(i){return u[i]},push:function(l){return u[l]=!0,i.push(l)}}}(u);var l=N.length,p=i.constructor,h=X(p)&&p.prototype||d,g="constructor";for(has$1(i,g)&&!u.contains(g)&&u.push(g);l--;)(g=N[l])in i&&i[g]!==h[g]&&!u.contains(g)&&u.push(g)}function keys(i){if(!isObject(i))return[];if(T)return T(i);var u=[];for(var l in i)has$1(i,l)&&u.push(l);return D&&collectNonEnumProps(i,u),u}function isMatch(i,u){var l=keys(u),d=l.length;if(null==i)return!d;for(var p=Object(i),h=0;h<d;h++){var g=l[h];if(u[g]!==p[g]||!(g in p))return!1}return!0}function _$1(i){return i instanceof _$1?i:this instanceof _$1?void(this._wrapped=i):new _$1(i)}function toBufferView(i){return new Uint8Array(i.buffer||i,i.byteOffset||0,ue(i))}_$1.VERSION=i,_$1.prototype.value=function(){return this._wrapped},_$1.prototype.valueOf=_$1.prototype.toJSON=_$1.prototype.value,_$1.prototype.toString=function(){return String(this._wrapped)};var pe="[object DataView]";function eq(i,u,l,d){if(i===u)return 0!==i||1/i==1/u;if(null==i||null==u)return!1;if(i!=i)return u!=u;var p=typeof i;return("function"===p||"object"===p||"object"==typeof u)&&deepEq(i,u,l,d)}function deepEq(i,u,l,d){i instanceof _$1&&(i=i._wrapped),u instanceof _$1&&(u=u._wrapped);var h=v.call(i);if(h!==v.call(u))return!1;if(te&&"[object Object]"==h&&ie(i)){if(!ie(u))return!1;h=pe}switch(h){case"[object RegExp]":case"[object String]":return""+i==""+u;case"[object Number]":return+i!=+i?+u!=+u:0==+i?1/+i==1/u:+i==+u;case"[object Date]":case"[object Boolean]":return+i==+u;case"[object Symbol]":return p.valueOf.call(i)===p.valueOf.call(u);case"[object ArrayBuffer]":case pe:return deepEq(toBufferView(i),toBufferView(u),l,d)}var g="[object Array]"===h;if(!g&&de(i)){if(ue(i)!==ue(u))return!1;if(i.buffer===u.buffer&&i.byteOffset===u.byteOffset)return!0;g=!0}if(!g){if("object"!=typeof i||"object"!=typeof u)return!1;var y=i.constructor,S=u.constructor;if(y!==S&&!(X(y)&&y instanceof y&&X(S)&&S instanceof S)&&"constructor"in i&&"constructor"in u)return!1}d=d||[];for(var E=(l=l||[]).length;E--;)if(l[E]===i)return d[E]===u;if(l.push(i),d.push(u),g){if((E=i.length)!==u.length)return!1;for(;E--;)if(!eq(i[E],u[E],l,d))return!1}else{var R,T=keys(i);if(E=T.length,keys(u).length!==E)return!1;for(;E--;)if(!has$1(u,R=T[E])||!eq(i[R],u[R],l,d))return!1}return l.pop(),d.pop(),!0}function allKeys(i){if(!isObject(i))return[];var u=[];for(var l in i)u.push(l);return D&&collectNonEnumProps(i,u),u}function ie11fingerprint(i){var u=fe(i);return function(l){if(null==l)return!1;var d=allKeys(l);if(fe(d))return!1;for(var p=0;p<u;p++)if(!X(l[i[p]]))return!1;return i!==ye||!X(l[he])}}var he="forEach",ge=["clear","delete"],me=["get","has","set"],ve=ge.concat(he,me),ye=ge.concat(me),be=["add"].concat(ge,he,"has"),_e=ne?ie11fingerprint(ve):tagTester("Map"),Se=ne?ie11fingerprint(ye):tagTester("WeakMap"),Ee=ne?ie11fingerprint(be):tagTester("Set"),we=tagTester("WeakSet");function values(i){for(var u=keys(i),l=u.length,d=Array(l),p=0;p<l;p++)d[p]=i[u[p]];return d}function invert(i){for(var u={},l=keys(i),d=0,p=l.length;d<p;d++)u[i[l[d]]]=l[d];return u}function functions(i){var u=[];for(var l in i)X(i[l])&&u.push(l);return u.sort()}function createAssigner(i,u){return function(l){var d=arguments.length;if(u&&(l=Object(l)),d<2||null==l)return l;for(var p=1;p<d;p++)for(var h=arguments[p],g=i(h),v=g.length,y=0;y<v;y++){var S=g[y];u&&void 0!==l[S]||(l[S]=h[S])}return l}}var Re=createAssigner(allKeys),Ae=createAssigner(keys),Te=createAssigner(allKeys,!0);function baseCreate(i){if(!isObject(i))return{};if(O)return O(i);var Ctor=function(){};Ctor.prototype=i;var u=new Ctor;return Ctor.prototype=null,u}function clone(i){return isObject(i)?ae(i)?i.slice():Re({},i):i}function toPath$1(i){return ae(i)?i:[i]}function toPath(i){return _$1.toPath(i)}function deepGet(i,u){for(var l=u.length,d=0;d<l;d++){if(null==i)return;i=i[u[d]]}return l?i:void 0}function get(i,u,l){var d=deepGet(i,toPath(u));return isUndefined(d)?l:d}function identity(i){return i}function matcher(i){return i=Ae({},i),function(u){return isMatch(u,i)}}function property(i){return i=toPath(i),function(u){return deepGet(u,i)}}function optimizeCb(i,u,l){if(void 0===u)return i;switch(null==l?3:l){case 1:return function(l){return i.call(u,l)};case 3:return function(l,d,p){return i.call(u,l,d,p)};case 4:return function(l,d,p,h){return i.call(u,l,d,p,h)}}return function(){return i.apply(u,arguments)}}function baseIteratee(i,u,l){return null==i?identity:X(i)?optimizeCb(i,u,l):isObject(i)&&!ae(i)?matcher(i):property(i)}function iteratee(i,u){return baseIteratee(i,u,1/0)}function cb(i,u,l){return _$1.iteratee!==iteratee?_$1.iteratee(i,u):baseIteratee(i,u,l)}function noop(){}function random(i,u){return null==u&&(u=i,i=0),i+Math.floor(Math.random()*(u-i+1))}_$1.toPath=toPath$1,_$1.iteratee=iteratee;var xe=Date.now||function(){return(new Date).getTime()};function createEscaper(i){var escaper=function(u){return i[u]},u="(?:"+keys(i).join("|")+")",l=RegExp(u),d=RegExp(u,"g");return function(i){return i=null==i?"":""+i,l.test(i)?i.replace(d,escaper):i}}var Ce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Oe=createEscaper(Ce),Me=createEscaper(invert(Ce)),Ie=_$1.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Pe=/(.)^/,ke={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},De=/\\|'|\r|\n|\u2028|\u2029/g;function escapeChar(i){return"\\"+ke[i]}var Ne=/^\s*(\w|\$)+\s*$/,qe=0;function executeBound(i,u,l,d,p){if(!(d instanceof u))return i.apply(l,p);var h=baseCreate(i.prototype),g=i.apply(h,p);return isObject(g)?g:h}var Le=restArguments((function(i,u){var l=Le.placeholder,bound=function(){for(var d=0,p=u.length,h=Array(p),g=0;g<p;g++)h[g]=u[g]===l?arguments[d++]:u[g];for(;d<arguments.length;)h.push(arguments[d++]);return executeBound(i,bound,this,this,h)};return bound}));Le.placeholder=_$1;var Fe=restArguments((function(i,u,l){if(!X(i))throw new TypeError("Bind must be called on a function");var d=restArguments((function(p){return executeBound(i,d,u,this,l.concat(p))}));return d})),je=createSizePropertyCheck(fe);function flatten$1(i,u,l,d){if(d=d||[],u||0===u){if(u<=0)return d.concat(i)}else u=1/0;for(var p=d.length,h=0,g=fe(i);h<g;h++){var v=i[h];if(je(v)&&(ae(v)||se(v)))if(u>1)flatten$1(v,u-1,l,d),p=d.length;else for(var y=0,S=v.length;y<S;)d[p++]=v[y++];else l||(d[p++]=v)}return d}var Ve=restArguments((function(i,u){var l=(u=flatten$1(u,!1,!1)).length;if(l<1)throw new Error("bindAll must be passed function names");for(;l--;){var d=u[l];i[d]=Fe(i[d],i)}return i})),Ue=restArguments((function(i,u,l){return setTimeout((function(){return i.apply(null,l)}),u)})),Be=Le(Ue,_$1,1);function negate(i){return function(){return!i.apply(this,arguments)}}function before(i,u){var l;return function(){return--i>0&&(l=u.apply(this,arguments)),i<=1&&(u=null),l}}var He=Le(before,2);function findKey(i,u,l){u=cb(u,l);for(var d,p=keys(i),h=0,g=p.length;h<g;h++)if(u(i[d=p[h]],d,i))return d}function createPredicateIndexFinder(i){return function(u,l,d){l=cb(l,d);for(var p=fe(u),h=i>0?0:p-1;h>=0&&h<p;h+=i)if(l(u[h],h,u))return h;return-1}}var ze=createPredicateIndexFinder(1),Qe=createPredicateIndexFinder(-1);function sortedIndex(i,u,l,d){for(var p=(l=cb(l,d,1))(u),h=0,g=fe(i);h<g;){var v=Math.floor((h+g)/2);l(i[v])<p?h=v+1:g=v}return h}function createIndexFinder(i,u,l){return function(d,p,h){var v=0,y=fe(d);if("number"==typeof h)i>0?v=h>=0?h:Math.max(h+y,v):y=h>=0?Math.min(h+1,y):h+y+1;else if(l&&h&&y)return d[h=l(d,p)]===p?h:-1;if(p!=p)return(h=u(g.call(d,v,y),isNaN$1))>=0?h+v:-1;for(h=i>0?v:y-1;h>=0&&h<y;h+=i)if(d[h]===p)return h;return-1}}var We=createIndexFinder(1,ze,sortedIndex),Ge=createIndexFinder(-1,Qe);function find(i,u,l){var d=(je(i)?ze:findKey)(i,u,l);if(void 0!==d&&-1!==d)return i[d]}function each(i,u,l){var d,p;if(u=optimizeCb(u,l),je(i))for(d=0,p=i.length;d<p;d++)u(i[d],d,i);else{var h=keys(i);for(d=0,p=h.length;d<p;d++)u(i[h[d]],h[d],i)}return i}function map(i,u,l){u=cb(u,l);for(var d=!je(i)&&keys(i),p=(d||i).length,h=Array(p),g=0;g<p;g++){var v=d?d[g]:g;h[g]=u(i[v],v,i)}return h}function createReduce(i){var reducer=function(u,l,d,p){var h=!je(u)&&keys(u),g=(h||u).length,v=i>0?0:g-1;for(p||(d=u[h?h[v]:v],v+=i);v>=0&&v<g;v+=i){var y=h?h[v]:v;d=l(d,u[y],y,u)}return d};return function(i,u,l,d){var p=arguments.length>=3;return reducer(i,optimizeCb(u,d,4),l,p)}}var $e=createReduce(1),Ye=createReduce(-1);function filter(i,u,l){var d=[];return u=cb(u,l),each(i,(function(i,l,p){u(i,l,p)&&d.push(i)})),d}function every(i,u,l){u=cb(u,l);for(var d=!je(i)&&keys(i),p=(d||i).length,h=0;h<p;h++){var g=d?d[h]:h;if(!u(i[g],g,i))return!1}return!0}function some(i,u,l){u=cb(u,l);for(var d=!je(i)&&keys(i),p=(d||i).length,h=0;h<p;h++){var g=d?d[h]:h;if(u(i[g],g,i))return!0}return!1}function contains(i,u,l,d){return je(i)||(i=values(i)),("number"!=typeof l||d)&&(l=0),We(i,u,l)>=0}var Je=restArguments((function(i,u,l){var d,p;return X(u)?p=u:(u=toPath(u),d=u.slice(0,-1),u=u[u.length-1]),map(i,(function(i){var h=p;if(!h){if(d&&d.length&&(i=deepGet(i,d)),null==i)return;h=i[u]}return null==h?h:h.apply(i,l)}))}));function pluck(i,u){return map(i,property(u))}function max(i,u,l){var d,p,h=-1/0,g=-1/0;if(null==u||"number"==typeof u&&"object"!=typeof i[0]&&null!=i)for(var v=0,y=(i=je(i)?i:values(i)).length;v<y;v++)null!=(d=i[v])&&d>h&&(h=d);else u=cb(u,l),each(i,(function(i,l,d){((p=u(i,l,d))>g||p===-1/0&&h===-1/0)&&(h=i,g=p)}));return h}function sample(i,u,l){if(null==u||l)return je(i)||(i=values(i)),i[random(i.length-1)];var d=je(i)?clone(i):values(i),p=fe(d);u=Math.max(Math.min(u,p),0);for(var h=p-1,g=0;g<u;g++){var v=random(g,h),y=d[g];d[g]=d[v],d[v]=y}return d.slice(0,u)}function group(i,u){return function(l,d,p){var h=u?[[],[]]:{};return d=cb(d,p),each(l,(function(u,p){var g=d(u,p,l);i(h,u,g)})),h}}var Xe=group((function(i,u,l){has$1(i,l)?i[l].push(u):i[l]=[u]})),Ke=group((function(i,u,l){i[l]=u})),Ze=group((function(i,u,l){has$1(i,l)?i[l]++:i[l]=1})),et=group((function(i,u,l){i[l?0:1].push(u)}),!0),tt=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function keyInObj(i,u,l){return u in l}var nt=restArguments((function(i,u){var l={},d=u[0];if(null==i)return l;X(d)?(u.length>1&&(d=optimizeCb(d,u[1])),u=allKeys(i)):(d=keyInObj,u=flatten$1(u,!1,!1),i=Object(i));for(var p=0,h=u.length;p<h;p++){var g=u[p],v=i[g];d(v,g,i)&&(l[g]=v)}return l})),rt=restArguments((function(i,u){var l,d=u[0];return X(d)?(d=negate(d),u.length>1&&(l=u[1])):(u=map(flatten$1(u,!1,!1),String),d=function(i,l){return!contains(u,l)}),nt(i,d,l)}));function initial(i,u,l){return g.call(i,0,Math.max(0,i.length-(null==u||l?1:u)))}function first(i,u,l){return null==i||i.length<1?null==u||l?void 0:[]:null==u||l?i[0]:initial(i,i.length-u)}function rest(i,u,l){return g.call(i,null==u||l?1:u)}var it=restArguments((function(i,u){return u=flatten$1(u,!0,!0),filter(i,(function(i){return!contains(u,i)}))})),at=restArguments((function(i,u){return it(i,u)}));function uniq(i,u,l,d){isBoolean(u)||(d=l,l=u,u=!1),null!=l&&(l=cb(l,d));for(var p=[],h=[],g=0,v=fe(i);g<v;g++){var y=i[g],S=l?l(y,g,i):y;u&&!l?(g&&h===S||p.push(y),h=S):l?contains(h,S)||(h.push(S),p.push(y)):contains(p,y)||p.push(y)}return p}var ot=restArguments((function(i){return uniq(flatten$1(i,!0,!0))}));function unzip(i){for(var u=i&&max(i,fe).length||0,l=Array(u),d=0;d<u;d++)l[d]=pluck(i,d);return l}var st=restArguments(unzip);function chainResult(i,u){return i._chain?_$1(u).chain():u}function mixin(i){return each(functions(i),(function(u){var l=_$1[u]=i[u];_$1.prototype[u]=function(){var i=[this._wrapped];return h.apply(i,arguments),chainResult(this,l.apply(_$1,i))}})),_$1}each(["pop","push","reverse","shift","sort","splice","unshift"],(function(i){var u=l[i];_$1.prototype[i]=function(){var l=this._wrapped;return null!=l&&(u.apply(l,arguments),"shift"!==i&&"splice"!==i||0!==l.length||delete l[0]),chainResult(this,l)}})),each(["concat","join","slice"],(function(i){var u=l[i];_$1.prototype[i]=function(){var i=this._wrapped;return null!=i&&(i=u.apply(i,arguments)),chainResult(this,i)}}));var ut={__proto__:null,VERSION:i,restArguments:restArguments,isObject:isObject,isNull:function isNull(i){return null===i},isUndefined:isUndefined,isBoolean:isBoolean,isElement:function isElement(i){return!(!i||1!==i.nodeType)},isString:L,isNumber:V,isDate:U,isRegExp:B,isError:H,isSymbol:z,isArrayBuffer:Q,isDataView:ie,isArray:ae,isFunction:X,isArguments:se,isFinite:function isFinite$1(i){return!z(i)&&P(i)&&!isNaN(parseFloat(i))},isNaN:isNaN$1,isTypedArray:de,isEmpty:function isEmpty(i){if(null==i)return!0;var u=fe(i);return"number"==typeof u&&(ae(i)||L(i)||se(i))?0===u:0===fe(keys(i))},isMatch:isMatch,isEqual:function isEqual(i,u){return eq(i,u)},isMap:_e,isWeakMap:Se,isSet:Ee,isWeakSet:we,keys:keys,allKeys:allKeys,values:values,pairs:function pairs(i){for(var u=keys(i),l=u.length,d=Array(l),p=0;p<l;p++)d[p]=[u[p],i[u[p]]];return d},invert:invert,functions:functions,methods:functions,extend:Re,extendOwn:Ae,assign:Ae,defaults:Te,create:function create(i,u){var l=baseCreate(i);return u&&Ae(l,u),l},clone:clone,tap:function tap(i,u){return u(i),i},get:get,has:function has(i,u){for(var l=(u=toPath(u)).length,d=0;d<l;d++){var p=u[d];if(!has$1(i,p))return!1;i=i[p]}return!!l},mapObject:function mapObject(i,u,l){u=cb(u,l);for(var d=keys(i),p=d.length,h={},g=0;g<p;g++){var v=d[g];h[v]=u(i[v],v,i)}return h},identity:identity,constant:constant,noop:noop,toPath:toPath$1,property:property,propertyOf:function propertyOf(i){return null==i?noop:function(u){return get(i,u)}},matcher:matcher,matches:matcher,times:function times(i,u,l){var d=Array(Math.max(0,i));u=optimizeCb(u,l,1);for(var p=0;p<i;p++)d[p]=u(p);return d},random:random,now:xe,escape:Oe,unescape:Me,templateSettings:Ie,template:function template(i,u,l){!u&&l&&(u=l),u=Te({},u,_$1.templateSettings);var d=RegExp([(u.escape||Pe).source,(u.interpolate||Pe).source,(u.evaluate||Pe).source].join("|")+"|$","g"),p=0,h="__p+='";i.replace(d,(function(u,l,d,g,v){return h+=i.slice(p,v).replace(De,escapeChar),p=v+u.length,l?h+="'+\n((__t=("+l+"))==null?'':_.escape(__t))+\n'":d?h+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(h+="';\n"+g+"\n__p+='"),u})),h+="';\n";var g,v=u.variable;if(v){if(!Ne.test(v))throw new Error("variable is not a bare identifier: "+v)}else h="with(obj||{}){\n"+h+"}\n",v="obj";h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{g=new Function(v,"_",h)}catch(i){throw i.source=h,i}var template=function(i){return g.call(this,i,_$1)};return template.source="function("+v+"){\n"+h+"}",template},result:function result(i,u,l){var d=(u=toPath(u)).length;if(!d)return X(l)?l.call(i):l;for(var p=0;p<d;p++){var h=null==i?void 0:i[u[p]];void 0===h&&(h=l,p=d),i=X(h)?h.call(i):h}return i},uniqueId:function uniqueId(i){var u=++qe+"";return i?i+u:u},chain:function chain(i){var u=_$1(i);return u._chain=!0,u},iteratee:iteratee,partial:Le,bind:Fe,bindAll:Ve,memoize:function memoize(i,u){var memoize=function(l){var d=memoize.cache,p=""+(u?u.apply(this,arguments):l);return has$1(d,p)||(d[p]=i.apply(this,arguments)),d[p]};return memoize.cache={},memoize},delay:Ue,defer:Be,throttle:function throttle(i,u,l){var d,p,h,g,v=0;l||(l={});var later=function(){v=!1===l.leading?0:xe(),d=null,g=i.apply(p,h),d||(p=h=null)},throttled=function(){var y=xe();v||!1!==l.leading||(v=y);var S=u-(y-v);return p=this,h=arguments,S<=0||S>u?(d&&(clearTimeout(d),d=null),v=y,g=i.apply(p,h),d||(p=h=null)):d||!1===l.trailing||(d=setTimeout(later,S)),g};return throttled.cancel=function(){clearTimeout(d),v=0,d=p=h=null},throttled},debounce:function debounce(i,u,l){var d,p,h,g,v,later=function(){var y=xe()-p;u>y?d=setTimeout(later,u-y):(d=null,l||(g=i.apply(v,h)),d||(h=v=null))},y=restArguments((function(y){return v=this,h=y,p=xe(),d||(d=setTimeout(later,u),l&&(g=i.apply(v,h))),g}));return y.cancel=function(){clearTimeout(d),d=h=v=null},y},wrap:function wrap(i,u){return Le(u,i)},negate:negate,compose:function compose(){var i=arguments,u=i.length-1;return function(){for(var l=u,d=i[u].apply(this,arguments);l--;)d=i[l].call(this,d);return d}},after:function after(i,u){return function(){if(--i<1)return u.apply(this,arguments)}},before:before,once:He,findKey:findKey,findIndex:ze,findLastIndex:Qe,sortedIndex:sortedIndex,indexOf:We,lastIndexOf:Ge,find:find,detect:find,findWhere:function findWhere(i,u){return find(i,matcher(u))},each:each,forEach:each,map:map,collect:map,reduce:$e,foldl:$e,inject:$e,reduceRight:Ye,foldr:Ye,filter:filter,select:filter,reject:function reject(i,u,l){return filter(i,negate(cb(u)),l)},every:every,all:every,some:some,any:some,contains:contains,includes:contains,include:contains,invoke:Je,pluck:pluck,where:function where(i,u){return filter(i,matcher(u))},max:max,min:function min(i,u,l){var d,p,h=1/0,g=1/0;if(null==u||"number"==typeof u&&"object"!=typeof i[0]&&null!=i)for(var v=0,y=(i=je(i)?i:values(i)).length;v<y;v++)null!=(d=i[v])&&d<h&&(h=d);else u=cb(u,l),each(i,(function(i,l,d){((p=u(i,l,d))<g||p===1/0&&h===1/0)&&(h=i,g=p)}));return h},shuffle:function shuffle(i){return sample(i,1/0)},sample:sample,sortBy:function sortBy(i,u,l){var d=0;return u=cb(u,l),pluck(map(i,(function(i,l,p){return{value:i,index:d++,criteria:u(i,l,p)}})).sort((function(i,u){var l=i.criteria,d=u.criteria;if(l!==d){if(l>d||void 0===l)return 1;if(l<d||void 0===d)return-1}return i.index-u.index})),"value")},groupBy:Xe,indexBy:Ke,countBy:Ze,partition:et,toArray:function toArray(i){return i?ae(i)?g.call(i):L(i)?i.match(tt):je(i)?map(i,identity):values(i):[]},size:function size(i){return null==i?0:je(i)?i.length:keys(i).length},pick:nt,omit:rt,first:first,head:first,take:first,initial:initial,last:function last(i,u,l){return null==i||i.length<1?null==u||l?void 0:[]:null==u||l?i[i.length-1]:rest(i,Math.max(0,i.length-u))},rest:rest,tail:rest,drop:rest,compact:function compact(i){return filter(i,Boolean)},flatten:function flatten(i,u){return flatten$1(i,u,!1)},without:at,uniq:uniq,unique:uniq,union:ot,intersection:function intersection(i){for(var u=[],l=arguments.length,d=0,p=fe(i);d<p;d++){var h=i[d];if(!contains(u,h)){var g;for(g=1;g<l&&contains(arguments[g],h);g++);g===l&&u.push(h)}}return u},difference:it,unzip:unzip,transpose:unzip,zip:st,object:function object(i,u){for(var l={},d=0,p=fe(i);d<p;d++)u?l[i[d]]=u[d]:l[i[d][0]]=i[d][1];return l},range:function range(i,u,l){null==u&&(u=i||0,i=0),l||(l=u<i?-1:1);for(var d=Math.max(Math.ceil((u-i)/l),0),p=Array(d),h=0;h<d;h++,i+=l)p[h]=i;return p},chunk:function chunk(i,u){if(null==u||u<1)return[];for(var l=[],d=0,p=i.length;d<p;)l.push(g.call(i,d,d+=u));return l},mixin:mixin,default:_$1},lt=mixin(ut);return lt._=lt,lt},i.exports=u()}},__webpack_module_cache__={},leafPrototypes,getProto,inProgress;function __webpack_require__(i){var u=__webpack_module_cache__[i];if(void 0!==u)return u.exports;var l=__webpack_module_cache__[i]={id:i,loaded:!1,exports:{}};return __webpack_modules__[i].call(l.exports,l,l.exports,__webpack_require__),l.loaded=!0,l.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=function(i){var u=i&&i.__esModule?function(){return i.default}:function(){return i};return __webpack_require__.d(u,{a:u}),u},getProto=Object.getPrototypeOf?function(i){return Object.getPrototypeOf(i)}:function(i){return i.__proto__},__webpack_require__.t=function(i,u){if(1&u&&(i=this(i)),8&u)return i;if("object"==typeof i&&i){if(4&u&&i.__esModule)return i;if(16&u&&"function"==typeof i.then)return i}var l=Object.create(null);__webpack_require__.r(l);var d={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var p=2&u&&i;"object"==typeof p&&!~leafPrototypes.indexOf(p);p=getProto(p))Object.getOwnPropertyNames(p).forEach((function(u){d[u]=function(){return i[u]}}));return d.default=function(){return i},__webpack_require__.d(l,d),l},__webpack_require__.d=function(i,u){for(var l in u)__webpack_require__.o(u,l)&&!__webpack_require__.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:u[l]})},__webpack_require__.f={},__webpack_require__.e=function(i){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(u,l){return __webpack_require__.f[l](i,u),u}),[]))},__webpack_require__.u=function(i){return({18:"bundles/widgets/features/scrollablePassage",226:"bundles/widgets/questions/longTextV2",323:"bundles/widgets/questions/orderList",590:"bundles/externalBundles/exposedInternalComponent",876:"bundles/externalBundles/externalMathcore",1292:"bundles/features/audioPlayer",1445:"vendor/MathJax/MathJax",1489:"bundles/widgets/questions/clozeText",1627:"bundles/widgets/questions/highlight",1885:"bundles/widgets/questions/drawing",2043:"bundles/questionTypes/formulaV2",2202:"bundles/widgets/questions/formulaEssayV2",2212:"bundles/questionTypes/hotspot",2335:"bundles/questionTypes/chemistry",2376:"bundles/widgets/questions/imageclozeassociationV2",2679:"bundles/questionTypes/formula",2711:"bundles/questionTypes/fillshape",3126:"bundles/widgets/features/lineReader",3152:"bundles/questionTypes/clozeFormula",3611:"bundles/features/unknown",3623:"bundles/workers/mathrust.worker",3777:"bundles/widgets/features/popUp",4204:"bundles/widgets/questions/shortText",4362:"bundles/externalBundles/externalReactiveComponents",4370:"bundles/questionTypes/audioAdv",4412:"bundles/questionTypes/graphPlotting",4457:"bundles/widgets/questions/clozeAssociation",4877:"bundles/questionTypes/simpleShading",4948:"bundles/questionTypes/chemistryEssay",5036:"bundles/questionTypes/longText",5037:"bundles/questionTypes/imageUpload",5098:"bundles/widgets/questions/mcq",5107:"bundles/features/videoPlayer",5149:"bundles/questionTypes/clozeDropdown",5290:"bundles/questionTypes/gridded",5398:"bundles/widgets/features/imageTool",5484:"bundles/questionTypes/formulaEssay",5578:"bundles/widgets/questions/video",5646:"bundles/widgets/features/sharedPassage",5856:"bundles/widgets/questions/tokenHighlight",6011:"bundles/questionTypes/unknown",6288:"bundles/questionTypes/plainText",6394:"bundles/questionTypes/custom",6496:"bundles/features/customFeature",6590:"bundles/widgets/questions/rating",6671:"bundles/questionTypes/score",6912:"bundles/questionTypes/clozeFormulaV2",6921:"bundles/features/counter",7173:"vendor/mathquill",7195:"bundles/widgets/questions/clozeDropdown",7249:"bundles/widgets/questions/classification",7351:"bundles/questionTypes/sortList",7431:"bundles/questionTypes/numberLinePlot",7501:"bundles/questionTypes/boolean",7522:"bundles/widgets/questions/association",7614:"bundles/questionTypes/numberLine",7865:"bundles/features/formulaInput",8012:"bundles/questionTypes/clozeChemistry",8482:"bundles/widgets/questions/chemistryEssayV2",8859:"bundles/questionTypes/simpleChart",8939:"bundles/widgets/questions/choiceMatrix",9190:"bundles/questionTypes/textHighlight",9434:"bundles/questionTypes/cloze",9489:"bundles/widgets/features/calculator",9771:"bundles/questionTypes/audio",9810:"bundles/questionTypes/fileUpload",9875:"bundles/workers/spokenmath.worker"}[i]||i)+".js"},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(i){if("object"==typeof window)return window}}(),__webpack_require__.hmd=function(i){return(i=Object.create(i)).children||(i.children=[]),Object.defineProperty(i,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+i.id)}}),i},__webpack_require__.o=function(i,u){return Object.prototype.hasOwnProperty.call(i,u)},inProgress={},__webpack_require__.l=function(i,u,l,d){if(inProgress[i])inProgress[i].push(u);else{var p,h;if(void 0!==l)for(var g=document.getElementsByTagName("script"),v=0;v<g.length;v++){var y=g[v];if(y.getAttribute("src")==i){p=y;break}}p||(h=!0,(p=document.createElement("script")).charset="utf-8",p.timeout=120,__webpack_require__.nc&&p.setAttribute("nonce",__webpack_require__.nc),p.src=i,0!==p.src.indexOf(window.location.origin+"/")&&(p.crossOrigin="anonymous")),inProgress[i]=[u];var onScriptComplete=function(u,l){p.onerror=p.onload=null,clearTimeout(S);var d=inProgress[i];if(delete inProgress[i],p.parentNode&&p.parentNode.removeChild(p),d&&d.forEach((function(i){return i(l)})),u)return u(l)},S=setTimeout(onScriptComplete.bind(null,void 0,{type:"timeout",target:p}),12e4);p.onerror=onScriptComplete.bind(null,p.onerror),p.onload=onScriptComplete.bind(null,p.onload),h&&document.head.appendChild(p)}},__webpack_require__.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},__webpack_require__.nmd=function(i){return i.paths=[],i.children||(i.children=[]),i},function(){var i;__webpack_require__.g.importScripts&&(i=__webpack_require__.g.location+"");var u=__webpack_require__.g.document;if(!i&&u&&(u.currentScript&&"SCRIPT"===u.currentScript.tagName.toUpperCase()&&(i=u.currentScript.src),!i)){var l=u.getElementsByTagName("script");if(l.length)for(var d=l.length-1;d>-1&&(!i||!/^http(s?):/.test(i));)i=l[d--].src}if(!i)throw new Error("Automatic publicPath is not supported in this browser");i=i.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=i}(),function(){var i={7381:0};__webpack_require__.f.j=function(u,l){var d=__webpack_require__.o(i,u)?i[u]:void 0;if(0!==d)if(d)l.push(d[2]);else{var p=new Promise((function(l,p){d=i[u]=[l,p]}));l.push(d[2]=p);var h=__webpack_require__.p+__webpack_require__.u(u),g=new Error;__webpack_require__.l(h,(function(l){if(__webpack_require__.o(i,u)&&(0!==(d=i[u])&&(i[u]=void 0),d)){var p=l&&("load"===l.type?"missing":l.type),h=l&&l.target&&l.target.src;g.message="Loading chunk "+u+" failed.\n("+p+": "+h+")",g.name="ChunkLoadError",g.type=p,g.request=h,d[1](g)}}),"chunk-"+u,u)}};var webpackJsonpCallback=function(u,l){var d,p,h=l[0],g=l[1],v=l[2],y=0;if(h.some((function(u){return 0!==i[u]}))){for(d in g)__webpack_require__.o(g,d)&&(__webpack_require__.m[d]=g[d]);if(v)v(__webpack_require__)}for(u&&u(l);y<h.length;y++)p=h[y],__webpack_require__.o(i,p)&&i[p]&&i[p][0](),i[p]=0},u=self.LearnosityAmd=self.LearnosityAmd||[];u.forEach(webpackJsonpCallback.bind(null,0)),u.push=webpackJsonpCallback.bind(null,u.push.bind(u))}();var __webpack_exports__={};!function(){"use strict";var i=_interopRequireDefault(__webpack_require__(79896));__webpack_require__(38018);var u=_interopRequireDefault(__webpack_require__(90864));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}__webpack_require__.p=window.LearnosityApp._internal.config.assetsHost+"/dist/",function init(){var l,d;if(window.LearnosityApp._internal._cachedInitCalls&&(l=window.LearnosityApp._internal._cachedInitCalls,delete window.LearnosityApp._internal._cachedInitCalls),window.LearnosityApp._internal._cachedGlobalApiMethodCalls&&(d=window.LearnosityApp._internal._cachedGlobalApiMethodCalls,delete window.LearnosityApp._internal._cachedGlobalApiMethodCalls),u.default._internal=window.LearnosityApp._internal,u.default.version=window.LearnosityApp.version,u.default.versions=window.LearnosityApp.versions,u.default.requestedApiVersion=window.LearnosityApp.requestedApiVersion,window.LearnosityApp=u.default,l&&i.default.each(l,(function(i){i.args.push({appStub:i.appStub}),window.LearnosityApp.init.apply(window.LearnosityApp,i.args)})),d)for(var p=0;p<d.length;p++)u.default[d[p].method].apply(u.default,d[p].args)}()}()})();